/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e,t,n={505:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,'/* WebRTC Better Styling & Fix Choose File Buttons */\n\n/* Hide the duplicate Choose File buttons in WebRTC */\n.webrtc-chat-container input[type="file"],\n.webrtc-section input[type="file"],\n.middle-column .webrtc-chat-container input[type="file"] {\n  display: none !important;\n}\n\n/* Hide any file upload elements in WebRTC that shouldn\'t be there */\n.webrtc-chat-container .file-upload,\n.webrtc-chat-container [type="file"],\n.webrtc-section .file-upload,\n.webrtc-section [type="file"] {\n  display: none !important;\n}\n\n/* Better WebRTC Container Styling */\n.middle-column .webrtc-section {\n  background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);\n  border-radius: 16px;\n  padding: 25px;\n  margin: 30px 0;\n  box-shadow: \n    0 8px 32px rgba(0, 0, 0, 0.1),\n    0 2px 8px rgba(0, 0, 0, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.8);\n  backdrop-filter: blur(20px);\n  position: relative;\n  overflow: hidden;\n}\n\n/* Add subtle background pattern */\n.middle-column .webrtc-section::before {\n  content: \'\';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: \n    radial-gradient(circle at 20% 20%, rgba(76, 175, 80, 0.03) 0%, transparent 50%),\n    radial-gradient(circle at 80% 80%, rgba(33, 150, 243, 0.03) 0%, transparent 50%);\n  pointer-events: none;\n}\n\n/* Beautiful header styling */\n.middle-column .webrtc-section h3 {\n  margin: 0 0 25px 0;\n  color: #2c3e50;\n  font-size: 24px;\n  font-weight: 700;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  text-align: center;\n  justify-content: center;\n  position: relative;\n  z-index: 1;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n/* Improved WebRTC container */\n.middle-column .webrtc-chat-container {\n  background: rgba(255, 255, 255, 0.9) !important;\n  border: 1px solid rgba(0, 0, 0, 0.08) !important;\n  border-radius: 12px !important;\n  box-shadow: \n    0 4px 20px rgba(0, 0, 0, 0.08),\n    inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;\n  min-width: 100% !important;\n  max-width: 100% !important;\n  margin: 0 !important;\n  padding: 20px !important;\n  position: relative;\n  z-index: 1;\n}\n\n/* Better header in WebRTC */\n.middle-column .webrtc-header {\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  border-radius: 8px;\n  padding: 12px 16px;\n  margin-bottom: 20px;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n}\n\n.middle-column .webrtc-title {\n  color: #495057 !important;\n  font-size: 16px !important;\n  font-weight: 600 !important;\n}\n\n.middle-column .webrtc-room-info {\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%) !important;\n  color: #1565c0 !important;\n  border: 1px solid #90caf9;\n  font-weight: 500;\n}\n\n/* Stunning video containers */\n.middle-column .webrtc-videos {\n  gap: 20px !important;\n  margin-bottom: 25px !important;\n  padding: 0 !important;\n}\n\n.middle-column .webrtc-video-container {\n  position: relative;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  background: linear-gradient(135deg, #263238 0%, #37474f 100%);\n}\n\n/* Perfect video styling */\n.middle-column .webrtc-video {\n  height: 320px !important;\n  min-width: 100% !important;\n  max-width: 100% !important;\n  border: 3px solid rgba(255, 255, 255, 0.1) !important;\n  border-radius: 12px !important;\n  box-shadow: \n    0 8px 32px rgba(0, 0, 0, 0.2),\n    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;\n  background: linear-gradient(135deg, #263238 0%, #37474f 100%) !important;\n  position: relative;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.middle-column .webrtc-video:hover {\n  transform: translateY(-2px);\n  box-shadow: \n    0 12px 40px rgba(0, 0, 0, 0.25),\n    inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n\n/* Beautiful video labels */\n.middle-column .webrtc-video-label {\n  color: #495057 !important;\n  font-size: 14px !important;\n  font-weight: 600 !important;\n  margin-bottom: 8px !important;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);\n}\n\n/* Gorgeous control buttons */\n.middle-column .webrtc-controls {\n  background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;\n  border: 1px solid rgba(0, 0, 0, 0.08) !important;\n  border-radius: 12px !important;\n  padding: 16px !important;\n  gap: 12px !important;\n  box-shadow: \n    0 4px 20px rgba(0, 0, 0, 0.08),\n    inset 0 1px 0 rgba(255, 255, 255, 0.9);\n}\n\n/* Premium button styling */\n.middle-column .webrtc-btn {\n  min-width: 80px !important;\n  height: 40px !important;\n  font-size: 13px !important;\n  font-weight: 600 !important;\n  padding: 0 16px !important;\n  border-radius: 8px !important;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  position: relative;\n  overflow: hidden;\n}\n\n.middle-column .webrtc-btn::before {\n  content: \'\';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n  transition: left 0.5s;\n}\n\n.middle-column .webrtc-btn:hover::before {\n  left: 100%;\n}\n\n.middle-column .webrtc-btn.start {\n  background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%) !important;\n  box-shadow: \n    0 4px 16px rgba(76, 175, 80, 0.3),\n    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;\n}\n\n.middle-column .webrtc-btn.start:hover {\n  background: linear-gradient(135deg, #45a049 0%, #3d8b40 100%) !important;\n  transform: translateY(-2px);\n  box-shadow: \n    0 6px 24px rgba(76, 175, 80, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.2);\n}\n\n.middle-column .webrtc-btn.stop {\n  background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%) !important;\n  box-shadow: \n    0 4px 16px rgba(244, 67, 54, 0.3),\n    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;\n}\n\n.middle-column .webrtc-btn.stop:hover {\n  background: linear-gradient(135deg, #d32f2f 0%, #c62828 100%) !important;\n  transform: translateY(-2px);\n  box-shadow: \n    0 6px 24px rgba(244, 67, 54, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.2);\n}\n\n/* Status styling */\n.middle-column .webrtc-status {\n  border-radius: 8px !important;\n  padding: 12px 16px !important;\n  font-size: 13px !important;\n  font-weight: 600 !important;\n  margin-top: 15px !important;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.middle-column .webrtc-status.active {\n  background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%) !important;\n  border: 1px solid #a5d6a7 !important;\n  color: #2e7d32 !important;\n}\n\n.middle-column .webrtc-status.inactive {\n  background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%) !important;\n  border: 1px solid #ef9a9a !important;\n  color: #c62828 !important;\n}\n\n/* Debug section styling */\n.middle-column .webrtc-debug {\n  margin-top: 20px;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  padding-top: 15px;\n}\n\n.middle-column .webrtc-debug summary {\n  color: #6c757d !important;\n  font-weight: 500;\n  padding: 8px;\n  border-radius: 6px;\n  background: rgba(0, 0, 0, 0.02);\n  transition: all 0.2s ease;\n}\n\n.middle-column .webrtc-debug summary:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: #495057;\n}\n\n/* Responsive improvements */\n@media (max-width: 768px) {\n  .middle-column .webrtc-section {\n    padding: 20px;\n    margin: 20px 0;\n  }\n  \n  .middle-column .webrtc-video {\n    height: 240px !important;\n  }\n  \n  .middle-column .webrtc-btn {\n    min-width: 70px !important;\n    height: 36px !important;\n    font-size: 12px !important;\n  }\n}\n\n@media (max-width: 480px) {\n  .middle-column .webrtc-section {\n    padding: 15px;\n  }\n  \n  .middle-column .webrtc-video {\n    height: 200px !important;\n  }\n  \n  .middle-column .webrtc-videos {\n    grid-template-columns: 1fr;\n    gap: 15px !important;\n  }\n}',""]);const o=s},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},579:(e,t,n)=>{var r=n(3738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(r(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,n)=>{var r=n(6993),i=n(1791);e.exports=function(e,t,n,a,s){return new i(r().w(e,t,n,a),s||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},961:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(2551)},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1601:e=>{"use strict";e.exports=function(e){return e[1]}},1791:(e,t,n)=>{var r=n(5172),i=n(5546);e.exports=function e(t,n){function a(e,i,s,o){try{var l=t[e](i),c=l.value;return c instanceof r?n.resolve(c.v).then(function(e){a("next",e,s,o)},function(e){a("throw",e,s,o)}):n.resolve(c).then(function(e){l.value=e,s(l)},function(e){return a("throw",e,s,o)})}catch(e){o(e)}}var s;this.next||(i(e.prototype),i(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),i(this,"_invoke",function(e,t,r){function i(){return new n(function(t,n){a(e,r,t,n)})}return s=s?s.then(i,i):i()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},1992:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,"/* Main app container */\n.app-container {\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n  }\n  \n  /* Container for sidebar and main content */\n  .content-container {\n    display: flex;\n    flex: 1;\n    position: relative;\n  }\n  \n  /* Main content area */\n  .main-content {\n    flex: 1;\n    margin-left: 250px; /* Match sidebar width */\n    padding: 20px;\n    min-height: calc(100vh - 85px - 50px); /* Adjusted for 85px navbar height */\n    background-color: #fff;\n    transition: margin-left 0.3s;\n  }\n  \n  /* Navbar styling */\n  .navbar {\n    height: 85px; /* Set a fixed height for navbar */\n    width: 100%;\n    z-index: 1100; /* Higher than sidebar */\n    position: sticky;\n    top: 0;\n  }\n  \n  /* Footer styling */\n  .footer {\n    height: 50px; /* Set a fixed height for footer */\n    width: 100%;\n  }\n  \n  /* Responsive adjustments */\n  @media (max-width: 768px) {\n    .main-content {\n      margin-left: 0;\n      width: 100%;\n    }\n    \n    /* Add a toggle button for mobile */\n    .sidebar-toggle {\n      display: block;\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      z-index: 1200;\n      padding: 10px;\n      border-radius: 50%;\n      background-color: #007bff;\n      color: white;\n      border: none;\n      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n    }\n  }",""]);const o=s},2154:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,".podcast-dashboard {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 2rem;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  background: #f3f4f6; /* light gray for main background */\n  color: #1f2937; /* slate-800 */\n}\n\nh1 {\n  text-align: center;\n  font-size: 2rem;\n  margin-bottom: 2rem;\n  color: #111827; /* gray-900 */\n}\n\n.podcast-section {\n  background-color: white;\n  padding: 1.5rem 2rem;\n  margin-bottom: 2rem;\n  border-radius: 12px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n}\n\n.podcast-section h2 {\n  font-size: 1.25rem;\n  margin-bottom: 1rem;\n  color: #2563eb; /* blue-600 */\n}\n\n.summary-info {\n  margin: 0.5rem 0;\n  font-size: 1rem;\n}\n\n.podcast-list {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));\n  gap: 20px;\n}\n\n.podcast-card {\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 10px;\n  padding: 1rem;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.podcast-cover {\n  width: 100%;\n  height: auto;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  object-fit: cover;\n}\n\n.podcast-content h3 {\n  font-size: 1.1rem;\n  color: #111827;\n}\n\n.podcast-content p {\n  font-size: 0.95rem;\n  color: #4b5563;\n  margin: 0.5rem 0 1rem;\n  text-align: center;\n}\n\n.podcast-actions {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin-bottom: 1rem;\n}\n\n.btn-primary,\n.btn-edit,\n.btn-delete,\n.btn-create,\n.btn-live {\n  background-color: #2563eb;\n  color: white;\n  padding: 0.5rem 0.9rem;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: background 0.2s;\n}\n\n.btn-edit {\n  background-color: #10b981; /* teal */\n}\n\n.btn-delete {\n  background-color: #ef4444; /* red */\n}\n\n.btn-create {\n  background-color: #3b82f6; /* blue-500 */\n}\n\n.btn-live {\n  background-color: #7c3aed; /* violet */\n}\n\n.btn-primary:hover,\n.btn-edit:hover,\n.btn-delete:hover,\n.btn-create:hover,\n.btn-live:hover {\n  opacity: 0.9;\n}\n\n/* Episode list styles */\n.episode-list {\n  list-style: none;\n  padding: 0;\n}\n\n.episode-item {\n  margin-bottom: 1rem;\n  padding: 1rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  background: #f9fafb;\n}\n\n/* Placeholder / empty states */\n.placeholder-content {\n  text-align: center;\n  font-style: italic;\n  color: #6b7280;\n}\n\n.empty-state {\n  font-size: 1rem;\n  margin-bottom: 0.5rem;\n}\n\n/* Tools List (styled cards) */\n.tools-list {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 16px;\n  list-style: none;\n  padding: 0;\n}\n\n.tools-list li {\n  background: linear-gradient(to right, #3b82f6, #1e40af);\n  color: white;\n  text-align: center;\n  padding: 1rem;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 1rem;\n  transition: transform 0.2s ease;\n}\n\n.tools-list li:hover {\n  transform: scale(1.03);\n  background: linear-gradient(to right, #2563eb, #1d4ed8);\n}\n\n.tools-list a {\n  color: white;\n  text-decoration: none;\n  display: block;\n  height: 100%;\n}\n",""]);const o=s},2551:(e,t,n)=>{"use strict";var r=n(6540),i=n(9982);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),A=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function B(e){if(void 0===M)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function $(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return j(e.type,!1);case 11:return j(e.type.render,!1);case 1:return j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case w:return"Fragment";case S:return"Portal";case T:return"Profiler";case k:return"StrictMode";case L:return"Suspense";case C:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return z(e(t))}catch(e){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,we=null,ke=null;function Te(e){if(e=yi(e)){if("function"!=typeof Se)throw Error(a(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function _e(e){we?ke?ke.push(e):ke=[e]:we=e}function Ae(){if(we){var e=we,t=ke;if(ke=we=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Re(e,t){return e(t)}function Le(){}var Ce=!1;function Pe(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return Re(e,t,n)}finally{Ce=!1,(null!==we||null!==ke)&&(Le(),Ae())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Ne=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Ne=!1}function Oe(e,t,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Me=!1,Fe=null,Be=!1,Ue=null,je={onError:function(e){Me=!0,Fe=e}};function $e(e,t,n,r,i,a,s,o,l){Me=!1,Fe=null,Oe.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ge(i),e;if(s===r)return Ge(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,qe=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null,st=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=dt(o):0!==(a&=s)&&(r=dt(a))}else 0!==(s=n&~i)?r=dt(s):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return!(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function Et(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var xt,St,wt,kt,Tt,_t=!1,At=[],Rt=null,Lt=null,Ct=null,Pt=new Map,It=new Map,Nt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=yi(t))&&St(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=bi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Tt(e.priority,function(){wt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ee=r,n.target.dispatchEvent(r),Ee=null,t.shift()}return!0}function Ut(e,t,n){Bt(e)&&n.delete(t)}function jt(){_t=!1,null!==Rt&&Bt(Rt)&&(Rt=null),null!==Lt&&Bt(Lt)&&(Lt=null),null!==Ct&&Bt(Ct)&&(Ct=null),Pt.forEach(Ut),It.forEach(Ut)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return $t(t,e)}if(0<At.length){$t(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Rt&&$t(Rt,e),null!==Lt&&$t(Lt,e),null!==Ct&&$t(Ct,e),Pt.forEach(t),It.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Nt.shift()}var Vt=E.ReactCurrentBatchConfig,Gt=!0;function Ht(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=1,Kt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Wt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=4,Kt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Kt(e,t,n,r){if(Gt){var i=qt(e,t,n,r);if(null===i)Gr(e,t,r,Yt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Rt=Mt(Rt,e,t,n,r,i),!0;case"dragenter":return Lt=Mt(Lt,e,t,n,r,i),!0;case"mouseover":return Ct=Mt(Ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,It.set(a,Mt(It.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&xt(a),null===(a=qt(e,t,n,r))&&Gr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Yt=null;function qt(e,t,n,r){if(Yt=null,null!==(e=bi(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=F({},cn,{view:0,detail:0}),hn=an(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(fn),mn=an(F({},fn,{dataTransfer:0})),gn=an(F({},dn,{relatedTarget:0})),vn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(bn),En=an(F({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Tn(){return kn}var _n=F({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(_n),Rn=an(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=an(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Cn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=an(Pn),Nn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Mn=u&&"TextEvent"in window&&!On,Fn=u&&(!Dn||On&&8<On&&11>=On),Bn=String.fromCharCode(32),Un=!1;function jn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1,Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){_e(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Yn(e){Br(e,0)}function qn(e){if(K(Ei(e)))return e}function Xn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&qn(Kn)){var t=[];Hn(t,Kn,e,xe(e)),Pe(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Kn)}function ar(e,t){if("click"===e)return qn(t)}function sr(e,t){if("input"===e||"change"===e)return qn(t)}var or="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(or(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,br=null,yr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==Y(r)||(r="selectionStart"in(r=gr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},wr={},kr={};function Tr(e){if(wr[e])return wr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return wr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var _r=Tr("animationend"),Ar=Tr("animationiteration"),Rr=Tr("animationstart"),Lr=Tr("transitionend"),Cr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Cr.set(e,t),l(t,[e])}for(var Nr=0;Nr<Pr.length;Nr++){var Dr=Pr[Nr];Ir(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ir(_r,"onAnimationEnd"),Ir(Ar,"onAnimationIteration"),Ir(Rr,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Lr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,l,c){if($e.apply(this,arguments),Me){if(!Me)throw Error(a(198));var u=Fe;Me=!1,Fe=null,Be||(Be=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Fr(i,o,c),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Fr(i,o,c),a=l}}}if(Be)throw e=Ue,Be=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[$r]){e[$r]=!0,s.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,jr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=bi(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}o=o.parentNode}}r=r.return}Pe(function(){var r=a,i=xe(n),s=[];e:{var o=Cr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ln;break;case _r:case Ar:case Rr:l=vn;break;case Lr:l=Cn;break;case"scroll":l=hn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rn}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&null!=(m=Ie(p,h))&&u.push(Hr(p,m,f))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),s.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Ee||!(c=n.relatedTarget||n.fromElement)||!bi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Rn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Ei(l),f=null==c?o:Ei(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,bi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Yr(s,o,l,u,!1),null!==c&&null!==d&&Yr(s,d,c,u,!0)}if("select"===(l=(o=r?Ei(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Gn(o))if(Qn)g=sr;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Hn(s,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?Ei(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,br=null);break;case"focusout":br=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,Er(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":Er(s,n,i)}var b;if(Dn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zn?jn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(b=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,zn=!0)),0<(v=Wr(r,y)).length&&(y=new En(y,e,null,n,i),s.push({event:y,listeners:v}),(b||null!==(b=$n(n)))&&(y.data=b))),(b=Mn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Un=!0,Bn);case"textInput":return(e=t.data)===Bn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&jn(e,t)?(e=en(),Zt=Jt=Qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Wr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=b)}Br(s,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ie(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Ie(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Ie(n,a))&&s.unshift(Hr(n,l,o)):i||null!=(l=Ie(n,a))&&s.push(Hr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Qr(e){return("string"==typeof e?e:""+e).replace(qr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,ai="function"==typeof Promise?Promise:void 0,si="function"==typeof queueMicrotask?queueMicrotask:void 0!==ai?function(e){return ai.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function bi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xi(e){return e[fi]||null}var Si=[],wi=-1;function ki(e){return{current:e}}function Ti(e){0>wi||(e.current=Si[wi],Si[wi]=null,wi--)}function _i(e,t){wi++,Si[wi]=e.current,e.current=t}var Ai={},Ri=ki(Ai),Li=ki(!1),Ci=Ai;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ii(e){return null!=e.childContextTypes}function Ni(){Ti(Li),Ti(Ri)}function Di(e,t,n){if(Ri.current!==Ai)throw Error(a(168));_i(Ri,t),_i(Li,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ci=Ri.current,_i(Ri,e),_i(Li,Li.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Ci),r.__reactInternalMemoizedMergedChildContext=e,Ti(Li),Ti(Ri),_i(Ri,e)):Ti(Li),_i(Li,n)}var Bi=null,Ui=!1,ji=!1;function $i(e){null===Bi?Bi=[e]:Bi.push(e)}function zi(){if(!ji&&null!==Bi){ji=!0;var e=0,t=yt;try{var n=Bi;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,Ui=!1}catch(t){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ke(Ze,zi),t}finally{yt=t,ji=!1}}return null}var Vi=[],Gi=0,Hi=null,Wi=0,Ki=[],Yi=0,qi=null,Xi=1,Qi="";function Ji(e,t){Vi[Gi++]=Wi,Vi[Gi++]=Hi,Hi=e,Wi=t}function Zi(e,t,n){Ki[Yi++]=Xi,Ki[Yi++]=Qi,Ki[Yi++]=qi,qi=e;var r=Xi;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xi=1<<32-st(t)+i|n<<i|r,Qi=a+e}else Xi=1<<a|n<<i|r,Qi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=Vi[--Gi],Vi[Gi]=null,Wi=Vi[--Gi],Vi[Gi]=null;for(;e===qi;)qi=Ki[--Yi],Ki[Yi]=null,Qi=Ki[--Yi],Ki[Yi]=null,Xi=Ki[--Yi],Ki[Yi]=null}var na=null,ra=null,ia=!1,aa=null;function sa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qi?{id:Xi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return!(!(1&e.mode)||128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&oa(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ma=E.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===w?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===I&&ba(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case S:return(t=Bc(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case I:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);va(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}function m(i,a,o,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),a=s(v,a,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(i,d),ia&&Ji(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(a=s(d,a,m),null===u?c=d:u.sibling=d,u=d);return ia&&Ji(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),ia&&Ji(i,m),c}function g(i,o,l,c){var u=O(l);if("function"!=typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,m=o,g=o=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=f(i,m,b.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(i,m),o=s(y,o,g),null===d?u=y:d.sibling=y,d=y,m=v}if(b.done)return n(i,m),ia&&Ji(i,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=h(i,b.value,c))&&(o=s(b,o,g),null===d?u=b:d.sibling=b,d=b);return ia&&Ji(i,g),u}for(m=r(i,m);!b.done;g++,b=l.next())null!==(b=p(m,i,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),o=s(b,o,g),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach(function(e){return t(i,e)}),ia&&Ji(i,g),u}return function e(r,a,s,l){if("object"==typeof s&&null!==s&&s.type===w&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=a;null!==u;){if(u.key===c){if((c=s.type)===w){if(7===u.tag){n(r,u.sibling),(a=i(u,s.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===I&&ba(c)===u.type){n(r,u.sibling),(a=i(u,s.props)).ref=ga(r,u,s),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===w?((a=Oc(s.props.children,r.mode,l,s.key)).return=r,r=a):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=ga(r,a,s),l.return=r,r=l)}return o(r);case S:e:{for(u=s.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Bc(s,r.mode,l)).return=r,r=a}return o(r);case I:return e(r,a,(u=s._init)(s._payload),l)}if(te(s))return m(r,a,s,l);if(O(s))return g(r,a,s,l);va(r,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=Fc(s,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var Ea=ya(!0),xa=ya(!1),Sa=ki(null),wa=null,ka=null,Ta=null;function _a(){Ta=ka=wa=null}function Aa(e){var t=Sa.current;Ti(Sa),e._currentValue=t}function Ra(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function La(e,t){wa=e,Ta=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Ca(e){var t=e._currentValue;if(Ta!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===wa)throw Error(a(308));ka=e,wa.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Pa=null;function Ia(e){null===Pa?Pa=[e]:Pa.push(e)}function Na(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oa=!1;function Ma(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ba(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Rl){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Da(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Da(e,n)}function ja(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function $a(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function za(e,t,n,r){var i=e.updateQueue;Oa=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&(o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(s=0,u=c=l=null,o=a;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=F({},d,h);break e;case 2:Oa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ml|=s,e.lanes=s,e.memoizedState=d}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var Ga={},Ha=ki(Ga),Wa=ki(Ga),Ka=ki(Ga);function Ya(e){if(e===Ga)throw Error(a(174));return e}function qa(e,t){switch(_i(Ka,t),_i(Wa,e),_i(Ha,Ga),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ha),_i(Ha,t)}function Xa(){Ti(Ha),Ti(Wa),Ti(Ka)}function Qa(e){Ya(Ka.current);var t=Ya(Ha.current),n=le(t,e.type);t!==n&&(_i(Wa,e),_i(Ha,n))}function Ja(e){Wa.current===e&&(Ti(Ha),Ti(Wa))}var Za=ki(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=E.ReactCurrentDispatcher,is=E.ReactCurrentBatchConfig,as=0,ss=null,os=null,ls=null,cs=!1,us=!1,ds=0,hs=0;function fs(){throw Error(a(321))}function ps(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ms(e,t,n,r,i,s){if(as=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Js:Zs,e=n(r,i),us){s=0;do{if(us=!1,ds=0,25<=s)throw Error(a(301));s+=1,ls=os=null,t.updateQueue=null,rs.current=eo,e=n(r,i)}while(us)}if(rs.current=Qs,t=null!==os&&null!==os.next,as=0,ls=os=ss=null,cs=!1,t)throw Error(a(300));return e}function gs(){var e=0!==ds;return ds=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?ss.memoizedState=ls=e:ls=ls.next=e,ls}function bs(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===ls?ss.memoizedState:ls.next;if(null!==t)ls=t,os=e;else{if(null===e)throw Error(a(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===ls?ss.memoizedState=ls=e:ls=ls.next=e}return ls}function ys(e,t){return"function"==typeof t?t(e):t}function Es(e){var t=bs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=os,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((as&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ss.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==s);null===c?o=r:c.next=l,or(r,t.memoizedState)||(yo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ss.lanes|=s,Ml|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xs(e){var t=bs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);or(s,t.memoizedState)||(yo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function ws(e,t){var n=ss,r=bs(),i=t(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,yo=!0),r=r.queue,Os(_s.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Cs(9,Ts.bind(null,n,r,i,t),void 0,null),null===Ll)throw Error(a(349));30&as||ks(n,t,i)}return i}function ks(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ts(e,t,n,r){t.value=n,t.getSnapshot=r,As(t)&&Rs(e)}function _s(e,t,n){return n(function(){As(t)&&Rs(e)})}function As(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(e){return!0}}function Rs(e){var t=Da(e,1);null!==t&&nc(t,e,1,-1)}function Ls(e){var t=vs();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,ss,e),[t.memoizedState,e]}function Cs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ps(){return bs().memoizedState}function Is(e,t,n,r){var i=vs();ss.flags|=e,i.memoizedState=Cs(1|t,n,void 0,void 0===r?null:r)}function Ns(e,t,n,r){var i=bs();r=void 0===r?null:r;var a=void 0;if(null!==os){var s=os.memoizedState;if(a=s.destroy,null!==r&&ps(r,s.deps))return void(i.memoizedState=Cs(t,n,a,r))}ss.flags|=e,i.memoizedState=Cs(1|t,n,a,r)}function Ds(e,t){return Is(8390656,8,e,t)}function Os(e,t){return Ns(2048,8,e,t)}function Ms(e,t){return Ns(4,2,e,t)}function Fs(e,t){return Ns(4,4,e,t)}function Bs(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Us(e,t,n){return n=null!=n?n.concat([e]):null,Ns(4,4,Bs.bind(null,t,e),n)}function js(){}function $s(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ps(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ps(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vs(e,t,n){return 21&as?(or(n,t)||(n=mt(),ss.lanes|=n,Ml|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n)}function Gs(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{yt=n,is.transition=r}}function Hs(){return bs().memoizedState}function Ws(e,t,n){var r=tc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e)?qs(t,n):null!==(n=Na(e,t,n,r))&&(nc(n,e,r,ec()),Xs(n,t,r))}function Ks(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))qs(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(i.next=i,Ia(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Na(e,t,i,r))&&(nc(n,e,r,i=ec()),Xs(n,t,r))}}function Ys(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function qs(e,t){us=cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xs(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Qs={readContext:Ca,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Js={readContext:Ca,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Is(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Is(4194308,4,e,t)},useInsertionEffect:function(e,t){return Is(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ws.bind(null,ss,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:Ls,useDebugValue:js,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=Ls(!1),t=e[0];return e=Gs.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ss,i=vs();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ll)throw Error(a(349));30&as||ks(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ds(_s.bind(null,r,s,e),[e]),r.flags|=2048,Cs(9,Ts.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=Ll.identifierPrefix;if(ia){var n=Qi;t=":"+t+"R"+(n=(Xi&~(1<<32-st(Xi)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zs={readContext:Ca,useCallback:$s,useContext:Ca,useEffect:Os,useImperativeHandle:Us,useInsertionEffect:Ms,useLayoutEffect:Fs,useMemo:zs,useReducer:Es,useRef:Ps,useState:function(){return Es(ys)},useDebugValue:js,useDeferredValue:function(e){return Vs(bs(),os.memoizedState,e)},useTransition:function(){return[Es(ys)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:ws,useId:Hs,unstable_isNewReconciler:!1},eo={readContext:Ca,useCallback:$s,useContext:Ca,useEffect:Os,useImperativeHandle:Us,useInsertionEffect:Ms,useLayoutEffect:Fs,useMemo:zs,useReducer:xs,useRef:Ps,useState:function(){return xs(ys)},useDebugValue:js,useDeferredValue:function(e){var t=bs();return null===os?t.memoizedState=e:Vs(t,os.memoizedState,e)},useTransition:function(){return[xs(ys)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:ws,useId:Hs,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ba(r,i);a.payload=t,null!=n&&(a.callback=n),null!==(t=Ua(e,a,i))&&(nc(t,e,i,r),ja(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ba(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=Ua(e,a,i))&&(nc(t,e,i,r),ja(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ba(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Ua(e,i,r))&&(nc(t,e,r,n),ja(t,e,r))}};function io(e,t,n,r,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(i,a))}function ao(e,t,n){var r=!1,i=Ai,a=t.contextType;return"object"==typeof a&&null!==a?a=Ca(a):(i=Ii(t)?Ci:Ri.current,a=(r=null!=(r=t.contextTypes))?Pi(e,i):Ai),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function so(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ma(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=Ca(a):(a=Ii(t)?Ci:Ri.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),za(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var ho="function"==typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Ba(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Hl=r),uo(0,t)},n}function po(e,t,n){(n=Ba(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!=typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ba(-1,1)).tag=2,Ua(n,t,1))),n.lanes|=1),e)}var bo=E.ReactCurrentOwner,yo=!1;function Eo(e,t,n,r){t.child=null===e?xa(t,null,n,r):Ea(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var a=t.ref;return La(t,i),r=ms(e,t,n,r,a,i),n=gs(),null===e||yo?(ia&&n&&ea(t),t.flags|=1,Eo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Go(e,t,i))}function So(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Ic(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,wo(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Go(e,t,i)}return t.flags|=1,(e=Nc(a,r)).ref=t.ref,e.return=t,t.child=e}function wo(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(yo=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Go(e,t,i);131072&e.flags&&(yo=!0)}}return _o(e,t,n,r,i)}function ko(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Nl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,_i(Nl,Il),Il|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Nl,Il),Il|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_i(Nl,Il),Il|=r;return Eo(e,t,i,n),t.child}function To(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _o(e,t,n,r,i){var a=Ii(n)?Ci:Ri.current;return a=Pi(t,a),La(t,i),n=ms(e,t,n,r,a,i),r=gs(),null===e||yo?(ia&&r&&ea(t),t.flags|=1,Eo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Go(e,t,i))}function Ao(e,t,n,r,i){if(Ii(n)){var a=!0;Mi(t)}else a=!1;if(La(t,i),null===t.stateNode)Vo(e,t),ao(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;c="object"==typeof c&&null!==c?Ca(c):Pi(t,c=Ii(n)?Ci:Ri.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||l!==c)&&so(t,s,r,c),Oa=!1;var h=t.memoizedState;s.state=h,za(t,r,s,i),l=t.memoizedState,o!==r||h!==l||Li.current||Oa?("function"==typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Oa||io(t,n,o,r,h,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Fa(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),s.props=c,d=t.pendingProps,h=s.context,l="object"==typeof(l=n.contextType)&&null!==l?Ca(l):Pi(t,l=Ii(n)?Ci:Ri.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==d||h!==l)&&so(t,s,r,l),Oa=!1,h=t.memoizedState,s.state=h,za(t,r,s,i);var p=t.memoizedState;o!==d||h!==p||Li.current||Oa?("function"==typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Oa||io(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ro(e,t,n,r,a,i)}function Ro(e,t,n,r,i,a){To(e,t);var s=!!(128&t.flags);if(!r&&!s)return i&&Fi(t,n,!1),Go(e,t,a);r=t.stateNode,bo.current=t;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Ea(t,e.child,null,a),t.child=Ea(t,null,o,a)):Eo(e,t,o,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Lo(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),qa(e,t.containerInfo)}function Co(e,t,n,r,i){return fa(),pa(i),t.flags|=256,Eo(e,t,n,r),t.child}var Po,Io,No,Do,Oo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,i=t.pendingProps,s=Za.current,o=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),_i(Za,1&s),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},1&i||null===o?o=Mc(l,i,0,null):(o.childLanes=0,o.pendingProps=l),e=Oc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Oo,e):Bo(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(s=Oc(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&Ea(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Oo,s);if(!(1&t.mode))return Uo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=co(s=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(r=Ll)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Da(e,i),nc(r,e,i,-1))}return mc(),Uo(e,t,o,r=co(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Yi++]=Xi,Ki[Yi++]=Qi,Ki[Yi++]=qi,Xi=e.id,Qi=e.overflow,qi=t),(t=Bo(t,r.children)).flags|=4096,t)}(e,t,l,i,r,s,n);if(o){o=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 1&l||t.child===s?(i=Nc(s,c)).subtreeFlags=14680064&s.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null),null!==r?o=Nc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Nc(o,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&pa(r),Ea(t,e.child,null,n),(e=Bo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ra(e.return,t,n)}function $o(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Eo(e,t,r.children,n),2&(r=Za.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jo(e,n,t);else if(19===e.tag)jo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(Za,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$o(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===es(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$o(t,!0,n,null,a);break;case"together":$o(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Vo(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Go(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Ii(t.type)&&Ni(),Wo(t),null;case 3:return r=t.stateNode,Xa(),Ti(Li),Ti(Ri),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Io(e,t),Wo(t),null;case 5:Ja(t);var i=Ya(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)No(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wo(t),null}if(e=Ya(Ha.current),da(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=!!(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,s),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ur("invalid",r);break;case"textarea":ie(r,s),Ur("invalid",r)}for(var l in be(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,s,!0);break;case"textarea":W(r),se(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(s in be(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"==typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"==typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ur("scroll",e):null!=u&&y(e,s,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Ka.current),Ya(Ha.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wo(t),null;case 13:if(Ti(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&1&t.mode&&!(128&t.flags))ha(),fa(),t.flags|=98560,s=!1;else if(s=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[hi]=t}else fa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),s=!1}else null!==aa&&(sc(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Za.current?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Xa(),Io(e,t),null===e&&zr(t.stateNode.containerInfo),Wo(t),null;case 10:return Aa(t.type._context),Wo(t),null;case 19:if(Ti(Za),null===(s=t.memoizedState))return Wo(t),null;if(r=!!(128&t.flags),null===(l=s.rendering))if(r)Ho(s,!1);else{if(0!==Dl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Ho(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(Za,1&Za.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>zl&&(t.flags|=128,r=!0,Ho(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ia)return Wo(t),null}else 2*Qe()-s.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=Za.current,_i(Za,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Il)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yo(e,t){switch(ta(t),t.tag){case 1:return Ii(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),Ti(Li),Ti(Ri),ns(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ja(t),null;case 13:if(Ti(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(Za),null;case 4:return Xa(),null;case 10:return Aa(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Io=function(){},No=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Ha.current);var a,s=null;switch(n){case"input":i=q(e,i),r=q(e,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in be(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var qo=!1,Xo=!1,Qo="function"==typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){kc(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){kc(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Xo||Zo(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xo&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(2&a||4&a)&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xo&&(Zo(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){kc(n,t,e)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,hl(e,t,n),Xo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach(function(t){var r=Rc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));fl(s,o,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){kc(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){kc(e,e.return,t)}try{nl(5,e,e.return)}catch(t){kc(e,e.return,t)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(t){kc(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(i,s),ye(l,o);var u=ye(l,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):y(i,d,h,u)}switch(l){case"input":J(i,s);break;case"textarea":ae(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(t){kc(e,e.return,t)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(t){kc(e,e.return,t)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(t){kc(e,e.return,t)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||($l=Qe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(u=Xo)||d,ml(t,e),Xo=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Jo=e,d=e.child;null!==d;){for(h=Jo=d;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){kc(r,n,e)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Jo=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(t){kc(e,e.return,t)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(t){kc(e,e.return,t)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,ol(e),s);break;default:throw Error(a(161))}}catch(t){kc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Jo=e,yl(e,t,n)}function yl(e,t,n){for(var r=!!(1&e.mode);null!==Jo;){var i=Jo,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||qo;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=qo;var c=Xo;if(qo=s,(Xo=l)&&!c)for(Jo=i;null!==Jo;)l=(s=Jo).child,22===s.tag&&null!==s.memoizedState?Sl(i):null!==l?(l.return=s,Jo=l):Sl(i);for(;null!==a;)Jo=a,yl(a,t,n),a=a.sibling;Jo=i,qo=o,Xo=c}El(e)}else 8772&i.subtreeFlags&&null!==a?(a.return=i,Jo=a):El(e)}}function El(e){for(;null!==Jo;){var t=Jo;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Va(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Xo||512&t.flags&&il(t)}catch(e){kc(t,t.return,e)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function xl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function Sl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){kc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){kc(t,i,e)}}var a=t.return;try{il(t)}catch(e){kc(t,a,e)}break;case 5:var s=t.return;try{il(t)}catch(e){kc(t,s,e)}}}catch(e){kc(t,t.return,e)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var wl,kl=Math.ceil,Tl=E.ReactCurrentDispatcher,_l=E.ReactCurrentOwner,Al=E.ReactCurrentBatchConfig,Rl=0,Ll=null,Cl=null,Pl=0,Il=0,Nl=ki(0),Dl=0,Ol=null,Ml=0,Fl=0,Bl=0,Ul=null,jl=null,$l=0,zl=1/0,Vl=null,Gl=!1,Hl=null,Wl=null,Kl=!1,Yl=null,ql=0,Xl=0,Ql=null,Jl=-1,Zl=0;function ec(){return 6&Rl?Qe():-1!==Jl?Jl:Jl=Qe()}function tc(e){return 1&e.mode?2&Rl&&0!==Pl?Pl&-Pl:null!==ma.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type):1}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Ql=null,Error(a(185));vt(e,n,r),2&Rl&&e===Ll||(e===Ll&&(!(2&Rl)&&(Fl|=n),4===Dl&&oc(e,Pl)),rc(e,r),1===n&&0===Rl&&!(1&t.mode)&&(zl=Qe()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=ft(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Ll?Pl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ui=!0,$i(e)}(lc.bind(null,e)):$i(lc.bind(null,e)),si(function(){!(6&Rl)&&zi()}),n=null;else{switch(Et(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Lc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,6&Rl)throw Error(a(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ll?Pl:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Rl;Rl|=2;var s=pc();for(Ll===e&&Pl===t||(Vl=null,zl=Qe()+500,hc(e,t));;)try{bc();break}catch(t){fc(e,t)}_a(),Tl.current=s,Rl=i,null!==Cl?t=0:(Ll=null,Pl=0,t=Dl)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=ac(e,i)),1===t)throw n=Ol,hc(e,0),oc(e,r),rc(e,Qe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=gc(e,r),2===t&&(s=pt(e),0!==s&&(r=s,t=ac(e,s))),1!==t)))throw n=Ol,hc(e,0),oc(e,r),rc(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,jl,Vl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=$l+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,jl,Vl),t);break}xc(e,jl,Vl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,jl,Vl),r);break}xc(e,jl,Vl);break;default:throw Error(a(329))}}}return rc(e,Qe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=jl,jl=n,null!==t&&sc(t)),e}function sc(e){null===jl?jl=e:jl.push.apply(jl,e)}function oc(e,t){for(t&=~Bl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(6&Rl)throw Error(a(327));Sc();var t=ht(e,0);if(!(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),rc(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,jl,Vl),rc(e,Qe()),null}function cc(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(zl=Qe()+500,Ui&&zi())}}function uc(e){null!==Yl&&0===Yl.tag&&!(6&Rl)&&Sc();var t=Rl;Rl|=1;var n=Al.transition,r=yt;try{if(Al.transition=null,yt=1,e)return e()}finally{yt=r,Al.transition=n,!(6&(Rl=t))&&zi()}}function dc(){Il=Nl.current,Ti(Nl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ni();break;case 3:Xa(),Ti(Li),Ti(Ri),ns();break;case 5:Ja(r);break;case 4:Xa();break;case 13:case 19:Ti(Za);break;case 10:Aa(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Ll=e,Cl=e=Nc(e.current,null),Pl=Il=t,Dl=0,Ol=null,Bl=Fl=Ml=0,jl=Ul=null,null!==Pa){for(t=0;t<Pa.length;t++)if(null!==(r=(n=Pa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Pa=null}return e}function fc(e,t){for(;;){var n=Cl;try{if(_a(),rs.current=Qs,cs){for(var r=ss.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}cs=!1}if(as=0,ls=os=ss=null,us=!1,ds=0,_l.current=null,null===n||null===n.return){Dl=1,Ol=t,Cl=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(!(1&d.mode||0!==h&&11!==h&&15!==h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(!(1&t)){mo(s,u,t),mc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var v=go(o);if(null!==v){!(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),pa(lo(c,l));break e}}s=c=lo(c,l),4!==Dl&&(Dl=2),null===Ul?Ul=[s]:Ul.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,$a(s,fo(0,c,t));break e;case 1:l=c;var b=s.type,y=s.stateNode;if(!(128&s.flags||"function"!=typeof b.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==Wl&&Wl.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,$a(s,po(s,l,t));break e}}s=s.return}while(null!==s)}Ec(n)}catch(e){t=e,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function pc(){var e=Tl.current;return Tl.current=Qs,null===e?Qs:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Ll||!(268435455&Ml)&&!(268435455&Fl)||oc(Ll,Pl)}function gc(e,t){var n=Rl;Rl|=2;var r=pc();for(Ll===e&&Pl===t||(Vl=null,hc(e,t));;)try{vc();break}catch(t){fc(e,t)}if(_a(),Rl=n,Tl.current=r,null!==Cl)throw Error(a(261));return Ll=null,Pl=0,Dl}function vc(){for(;null!==Cl;)yc(Cl)}function bc(){for(;null!==Cl&&!qe();)yc(Cl)}function yc(e){var t=wl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?Ec(e):Cl=t,_l.current=null}function Ec(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Cl=n);if(null===e)return Dl=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Ko(n,t,Il)))return void(Cl=n);if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Dl&&(Dl=5)}function xc(e,t,n){var r=yt,i=Al.transition;try{Al.transition=null,yt=1,function(e,t,n,r){do{Sc()}while(null!==Yl);if(6&Rl)throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===Ll&&(Cl=Ll=null,Pl=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Kl||(Kl=!0,Lc(tt,function(){return Sc(),null})),s=!!(15990&n.flags),15990&n.subtreeFlags||s){s=Al.transition,Al.transition=null;var o=yt;yt=1;var l=Rl;Rl|=4,_l.current=null,function(e,t){if(ei=Gt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(e){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,1028&t.subtreeFlags&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=t.stateNode.containerInfo;1===E.nodeType?E.textContent="":9===E.nodeType&&E.documentElement&&E.removeChild(E.documentElement);break;default:throw Error(a(163))}}catch(e){kc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Xe(),Rl=l,yt=o,Al.transition=s}else e.current=n;if(Kl&&(Kl=!1,Yl=e,ql=i),0===(s=e.pendingLanes)&&(Wl=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Hl,Hl=null,e;!!(1&ql)&&0!==e.tag&&Sc(),1&(s=e.pendingLanes)?e===Ql?Xl++:(Xl=0,Ql=e):Xl=0,zi()}(e,t,n,r)}finally{Al.transition=i,yt=r}return null}function Sc(){if(null!==Yl){var e=Et(ql),t=Al.transition,n=yt;try{if(Al.transition=null,yt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,ql=0,6&Rl)throw Error(a(331));var i=Rl;for(Rl|=4,Jo=e.current;null!==Jo;){var s=Jo,o=s.child;if(16&Jo.flags){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var d=Jo;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Jo=h;else for(;null!==Jo;){var f=(d=Jo).sibling,p=d.return;if(al(d),d===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=s}}if(2064&s.subtreeFlags&&null!==o)o.return=s,Jo=o;else e:for(;null!==Jo;){if(2048&(s=Jo).flags)switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,Jo=b;break e}Jo=s.return}}var y=e.current;for(Jo=y;null!==Jo;){var E=(o=Jo).child;if(2064&o.subtreeFlags&&null!==E)E.return=o,Jo=E;else e:for(o=y;null!==Jo;){if(2048&(l=Jo).flags)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){kc(l,l.return,e)}if(l===o){Jo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Jo=x;break e}Jo=l.return}}if(Rl=i,zi(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{yt=n,Al.transition=t}}return!1}function wc(e,t,n){e=Ua(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)wc(e,e,n);else for(;null!==t;){if(3===t.tag){wc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Ua(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ll===e&&(Pl&n)===n&&(4===Dl||3===Dl&&(130023424&Pl)===Pl&&500>Qe()-$l?hc(e,0):Bl|=n),rc(e,t)}function _c(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=ec();null!==(e=Da(e,t))&&(vt(e,t,n),rc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_c(e,n)}function Rc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),_c(e,n)}function Lc(e,t){return Ke(e,t)}function Cc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Cc(e,t,n,r)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,s){var o=2;if(r=e,"function"==typeof e)Ic(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case w:return Oc(n.children,i,s,t);case k:o=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=s,e;case L:return(e=Pc(13,n,t,i)).elementType=L,e.lanes=s,e;case C:return(e=Pc(19,n,t,i)).elementType=C,e.lanes=s,e;case N:return Mc(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case A:o=9;break e;case R:o=11;break e;case P:o=14;break e;case I:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Oc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,s,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(a),e}function $c(e){if(!e)return Ai;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ii(n))return Oi(e,n,t)}return t}function zc(e,t,n,r,i,a,s,o,l){return(e=jc(n,r,!0,e,0,a,0,o,l)).context=$c(null),n=e.current,(a=Ba(r=ec(),i=tc(n))).callback=null!=t?t:null,Ua(n,a,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Vc(e,t,n,r){var i=t.current,a=ec(),s=tc(i);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ba(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ua(i,t,s))&&(nc(e,i,s,a),ja(e,i,s)),s}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}wl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Li.current)yo=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:Lo(t),fa();break;case 5:Qa(t);break;case 1:Ii(t.type)&&Mi(t);break;case 4:qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(Sa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(_i(Za,1&Za.current),null!==(e=Go(e,t,n))?e.sibling:null);_i(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return zo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Go(e,t,n)}(e,t,n);yo=!!(131072&e.flags)}else yo=!1,ia&&1048576&t.flags&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vo(e,t),e=t.pendingProps;var i=Pi(t,Ri.current);La(t,n),i=ms(null,t,r,e,i,n);var s=gs();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ma(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Ro(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),Eo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Ic(e)?1:0;if(null!=e){if((e=e.$$typeof)===R)return 11;if(e===P)return 14}return 2}(r),e=to(r,e),i){case 0:t=_o(null,t,r,e,n);break e;case 1:t=Ao(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=So(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,_o(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Lo(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,Fa(e,t),za(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Co(e,t,r,n,i=lo(Error(a(423)),t));break e}if(r!==i){t=Co(e,t,r,n,i=lo(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=Go(e,t,n);break e}Eo(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),null===e&&ca(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(t.flags|=32),To(e,t),Eo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fo(e,t,n);case 4:return qa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ea(t,null,r,n):Eo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return Eo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Eo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,_i(Sa,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!Li.current){t=Go(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Ba(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ra(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ra(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}Eo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,La(t,n),r=r(i=Ca(i)),t.flags|=1,Eo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),So(e,t,r,i=to(r.type,i),n);case 15:return wo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Vo(e,t),t.tag=1,Ii(r)?(e=!0,Mi(t)):e=!1,La(t,n),ao(t,r,i),oo(t,r,i,n),Ro(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return ko(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"==typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function qc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"==typeof i){var o=i;i=function(){var e=Gc(s);o.call(e)}}Vc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=Gc(s);a.call(e)}}var s=zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=Gc(l);o.call(e)}}var l=jc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc(function(){Vc(t,l,n,r)}),l}(n,t,e,i,r);return Gc(s)}qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vc(e,t,null,null)},qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Vc(null,e,null,null)}),t[pi]=null}},qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Qe()),!(6&Rl)&&(zl=Qe()+500,zi()))}break;case 13:uc(function(){var t=Da(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},St=function(e){if(13===e.tag){var t=Da(e,134217728);null!==t&&nc(t,e,134217728,ec()),Wc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),n=Da(e,t);null!==n&&nc(n,e,t,ec()),Wc(e,t)}},kt=function(){return yt},Tt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(a(90));K(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Re=cc,Le=uc;var eu={usingClientEntryPoint:!1,Events:[yi,Ei,xi,_e,Ae,cc]},tu={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Kc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Kc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,s,o),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new qc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2686:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,".radio-detail-container {\n  max-width: 1000px;\n  margin: auto;\n  padding: 2rem;\n}\n\n.radio-header {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1.5rem;\n  align-items: center;\n}\n\n.cover-image {\n  width: 300px;\n  height: auto;\n  border-radius: 10px;\n  object-fit: cover;\n}\n\n.radio-info {\n  flex: 1;\n}\n\n.logo {\n  width: 100px;\n  margin-top: 1rem;\n}\n\n.stream-section {\n  margin: 2rem 0;\n}\n\n.actions {\n  margin-bottom: 2rem;\n}\n\n.actions button {\n  margin-right: 1rem;\n  padding: 0.5rem 1rem;\n  font-weight: bold;\n  cursor: pointer;\n}\n\n.playlist-section,\n.submission-section {\n  margin-top: 2rem;\n  background: #f6f6f6;\n  padding: 1rem;\n  border-radius: 8px;\n}\n",""]);const o=s},2694:(e,t,n)=>{"use strict";var r=n(6925);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2747:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,"/* Squad Finder Styles */\n.squad-finder-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 30px;\n  background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);\n  min-height: 100vh;\n  color: white;\n  font-family: 'Arial', sans-serif;\n}\n\n.squad-header {\n  font-size: 1.8rem;\n  color: #4a9eff;\n  text-align: center;\n  margin-bottom: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n\n/* Squad Card */\n.squad-card {\n  background: rgba(26, 26, 46, 0.8);\n  border: 1px solid #4a9eff;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 20px;\n  transition: all 0.3s ease;\n}\n\n.squad-card:hover {\n  border-color: #6fcaff;\n  background: rgba(35, 35, 58, 0.9);\n}\n\n/* Platform Tags */\n.platform-tag {\n  display: inline-block;\n  background: rgba(255, 255, 255, 0.05);\n  color: #cccccc;\n  padding: 4px 10px;\n  margin-right: 6px;\n  margin-top: 6px;\n  border-radius: 15px;\n  font-size: 12px;\n  border: 1px solid #4a9eff;\n}\n\n/* Join Button */\n.join-squad-btn {\n  background: #ff6b35;\n  color: white;\n  border: none;\n  padding: 10px 16px;\n  border-radius: 8px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: background 0.3s ease;\n  margin-top: 15px;\n}\n\n.join-squad-btn:hover {\n  background: #e55a2b;\n}\n\n.squad-header-text {\n  color: #4a9eff;\n}\n\n.squad-name {\n  color: #ffffff;\n}\n",""]);const o=s},2833:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<a.length;l++){var c=a[l];if(!o(c))return!1;var u=e[c],d=t[c];if(!1===(i=n?n.call(r,u,d,c):void 0)||void 0===i&&u!==d)return!1}return!0}},3573:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,'.chat-modal {\n  position: fixed;\n  bottom: 0;\n  right: 20px;\n  width: 420px;\n  height: 600px;\n  background: #fff;\n  border-radius: 16px 16px 0 0;\n  box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  z-index: 1000;\n  border-top: 4px solid #FF6600;\n}\n\n.chat-header {\n  background: #111;\n  color: #fff;\n  padding: 14px 16px;\n  font-weight: bold;\n  font-size: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.chat-header button {\n  background: transparent;\n  border: none;\n  color: white;\n  font-size: 20px;\n  cursor: pointer;\n}\n\n.chat-body {\n  flex: 1;\n  padding: 16px;\n  overflow-y: auto;\n  background: #f5f5f5;\n}\n\n.chat-message {\n  max-width: 75%;\n  margin-bottom: 12px;\n  padding: 10px 12px;\n  border-radius: 12px;\n  line-height: 1.4;\n  word-wrap: break-word;\n  font-size: 14px;\n}\n\n.chat-message.sent {\n  background-color: #DCF8C6;\n  align-self: flex-end;\n  margin-left: auto;\n}\n\n.chat-message.received {\n  background-color: #fff;\n  border: 1px solid #ddd;\n  align-self: flex-start;\n}\n\n.chat-input {\n  display: flex;\n  flex-direction: column;\n  padding: 12px 16px;\n  border-top: 1px solid #ddd;\n  background: white;\n}\n\n.chat-input input[type="text"] {\n  padding: 10px;\n  margin-top: 10px;\n  border-radius: 8px;\n  border: 1px solid #ccc;\n  width: 100%;\n}\n\n.chat-input input[type="file"] {\n  border: none;\n  font-size: 14px;\n}\n\n.chat-input button {\n  margin-top: 10px;\n  padding: 10px;\n  background-color: #FF6600;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: bold;\n}\n',""]);const o=s},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3963:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,".artist-dashboard {\n  padding: 30px;\n  max-width: 900px;\n  margin: 0 auto;\n  color: #1e293b;\n  font-family: 'Inter', sans-serif;\n  background-color: #ffffff;\n}\n\n.artist-dashboard h1 {\n  font-size: 2rem;\n  margin-bottom: 25px;\n  color: #0f172a;\n}\n\n.artist-section {\n  background: #f8fafc;\n  padding: 20px 30px;\n  border-radius: 12px;\n  margin-bottom: 30px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.artist-section h2 {\n  font-size: 1.3rem;\n  color: #0f172a;\n  margin-bottom: 10px;\n}\n\n.station-form input {\n  width: 100%;\n  padding: 10px;\n  border-radius: 8px;\n  margin-top: 10px;\n  border: 1px solid #cbd5e1;\n}\n\n.station-form button,\n.add-track-form button,\n.video-upload-btn {\n  margin-top: 10px;\n  padding: 10px 16px;\n  background-color: #3b82f6;\n  color: #fff;\n  border: none;\n  border-radius: 6px;\n  font-weight: bold;\n  cursor: pointer;\n}\n\n.station-form button:disabled,\n.add-track-form button:disabled,\n.video-upload-btn:disabled {\n  background-color: #94a3b8;\n  cursor: not-allowed;\n}\n\n.station-info {\n  margin-bottom: 15px;\n}\n\n.track-list {\n  list-style: none;\n  padding: 0;\n  margin-top: 10px;\n}\n\n.track-list li {\n  margin-bottom: 16px;\n  padding: 12px;\n  background-color: #0f172a;\n  color: #e2e8f0;\n  border-radius: 8px;\n}\n\n.track-list audio {\n  display: block;\n  margin: 8px 0;\n}\n\n.empty-state {\n  font-style: italic;\n  color: #64748b;\n}\n\n.add-track-form {\n  display: flex;\n  flex-direction: column;\n}\n\n.add-track-form select {\n  padding: 10px;\n  border-radius: 8px;\n  margin-bottom: 10px;\n  border: 1px solid #cbd5e1;\n}\n\n.video-distribution-center {\n  background: #f1f5f9;\n  border-radius: 12px;\n  padding: 20px;\n  margin-top: 30px;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.05);\n}\n\n.video-distribution-center h2 {\n  margin-bottom: 10px;\n  color: #1e293b;\n}\n\n.distribution-option {\n  margin-top: 15px;\n  padding: 15px;\n  background: #e0f2fe;\n  border-left: 6px solid #3b82f6;\n  border-radius: 8px;\n}\n\n.video-actions {\n  margin-top: 10px;\n}\n\n.video-upload-btn,\n.video-info-btn {\n  margin-right: 10px;\n  padding: 8px 14px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 600;\n}\n\n.video-upload-btn {\n  background-color: #3b82f6;\n  color: white;\n}\n\n.video-info-btn {\n  background-color: #f1f5f9;\n  color: #0f172a;\n  border: 1px solid #cbd5e1;\n}\n\n.artist-stats {\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  gap: 20px;\n  margin-bottom: 30px;\n}\n\n.stat-card {\n  flex: 1 1 calc(25% - 20px);\n  background: #f1f5f9;\n  padding: 20px;\n  border-radius: 12px;\n  text-align: center;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n}\n\n.stat-card h3 {\n  font-size: 1rem;\n  margin-bottom: 8px;\n  color: #334155;\n}\n\n.stat-card p {\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: #0f172a;\n}\n\n.stats-row {\n  display: flex;\n  gap: 20px;\n  margin-bottom: 30px;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n\n.stat-card {\n  flex: 1 1 200px;\n  background-color: #f1f5f9;\n  border-radius: 12px;\n  padding: 20px;\n  text-align: center;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);\n  min-width: 180px;\n}\n\n.stat-card h3 {\n  margin: 0;\n  font-size: 1rem;\n  color: #334155;\n}\n\n.stat-card p {\n  font-size: 1.2rem;\n  font-weight: bold;\n  margin-top: 5px;\n  color: #0f172a;\n}\n",""]);const o=s},4140:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,"/* Main Sidebar Container */\n.sidebar {\n    width: 250px;\n    height: 100vh;\n    background-color: #004080;\n    position: fixed;\n    top: 45px;\n    left: 0;\n    overflow-y: auto;\n    z-index: 1000;\n    padding-top: 60px; /* Match navbar height */\n    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);\n}\n\n\n\n/* Sidebar Header */\n.sidebar h3 {\n  padding: 15px;\n  margin-bottom: 20px;\n  color: white; /* White text for contrast */\n  border-bottom: 1px solid #FF6600; /* Orange Highlight */\n}\n\n/* Navigation Links */\n.sidebar .nav-link {\n  padding: 10px 15px;\n  color: white; /* White text */\n  transition: all 0.3s;\n  border-radius: 4px;\n  margin-bottom: 5px;\n  display: block;\n}\n\n/* Hover Effect */\n.sidebar .nav-link:hover {\n  background-color: #FF6600; /* Orange highlight */\n  color: white;\n}\n\n/* Active Link */\n.sidebar .nav-link.active {\n  background-color: #FF6600; /* Orange for active link */\n  color: white;\n  font-weight: bold;\n}\n\n/* Sidebar Section Headers */\n.sidebar h4 {\n  font-size: 14px;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  color: #FFAA33; /* Softer orange for section headers */\n  padding: 10px 15px;\n  margin-top: 15px;\n}\n\n/* Main Content Adjustments */\n.main-content {\n  margin-left: 250px; /* Same as sidebar width */\n  padding: 20px;\n  min-height: 100vh;\n  transition: margin-left 0.3s;\n}\n\n/* Responsive Sidebar */\n@media (max-width: 768px) {\n  .sidebar {\n      width: 0;\n      transition: width 0.3s;\n  }\n  \n  .sidebar.expanded {\n      width: 250px;\n  }\n  \n  .main-content {\n      margin-left: 0;\n  }\n  \n  .main-content.sidebar-expanded {\n      margin-left: 250px;\n  }\n}\n",""]);const o=s},4373:e=>{e.exports=function(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},4633:(e,t,n)=>{var r=n(5172),i=n(6993),a=n(5869),s=n(887),o=n(1791),l=n(4373),c=n(579);function u(){"use strict";var t=i(),n=t.m(u),d=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function h(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))}var f={throw:1,return:2,break:3,continue:3};function p(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,f[e],t)},delegateYield:function(e,i,a){return t.resultName=i,n(r.d,c(e),a)},finish:function(e){return n(r.f,e)}},n=function(e,n,i){r.p=t.prev,r.n=t.next;try{return e(n,i)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(e.exports=u=function(){return{wrap:function(e,n,r,i){return t.w(p(e),n,r,i&&i.reverse())},isGeneratorFunction:h,mark:t.m,awrap:function(e,t){return new r(e,t)},AsyncIterator:o,async:function(e,t,n,r,i){return(h(t)?s:a)(p(e),t,n,r,i)},keys:l,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},4664:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,"/* Artist Profile Styles */\n.artist-profile-container {\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 20px;\n  background: linear-gradient(135deg, #1a0033 0%, #330066 50%, #4d0099 100%);\n  min-height: 100vh;\n  color: white;\n  font-family: 'Arial', sans-serif;\n}\n\n/* Profile Mode Toggle */\n.profile-mode-toggle {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n  margin-bottom: 30px;\n  padding: 20px 0;\n}\n\n.mode-toggle-btn {\n  padding: 12px 24px;\n  border: 2px solid #9c27b0;\n  border-radius: 25px;\n  background: transparent;\n  color: #9c27b0;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 16px;\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mode-toggle-btn:hover {\n  background: rgba(156, 39, 176, 0.1);\n  transform: translateY(-2px);\n  color: #9c27b0;\n  text-decoration: none;\n}\n\n.mode-toggle-btn.active {\n  background: #9c27b0;\n  color: white;\n  box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);\n}\n\n/* Artist Hero Section */\n.artist-hero-section {\n  margin-bottom: 30px;\n}\n\n.artist-cover-photo {\n  background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), \n              linear-gradient(135deg, #9c27b0, #e91e63, #ff5722);\n  height: 400px;\n  border-radius: 15px;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 8px 32px rgba(156, 39, 176, 0.3);\n}\n\n.artist-overlay {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 40px;\n  display: flex;\n  align-items: flex-end;\n  gap: 30px;\n  background: linear-gradient(transparent, rgba(0,0,0,0.8));\n}\n\n.artist-avatar {\n  position: relative;\n  width: 150px;\n  height: 150px;\n  flex-shrink: 0;\n}\n\n.artist-avatar img {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  border: 4px solid #9c27b0;\n  object-fit: cover;\n  box-shadow: 0 0 30px rgba(156, 39, 176, 0.5);\n}\n\n.verified-badge {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n  background: #2196f3;\n  color: white;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  font-size: 16px;\n  border: 2px solid white;\n}\n\n.artist-info {\n  flex: 1;\n}\n\n.artist-name {\n  font-size: 3rem;\n  font-weight: bold;\n  margin: 0 0 10px 0;\n  text-shadow: 2px 2px 4px rgba(0,0,0,0.8);\n  background: linear-gradient(45deg, #9c27b0, #e91e63);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.artist-genre {\n  font-size: 1.2rem;\n  color: #e91e63;\n  margin: 0 0 15px 0;\n  text-shadow: 1px 1px 2px rgba(0,0,0,0.8);\n}\n\n.artist-stats-quick {\n  display: flex;\n  gap: 15px;\n  font-size: 14px;\n  color: #cccccc;\n}\n\n.artist-actions {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  align-items: flex-end;\n}\n\n.follow-btn,\n.share-btn,\n.more-btn {\n  padding: 12px 24px;\n  border: none;\n  border-radius: 25px;\n  cursor: pointer;\n  font-weight: bold;\n  transition: all 0.3s ease;\n  min-width: 120px;\n}\n\n.follow-btn {\n  background: #9c27b0;\n  color: white;\n}\n\n.follow-btn:hover {\n  background: #7b1fa2;\n  transform: translateY(-2px);\n}\n\n.share-btn {\n  background: rgba(255,255,255,0.1);\n  color: white;\n  border: 1px solid rgba(255,255,255,0.3);\n}\n\n.share-btn:hover {\n  background: rgba(255,255,255,0.2);\n}\n\n.more-btn {\n  background: transparent;\n  color: white;\n  border: 1px solid rgba(255,255,255,0.3);\n  min-width: auto;\n  padding: 8px 12px;\n}\n\n/* Navigation Tabs */\n.artist-nav-tabs {\n  display: flex;\n  gap: 5px;\n  margin-bottom: 30px;\n  background: rgba(156, 39, 176, 0.1);\n  padding: 5px;\n  border-radius: 25px;\n  overflow-x: auto;\n}\n\n.tab-btn {\n  padding: 12px 20px;\n  background: transparent;\n  border: none;\n  color: #cccccc;\n  cursor: pointer;\n  border-radius: 20px;\n  transition: all 0.3s ease;\n  white-space: nowrap;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.tab-btn:hover {\n  background: rgba(156, 39, 176, 0.2);\n  color: #9c27b0;\n}\n\n.tab-btn.active {\n  background: #9c27b0;\n  color: white;\n  box-shadow: 0 2px 10px rgba(156, 39, 176, 0.4);\n}\n\n/* Content Grid */\n.artist-content-grid {\n  display: grid;\n  grid-template-columns: 1fr 350px;\n  gap: 30px;\n  margin-bottom: 30px;\n}\n\n/* Main Content */\n.artist-main-content {\n  background: rgba(156, 39, 176, 0.1);\n  border-radius: 12px;\n  padding: 25px;\n  border: 1px solid rgba(156, 39, 176, 0.3);\n}\n\n.latest-release {\n  margin-bottom: 40px;\n}\n\n.latest-release h2,\n.tracks-section h2,\n.albums-section h2 {\n  color: #9c27b0;\n  margin-bottom: 20px;\n  font-size: 1.5rem;\n  border-bottom: 2px solid #9c27b0;\n  padding-bottom: 10px;\n}\n\n.featured-track {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  background: rgba(255,255,255,0.05);\n  padding: 20px;\n  border-radius: 12px;\n  border: 1px solid rgba(156, 39, 176, 0.2);\n}\n\n.featured-track img {\n  width: 80px;\n  height: 80px;\n  border-radius: 8px;\n  object-fit: cover;\n}\n\n.track-info {\n  flex: 1;\n}\n\n.track-info h3 {\n  margin: 0 0 5px 0;\n  color: white;\n}\n\n.track-info p {\n  margin: 0 0 10px 0;\n  color: #cccccc;\n  font-size: 14px;\n}\n\n.track-stats {\n  display: flex;\n  gap: 15px;\n  font-size: 12px;\n  color: #999;\n}\n\n.play-btn {\n  background: #9c27b0;\n  color: white;\n  border: none;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 18px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.play-btn:hover {\n  background: #7b1fa2;\n  transform: scale(1.1);\n}\n\n/* Tracks Section */\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.upload-btn,\n.upload-first-btn {\n  background: #e91e63;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n  text-decoration: none;\n  font-weight: 500;\n  transition: all 0.3s ease;\n}\n\n.upload-btn:hover,\n.upload-first-btn:hover {\n  background: #c2185b;\n  transform: translateY(-2px);\n  color: white;\n  text-decoration: none;\n}\n\n.tracks-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.track-item {\n  display: grid;\n  grid-template-columns: 30px 60px 1fr auto auto 50px;\n  gap: 15px;\n  align-items: center;\n  padding: 12px;\n  background: rgba(255,255,255,0.05);\n  border-radius: 8px;\n  transition: all 0.3s ease;\n}\n\n.track-item:hover {\n  background: rgba(156, 39, 176, 0.1);\n  transform: translateX(5px);\n}\n\n.track-number {\n  color: #999;\n  font-size: 14px;\n  text-align: center;\n}\n\n.track-artwork {\n  width: 50px;\n  height: 50px;\n  border-radius: 6px;\n  object-fit: cover;\n}\n\n.track-details h4 {\n  margin: 0 0 5px 0;\n  color: white;\n  font-size: 16px;\n}\n\n.track-details p {\n  margin: 0;\n  color: #999;\n  font-size: 14px;\n}\n\n.track-plays,\n.track-duration {\n  color: #999;\n  font-size: 14px;\n}\n\n.track-play-btn {\n  background: transparent;\n  border: 1px solid #9c27b0;\n  color: #9c27b0;\n  width: 35px;\n  height: 35px;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.track-play-btn:hover {\n  background: #9c27b0;\n  color: white;\n}\n\n.no-tracks {\n  text-align: center;\n  padding: 60px 20px;\n  color: #666;\n}\n\n.no-tracks p {\n  font-size: 18px;\n  margin-bottom: 20px;\n}\n\n/* Albums Section */\n.albums-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 20px;\n}\n\n.album-card {\n  background: rgba(255,255,255,0.05);\n  border-radius: 12px;\n  padding: 15px;\n  text-align: center;\n  transition: all 0.3s ease;\n  border: 1px solid rgba(156, 39, 176, 0.2);\n}\n\n.album-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 25px rgba(156, 39, 176, 0.3);\n}\n\n.album-card img {\n  width: 100%;\n  aspect-ratio: 1;\n  border-radius: 8px;\n  object-fit: cover;\n  margin-bottom: 10px;\n}\n\n.album-card h4 {\n  margin: 0 0 5px 0;\n  color: white;\n}\n\n.album-card p {\n  margin: 0;\n  color: #999;\n  font-size: 14px;\n}\n\n/* Sidebar */\n.artist-sidebar {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.artist-bio-card,\n.social-links-card,\n.artist-tools-card,\n.recent-activity-card {\n  background: rgba(156, 39, 176, 0.1);\n  border-radius: 12px;\n  padding: 20px;\n  border: 1px solid rgba(156, 39, 176, 0.3);\n}\n\n.artist-bio-card h3,\n.social-links-card h3,\n.artist-tools-card h3,\n.recent-activity-card h3 {\n  color: #9c27b0;\n  margin-bottom: 15px;\n  margin-top: 0;\n  font-size: 18px;\n}\n\n.artist-bio-card p {\n  color: #cccccc;\n  line-height: 1.6;\n  margin-bottom: 15px;\n}\n\n.artist-details p {\n  margin: 8px 0;\n  color: #cccccc;\n  font-size: 14px;\n}\n\n.artist-details strong {\n  color: #e91e63;\n}\n\n.artist-details a {\n  color: #9c27b0;\n  text-decoration: none;\n}\n\n.artist-details a:hover {\n  text-decoration: underline;\n}\n\n/* Social Links */\n.social-links-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 10px;\n}\n\n.social-link {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 12px;\n  background: rgba(255,255,255,0.05);\n  border-radius: 8px;\n  color: #cccccc;\n  text-decoration: none;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.3s ease;\n  border: 1px solid rgba(255,255,255,0.1);\n}\n\n.social-link:hover {\n  background: rgba(156, 39, 176, 0.2);\n  color: #9c27b0;\n  text-decoration: none;\n  transform: translateY(-2px);\n}\n\n.social-link.spotify:hover { background: rgba(30, 215, 96, 0.2); color: #1ed760; }\n.social-link.apple:hover { background: rgba(252, 61, 57, 0.2); color: #fc3d39; }\n.social-link.youtube:hover { background: rgba(255, 0, 0, 0.2); color: #ff0000; }\n.social-link.instagram:hover { background: rgba(225, 48, 108, 0.2); color: #e1306c; }\n\n/* Artist Tools */\n.tools-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.tool-btn {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 12px 15px;\n  background: rgba(255,255,255,0.05);\n  border: 1px solid rgba(156, 39, 176, 0.2);\n  border-radius: 8px;\n  color: #cccccc;\n  text-decoration: none;\n  font-size: 14px;\n  transition: all 0.3s ease;\n}\n\n.tool-btn:hover {\n  background: rgba(156, 39, 176, 0.2);\n  border-color: #9c27b0;\n  color: #9c27b0;\n  text-decoration: none;\n  transform: translateX(5px);\n}\n\n/* Recent Activity */\n.activity-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.activity-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 10px;\n  background: rgba(255,255,255,0.05);\n  border-radius: 8px;\n}\n\n.activity-item span:first-child {\n  font-size: 20px;\n  flex-shrink: 0;\n}\n\n.activity-item div {\n  flex: 1;\n}\n\n.activity-item p {\n  margin: 0 0 2px 0;\n  color: #cccccc;\n  font-size: 14px;\n}\n\n.activity-item small {\n  color: #999;\n  font-size: 12px;\n}\n\n/* Edit Profile Section */\n.edit-profile-section {\n  text-align: center;\n  margin-top: 40px;\n}\n\n.edit-profile-btn {\n  background: #9c27b0;\n  color: white;\n  border: none;\n  padding: 15px 30px;\n  border-radius: 8px;\n  font-size: 16px;\n  font-weight: bold;\n  text-decoration: none;\n  transition: all 0.3s ease;\n  display: inline-block;\n}\n\n.edit-profile-btn:hover {\n  background: #7b1fa2;\n  transform: translateY(-2px);\n  color: white;\n  text-decoration: none;\n  box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);\n}\n\n/* Responsive Design */\n@media (max-width: 1024px) {\n  .artist-content-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .artist-sidebar {\n    order: -1;\n  }\n  \n  .artist-overlay {\n    flex-direction: column;\n    text-align: center;\n    gap: 20px;\n  }\n  \n  .artist-name {\n    font-size: 2.5rem;\n  }\n}\n\n@media (max-width: 768px) {\n  .artist-hero-section {\n    margin-bottom: 20px;\n  }\n  \n  .artist-cover-photo {\n    height: 300px;\n  }\n  \n  .artist-overlay {\n    padding: 20px;\n  }\n  \n  .artist-avatar {\n    width: 100px;\n    height: 100px;\n  }\n  \n  .artist-name {\n    font-size: 2rem;\n  }\n  \n  .artist-nav-tabs {\n    flex-wrap: wrap;\n  }\n  \n  .track-item {\n    grid-template-columns: 40px 1fr auto;\n    gap: 10px;\n  }\n  \n  .track-number,\n  .track-plays,\n  .track-duration {\n    display: none;\n  }\n  \n  .albums-grid {\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  }\n  \n  .social-links-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .mode-toggle-btn {\n    font-size: 14px;\n    padding: 10px 18px;\n  }\n}\n\n/* Custom Scrollbar */\n.artist-profile-container::-webkit-scrollbar {\n  width: 8px;\n}\n\n.artist-profile-container::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 4px;\n}\n\n.artist-profile-container::-webkit-scrollbar-thumb {\n  background: #9c27b0;\n  border-radius: 4px;\n}\n\n.artist-profile-container::-webkit-scrollbar-thumb:hover {\n  background: #7b1fa2;\n}",""]);const o=s},4756:(e,t,n)=>{var r=n(4633)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},4857:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,'/* Gamer Profile Specific Styles */\n.gamer-profile {\n  background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);\n  color: #ffffff;\n  min-height: 100vh;\n}\n\n/* Profile Mode Toggle */\n.profile-mode-toggle {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n  margin-bottom: 20px;\n  padding: 20px 0;\n}\n\n.mode-toggle-btn {\n  padding: 12px 24px;\n  border: 2px solid #4a9eff;\n  border-radius: 25px;\n  background: transparent;\n  color: #4a9eff;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 16px;\n}\n\n.mode-toggle-btn:hover {\n  background: rgba(74, 158, 255, 0.1);\n  transform: translateY(-2px);\n}\n\n.mode-toggle-btn.active {\n  background: #4a9eff;\n  color: #0f0f23;\n  box-shadow: 0 4px 15px rgba(74, 158, 255, 0.4);\n}\n\n/* Gaming Cover Photo */\n.gaming-cover {\n  background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 30%, #16213e 60%, #4a9eff 100%);\n  height: 300px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  border-radius: 15px;\n  margin-bottom: 30px;\n  box-shadow: 0 8px 32px rgba(74, 158, 255, 0.3);\n}\n\n.gaming-overlay {\n  text-align: center;\n  z-index: 2;\n}\n\n.gaming-overlay h1 {\n  font-size: 3rem;\n  font-weight: bold;\n  margin-bottom: 10px;\n  text-shadow: 2px 2px 4px rgba(0,0,0,0.8);\n  background: linear-gradient(45deg, #4a9eff, #00ff88);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.gaming-overlay p {\n  font-size: 1.2rem;\n  color: #cccccc;\n  text-shadow: 1px 1px 2px rgba(0,0,0,0.8);\n}\n\n/* Gamer Avatar Section */\n.gamer-avatar {\n  border: 4px solid #4a9eff;\n  box-shadow: 0 0 20px rgba(74, 158, 255, 0.5);\n}\n\n.gamer-tag {\n  color: #4a9eff !important;\n  font-size: 1.5rem !important;\n  text-shadow: 0 0 10px rgba(74, 158, 255, 0.5);\n}\n\n.gamer-rank {\n  color: #00ff88;\n  font-weight: bold;\n  margin: 5px 0;\n}\n\n.gamer-actions {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.invite-btn {\n  background: #ff6b35 !important;\n  border: none !important;\n}\n\n.invite-btn:hover {\n  background: #e55a2b !important;\n}\n\n/* Gaming Stats Cards */\n.gamer-bio-card {\n  background: rgba(26, 26, 46, 0.8) !important;\n  border: 1px solid #4a9eff;\n  color: white !important;\n}\n\n.gamer-bio-card label {\n  color: #4a9eff !important;\n}\n\n.gaming-stats {\n  background: rgba(26, 26, 46, 0.8) !important;\n  border: 1px solid #00ff88;\n  color: white !important;\n}\n\n.gaming-stats h4 {\n  color: #00ff88 !important;\n}\n\n.gaming-status-card {\n  flex: 0 0 320px;\n  background: rgba(26, 26, 46, 0.8);\n  padding: 20px;\n  border-radius: 8px;\n  border: 1px solid #ff6b35;\n  color: white;\n  height: fit-content;\n}\n\n.gaming-status-card h4 {\n  color: #ff6b35;\n  margin-bottom: 15px;\n  margin-top: 0;\n  font-size: 18px;\n}\n\n.timezone-region {\n  margin-top: 15px;\n}\n\n.timezone-region input {\n  width: 100%;\n  margin-bottom: 10px;\n  padding: 8px;\n  border: 1px solid #4a9eff;\n  border-radius: 5px;\n  background: rgba(255,255,255,0.1);\n  color: white;\n}\n\n.timezone-region input::placeholder {\n  color: #cccccc;\n}\n\n/* Gaming Information Grid */\n.gaming-info-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n  gap: 25px;\n  margin-bottom: 30px;\n}\n\n.gaming-card {\n  background: rgba(26, 26, 46, 0.9);\n  border: 1px solid #4a9eff;\n  border-radius: 12px;\n  padding: 25px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\n  transition: transform 0.3s ease;\n}\n\n.gaming-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 25px rgba(74, 158, 255, 0.2);\n}\n\n.gaming-card h3 {\n  color: #4a9eff;\n  margin-bottom: 20px;\n  font-size: 1.3rem;\n  border-bottom: 2px solid #4a9eff;\n  padding-bottom: 10px;\n}\n\n.info-section {\n  margin-bottom: 20px;\n}\n\n.info-section label {\n  display: block;\n  font-weight: bold;\n  color: #00ff88;\n  margin-bottom: 8px;\n  font-size: 14px;\n}\n\n.info-section p {\n  margin: 0;\n  color: #cccccc;\n  font-size: 14px;\n  line-height: 1.4;\n}\n\n.info-section input,\n.info-section select,\n.info-section textarea {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #4a9eff;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n  font-size: 14px;\n  margin-bottom: 10px;\n  box-sizing: border-box;\n}\n\n.info-section input::placeholder,\n.info-section textarea::placeholder {\n  color: #999;\n}\n\n.info-section select {\n  cursor: pointer;\n}\n\n/* Platform Tags */\n.platform-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.platform-tag {\n  background: #4a9eff;\n  color: white;\n  padding: 4px 12px;\n  border-radius: 15px;\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.platform-checkboxes {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 10px;\n  margin-top: 8px;\n}\n\n.platform-checkbox {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #cccccc;\n  cursor: pointer;\n  font-size: 14px;\n}\n\n.platform-checkbox input[type="checkbox"] {\n  width: auto;\n  margin: 0;\n}\n\n/* Games List */\n.games-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 15px;\n}\n\n.game-tag {\n  background: #00ff88;\n  color: #0f0f23;\n  padding: 6px 12px;\n  border-radius: 15px;\n  font-size: 12px;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.game-tag button {\n  background: none;\n  border: none;\n  color: #0f0f23;\n  font-weight: bold;\n  cursor: pointer;\n  font-size: 14px;\n  padding: 0;\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.add-game {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n}\n\n.add-game input {\n  flex: 1;\n}\n\n.add-game button {\n  background: #4a9eff;\n  color: white;\n  border: none;\n  padding: 10px 15px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  white-space: nowrap;\n}\n\n.add-game button:hover {\n  background: #3a8eef;\n}\n\n/* Tag Grid for Multiple Selection */\n.tag-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.tag-btn {\n  padding: 8px 12px;\n  border: 2px solid #666;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.05);\n  color: #cccccc;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  text-align: center;\n  min-height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.tag-btn:hover:not(:disabled) {\n  border-color: #4a9eff;\n  background: rgba(74, 158, 255, 0.1);\n  color: #4a9eff;\n}\n\n.tag-btn.active {\n  border-color: #4a9eff;\n  background: #4a9eff;\n  color: white;\n  box-shadow: 0 2px 8px rgba(74, 158, 255, 0.3);\n}\n\n.tag-btn:disabled {\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n\n/* Save Section */\n.save-section {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-top: 30px;\n  padding: 20px;\n}\n\n.gamer-save {\n  background: #4a9eff !important;\n  color: white !important;\n  padding: 12px 24px !important;\n  font-size: 16px !important;\n  border-radius: 8px !important;\n  border: none !important;\n  cursor: pointer !important;\n  font-weight: bold !important;\n  transition: all 0.3s ease !important;\n}\n\n.gamer-save:hover {\n  background: #3a8eef !important;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(74, 158, 255, 0.4);\n}\n\n.btn-secondary {\n  background: #666 !important;\n  color: white !important;\n  padding: 12px 24px !important;\n  font-size: 16px !important;\n  border-radius: 8px !important;\n  border: none !important;\n  cursor: pointer !important;\n  transition: all 0.3s ease !important;\n}\n\n.btn-secondary:hover {\n  background: #555 !important;\n}\n\n/* Loading Container */\n.loading-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 400px;\n  color: #4a9eff;\n  font-size: 18px;\n}\n\n/* Redirect Message */\n.redirect-message {\n  text-align: center;\n  padding: 60px 20px;\n  background: rgba(26, 26, 46, 0.8);\n  border-radius: 12px;\n  border: 1px solid #4a9eff;\n}\n\n.redirect-message h2 {\n  color: #4a9eff;\n  margin-bottom: 15px;\n}\n\n.redirect-message p {\n  color: #cccccc;\n  margin-bottom: 25px;\n}\n\n.redirect-message .btn {\n  background: #4a9eff;\n  color: white;\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  text-decoration: none;\n  font-weight: bold;\n  transition: all 0.3s ease;\n}\n\n.redirect-message .btn:hover {\n  background: #3a8eef;\n  transform: translateY(-2px);\n}\n\n/* Responsive Design */\n@media (max-width: 1024px) {\n  .gaming-info-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .mode-toggle-btn {\n    font-size: 14px;\n    padding: 10px 18px;\n  }\n  \n  .gaming-overlay h1 {\n    font-size: 2.5rem;\n  }\n}\n\n@media (max-width: 768px) {\n  .gaming-cover {\n    height: 200px;\n  }\n  \n  .gaming-overlay h1 {\n    font-size: 2rem;\n  }\n  \n  .gaming-overlay p {\n    font-size: 1rem;\n  }\n  \n  .tag-grid {\n    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  }\n  \n  .platform-checkboxes {\n    grid-template-columns: 1fr;\n  }\n  \n  .save-section {\n    flex-direction: column;\n    align-items: center;\n  }\n  \n  .mode-toggle-btn {\n    font-size: 12px;\n    padding: 8px 16px;\n  }\n}',""]);const o=s},5056:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},5072:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},s=[],o=0;o<e.length;o++){var l=e[o],c=r.base?l[0]+r.base:l[0],u=a[c]||0,d="".concat(c," ").concat(u);a[c]=u+1;var h=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(f);else{var p=i(f,r);r.byIndex=o,t.splice(o,0,{identifier:d,updater:p,references:1})}s.push(d)}return s}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var o=n(a[s]);t[o].references--}for(var l=r(e,i),c=0;c<a.length;c++){var u=n(a[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=l}}},5172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},5176:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,".video-chat-container {\n  display: flex;\n  flex-direction: row;\n  gap: 20px;\n}\n\n.video-chat-container video {\n  max-width: 100%;\n  height: auto;\n}\n\n.chat-box {\n  max-width: 400px;\n  overflow-y: auto;\n}\n\n@media (max-width: 768px) {\n  .video-chat-container {\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .chat-box {\n    width: 100%;\n    max-width: 100%;\n  }\n}\n\n/* NEW: Live Streams Wrapper */\n.live-streams-wrapper {\n  padding: 2rem;\n  max-width: 1200px;\n  margin: auto;\n  text-align: center;\n}\n\n/* Title */\n.section-title {\n  font-size: 2.2rem;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 1.5rem;\n}\n\n/* Search input */\n.search-input {\n  width: 90%;\n  max-width: 500px;\n  padding: 0.75rem 1.25rem;\n  font-size: 1rem;\n  border-radius: 30px;\n  border: 1px solid #ccc;\n  margin-bottom: 2rem;\n}\n\n/* Horizontal scroll with buttons */\n.category-scroll {\n  display: flex;\n  overflow-x: auto;\n  gap: 0.75rem;\n  padding: 0.5rem 1rem;\n  margin-bottom: 1rem;\n  scrollbar-width: thin;\n  scrollbar-color: #888 #eee;\n  justify-content: center;\n}\n\n.category-scroll::-webkit-scrollbar {\n  height: 6px;\n}\n\n.category-scroll::-webkit-scrollbar-thumb {\n  background: #aaa;\n  border-radius: 10px;\n}\n\n.category-scroll::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n/* Category Buttons */\n.category-btn {\n  flex: 0 0 auto;\n  padding: 0.5rem 1.2rem;\n  border-radius: 30px;\n  background: #f0f0f0;\n  color: #333;\n  font-weight: 500;\n  border: none;\n  white-space: nowrap;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.category-btn:hover {\n  background: #ddd;\n}\n\n.category-btn.active {\n  background: linear-gradient(135deg, #7f00ff, #e100ff);\n  color: #fff;\n  font-weight: bold;\n}\n\n/* Stream Grid */\n.live-stream-grid {\n  display: grid;\n  gap: 1.5rem;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n}\n\n/* Individual Card */\n.live-stream-card {\n  background: #fff;\n  border: 1px solid #ddd;\n  border-radius: 15px;\n  padding: 1.25rem;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.view-link {\n  margin-top: 1rem;\n  display: inline-block;\n  color: #6a0dad;\n  font-weight: 600;\n  text-decoration: none;\n}\n\n/* Status Messages */\n.status-message {\n  margin-top: 3rem;\n  font-size: 1.2rem;\n  color: #555;\n}\n\n.status-message.error {\n  color: red;\n}\n",""]);const o=s},5287:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var E=y.prototype=new b;E.constructor=y,m(E,v.prototype),E.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:w.current}}function _(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function L(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===a?"."+R(l,0):a,x(s)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),L(s,t,i,"",function(e){return e})):null!=s&&(_(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",x(e))for(var c=0;c<e.length;c++){var u=a+R(o=e[c],c);l+=L(o,t,i,u,s)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=L(o=o.value,t,i,u=a+R(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return L(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},N={transition:null},D={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:N,ReactCurrentOwner:w};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=y,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=O,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},5546:e=>{function t(n,r,i,a){var s=Object.defineProperty;try{s({},"",{})}catch(n){s=0}e.exports=t=function(e,n,r,i){if(n)s?s(e,n,{value:r,enumerable:!i,configurable:!i,writable:!i}):e[n]=r;else{var a=function(n,r){t(e,n,function(e){return this._invoke(n,r,e)})};a("next",0),a("throw",1),a("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r,i,a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5556:(e,t,n)=>{e.exports=n(2694)()},5869:(e,t,n)=>{var r=n(887);e.exports=function(e,t,n,i,a){var s=r(e,t,n,i,a);return s.next().then(function(e){return e.done?e.value:s.next()})},e.exports.__esModule=!0,e.exports.default=e.exports},5879:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,".podcast-section {\n  margin-bottom: 40px;\n}\n\n.podcast-scroll-row {\n  display: grid;\n  grid-template-columns: repeat(6, 1fr); /* 6 per row */\n  gap: 20px;\n}\n\n.podcast-card {\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n  padding: 12px;\n  text-align: center;\n  width: 100%;         /* ✅ Make each card fill its grid column */\n  min-width: 0;         /* ✅ Prevent overflow */\n}\n\n\n.podcast-img-placeholder {\n  width: 100%;\n  height: 160px;\n  background-color: #ddd;\n  border-radius: 10px;\n  margin-bottom: 10px;\n}\n\n.podcast-title {\n  font-size: 1rem;\n  font-weight: 600;\n  margin: 6px 0 4px;\n  color: #222;\n}\n\n.podcast-label {\n  background: #ff6600;\n  color: white;\n  font-size: 0.75rem;\n  padding: 2px 6px;\n  border-radius: 6px;\n  display: inline-block;\n  margin-bottom: 6px;\n}\n\n.podcast-desc {\n  font-size: 0.85rem;\n  color: #666;\n}\n",""]);const o=s},5916:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,".upload-music-page {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: flex-start;\n\tmin-height: 100vh;\n\tbackground-color: #f4f5f7;\n\tpadding: 3rem 1rem 4rem;\n}\n\n.upload-music-card {\n\tbackground: white;\n\tpadding: 2.5rem 2rem;\n\tborder-radius: 20px;\n\tbox-shadow: 0 12px 35px rgba(0, 0, 0, 0.08);\n\twidth: 100%;\n\tmax-width: 800px;\n\ttext-align: left;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 1.2rem;\n}\n\n.upload-music-card h2 {\n\ttext-align: center;\n\tfont-size: 1.6rem;\n\tfont-weight: 700;\n\tcolor: #5c27fe;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tgap: 0.5rem;\n\tmargin-bottom: 0.5rem;\n}\n\n.upload-music-card label {\n\tfont-weight: 600;\n\tcolor: #333;\n\tfont-size: 0.95rem;\n\tmargin-bottom: 0.1rem;\n}\n\n.upload-music-card input,\n.upload-music-card textarea,\n.upload-music-card select {\n\tpadding: 0.7rem 1rem;\n\tfont-size: 1rem;\n\tborder-radius: 12px;\n\tborder: 1px solid #ddd;\n\twidth: 100%;\n\tbackground: #f8f9fb;\n\tbox-sizing: border-box;\n\ttransition: border 0.2s;\n}\n\n.upload-music-card input:focus,\n.upload-music-card textarea:focus,\n.upload-music-card select:focus {\n\tborder-color: #5c27fe;\n\toutline: none;\n}\n\n.upload-btn {\n\tmargin-top: 1rem;\n\tpadding: 0.8rem;\n\tbackground: linear-gradient(to right, #6a4ff4, #7e5bef);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 14px;\n\tcursor: pointer;\n\tfont-weight: 600;\n\tfont-size: 1rem;\n\ttransition: background 0.2s ease;\n\tbox-shadow: 0 4px 12px rgba(108, 61, 255, 0.3);\n}\n\n.upload-btn:hover {\n\tbackground: #5a42d1;\n}\n\n.upload-message {\n\tcolor: #1f883d;\n\ttext-align: center;\n\tfont-weight: 500;\n}\n",""]);const o=s},5988:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,"/* SettingsPage.css */\n\n.settings-page {\n  max-width: 900px;\n  margin: 50px auto;\n  padding: 40px;\n  background-color: #1c1c1c;\n  border-radius: 20px;\n  box-shadow: 0 0 20px rgba(0,0,0,0.4);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n}\n\n.settings-page h1 {\n  font-size: 32px;\n  margin-bottom: 40px;\n  text-align: center;\n  color: #ff4f70;\n}\n\n.settings-page h2 {\n  font-size: 22px;\n  margin-top: 40px;\n  margin-bottom: 20px;\n  border-bottom: 1px solid #333;\n  padding-bottom: 8px;\n  color: #ffd166;\n}\n\n.setting-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 15px 0;\n  padding: 12px 20px;\n  background-color: #2a2a2a;\n  border-radius: 12px;\n  transition: all 0.3s ease;\n}\n\n.setting-item:hover {\n  background-color: #333333;\n}\n\n.setting-item label {\n  font-size: 16px;\n  flex: 1;\n  color: #ccc;\n}\n\n.setting-item input[type=\"checkbox\"] {\n  transform: scale(1.4);\n  cursor: pointer;\n}\n\n.setting-item select {\n  padding: 10px 14px;\n  border-radius: 8px;\n  border: none;\n  background-color: #444;\n  color: #fff;\n  font-size: 15px;\n}\n\n.setting-item span {\n  font-weight: bold;\n  color: #ccc;\n  margin-right: 10px;\n}\n\n.setting-item button {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #ff4f70, #ff9966);\n  color: white;\n  font-weight: bold;\n  cursor: pointer;\n  transition: 0.3s ease;\n}\n\n.setting-item button:hover {\n  transform: scale(1.05);\n}\n\n.delete-button {\n  background: linear-gradient(135deg, #ff0000, #ff5f5f);\n}\n\n@media (max-width: 600px) {\n  .settings-page {\n    padding: 20px;\n  }\n  .setting-item {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  .setting-item label {\n    margin-bottom: 8px;\n  }\n}\n",""]);const o=s},6286:function(e,t,n){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function a(e,t){if(t)e:{var n=i;e=e.split(".");for(var a=0;a<e.length-1;a++){var s=e[a];if(!(s in n))break e;n=n[s]}(t=t(a=n[e=e[e.length-1]]))!=a&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function o(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function l(e){if(!(e instanceof Array)){e=o(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}a("Symbol",function(e){function t(e,t){this.h=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}}),a("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),a=0;a<n.length;a++){var o=i[n[a]];"function"==typeof o&&"function"!=typeof o.prototype[e]&&r(o.prototype,e,{configurable:!0,writable:!0,value:function(){return s(t(this))}})}return e});var c="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};a("Object.assign",function(e){return e||c});var u,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var h;e:{var f={};try{f.__proto__={a:!0},h=f.a;break e}catch(e){}h=!1}u=h?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var p=u;function m(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,p)p(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ya=t.prototype}function g(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function v(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function b(e,t){e.l={ma:t,na:!0},e.h=e.s||e.v}function y(e,t,n){return e.h=n,{value:t}}function E(e){this.h=new g,this.i=e}function x(e,t,n,r){try{var i=t.call(e.h.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.h.m=!1,i;var a=i.value}catch(t){return e.h.j=null,b(e.h,t),S(e)}return e.h.j=null,r.call(e.h,a),S(e)}function S(e){for(;e.h.h;)try{var t=e.i(e.h);if(t)return e.h.m=!1,{value:t.value,done:!1}}catch(t){e.h.i=void 0,b(e.h,t)}if(e.h.m=!1,e.h.l){if(t=e.h.l,e.h.l=null,t.na)throw t.ma;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function w(e){this.next=function(t){return v(e.h),e.h.j?t=x(e,e.h.j.next,t,e.h.u):(e.h.u(t),t=S(e)),t},this.throw=function(t){return v(e.h),e.h.j?t=x(e,e.h.j.throw,t,e.h.u):(b(e.h,t),t=S(e)),t},this.return=function(t){return function(e,t){v(e.h);var n=e.h.j;return n?x(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.h.return):(e.h.return(t),S(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function k(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,i){!function e(a){a.done?r(a.value):Promise.resolve(a.value).then(t,n).then(e,i)}(e.next())})}(new w(new E(e)))}function T(e){return e||Array.prototype.fill}g.prototype.u=function(e){this.i=e},g.prototype.return=function(e){this.l={return:e},this.h=this.v},a("Promise",function(e){function t(e){this.i=0,this.j=void 0,this.h=[],this.u=!1;var t=this.l();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.h=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.i=function(e){if(null==this.h){this.h=[];var t=this;this.j(function(){t.m()})}this.h.push(e)};var a=i.setTimeout;n.prototype.j=function(e){a(e,0)},n.prototype.m=function(){for(;this.h&&this.h.length;){var e=this.h;this.h=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.l(e)}}}this.h=null},n.prototype.l=function(e){this.j(function(){throw e})},t.prototype.l=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.I),reject:e(this.m)}},t.prototype.I=function(e){if(e===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.L(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.F(e):this.s(e)}},t.prototype.F=function(e){var t=void 0;try{t=e.then}catch(e){return void this.m(e)}"function"==typeof t?this.M(t,e):this.s(e)},t.prototype.m=function(e){this.v(2,e)},t.prototype.s=function(e){this.v(1,e)},t.prototype.v=function(e,t){if(0!=this.i)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.i);this.i=e,this.j=t,2===this.i&&this.K(),this.H()},t.prototype.K=function(){var e=this;a(function(){if(e.D()){var t=i.console;void 0!==t&&t.error(e.j)}},1)},t.prototype.D=function(){if(this.u)return!1;var e=i.CustomEvent,t=i.Event,n=i.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.j,n(e))},t.prototype.H=function(){if(null!=this.h){for(var e=0;e<this.h.length;++e)s.i(this.h[e]);this.h=null}};var s=new n;return t.prototype.L=function(e){var t=this.l();e.T(t.resolve,t.reject)},t.prototype.M=function(e,t){var n=this.l();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){a(e)}}:t}var i,a,s=new t(function(e,t){i=e,a=t});return this.T(r(e,i),r(n,a)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.T=function(e,t){function n(){switch(r.i){case 1:e(r.j);break;case 2:t(r.j);break;default:throw Error("Unexpected state: "+r.i)}}var r=this;null==this.h?s.i(n):this.h.push(n),this.u=!0},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=o(e),a=i.next();!a.done;a=i.next())r(a.value).T(t,n)})},t.all=function(e){var n=o(e),i=n.next();return i.done?r([]):new t(function(e,t){function a(t){return function(n){s[t]=n,0==--o&&e(s)}}var s=[],o=0;do{s.push(void 0),o++,r(i.value).T(a(s.length-1),t),i=n.next()}while(!i.done)})},t}),a("Array.prototype.keys",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e){return e})}}),a("Array.prototype.fill",function(e){return e||function(e,t,n){var r=this.length||0;for(0>t&&(t=Math.max(0,r+t)),(null==n||n>r)&&(n=r),0>(n=Number(n))&&(n=Math.max(0,r+n)),t=Number(t||0);t<n;t++)this[t]=e;return this}}),a("Int8Array.prototype.fill",T),a("Uint8Array.prototype.fill",T),a("Uint8ClampedArray.prototype.fill",T),a("Int16Array.prototype.fill",T),a("Uint16Array.prototype.fill",T),a("Int32Array.prototype.fill",T),a("Uint32Array.prototype.fill",T),a("Float32Array.prototype.fill",T),a("Float64Array.prototype.fill",T),a("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),a("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}}),a("String.prototype.includes",function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}});var _=this||self;function A(e,t){e=e.split(".");var n,r=_;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function R(e){var t;return(t=_.navigator)&&(t=t.userAgent)||(t=""),-1!=t.indexOf(e)}var L=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"==typeof e?e.split(""):e,a=0;a<n;a++)a in i&&(r[a]=t.call(void 0,i[a],a,e));return r},C={},P=null;function I(){if(!P){P={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));C[n]=r;for(var i=0;i<r.length;i++){var a=r[i];void 0===P[a]&&(P[a]=i)}}}}var N="undefined"!=typeof Uint8Array,D=!(R("Trident")||R("MSIE"))&&"function"==typeof _.btoa;function O(e){if(!D){var t;void 0===t&&(t=0),I(),t=C[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",i=0,a=0;i<e.length-2;i+=3){var s=e[i],o=e[i+1],l=e[i+2],c=t[s>>2];s=t[(3&s)<<4|o>>4],o=t[(15&o)<<2|l>>6],l=t[63&l],n[a++]=c+s+o+l}switch(c=0,l=r,e.length-i){case 2:l=t[(15&(c=e[i+1]))<<2]||r;case 1:e=e[i],n[a]=t[e>>2]+t[(3&e)<<4|c>>4]+l+r}return n.join("")}for(t="";10240<e.length;)t+=String.fromCharCode.apply(null,e.subarray(0,10240)),e=e.subarray(10240);return t+=String.fromCharCode.apply(null,e),btoa(t)}var M,F=RegExp("[-_.]","g");function B(e){switch(e){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function U(e){if(!D)return function(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=P[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}I();for(var r=0;;){var i=n(-1),a=n(0),s=n(64),o=n(64);if(64===o&&-1===i)break;t(i<<2|a>>4),64!=s&&(t(a<<4&240|s>>2),64!=o&&t(s<<6&192|o))}}(e,function(e){r[i++]=e}),i!==n?r.subarray(0,i):r}(e);F.test(e)&&(e=e.replace(F,B)),e=atob(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function j(){return M||(M=new Uint8Array(0))}var $={},z="function"==typeof Uint8Array.prototype.slice,V=0,G=0;function H(e){var t=0>e,n=(e=Math.abs(e))>>>0;e=Math.floor((e-n)/4294967296),t&&(t=(n=o(q(n,e))).next().value,e=n.next().value,n=t),V=n>>>0,G=e>>>0}function W(e){if(0===(e=+e))0<1/e?V=G=0:(G=0,V=2147483648);else if(isNaN(e))G=0,V=2147483647;else{var t=0>e?-2147483648:0;if(34028234663852886e22<(e=t?-e:e))G=0,V=(2139095040|t)>>>0;else if(11754943508222875e-54>e)e=Math.round(e/Math.pow(2,-149)),G=0,V=(t|e)>>>0;else{var n=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-n),16777216<=(e=Math.round(8388608*e))&&++n,G=0,V=(t|n+127<<23|8388607&e)>>>0}}}var K,Y="function"==typeof BigInt;function q(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function X(e,t){this.i=e>>>0,this.h=t>>>0}function Q(e){if(!e)return K||(K=new X(0,0));if(!/^-?\d+$/.test(e))return null;if(16>e.length)H(Number(e));else if(Y)e=BigInt(e),V=Number(e&BigInt(4294967295))>>>0,G=Number(e>>BigInt(32)&BigInt(4294967295));else{var t=+("-"===e[0]);G=V=0;for(var n=e.length,r=t,i=(n-t)%6+t;i<=n;r=i,i+=6)r=Number(e.slice(r,i)),G*=1e6,4294967296<=(V=1e6*V+r)&&(G+=V/4294967296|0,V%=4294967296);t&&(e=(t=o(q(V,G))).next().value,t=t.next().value,V=e,G=t)}return new X(V,G)}function J(e,t){return Error("Invalid wire type: "+e+" (at position "+t+")")}function Z(){return Error("Failed to read varint, encoding is invalid.")}function ee(e,t){return Error("Tried to read past the end of the data "+t+" > "+e)}function te(){throw Error("Invalid UTF8")}function ne(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var re,ie,ae,se=void 0,oe="undefined"!=typeof TextDecoder,le="undefined"!=typeof TextEncoder;function ce(e){if(e!==$)throw Error("illegal external caller")}function ue(e,t){if(ce(t),this.V=e,null!=e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}function de(){return ae||(ae=new ue(null,$))}function he(e){ce($);var t=e.V;return null==(t=null==t||N&&null!=t&&t instanceof Uint8Array?t:"string"==typeof t?U(t):null)?t:e.V=t}function fe(e,t){this.i=null,this.u=!1,this.h=this.j=this.m=0,pe(this,e,t)}function pe(e,t,n){n=void 0===n?{}:n,e.S=void 0!==n.S&&n.S,t&&(t=function(e){if("string"==typeof e)return{buffer:U(e),C:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),C:!1};if(e.constructor===Uint8Array)return{buffer:e,C:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),C:!1};if(e.constructor===ue)return{buffer:he(e)||j(),C:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}(t),e.i=t.buffer,e.u=t.C,e.m=0,e.j=e.i.length,e.h=e.m)}function me(e,t){if(e.h=t,t>e.j)throw ee(e.j,t)}function ge(e){var t=e.i,n=e.h,r=t[n++],i=127&r;if(128&r&&(i|=(127&(r=t[n++]))<<7,128&r&&(i|=(127&(r=t[n++]))<<14,128&r&&(i|=(127&(r=t[n++]))<<21,128&r&&(i|=(r=t[n++])<<28,128&r&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++])))))throw Z();return me(e,n),i}function ve(e,t){if(0>t)throw Error("Tried to read a negative byte length: "+t);var n=e.h,r=n+t;if(r>e.j)throw ee(t,e.j-n);return e.h=r,n}fe.prototype.reset=function(){this.h=this.m},fe.prototype.l=function(){return ge(this)>>>0},fe.prototype.s=function(){var e=this.i,t=this.h,n=e[t],r=e[t+1],i=e[t+2];return e=e[t+3],me(this,this.h+4),n=2*((i=(n|r<<8|i<<16|e<<24)>>>0)>>31)+1,r=i>>>23&255,i&=8388607,255==r?i?NaN:1/0*n:0==r?n*Math.pow(2,-149)*i:n*Math.pow(2,r-150)*(i+Math.pow(2,23))};var be=[];function ye(){this.h=[]}function Ee(e,t,n){for(;0<n||127<t;)e.h.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.h.push(t)}function xe(e,t){for(;127<t;)e.h.push(127&t|128),t>>>=7;e.h.push(t)}function Se(e,t){if(0<=t)xe(e,t);else{for(var n=0;9>n;n++)e.h.push(127&t|128),t>>=7;e.h.push(1)}}function we(e){var t=V;e.h.push(t>>>0&255),e.h.push(t>>>8&255),e.h.push(t>>>16&255),e.h.push(t>>>24&255)}function ke(e,t){if(be.length){var n=be.pop();pe(n,e,t),e=n}else e=new fe(e,t);this.h=e,this.j=this.h.h,this.i=this.l=-1,this.setOptions(t)}function Te(e){var t=e.h;if(t.h==t.j)return!1;e.j=e.h.h;var n=e.h.l();if(t=n>>>3,!(0<=(n&=7)&&5>=n))throw J(n,e.j);if(1>t)throw Error("Invalid field number: "+t+" (at position "+e.j+")");return e.l=t,e.i=n,!0}function _e(e){switch(e.i){case 0:if(0!=e.i)_e(e);else e:{for(var t=(e=e.h).h,n=t+10,r=e.i;t<n;)if(!(128&r[t++])){me(e,t);break e}throw Z()}break;case 1:me(e=e.h,e.h+8);break;case 2:2!=e.i?_e(e):(t=e.h.l(),me(e=e.h,e.h+t));break;case 5:me(e=e.h,e.h+4);break;case 3:for(t=e.l;;){if(!Te(e))throw Error("Unmatched start-group tag: stream EOF");if(4==e.i){if(e.l!=t)throw Error("Unmatched end-group tag");break}_e(e)}break;default:throw J(e.i,e.j)}}function Ae(e,t,n){var r=e.h.j,i=e.h.l(),a=e.h.h+i,s=a-r;if(0>=s&&(e.h.j=a,n(t,e,void 0,void 0,void 0),s=a-e.h.h),s)throw Error("Message parsing ended unexpectedly. Expected to read "+i+" bytes, instead read "+(i-s)+" bytes, either the data ended unexpectedly or the message misreported its own length");e.h.h=a,e.h.j=r}function Re(e,t,n){var r=e.h.l();for(r=e.h.h+r;e.h.h<r;)n.push(t.call(e.h))}ye.prototype.length=function(){return this.h.length},ye.prototype.end=function(){var e=this.h;return this.h=[],e},ke.prototype.setOptions=function(e){e=void 0===e?{}:e,this.ca=void 0!==e.ca&&e.ca},ke.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};var Le=[];function Ce(){this.j=[],this.i=0,this.h=new ye}function Pe(e,t){0!==t.length&&(e.j.push(t),e.i+=t.length)}function Ie(e,t){return De(e,t,2),t=e.h.end(),Pe(e,t),t.push(e.i),t}function Ne(e,t){var n=t.pop();for(n=e.i+e.h.length()-n;127<n;)t.push(127&n|128),n>>>=7,e.i++;t.push(n),e.i++}function De(e,t,n){xe(e.h,8*t+n)}var Oe="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol():void 0;function Me(e,t){return Oe?e[Oe]|=t:void 0!==e.B?e.B|=t:(Object.defineProperties(e,{B:{value:t,configurable:!0,writable:!0,enumerable:!1}}),t)}function Fe(e,t){var n=Ue(e);return(n&t)!==t&&(Object.isFrozen(e)&&(e=Array.prototype.slice.call(e)),je(e,n|t)),e}function Be(e,t){Oe?e[Oe]&&(e[Oe]&=~t):void 0!==e.B&&(e.B&=~t)}function Ue(e){var t;return null==(t=Oe?e[Oe]:e.B)?0:t}function je(e,t){Oe?e[Oe]=t:void 0!==e.B?e.B=t:Object.defineProperties(e,{B:{value:t,configurable:!0,writable:!0,enumerable:!1}})}function $e(e){return Me(e,1),e}function ze(e){return!!(2&Ue(e))}function Ve(e,t){je(t,-51&e)}function Ge(e,t){je(t,-41&e|18)}var He={};function We(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)&&e.constructor===Object}var Ke,Ye,qe=[];function Xe(e){if(ze(e.o))throw Error("Cannot mutate an immutable Message")}function Qe(e){var t=e.length;(t=t?e[t-1]:void 0)&&We(t)?t.g=1:(t={},e.push((t.g=1,t)))}function Je(e){return null==e?e:"number"==typeof e||"NaN"===e||"Infinity"===e||"-Infinity"===e?Number(e):void 0}function Ze(e,t,n){var r=!1;return null==e||"object"!=typeof e||(r=Array.isArray(e))||e.fa!==He?r?new t(e):n?new t:void 0:e}function et(e){var t=e.i+e.G;return e.A||(e.A=e.o[t]={})}function tt(e,t,n){return-1===t?null:t>=e.i?e.A?e.A[t]:void 0:n&&e.A&&null!=(n=e.A[t])?n:e.o[t+e.G]}function nt(e,t,n,r){Xe(e),rt(e,t,n,r)}function rt(e,t,n,r){e.j&&(e.j=void 0),t>=e.i||r?et(e)[t]=n:(e.o[t+e.G]=n,(e=e.A)&&t in e&&delete e[t])}function it(e,t,n,r,i){var a=tt(e,t,r);Array.isArray(a)||(a=Ke);var s=Ue(a);if(1&s||$e(a),i)2&s||Me(a,2),1&n||Object.freeze(a);else{i=!(2&n);var o=2&s;1&n||!o?i&&16&s&&!o&&Be(a,16):rt(e,t,a=$e(Array.prototype.slice.call(a)),r)}return a}function at(e,t){return it(e,t,0,!1,ze(e.o))}function st(e,t){var n=tt(e,t),r=Je(n);return null!=r&&r!==n&&rt(e,t,r),r}function ot(e,t){var n=ze(e.o),r=it(e,t,1,void 0,n),i=Ue(r);if(!(4&i)){Object.isFrozen(r)&&rt(e,t,r=$e(r.slice()));for(var a=0,s=0;a<r.length;a++){var o=Je(r[a]);null!=o&&(r[s++]=o)}s<a&&(r.length=s),Me(r,5),n&&(Me(r,2),Object.freeze(r))}return!n&&(2&i||Object.isFrozen(r))&&(Me(r=Array.prototype.slice.call(r),5),nt(e,t,n=null==(n=r)?Ke:Fe(n,1))),r}function lt(e,t,n){var r=void 0!==r&&r,i=tt(e,n,r);return(t=Ze(i,t))!==i&&null!=t&&(rt(e,n,t,r),Me(t.o,18&Ue(e.o))),null==(i=t)||ze(e.o)||(t=kt(i))!==i&&rt(e,n,i=t,r),i}function ct(e,t,n,r,i){e.h||(e.h={});var a=e.h[n],s=it(e,n,3,void 0,i);if(!a){var o=s;a=[];var l=!!(16&Ue(e.o));s=ze(o);var c=o;!i&&s&&(o=Array.prototype.slice.call(o));for(var u=s,d=0;d<o.length;d++){var h=o[d],f=t,p=!1;if(p=void 0!==p&&p,void 0!==(h=Array.isArray(h)?new f(h):p?new f:void 0)){var m=p=Ue(f=h.o);s&&(m|=2),l&&(m|=16),m!=p&&je(f,m),f=m,u=u||!!(2&f),a.push(h)}}return e.h[n]=a,t=33|(l=Ue(o)),l!=(t=u?-9&t:8|t)&&(u=o,Object.isFrozen(u)&&(u=Array.prototype.slice.call(u)),je(u,t),o=u),c!==o&&rt(e,n,o),(i||r&&s)&&Me(a,2),r&&Object.freeze(a),a}return i||(i=Object.isFrozen(a),r&&!i?Object.freeze(a):!r&&i&&(a=Array.prototype.slice.call(a),e.h[n]=a)),a}function ut(e,t,n){var r=ze(e.o);if(t=ct(e,t,n,r,r),e=it(e,n,3,void 0,r),!(r||8&Ue(e))){for(r=0;r<t.length;r++){var i=kt(n=t[r]);n!==i&&(t[r]=i,e[r]=i.o)}Me(e,8)}return t}function dt(e,t,n){if(null!=n&&"number"!=typeof n)throw Error("Value of float/double field must be a number|null|undefined, found "+typeof n+": "+n);nt(e,t,n)}function ht(e,t,n,r,i){Xe(e);var a=ct(e,n,t,!1,!1);return n=null!=r?r:new n,e=it(e,t,2,void 0,!1),null!=i?(a.splice(i,0,n),e.splice(i,0,n.o)):(a.push(n),e.push(n.o)),n.C()&&Be(e,8),n}function ft(e,t){return null==(e=tt(e,t))?0:e}function pt(e,t){return null==e?t:e}function mt(e,t,n){return n=void 0===n?0:n,pt(st(e,t),n)}function gt(e,t,n,r){if(null!=e){if(Array.isArray(e))e=vt(e,t,n,void 0!==r);else if(We(e)){var i,a={};for(i in e)a[i]=gt(e[i],t,n,r);e=a}else e=t(e,r);return e}}function vt(e,t,n,r){var i=Ue(e);r=r?!!(16&i):void 0,e=Array.prototype.slice.call(e);for(var a=0;a<e.length;a++)e[a]=gt(e[a],t,n,r);return n(i,e),e}function bt(e){return e.fa===He?e.toJSON():function(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":if(e)if(Array.isArray(e)){if(128&Ue(e))return Qe(e=Array.prototype.slice.call(e)),e}else{if(N&&null!=e&&e instanceof Uint8Array)return O(e);if(e instanceof ue){var t=e.V;return null==t?"":"string"==typeof t?t:e.V=O(t)}}}return e}(e)}function yt(e,t){128&e&&Qe(t)}function Et(e,t,n){if(n=void 0===n?Ge:n,null!=e){if(N&&e instanceof Uint8Array)return e.length?new ue(new Uint8Array(e),$):de();if(Array.isArray(e)){var r=Ue(e);return 2&r?e:!t||32&r||!(16&r||0===r)?(4&(t=Ue(e=vt(e,Et,4&r?Ge:n,!0)))&&2&t&&Object.freeze(e),e):(je(e,2|r),e)}return e.fa===He?St(e):e}}function xt(e,t,n,r,i,a,s){if(e=e.h&&e.h[n]){if(2&(r=Ue(e))?r=e:(Ge(r,a=L(e,St)),Object.freeze(a),r=a),Xe(t),a=null==r?Ke:$e([]),null!=r){for(s=!!r.length,e=0;e<r.length;e++){var o=r[e];s=s&&!ze(o.o),a[e]=o.o}a=Fe(a,1|(s?8:0)),t.h||(t.h={}),t.h[n]=r}else t.h&&(t.h[n]=void 0);rt(t,n,a,i)}else nt(t,n,Et(r,a,s),i)}function St(e){return ze(e.o)||Me((e=wt(e,!0)).o,2),e}function wt(e,t){var n=e.o,r=[];Me(r,16);var i=e.constructor.h;if(i&&r.push(i),i=e.A){r.length=n.length,r.fill(void 0,r.length,n.length);var a={};r[r.length-1]=a}128&Ue(n)&&Qe(r),t=t||e.C()?Ge:Ve,a=e.constructor,Ye=r,r=new a(r),Ye=void 0,e.R&&(r.R=e.R.slice()),a=!!(16&Ue(n));for(var s=i?n.length-1:n.length,o=0;o<s;o++)xt(e,r,o-e.G,n[o],!1,a,t);if(i)for(var l in i)xt(e,r,+l,i[l],!0,a,t);return r}function kt(e){if(!ze(e.o))return e;var t=wt(e,!1);return t.j=e,t}function Tt(e,t,n){null==e&&(e=Ye),Ye=void 0;var r,i=this.constructor.i||0,a=0<i,s=this.constructor.h,o=!1;if(null==e){var l=48,c=!0;a&&(i=0,l|=128),je(e=s?[s]:[],l)}else{if(!Array.isArray(e))throw Error();if(s&&s!==e[0])throw Error();var u=l=Me(e,0);if((c=!!(16&u))&&((o=!!(32&u))||(u|=32)),a){if(128&u)i=0;else if(0<e.length){var d=e[e.length-1];if(We(d)&&"g"in d){i=0,u|=128,delete d.g;var h,f=!0;for(h in d){f=!1;break}f&&e.pop()}}}else if(128&u)throw Error();l!==u&&je(e,u)}if(this.G=(s?0:-1)-i,this.h=void 0,this.o=e,i=(s=this.o.length)-1,s&&We(s=this.o[i])?(this.A=s,this.i=i-this.G):void 0!==t&&-1<t?(this.i=Math.max(t,i+1-this.G),this.A=void 0):this.i=Number.MAX_VALUE,!a&&this.A&&"g"in this.A)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(n)for(t=c&&!o&&!0,a=this.i,c=0;c<n.length;c++)(o=n[c])<a?(i=e[o+=this.G])?_t(i,t):e[o]=Ke:(r||(r=et(this)),(i=r[o])?_t(i,t):r[o]=Ke)}function _t(e,t){if(Array.isArray(e)){var n=Ue(e),r=1;!t||2&n||(r|=16),(n&r)!==r&&je(e,n|r)}}function At(e,t,n){if(n){var r,i={};for(r in n){var a=n[r],s=a.qa;s||(i.J=a.wa||a.oa.W,a.ja?(i.aa=Ot(a.ja),s=function(e){return function(t,n,r){return e.J(t,n,r,e.aa)}}(i)):a.ka?(i.Z=Mt(a.da.P,a.ka),s=function(e){return function(t,n,r){return e.J(t,n,r,e.Z)}}(i)):s=i.J,a.qa=s),s(t,e,a.da),i={J:i.J,aa:i.aa,Z:i.Z}}}!function(e,t){if(t=t.R){Pe(e,e.h.end());for(var n=0;n<t.length;n++)Pe(e,he(t[n])||j())}}(t,e)}je(qe,23),Ke=Object.freeze(qe),Tt.prototype.toJSON=function(){return vt(this.o,bt,yt)},Tt.prototype.C=function(){return ze(this.o)},Tt.prototype.fa=He,Tt.prototype.toString=function(){return this.o.toString()};var Rt=Symbol();function Lt(e,t,n){return e[Rt]||(e[Rt]=function(e,r){return t(e,r,n)})}function Ct(e){var t=e[Rt];if(!t){var n=Yt(e);t=function(e,t){return qt(e,t,n)},e[Rt]=t}return t}function Pt(e){var t=function(e){var t=e.ja;return t?Ct(t):(t=e.va)?Lt(e.da.P,t,e.ka):void 0}(e),n=e.da,r=e.oa.U;return t?function(e,i){return r(e,i,n,t)}:function(e,t){return r(e,t,n)}}function It(e,t){var n=e[t];return"function"==typeof n&&0===n.length&&(n=n(),e[t]=n),Array.isArray(n)&&(Vt in n||Ft in n||0<n.length&&"function"==typeof n[0])?n:void 0}function Nt(e,t,n,r,i,a){t.P=e[0];var s=1;if(e.length>s&&"number"!=typeof e[s]){var o=e[s++];n(t,o)}for(;s<e.length;){n=e[s++];for(var l=s+1;l<e.length&&"number"!=typeof e[l];)l++;switch(o=e[s++],l-=s){case 0:r(t,n,o);break;case 1:(l=It(e,s))?(s++,i(t,n,o,l)):r(t,n,o,e[s++]);break;case 2:i(t,n,o,l=It(e,l=s++),e[s++]);break;case 3:a(t,n,o,e[s++],e[s++],e[s++]);break;case 4:a(t,n,o,e[s++],e[s++],e[s++],e[s++]);break;default:throw Error("unexpected number of binary field arguments: "+l)}}return t}var Dt=Symbol();function Ot(e){var t=e[Dt];if(!t){var n=zt(e);t=function(e,t){return Xt(e,t,n)},e[Dt]=t}return t}function Mt(e,t){var n=e[Dt];return n||(n=function(e,n){return At(e,n,t)},e[Dt]=n),n}var Ft=Symbol();function Bt(e,t){e.push(t)}function Ut(e,t,n){e.push(t,n.W)}function jt(e,t,n,r){var i=Ot(r),a=zt(r).P,s=n.W;e.push(t,function(e,t,n){return s(e,t,n,a,i)})}function $t(e,t,n,r,i,a){var s=Mt(r,a),o=n.W;e.push(t,function(e,t,n){return o(e,t,n,r,s)})}function zt(e){var t=e[Ft];return t||(t=Nt(e,e[Ft]=[],Bt,Ut,jt,$t),Vt in e&&Ft in e&&(e.length=0),t)}var Vt=Symbol();function Gt(e,t){e[0]=t}function Ht(e,t,n,r){var i=n.U;e[t]=r?function(e,t,n){return i(e,t,n,r)}:i}function Wt(e,t,n,r,i){var a=n.U,s=Ct(r),o=Yt(r).P;e[t]=function(e,t,n){return a(e,t,n,o,s,i)}}function Kt(e,t,n,r,i,a,s){var o=n.U,l=Lt(r,i,a);e[t]=function(e,t,n){return o(e,t,n,r,l,s)}}function Yt(e){var t=e[Vt];return t||(t=Nt(e,e[Vt]={},Gt,Ht,Wt,Kt),Vt in e&&Ft in e&&(e.length=0),t)}function qt(e,t,n){for(;Te(t)&&4!=t.i;){var r=t.l,i=n[r];if(!i){var a=n[0];a&&(a=a[r])&&(i=n[r]=Pt(a))}if(!i||!i(t,e,r)){r=e,a=(i=t).j,_e(i);var s=i;if(!s.ca){if(i=s.h.h-a,s.h.h=a,s=s.h,0==i)i=de();else{if(a=ve(s,i),s.S&&s.u)i=s.i.subarray(a,a+i);else{s=s.i;var o=a;i=o===(i=a+i)?j():z?s.slice(o,i):new Uint8Array(s.subarray(o,i))}i=0==i.length?de():new ue(i,$)}(a=r.R)?a.push(i):r.R=[i]}}}return e}function Xt(e,t,n){for(var r=n.length,i=1==r%2,a=i?1:0;a<r;a+=2)(0,n[a+1])(t,e,n[a]);At(e,t,i?n[0]:void 0)}function Qt(e,t){return{U:e,W:t}}function Jt(e,t,n){return(5===e.i||2===e.i)&&(t=at(t,n),2==e.i?Re(e,fe.prototype.s,t):t.push(e.h.s()),!0)}var Zt=Qt(function(e,t,n){return 5===e.i&&(nt(t,n,e.h.s()),!0)},function(e,t,n){null!=(t=st(t,n))&&(De(e,n,5),e=e.h,W(t),we(e))}),en=Qt(Jt,function(e,t,n){if(null!=(t=ot(t,n)))for(var r=0;r<t.length;r++){var i=e,a=t[r];null!=a&&(De(i,n,5),i=i.h,W(a),we(i))}}),tn=Qt(Jt,function(e,t,n){if(null!=(t=ot(t,n))&&t.length)for(De(e,n,2),xe(e.h,4*t.length),n=0;n<t.length;n++){var r=e.h;W(t[n]),we(r)}}),nn=Qt(function(e,t,n){if(0!==e.i)return!1;var r=e.h,i=0,a=e=0,s=r.i,o=r.h;do{var l=s[o++];i|=(127&l)<<a,a+=7}while(32>a&&128&l);for(32<a&&(e|=(127&l)>>4),a=3;32>a&&128&l;a+=7)e|=(127&(l=s[o++]))<<a;if(me(r,o),!(128>l))throw Z();return r=i>>>0,(e=2147483648&(l=e>>>0))&&(l=~l>>>0,0==(r=1+~r>>>0)&&(l=l+1>>>0)),r=4294967296*l+(r>>>0),nt(t,n,e?-r:r),!0},function(e,t,n){null!=(t=tt(t,n))&&("string"==typeof t&&Q(t),null!=t&&(De(e,n,0),"number"==typeof t?(e=e.h,H(t),Ee(e,V,G)):(n=Q(t),Ee(e.h,n.i,n.h))))}),rn=Qt(function(e,t,n){return 0===e.i&&(nt(t,n,ge(e.h)),!0)},function(e,t,n){null!=(t=tt(t,n))&&null!=t&&(De(e,n,0),Se(e.h,t))}),an=Qt(function(e,t,n){if(2!==e.i)return!1;var r=e.h.l(),i=ve(e=e.h,r);if(e=e.i,oe){var a,s=e;(a=re)||(a=re=new TextDecoder("utf-8",{fatal:!0})),e=i+r,s=0===i&&e===s.length?s:s.subarray(i,e);try{var o=a.decode(s)}catch(e){if(void 0===se){try{a.decode(new Uint8Array([128]))}catch(e){}try{a.decode(new Uint8Array([97])),se=!0}catch(e){se=!1}}throw!se&&(re=void 0),e}}else{r=(o=i)+r,i=[];for(var l,c,u=null;o<r;)128>(l=e[o++])?i.push(l):224>l?o>=r?te():(c=e[o++],194>l||128!=(192&c)?(o--,te()):i.push((31&l)<<6|63&c)):240>l?o>=r-1?te():128!=(192&(c=e[o++]))||224===l&&160>c||237===l&&160<=c||128!=(192&(s=e[o++]))?(o--,te()):i.push((15&l)<<12|(63&c)<<6|63&s):244>=l?o>=r-2?te():128!=(192&(c=e[o++]))||c-144+(l<<28)>>30||128!=(192&(s=e[o++]))||128!=(192&(a=e[o++]))?(o--,te()):(l=(7&l)<<18|(63&c)<<12|(63&s)<<6|63&a,l-=65536,i.push(55296+(l>>10&1023),56320+(1023&l))):te(),8192<=i.length&&(u=ne(u,i),i.length=0);o=ne(u,i)}return nt(t,n,o),!0},function(e,t,n){if(null!=(t=tt(t,n))){var r=!1;if(r=void 0!==r&&r,le){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(t))throw Error("Found an unpaired surrogate");t=(ie||(ie=new TextEncoder)).encode(t)}else{for(var i=0,a=new Uint8Array(3*t.length),s=0;s<t.length;s++){var o=t.charCodeAt(s);if(128>o)a[i++]=o;else{if(2048>o)a[i++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&s<t.length){var l=t.charCodeAt(++s);if(56320<=l&&57343>=l){o=1024*(o-55296)+l-56320+65536,a[i++]=o>>18|240,a[i++]=o>>12&63|128,a[i++]=o>>6&63|128,a[i++]=63&o|128;continue}s--}if(r)throw Error("Found an unpaired surrogate");o=65533}a[i++]=o>>12|224,a[i++]=o>>6&63|128}a[i++]=63&o|128}}t=i===a.length?a:a.subarray(0,i)}De(e,n,2),xe(e.h,t.length),Pe(e,e.h.end()),Pe(e,t)}}),sn=Qt(function(e,t,n,r,i){if(2!==e.i)return!1;Xe(t);var a=tt(t,n);return a!==(r=kt(Ze(a,r,!0)))&&rt(t,n,r),Ae(e,r,i),!0},function(e,t,n,r,i){null!=(t=lt(t,r,n))&&(n=Ie(e,n),i(t,e),Ne(e,n))}),on=Qt(function(e,t,n,r,i){return 2===e.i&&(Ae(e,ht(t,n,r),i),!0)},function(e,t,n,r,i){if(null!=(t=ut(t,r,n)))for(r=0;r<t.length;r++){var a=Ie(e,n);i(t[r],e),Ne(e,a)}}),ln=Qt(function(e,t,n){return(0===e.i||2===e.i)&&(t=at(t,n),2==e.i?Re(e,fe.prototype.l,t):t.push(e.h.l()),!0)},function(e,t,n){if(null!=(t=at(t,n)))for(var r=0;r<t.length;r++){var i=e,a=t[r];null!=a&&(De(i,n,0),xe(i.h,a))}}),cn=Qt(function(e,t,n){return 0===e.i&&(nt(t,n,ge(e.h)),!0)},function(e,t,n){null!=(t=tt(t,n))&&(t=parseInt(t,10),De(e,n,0),Se(e.h,t))});function un(e){return function(t,n){e:{if(Le.length){var r=Le.pop();r.setOptions(n),pe(r.h,t,n),t=r}else t=new ke(t,n);try{var i=Yt(e),a=qt(new i.P,t,i);break e}finally{(i=t.h).i=null,i.u=!1,i.m=0,i.j=0,i.h=0,i.S=!1,t.l=-1,t.i=-1,100>Le.length&&Le.push(t)}a=void 0}return a}}function dn(e){return function(){var t=new Ce;Xt(this,t,zt(e)),Pe(t,t.h.end());for(var n=new Uint8Array(t.i),r=t.j,i=r.length,a=0,s=0;s<i;s++){var o=r[s];n.set(o,a),a+=o.length}return t.j=[n],n}}function hn(e){Tt.call(this,e)}m(hn,Tt);var fn=[hn,1,rn,2,Zt,3,an,4,an];function pn(e){Tt.call(this,e,-1,mn)}hn.prototype.l=dn(fn),m(pn,Tt),pn.prototype.addClassification=function(e,t){return ht(this,1,hn,e,t),this};var mn=[1],gn=un([pn,1,on,fn]);function vn(e){Tt.call(this,e)}m(vn,Tt);var bn=[vn,1,Zt,2,Zt,3,Zt,4,Zt,5,Zt];function yn(e){Tt.call(this,e,-1,En)}vn.prototype.l=dn(bn),m(yn,Tt);var En=[1],xn=un([yn,1,on,bn]);function Sn(e){Tt.call(this,e,-1,wn)}m(Sn,Tt),Sn.prototype.getRows=function(){return ft(this,1)},Sn.prototype.getCols=function(){return ft(this,2)},Sn.prototype.getPackedDataList=function(){return ot(this,3)},Sn.prototype.getLayout=function(){return pt(tt(this,4),0)};var wn=[3],kn=[Sn,1,rn,2,rn,3,tn,4,cn];function Tn(e){Tt.call(this,e)}m(Tn,Tt);var _n=[Tn,1,Zt,2,Zt,3,Zt,4,Zt,5,Zt,6,nn],An=un(_n);function Rn(e){Tt.call(this,e,-1,Ln)}Tn.prototype.l=dn(_n),m(Rn,Tt),Rn.prototype.getVertexType=function(){return pt(tt(this,1),0)},Rn.prototype.getPrimitiveType=function(){return pt(tt(this,2),0)},Rn.prototype.getVertexBufferList=function(){return ot(this,3)},Rn.prototype.getIndexBufferList=function(){return at(this,4)};var Ln=[3,4],Cn=[Rn,1,cn,2,cn,3,en,4,ln];function Pn(e){Tt.call(this,e)}m(Pn,Tt),Pn.prototype.getMesh=function(){return lt(this,Rn,1)},Pn.prototype.getPoseTransformMatrix=function(){return lt(this,Sn,2)};var In=un([Pn,1,sn,Cn,2,sn,kn]),Nn=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Dn=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],On=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Mn=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],Fn=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],Bn=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Un=[].concat(l(Nn),l(Dn),l(On),l(Mn),l(Fn),l(Bn));function jn(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function $n(e){return ut(e,hn,1).map(function(e){return{index:ft(e,1),score:mt(e,2),label:null!=tt(e,3)?pt(tt(e,3),""):void 0,displayName:null!=tt(e,4)?pt(tt(e,4),""):void 0}})}function zn(e){return{x:mt(e,1),y:mt(e,2),z:mt(e,3),visibility:null!=st(e,4)?mt(e,4):void 0}}function Vn(e){return ut(xn(e),vn,1).map(zn)}function Gn(e,t){this.i=e,this.h=t,this.m=0}function Hn(e,t,n){return function(e,t){var n=e.h;if(void 0===e.s){var r=jn(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=jn(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),a=n.createProgram();if(n.attachShader(a,r),n.attachShader(a,i),n.linkProgram(a),!n.getProgramParameter(a,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(a));r=e.s=a,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),e.l={O:n.getAttribLocation(r,"aVertex"),N:n.getAttribLocation(r,"aTex"),xa:i},e.v=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.v),n.enableVertexAttribArray(e.l.O),n.vertexAttribPointer(e.l.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.enableVertexAttribArray(e.l.N),n.vertexAttribPointer(e.l.N,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=e.l,n.useProgram(e.s),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.i.bindTexture2d(t.glName),n.enableVertexAttribArray(r.O),n.bindBuffer(n.ARRAY_BUFFER,e.v),n.vertexAttribPointer(r.O,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.vertexAttribPointer(r.N,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.O),n.disableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,null),e.i.bindTexture2d(0)}(e,t),"function"==typeof e.h.canvas.transferToImageBitmap?Promise.resolve(e.h.canvas.transferToImageBitmap()):n?Promise.resolve(e.h.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.h.canvas):(void 0===e.j&&(e.j=document.createElement("canvas")),new Promise(function(t){e.j.height=e.h.canvas.height,e.j.width=e.h.canvas.width,e.j.getContext("2d",{}).drawImage(e.h.canvas,0,0,e.h.canvas.width,e.h.canvas.height),t(e.j)}))}function Wn(e){this.h=e}var Kn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Yn(e,t){return t+e}function qn(e,t){window[e]=t}function Xn(e){if(this.h=e,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ha=!0,this.I=Promise.resolve(),this.ga="",this.D={},this.locateFile=e&&e.locateFile||Yn,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.ia=t,e.options)for(var n=(t=o(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var r=e.options[n].default;void 0!==r&&(this.l[n]="function"==typeof r?r():r)}}function Qn(e,t){var n,r;return k(function(i){return t in e.L?i.return(e.L[t]):(n=e.locateFile(t,""),r=fetch(n).then(function(e){return e.arrayBuffer()}),e.L[t]=r,i.return(r))})}function Jn(e,t){for(var n=t.name||"$",r=[].concat(l(t.wants)),i=new e.i.StringList,a=o(t.wants),s=a.next();!s.done;s=a.next())i.push_back(s.value);a=e.i.PacketListener.implement({onResults:function(i){for(var a={},s=0;s<t.wants.length;++s)a[r[s]]=i.get(s);var l=e.listeners[n];l&&(e.I=function(e,t,n){var r,i,a,s,l,c,u,d,h,f,p,m,g,v;return k(function(b){switch(b.h){case 1:if(!n)return b.return(t);for(r={},i=0,a=o(Object.keys(n)),s=a.next();!s.done;s=a.next())l=s.value,"string"!=typeof(c=n[l])&&"texture"===c.type&&void 0!==t[c.stream]&&++i;1<i&&(e.M=!1),u=o(Object.keys(n)),s=u.next();case 2:if(s.done){b.h=4;break}if(d=s.value,"string"==typeof(h=n[d]))return g=r,v=d,y(b,function(e,t,n){var r;return k(function(i){return"number"==typeof n||n instanceof Uint8Array||n instanceof e.i.Uint8BlobList?i.return(n):n instanceof e.i.Texture2dDataOut?((r=e.v[t])||(r=new Gn(e.i,e.K),e.v[t]=r),i.return(Hn(r,n,e.M))):i.return(void 0)})}(e,d,t[h]),14);if(f=t[h.stream],"detection_list"===h.type){if(f){for(var E=f.getRectList(),x=f.getLandmarksList(),S=f.getClassificationsList(),w=[],T=0;T<E.size();++T){var _=An(E.get(T)),A=void 0;A=void 0===A?0:A,_={la:{ra:mt(_,1),sa:mt(_,2),height:mt(_,3),width:mt(_,4),rotation:mt(_,5,0),pa:pt(tt(_,6),A)},ea:Vn(x.get(T)),ba:$n(gn(S.get(T)))},w.push(_)}E=w}else E=[];r[d]=E,b.h=7;break}if("proto_list"===h.type){if(f){for(E=Array(f.size()),x=0;x<f.size();x++)E[x]=f.get(x);f.delete()}else E=[];r[d]=E,b.h=7;break}if(void 0===f){b.h=3;break}if("float_list"===h.type){r[d]=f,b.h=7;break}if("proto"===h.type){r[d]=f,b.h=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(p=e.v[d])||(p=new Gn(e.i,e.K),e.v[d]=p),y(b,Hn(p,f,e.M),13);case 13:m=b.i,r[d]=m;case 7:h.transform&&r[d]&&(r[d]=h.transform(r[d])),b.h=3;break;case 14:g[v]=b.i;case 3:s=u.next(),b.h=2;break;case 4:return b.return(r)}})}(e,a,t.outs).then(function(n){n=l(n);for(var i=0;i<t.wants.length;++i){var s=a[r[i]];"object"==typeof s&&s.hasOwnProperty&&s.hasOwnProperty("delete")&&s.delete()}n&&(e.I=n)}))}}),e.j.attachMultiListener(i,a),i.delete()}function Zn(e){return e.map(er)}function er(e){var t=(e=In(e)).getMesh();if(!t)return e;var n=new Float32Array(t.getVertexBufferList());t.getVertexBufferList=function(){return n};var r=new Uint32Array(t.getIndexBufferList());return t.getIndexBufferList=function(){return r},e}function tr(e){var t=this;e=e||{},this.h=new Xn({locateFile:e.locateFile,files:[{url:"holistic_solution_packed_assets_loader.js"},{simd:!1,url:"holistic_solution_wasm_bin.js"},{simd:!0,url:"holistic_solution_simd_wasm_bin.js"}],graph:{url:"holistic.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:"left_hand_landmarks right_hand_landmarks face_landmarks pose_landmarks world_landmarks segmentation_mask image_transformed multi_face_geometry".split(" "),outs:{image:{type:"texture",stream:"image_transformed"},leftHandLandmarks:{type:"proto",stream:"left_hand_landmarks",transform:Vn},rightHandLandmarks:{type:"proto",stream:"right_hand_landmarks",transform:Vn},faceLandmarks:{type:"proto",stream:"face_landmarks",transform:Vn},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:Vn},za:{type:"proto",stream:"world_landmarks",transform:Vn},segmentationMask:{type:"texture",stream:"segmentation_mask"},multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:Zn}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,default:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(e){var n,r,i,a;return k(function(s){if(1==s.h){switch(n="",e){case 1:n="pose_landmark_full.tflite";break;case 2:n="pose_landmark_heavy.tflite";break;default:n="pose_landmark_lite.tflite"}return r="third_party/mediapipe/modules/pose_landmark/"+n,i=t.h.locateFile(n,""),y(s,fetch(i),3)}return 2!=s.h?y(s,s.i.arrayBuffer(),2):(a=s.i,t.h.overrideFile(r,a),y(s,t.h.reset(),0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},refineFaceLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineFaceLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}})}(e=Xn.prototype).close=function(){return this.j&&this.j.delete(),Promise.resolve()},e.reset=function(){var e=this;return k(function(t){e.j&&(e.j.reset(),e.s={},e.v={}),t.h=0})},e.setOptions=function(e,t){var n=this;if(t=t||this.h.options){for(var r=[],i=[],a={},s=o(Object.keys(e)),l=s.next();!l.done;a={X:a.X,Y:a.Y},l=s.next())if(!((l=l.value)in this.l)||this.l[l]!==e[l]){this.l[l]=e[l];var c=t[l];void 0!==c&&(c.onChange&&(a.X=c.onChange,a.Y=e[l],r.push(function(e){return function(){return k(function(t){if(1==t.h)return y(t,e.X(e.Y),2);!0===t.i&&(n.u=!0),t.h=0})}}(a))),c.graphOptionXref&&(l=Object.assign({},{calculatorName:"",calculatorIndex:0},c.graphOptionXref,{valueNumber:1===c.type?e[l]:0,valueBoolean:0===c.type&&e[l],valueString:2===c.type?e[l]:""}),i.push(l)))}0===r.length&&0===i.length||(this.u=!0,this.H=(void 0===this.H?[]:this.H).concat(i),this.F=(void 0===this.F?[]:this.F).concat(r))}},e.initialize=function(){var e=this;return k(function(t){return 1==t.h?y(t,function(e){var t,n,r,i,a,s,o,c,u,d,h;return k(function(f){switch(f.h){case 1:return e.ha?(t=void 0===e.h.files?[]:"function"==typeof e.h.files?e.h.files(e.l):e.h.files,y(f,k(function(e){switch(e.h){case 1:return e.s=2,y(e,WebAssembly.instantiate(Kn),4);case 4:e.h=3,e.s=0;break;case 2:return e.s=0,e.l=null,e.return(!1);case 3:return e.return(!0)}}),2)):f.return();case 2:if(n=f.i,"object"==typeof window)return qn("createMediapipeSolutionsWasm",{locateFile:e.locateFile}),qn("createMediapipeSolutionsPackedAssets",{locateFile:e.locateFile}),s=t.filter(function(e){return void 0!==e.data}),o=t.filter(function(e){return void 0===e.data}),c=Promise.all(s.map(function(t){var n=Qn(e,t.url);if(void 0!==t.path){var r=t.path;n=n.then(function(t){return e.overrideFile(r,t),Promise.resolve(t)})}return n})),u=Promise.all(o.map(function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise(function(e){t.addEventListener("load",function(){e()},!1),t.addEventListener("error",function(){e()},!1),document.body.appendChild(t)})}(e.locateFile(t.url,e.ia)):Promise.resolve()})).then(function(){var t,n,r;return k(function(i){if(1==i.h)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=e,y(i,t(n),2);r.i=i.i,i.h=0})}),d=k(function(t){return e.h.graph&&e.h.graph.url?t=y(t,Qn(e,e.h.graph.url),0):(t.h=0,t=void 0),t}),y(f,Promise.all([u,c,d]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=t.filter(function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n}).map(function(t){return e.locateFile(t.url,e.ia)}),importScripts.apply(null,l(r)),i=e,y(f,createMediapipeSolutionsWasm(Module),6);case 6:i.i=f.i,e.m=new OffscreenCanvas(1,1),e.i.canvas=e.m,a=e.i.GL.createContext(e.m,{antialias:!1,alpha:!1,ua:"undefined"!=typeof WebGL2RenderingContext?2:1}),e.i.GL.makeContextCurrent(a),f.h=4;break;case 7:if(e.m=document.createElement("canvas"),!(h=e.m.getContext("webgl2",{}))&&!(h=e.m.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),f.return();e.K=h,e.i.canvas=e.m,e.i.createContext(e.m,!0,!0,{});case 4:e.j=new e.i.SolutionWasm,e.ha=!1,f.h=0}})}(e),2):3!=t.h?y(t,function(e){var t,n,r,i,a,s,l,c;return k(function(u){if(1==u.h)return e.h.graph&&e.h.graph.url&&e.ga===e.h.graph.url?u.return():(e.u=!0,e.h.graph&&e.h.graph.url?(e.ga=e.h.graph.url,y(u,Qn(e,e.h.graph.url),3)):void(u.h=2));for(2!=u.h&&(t=u.i,e.j.loadGraph(t)),n=o(Object.keys(e.D)),r=n.next();!r.done;r=n.next())i=r.value,e.j.overrideFile(i,e.D[i]);if(e.D={},e.h.listeners)for(a=o(e.h.listeners),s=a.next();!s.done;s=a.next())l=s.value,Jn(e,l);c=e.l,e.l={},e.setOptions(c),u.h=0})}(e),3):y(t,function(e){var t,n,r,i,a,s;return k(function(l){switch(l.h){case 1:if(!e.u)return l.return();if(!e.F){l.h=2;break}t=o(e.F),n=t.next();case 3:if(n.done){l.h=5;break}return y(l,(0,n.value)(),4);case 4:n=t.next(),l.h=3;break;case 5:e.F=void 0;case 2:if(e.H){for(r=new e.i.GraphOptionChangeRequestList,i=o(e.H),a=i.next();!a.done;a=i.next())s=a.value,r.push_back(s);e.j.changeOptions(r),r.delete(),e.H=void 0}e.u=!1,l.h=0}})}(e),0)})},e.overrideFile=function(e,t){this.j?this.j.overrideFile(e,t):this.D[e]=t},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(e,t){var n,r,i,a,s,l,c,u,d,h=this;return k(function(f){switch(f.h){case 1:return h.h.inputs?(n=1e3*(null==t?performance.now():t),y(f,h.I,2)):f.return();case 2:return y(f,h.initialize(),3);case 3:for(r=new h.i.PacketDataList,i=o(Object.keys(e)),a=i.next();!a.done;a=i.next())if(s=a.value,l=h.h.inputs[s]){e:{var p=e[s];switch(l.type){case"video":var m=h.s[l.stream];if(m||(m=new Gn(h.i,h.K),h.s[l.stream]=m),0===m.m&&(m.m=m.i.createTexture()),"undefined"!=typeof HTMLVideoElement&&p instanceof HTMLVideoElement)var g=p.videoWidth,v=p.videoHeight;else"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement?(g=p.naturalWidth,v=p.naturalHeight):(g=p.width,v=p.height);v={glName:m.m,width:g,height:v},(g=m.h).canvas.width=v.width,g.canvas.height=v.height,g.activeTexture(g.TEXTURE0),m.i.bindTexture2d(m.m),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,p),m.i.bindTexture2d(0),m=v;break e;case"detections":for((m=h.s[l.stream])||(m=new Wn(h.i),h.s[l.stream]=m),m.data||(m.data=new m.h.DetectionListData),m.data.reset(p.length),v=0;v<p.length;++v){g=p[v];var b=m.data,E=b.setBoundingBox,x=v,S=g.la,w=new Tn;if(dt(w,1,S.ra),dt(w,2,S.sa),dt(w,3,S.height),dt(w,4,S.width),dt(w,5,S.rotation),nt(w,6,S.pa),S=w.l(),E.call(b,x,S),g.ea)for(b=0;b<g.ea.length;++b){w=g.ea[b],x=(E=m.data).addNormalizedLandmark,S=v,w=Object.assign({},w,{visibility:w.visibility?w.visibility:0});var k=new vn;dt(k,1,w.x),dt(k,2,w.y),dt(k,3,w.z),w.visibility&&dt(k,4,w.visibility),w=k.l(),x.call(E,S,w)}if(g.ba)for(b=0;b<g.ba.length;++b)x=(E=m.data).addClassification,S=v,w=g.ba[b],dt(k=new hn,2,w.score),w.index&&nt(k,1,w.index),w.label&&nt(k,3,w.label),w.displayName&&nt(k,4,w.displayName),w=k.l(),x.call(E,S,w)}m=m.data;break e;default:m={}}}switch(c=m,u=l.stream,l.type){case"video":r.pushTexture2d(Object.assign({},c,{stream:u,timestamp:n}));break;case"detections":(d=c).stream=u,d.timestamp=n,r.pushDetectionList(d);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return h.j.send(r),y(f,h.I,4);case 4:r.delete(),f.h=0}})},e.onResults=function(e,t){this.listeners[t||"$"]=e},A("Solution",Xn),A("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=tr.prototype).close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(e){this.h.onResults(e)},e.initialize=function(){var e=this;return k(function(t){return y(t,e.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(e){var t=this;return k(function(n){return y(n,t.h.send(e),0)})},e.setOptions=function(e){this.h.setOptions(e)},A("Holistic",tr),A("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),A("FACEMESH_LIPS",Nn),A("FACEMESH_LEFT_EYE",Dn),A("FACEMESH_LEFT_EYEBROW",On),A("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),A("FACEMESH_RIGHT_EYE",Mn),A("FACEMESH_RIGHT_EYEBROW",Fn),A("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),A("FACEMESH_FACE_OVAL",Bn),A("FACEMESH_CONTOURS",Un),A("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),A("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),A("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),A("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),A("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),A("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),A("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),A("matrixDataToMatrix",function(e){for(var t=e.getCols(),n=e.getRows(),r=e.getPackedDataList(),i=[],a=0;a<n;a++)i.push(Array(t));for(a=0;a<n;a++)for(var s=0;s<t;s++){var o=1===e.getLayout()?a*t+s:s*n+a;i[a][s]=r[o]}return i}),A("VERSION","0.5.1675471629")}).call(this)},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&s[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},6540:(e,t,n)=>{"use strict";e.exports=n(5287)},6686:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,"/* Radio Stations Container */\n.radio-stations-container {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 20px;\n  }\n  \n  h1 {\n    margin-bottom: 20px;\n    text-align: center;\n  }\n  \n  /* Search Bar */\n  .search-bar {\n    width: 100%;\n    padding: 10px 15px;\n    font-size: 16px;\n    border: 1px solid #ddd;\n    border-radius: 25px;\n    margin-bottom: 20px;\n  }\n  \n  /* Categories Bar */\n  .categories-bar {\n    display: flex;\n    overflow-x: auto;\n    padding: 10px;\n    gap: 10px;\n    white-space: nowrap;\n    background-color: #f5f5f5;\n    border-radius: 8px;\n    margin-bottom: 15px;\n  }\n  \n  .category-badge {\n    background-color: #e0e0e0;\n    border: none;\n    padding: 8px 12px;\n    font-size: 14px;\n    border-radius: 20px;\n    cursor: pointer;\n    transition: background 0.3s ease-in-out;\n  }\n  \n  .category-badge.active {\n    background-color: #007bff;\n    color: white;\n    font-weight: bold;\n  }\n  \n  .category-badge:hover {\n    background-color: #d1d1d1;\n  }\n  \n  /* Radio List */\n  .radio-list {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n    gap: 20px;\n  }\n  \n  .radio-card {\n    border: 1px solid #ddd;\n    border-radius: 10px;\n    padding: 20px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  }\n  \n  .radio-card h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n  }\n  \n  .radio-card p {\n    margin-bottom: 15px;\n  }\n  \n  .radio-card audio {\n    width: 100%;\n    margin-bottom: 15px;\n  }\n  \n  .offline {\n    color: #ff3333;\n    font-weight: bold;\n  }\n  \n  .view-details {\n    display: inline-block;\n    text-decoration: none;\n    color: #2196f3;\n    font-weight: bold;\n  }\n  \n  .view-details:hover {\n    text-decoration: underline;\n  }\n  \n  .no-results {\n    grid-column: 1 / -1;\n    text-align: center;\n    padding: 40px;\n    font-size: 18px;\n    color: #757575;\n  }",""]);const o=s},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6993:(e,t,n)=>{var r=n(5546);function i(){var t,n,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function l(e,i,a,s){var o=i&&i.prototype instanceof u?i:u,l=Object.create(o.prototype);return r(l,"_invoke",function(e,r,i){var a,s,o,l=0,u=i||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return a=e,s=0,o=t,h.n=n,c}};function f(e,r){for(s=e,o=r,n=0;!d&&l&&!i&&n<u.length;n++){var i,a=u[n],f=h.p,p=a[2];e>3?(i=p===r)&&(o=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=f&&((i=e<2&&f<a[1])?(s=0,h.v=r,h.n=a[1]):f<p&&(i=e<3||a[0]>r||r>p)&&(a[4]=e,a[5]=r,h.n=p,s=0))}if(i||e>1)return c;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,o=p;(n=s<2?t:o)||!d;){a||(s?s<3?(s>1&&(h.n=-1),f(s,o)):h.n=o:h.v=o);try{if(l=2,a){if(s||(i="next"),n=a[i]){if(!(n=n.call(a,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,s<2&&(s=0)}else 1===s&&(n=a.return)&&n.call(a),s<2&&(o=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=t}else if((n=(d=h.n<0)?o:e.call(r,h))!==c)break}catch(e){a=t,s=1,o=e}finally{l=1}}return{value:n,done:d}}}(e,a,s),!0),l}var c={};function u(){}function d(){}function h(){}n=Object.getPrototypeOf;var f=[][s]?n(n([][s]())):(r(n={},s,function(){return this}),n),p=h.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,r(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=h,r(p,"constructor",h),r(h,"constructor",d),d.displayName="GeneratorFunction",r(h,o,"GeneratorFunction"),r(p),r(p,o,"Generator"),r(p,s,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(e.exports=i=function(){return{w:l,m}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},7238:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,"/* Gamers Chatroom Styles */\n.gamers-chatroom-container {\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 20px;\n  background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);\n  min-height: 100vh;\n  color: white;\n  font-family: 'Arial', sans-serif;\n}\n\n/* Header */\n.chatroom-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding: 20px;\n  background: rgba(26, 26, 46, 0.8);\n  border-radius: 12px;\n  border: 1px solid #4a9eff;\n}\n\n.chatroom-header h1 {\n  color: #4a9eff;\n  margin: 0;\n  font-size: 1.8rem;\n}\n\n.user-status {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 14px;\n}\n\n.online-indicator {\n  font-size: 12px;\n}\n\n.game-status {\n  background: rgba(0, 255, 136, 0.2);\n  color: #00ff88;\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n  border: 1px solid #00ff88;\n}\n\n.status-btn {\n  background: #ff6b35;\n  color: white;\n  border: none;\n  padding: 6px 12px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 12px;\n  transition: background 0.3s ease;\n}\n\n.status-btn:hover {\n  background: #e55a2b;\n}\n\n/* Main Layout */\n.chatroom-layout {\n  display: grid;\n  grid-template-columns: 300px 1fr;\n  gap: 20px;\n  height: calc(100vh - 140px);\n}\n\n/* Sidebar */\n.chatroom-sidebar {\n  background: rgba(26, 26, 46, 0.8);\n  border-radius: 12px;\n  border: 1px solid #4a9eff;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n.rooms-section,\n.online-section,\n.games-section {\n  margin-bottom: 25px;\n}\n\n.rooms-section h3,\n.online-section h3,\n.games-section h3 {\n  color: #4a9eff;\n  margin-bottom: 15px;\n  margin-top: 0;\n  font-size: 16px;\n  border-bottom: 2px solid #4a9eff;\n  padding-bottom: 8px;\n}\n\n/* Room Buttons */\n.rooms-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.room-btn {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  width: 100%;\n  padding: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid #333;\n  border-radius: 8px;\n  color: #cccccc;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  text-align: left;\n}\n\n.room-btn:hover {\n  background: rgba(74, 158, 255, 0.1);\n  border-color: #4a9eff;\n  color: #4a9eff;\n}\n\n.room-btn.active {\n  background: #4a9eff;\n  color: white;\n  border-color: #4a9eff;\n}\n\n.room-icon {\n  font-size: 16px;\n  flex-shrink: 0;\n}\n\n.room-name {\n  font-size: 13px;\n  font-weight: 500;\n}\n\n/* Online Users */\n.users-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.user-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 6px;\n  font-size: 12px;\n}\n\n.user-status {\n  font-size: 10px;\n}\n\n.user-name {\n  font-weight: 500;\n  color: #cccccc;\n}\n\n.user-game {\n  color: #00ff88;\n  font-size: 10px;\n  background: rgba(0, 255, 136, 0.1);\n  padding: 2px 6px;\n  border-radius: 8px;\n  margin-left: auto;\n}\n\n/* Active Games */\n.games-list {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.game-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 6px 8px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 6px;\n  font-size: 12px;\n}\n\n.game-name {\n  color: #cccccc;\n  font-weight: 500;\n}\n\n.game-count {\n  color: #4a9eff;\n  font-size: 10px;\n}\n\n/* Main Chat Area */\n.chat-main {\n  display: flex;\n  flex-direction: column;\n  background: rgba(26, 26, 46, 0.8);\n  border-radius: 12px;\n  border: 1px solid #4a9eff;\n  overflow: hidden;\n}\n\n/* Room Header */\n.room-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 20px;\n  background: rgba(74, 158, 255, 0.1);\n  border-bottom: 1px solid #4a9eff;\n}\n\n.room-header h2 {\n  color: #4a9eff;\n  margin: 0;\n  font-size: 1.2rem;\n}\n\n.room-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.action-btn {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid #666;\n  color: #cccccc;\n  padding: 8px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.3s ease;\n}\n\n.action-btn:hover {\n  background: rgba(74, 158, 255, 0.2);\n  border-color: #4a9eff;\n  color: #4a9eff;\n}\n\n/* Messages Area */\n.chat-messages {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n  background: rgba(15, 15, 35, 0.5);\n}\n\n.typing-indicator {\n  padding: 10px;\n  color: #666;\n  font-style: italic;\n  font-size: 12px;\n}\n\n/* Quick Actions */\n.quick-actions {\n  display: flex;\n  gap: 10px;\n  padding: 15px 20px;\n  background: rgba(255, 255, 255, 0.05);\n  border-top: 1px solid #333;\n  flex-wrap: wrap;\n}\n\n.quick-btn {\n  background: rgba(74, 158, 255, 0.2);\n  border: 1px solid #4a9eff;\n  color: #4a9eff;\n  padding: 6px 12px;\n  border-radius: 15px;\n  cursor: pointer;\n  font-size: 12px;\n  transition: all 0.3s ease;\n}\n\n.quick-btn:hover {\n  background: #4a9eff;\n  color: white;\n}\n\n/* Message Input Area */\n.message-input-area {\n  padding: 20px;\n  border-top: 1px solid #333;\n  background: rgba(26, 26, 46, 0.8);\n}\n\n.emoji-picker {\n  display: flex;\n  gap: 5px;\n  margin-bottom: 10px;\n  padding: 10px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  flex-wrap: wrap;\n}\n\n.emoji-btn {\n  background: none;\n  border: none;\n  font-size: 20px;\n  cursor: pointer;\n  padding: 5px;\n  border-radius: 4px;\n  transition: background 0.2s ease;\n}\n\n.emoji-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.input-group {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n}\n\n.emoji-toggle-btn {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid #666;\n  color: #cccccc;\n  padding: 10px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 16px;\n  transition: all 0.3s ease;\n}\n\n.emoji-toggle-btn:hover {\n  background: rgba(74, 158, 255, 0.2);\n  border-color: #4a9eff;\n}\n\n.message-input {\n  flex: 1;\n  padding: 12px 15px;\n  border: 1px solid #4a9eff;\n  border-radius: 8px;\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n  font-size: 14px;\n  outline: none;\n}\n\n.message-input::placeholder {\n  color: #999;\n}\n\n.message-input:focus {\n  border-color: #4a9eff;\n  box-shadow: 0 0 10px rgba(74, 158, 255, 0.3);\n}\n\n.send-btn {\n  background: #4a9eff;\n  color: white;\n  border: none;\n  padding: 12px 20px;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: bold;\n  transition: all 0.3s ease;\n}\n\n.send-btn:hover {\n  background: #3a8eef;\n  transform: translateY(-2px);\n}\n\n.input-footer {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 8px;\n}\n\n.char-count {\n  font-size: 12px;\n  color: #666;\n}\n\n/* Responsive Design */\n@media (max-width: 1024px) {\n  .chatroom-layout {\n    grid-template-columns: 250px 1fr;\n  }\n  \n  .quick-actions {\n    flex-direction: column;\n  }\n  \n  .quick-btn {\n    width: 100%;\n    text-align: center;\n  }\n}\n\n@media (max-width: 768px) {\n  .chatroom-layout {\n    grid-template-columns: 1fr;\n    grid-template-rows: auto 1fr;\n  }\n  \n  .chatroom-sidebar {\n    order: 2;\n    height: 200px;\n  }\n  \n  .chat-main {\n    order: 1;\n    height: 500px;\n  }\n  \n  .chatroom-header {\n    flex-direction: column;\n    gap: 15px;\n    text-align: center;\n  }\n  \n  .user-status {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n  \n  .rooms-list {\n    flex-direction: row;\n    overflow-x: auto;\n    gap: 5px;\n  }\n  \n  .room-btn {\n    min-width: 150px;\n    flex-shrink: 0;\n  }\n  \n  .input-group {\n    flex-direction: column;\n    gap: 10px;\n  }\n  \n  .message-input {\n    order: 1;\n  }\n  \n  .emoji-toggle-btn,\n  .send-btn {\n    order: 2;\n    width: 100%;\n  }\n}\n\n/* Custom Scrollbar */\n.chatroom-sidebar::-webkit-scrollbar,\n.chat-messages::-webkit-scrollbar {\n  width: 6px;\n}\n\n.chatroom-sidebar::-webkit-scrollbar-track,\n.chat-messages::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 3px;\n}\n\n.chatroom-sidebar::-webkit-scrollbar-thumb,\n.chat-messages::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.chatroom-sidebar::-webkit-scrollbar-thumb:hover,\n.chat-messages::-webkit-scrollbar-thumb:hover {\n  background: #3a8eef;\n}",""]);const o=s},7386:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,'/* General Profile Container */\n.profile-container {\n  max-width: 1200px;\n  margin: 20px auto;\n  padding: 20px;\n  background: linear-gradient(135deg, #0f1c2e, #1a2a40, #243b55);\n\n  border-radius: 10px;\n  box-shadow: 0px 8px 24px rgba(0, 0, 0, 0.3);\n  font-family: Arial, sans-serif;\n  min-height: 100vh;\n  color: #e8f5e8;\n}\n\n/* Cover Photo */\n.cover-photo-container {\n  margin-bottom: 40px;\n  position: relative;\n  text-align: center;\n}\n\n.cover-photo {\n  width: 100%;\n  height: 200px;\n  object-fit: cover;\n  object-position: 50% 20%;\n  border-radius: 15px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n}\n\n.filename-display {\n  margin-top: 5px;\n  font-size: 12px;\n  color: #81c784;\n}\n\n/* Profile Avatar Section - Fixed Layout */\n.profile-avatar-toggle-horizontal {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  margin-bottom: 40px;\n  justify-content: flex-start;\n  background: rgba(46, 79, 46, 0.8);\n  padding: 20px;\n  border-radius: 15px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n}\n\n.profile-pic {\n  width: 100px;\n  height: 100px;\n  border-radius: 50%;\n  border: 4px solid #4caf50;\n  flex-shrink: 0;\n  box-shadow: 0 0 20px rgba(76, 175, 80, 0.4);\n}\n\n.profile-name-inline {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.profile-name-label {\n  font-weight: bold;\n  font-size: 1.4rem;\n  margin: 0 0 8px 0;\n  text-align: left;\n  background: linear-gradient(45deg, #4caf50, #388e3c);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.profile-name-header {\n  margin-left: 20px;\n  flex-shrink: 0;\n}\n\n.name-and-actions {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.name-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.small-btn {\n  padding: 10px 16px;\n  font-size: 0.9rem;\n  border-radius: 25px;\n  border: none;\n  cursor: pointer;\n  background: #4caf50;\n  color: white;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\n}\n\n.small-btn:hover {\n  background: #388e3c;\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(56, 142, 60, 0.4);\n}\n\n.edit-name-input {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.name-input {\n  font-size: 16px;\n  padding: 8px 16px;\n  border: 2px solid #4caf50;\n  border-radius: 25px;\n  width: 200px;\n  background: rgba(46, 79, 46, 0.9);\n  color: #e8f5e8;\n}\n\n.name-save-btn {\n  background: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 25px;\n  padding: 10px 20px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.name-save-btn:hover {\n  background: #388e3c;\n  transform: translateY(-2px);\n}\n\n/* Bio, Quick Stats, and Mood Row */\n.profile-header-flex {\n  display: flex;\n  gap: 25px;\n  margin-bottom: 30px;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  justify-content: space-between;\n}\n\n/* Bio Section */\n.profile-card-bio {\n  flex: 1;\n  min-width: 350px;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 15px;\n  padding: 25px;\n  color: #e0e0ff;\n  backdrop-filter: blur(6px);\n  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);\n\n  padding: 25px;\n  \n  \n  backdrop-filter: blur(10px);\n \n}\n\n.profile-card-bio label {\n  font-weight: bold;\n  color: #a5d6a7;\n  margin-bottom: 8px;\n  display: block;\n  font-size: 18px;\n}\n\n.profile-card-bio p {\n  margin: 0 0 15px 0;\n  line-height: 1.6;\n  color: #c8e6c9;\n  font-size: 14px;\n}\n\n.profile-card-bio button {\n  background: #4caf50;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 25px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\n}\n\n.profile-card-bio button:hover {\n  background: #388e3c;\n  transform: translateY(-2px);\n}\n\n.profile-card-bio textarea {\n  width: 100%;\n  border: 2px solid #4caf50;\n  border-radius: 12px;\n  padding: 15px;\n  font-size: 14px;\n  resize: vertical;\n  margin-bottom: 10px;\n  box-sizing: border-box;\n  min-height: 100px;\n  background: rgba(27, 46, 27, 0.9);\n  color: #e8f5e8;\n}\n\n/* Quick Stats Section */\n.profile-stats-card {\n  flex: 0 0 280px;\n  min-width: 260px;\n  background: rgba(46, 79, 46, 0.9);\n  padding: 20px;\n  border-radius: 15px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  height: fit-content;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n}\n\n.profile-stats-card h4 {\n  margin-bottom: 20px;\n  margin-top: 0;\n  color: #a5d6a7;\n  font-size: 18px;\n  text-align: center;\n}\n\n.profile-stats-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.profile-stats-list li {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 15px;\n  border-bottom: 1px solid rgba(76, 175, 80, 0.2);\n  font-size: 15px;\n  color: #000000;\n  background: rgba(200, 230, 201, 0.9);\n  border-radius: 8px;\n  margin-bottom: 8px;\n  font-weight: 500;\n}\n\n.profile-stats-list li:last-child {\n  border-bottom: none;\n  margin-bottom: 0;\n}\n\n.profile-stats-list li strong {\n  color: #000000;\n  font-weight: 700;\n}\n\n/* Mood Section */\n.mood-section {\n  flex: 0 0 350px;\n  min-width: 320px;\n  margin-bottom: 0;\n}\n\n.mood-card {\n  width: 100%;\n  background: rgba(46, 79, 46, 0.9);\n  padding: 20px;\n  border-radius: 15px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  height: fit-content;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n}\n\n.mood-card h4 {\n  margin-bottom: 15px;\n  margin-top: 0;\n  color: #a5d6a7;\n  font-size: 18px;\n  text-align: center;\n}\n\n/* 3x2 Grid Layout */\n.mood-selector {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(2, 1fr);\n  gap: 12px;\n  margin-bottom: 15px;\n}\n\n.mood-btn {\n  padding: 12px 10px;\n  border: 2px solid rgba(76, 175, 80, 0.4);\n  border-radius: 12px;\n  background: rgba(27, 46, 27, 0.8);\n  color: #c8e6c9;\n  font-size: 13px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  text-align: center;\n  min-height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mood-btn:hover {\n  border-color: #4caf50;\n  background: rgba(76, 175, 80, 0.2);\n  color: #4caf50;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);\n}\n\n.mood-btn.active {\n  border-color: #4caf50;\n  background: #4caf50;\n  color: white;\n  box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4);\n}\n\n.current-mood-display {\n  text-align: center;\n  padding: 12px;\n  background: rgba(27, 46, 27, 0.9);\n  border-radius: 12px;\n  border: 1px solid rgba(76, 175, 80, 0.3);\n}\n\n.current-mood-display p {\n  margin: 0;\n  color: #c8e6c9;\n  font-size: 14px;\n}\n\n.current-mood-display strong {\n  color: #4caf50;\n  font-size: 16px;\n}\n\n/* Social Links Section */\n.social-links {\n  background: rgba(46, 79, 46, 0.9);\n  padding: 30px;\n  border-radius: 15px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  margin-bottom: 20px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n}\n\n.social-links h4 {\n  margin-bottom: 20px;\n  color: #a5d6a7;\n  font-size: 20px;\n  text-align: center;\n}\n\n.social-links-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 15px;\n}\n\n.social-link {\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  background: rgba(27, 46, 27, 0.9);\n  border-radius: 15px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n  text-decoration: none;\n  color: inherit;\n  transition: all 0.3s ease;\n  border: 1px solid rgba(76, 175, 80, 0.3);\n}\n\n.social-link:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 30px rgba(76, 175, 80, 0.3);\n  border-color: #4caf50;\n  text-decoration: none;\n}\n\n.social-icon {\n  font-size: 32px;\n  margin-right: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 60px;\n  height: 60px;\n  background: linear-gradient(45deg, #2e4f2e, #3e5e3e);\n  border-radius: 50%;\n  border: 2px solid rgba(76, 175, 80, 0.3);\n}\n\n.social-info {\n  flex: 1;\n}\n\n.social-info strong {\n  display: block;\n  font-size: 16px;\n  font-weight: 600;\n  margin-bottom: 4px;\n  color: #a5d6a7;\n}\n\n.social-info p {\n  margin: 0;\n  font-size: 14px;\n  color: #c8e6c9;\n  line-height: 1.3;\n}\n\n/* Profile Layout - 3 Columns */\n.profile-layout {\n  display: flex;\n  gap: 20px;\n}\n\n/* Left Column - Favorites */\n.left-column {\n  flex: 1;\n  max-width: 300px;\n  background: rgba(46, 79, 46, 0.9);\n  padding: 20px;\n  border-radius: 15px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n}\n\n.left-column h3 {\n  color: #a5d6a7;\n  font-size: 16px;\n}\n\n.left-column h3 a {\n  color: #4caf50;\n  text-decoration: none;\n}\n\n.left-column h3 a:hover {\n  text-decoration: underline;\n}\n\n.favorite-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 15px;\n  padding: 10px;\n  background: rgba(27, 46, 27, 0.8);\n  border-radius: 10px;\n  transition: all 0.3s ease;\n}\n\n.favorite-item:hover {\n  transform: translateX(5px);\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);\n}\n\n.favorite-item strong {\n  color: #a5d6a7;\n}\n\n.favorite-item p {\n  color: #c8e6c9;\n  margin: 0;\n  font-size: 14px;\n}\n\n.favorite-avatar {\n  width: 48px;\n  height: 48px;\n  object-fit: cover;\n  border-radius: 50%;\n  border: 2px solid rgba(76, 175, 80, 0.4);\n  margin-bottom: 15px;\n}\n\n\n.favorite-item:hover {\n  transform: translateX(5px);\n  box-shadow: 0 4px 15px rgba(33, 150, 243, 0.2);\n}\n\n.favorite-item strong {\n  color: #1565c0;\n}\n\n.favorite-item p {\n  color: #1976d2;\n  margin: 0;\n  font-size: 14px;\n}\n\n.favorite-avatar {\n  width: 48px;\n  height: 48px;\n  object-fit: cover;\n  border-radius: 50%;\n  border: 2px solid rgba(33, 150, 243, 0.3);\n}\n\n/* Middle Column - Posts */\n.middle-column {\n  flex: 2;\n  background: rgba(46, 79, 46, 0.9);\n  padding: 20px;\n  border-radius: 15px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n}\n\n.middle-column h3 {\n  font-size: 18px;\n  margin-bottom: 15px;\n  color: #a5d6a7;\n}\n\n.middle-column textarea {\n  width: 100%;\n  min-height: 100px;\n  padding: 15px;\n  border: 2px solid rgba(76, 175, 80, 0.4);\n  border-radius: 12px;\n  resize: vertical;\n  font-family: inherit;\n  margin-bottom: 10px;\n  box-sizing: border-box;\n  background: rgba(27, 46, 27, 0.9);\n  color: #e8f5e8;\n}\n\n.middle-column input[type="file"] {\n  margin-bottom: 15px;\n  width: 100%;\n  padding: 10px;\n  border: 2px dashed rgba(76, 175, 80, 0.4);\n  border-radius: 8px;\n  background: rgba(27, 46, 27, 0.8);\n  color: #c8e6c9;\n}\n\n.middle-column button {\n  background: #4caf50;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 25px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\n}\n\n.middle-column button:hover {\n  background: #388e3c;\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(56, 142, 60, 0.4);\n}\n\n.post-card {\n  border: 1px solid rgba(76, 175, 80, 0.3);\n  padding: 20px;\n  margin-top: 20px;\n  border-radius: 15px;\n  background: rgba(27, 46, 27, 0.9);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n}\n\n.post-image {\n  max-width: 100%;\n  height: auto;\n  margin-top: 10px;\n  border-radius: 12px;\n}\n\n.post-card h5 {\n  margin: 15px 0 10px 0;\n  color: #a5d6a7;\n}\n\n.post-card ul {\n  list-style: none;\n  padding: 0;\n  margin: 0 0 15px 0;\n}\n\n.post-card li {\n  padding: 8px 0;\n  border-bottom: 1px solid rgba(76, 175, 80, 0.3);\n  color: #c8e6c9;\n}\n\n.post-card input {\n  width: calc(100% - 80px);\n  padding: 10px;\n  border: 2px solid rgba(76, 175, 80, 0.4);\n  border-radius: 20px;\n  margin-right: 10px;\n  background: rgba(27, 46, 27, 0.9);\n  color: #e8f5e8;\n}\n\n.post-card button {\n  padding: 10px 16px;\n  font-size: 12px;\n}\n\n/* Right Column - Quick Actions */\n.right-column {\n  flex: 1;\n  max-width: 320px;\n  min-width: 280px;\n  background: rgba(46, 79, 46, 0.9);\n  padding: 20px;\n  border-radius: 15px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n  overflow: visible;\n}\n\n.quick-actions h3 {\n  font-size: 18px;\n  margin-bottom: 20px;\n  margin-top: 0;\n  color: #a5d6a7;\n  text-align: center;\n}\n\n.quick-actions > * {\n  margin-bottom: 15px;\n}\n\n\n\n\n\n.upload-btn:hover {\n  background: #388e3c;\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(56, 142, 60, 0.4);\n}\n\n/* Save Profile Button */\n\n\n.btn-primary:hover {\n  background: linear-gradient(45deg, #388e3c, #2e7d32);\n  transform: translateY(-3px);\n  box-shadow: 0 8px 30px rgba(56, 142, 60, 0.4);\n}\n\n/* General Headings */\nh3 {\n  font-size: 18px;\n  margin-top: 20px;\n  margin-bottom: 15px;\n  color: #a5d6a7;\n}\n\n/* Video Upload Section */\n.upload-video-section {\n  margin-top: 30px;\n  padding: 25px;\n  background: rgba(27, 46, 27, 0.9);\n  border-radius: 15px;\n  border: 1px solid rgba(76, 175, 80, 0.3);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n}\n\n.uploaded-videos {\n  margin-top: 20px;\n}\n\n.video-wrapper {\n  margin-bottom: 20px;\n  padding: 20px;\n  border: 1px solid rgba(76, 175, 80, 0.3);\n  border-radius: 15px;\n  background: rgba(46, 79, 46, 0.9);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n}\n\n.video-wrapper video {\n  width: 100%;\n  max-width: 300px;\n  border-radius: 12px;\n}\n\n.video-wrapper button {\n  margin: 5px 5px 5px 0;\n  padding: 8px 16px;\n  font-size: 12px;\n  border-radius: 20px;\n}\n\n.btn-secondary {\n  background: #66bb6a;\n  color: white;\n  border: none;\n  border-radius: 20px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.btn-secondary:hover {\n  background: #4caf50;\n  transform: translateY(-2px);\n}\n\n/* WebRTC Video Chat - Black Theme */\n.webrtc-controls,\n.video-chat-container {\n  background: #1a1a1a;\n  border-radius: 15px;\n  padding: 20px;\n  margin-top: 25px;\n  border: 1px solid #333;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);\n  min-height: 350px;\n}\n\n.webrtc-controls h4,\n.video-chat-container h4 {\n  color: #ffffff;\n  margin-bottom: 15px;\n  margin-top: 0;\n  text-align: center;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n/* Room Info - Dark Theme */\n.room-info {\n  background: #2a2a2a;\n  padding: 12px;\n  border-radius: 8px;\n  margin-bottom: 15px;\n  text-align: center;\n  border: 1px solid #444;\n}\n\n.room-info strong {\n  color: #ffffff;\n  font-size: 13px;\n}\n\n.room-info span {\n  color: #ccc;\n  font-size: 12px;\n}\n\n/* Video Grid - Compact Layout */\n.video-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 10px;\n  margin-bottom: 15px;\n}\n\n.video-container,\n.local-video,\n.remote-video {\n  width: 100%;\n  height: 100px;\n  background: #000000;\n  border-radius: 8px;\n  border: 2px solid #333;\n  overflow: hidden;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.video-container video,\n.local-video video,\n.remote-video video {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 6px;\n}\n\n/* Video Labels - Dark Theme */\n.video-label {\n  position: absolute;\n  bottom: 5px;\n  left: 5px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 3px 6px;\n  border-radius: 4px;\n  font-size: 10px;\n  font-weight: 500;\n}\n\n/* Control Buttons - Very Compact Size */\n.video-chat-buttons {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 8px;\n  margin-bottom: 15px;\n}\n\n.video-btn {\n  padding: 4px 6px;\n  background: #333;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 9px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 28px;\n  max-height: 28px;\n  width: 100%;\n  max-width: 120px;\n}\n\n\n.video-btn:hover {\n  background: #444;\n  transform: translateY(-1px);\n}\n\n.video-btn.start {\n  background: #4caf50;\n}\n\n.video-btn.start:hover {\n  background: #388e3c;\n}\n\n.video-btn.danger,\n.video-btn.stop {\n  background: #f44336;\n}\n\n.video-btn.danger:hover,\n.video-btn.stop:hover {\n  background: #d32f2f;\n}\n\n/* Status Section - Dark Theme */\n.video-status {\n  background: #2a2a2a;\n  border: 1px solid #444;\n  border-radius: 6px;\n  padding: 8px;\n  margin-bottom: 10px;\n  text-align: center;\n}\n\n.status-indicator {\n  display: inline-flex;\n  align-items: center;\n  gap: 5px;\n  color: #ccc;\n  font-size: 11px;\n}\n\n.status-dot {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: #4caf50;\n}\n\n.status-dot.inactive {\n  background: #666;\n}\n\n/* Debug Section - Dark Theme */\n.debug-section {\n  margin-top: 10px;\n}\n\n.debug-toggle {\n  background: #2a2a2a;\n  border: 1px solid #444;\n  border-radius: 6px;\n  padding: 6px 10px;\n  cursor: pointer;\n  color: #ccc;\n  font-size: 10px;\n  width: 100%;\n  text-align: left;\n}\n\n.debug-info {\n  background: #1a1a1a;\n  border: 1px solid #333;\n  padding: 8px;\n  border-radius: 4px;\n  margin-top: 5px;\n  font-size: 9px;\n  color: #999;\n  font-family: monospace;\n  max-height: 60px;\n  overflow-y: auto;\n}\n\n/* Mobile Responsive */\n@media (max-width: 768px) {\n  .video-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .video-container,\n  .local-video,\n  .remote-video {\n    height: 80px;\n  }\n  \n  .video-chat-buttons {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* Responsive Design */\n@media (max-width: 1200px) {\n  .profile-header-flex {\n    flex-direction: column;\n    gap: 20px;\n  }\n\n  .profile-card-bio,\n  .profile-stats-card,\n  .mood-section {\n    flex: 1;\n    min-width: auto;\n    max-width: none;\n  }\n\n  .mood-card {\n    max-width: 500px;\n    margin: 0 auto;\n  }\n\n  .profile-stats-card {\n    max-width: 400px;\n    margin: 0 auto;\n  }\n}\n\n@media (max-width: 1024px) {\n  .profile-layout {\n    flex-direction: column;\n  }\n\n  .left-column,\n  .right-column {\n    max-width: none;\n  }\n\n  .social-links-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .mood-selector {\n    grid-template-columns: repeat(2, 1fr);\n    grid-template-rows: repeat(3, 1fr);\n  }\n}\n\n@media (max-width: 768px) {\n  .profile-avatar-toggle-horizontal {\n    flex-direction: column;\n    text-align: center;\n    gap: 15px;\n  }\n\n  .profile-name-header {\n    margin-left: 0;\n    margin-top: 10px;\n  }\n\n  .profile-name-inline {\n    text-align: center;\n  }\n\n  .profile-name-label {\n    text-align: center;\n  }\n\n  .mood-selector {\n    grid-template-columns: repeat(2, 1fr);\n    grid-template-rows: repeat(3, 1fr);\n    gap: 10px;\n  }\n\n  .mood-btn {\n    padding: 12px 8px;\n    min-height: 45px;\n  }\n}\n\n/* Custom Scrollbar */\n.profile-container::-webkit-scrollbar {\n  width: 8px;\n}\n\n.profile-container::-webkit-scrollbar-track {\n  background: rgba(76, 175, 80, 0.2);\n  border-radius: 4px;\n}\n\n.profile-container::-webkit-scrollbar-thumb {\n  background: #4caf50;\n  border-radius: 4px;\n}\n\n.profile-container::-webkit-scrollbar-thumb:hover {\n  background: #388e3c;\n}  \n\n.video-chat-modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 95%;\n  max-width: 550px;\n  background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);\n  border-radius: 16px;\n  padding: 25px;\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);\n  z-index: 9999;\n  border: 1px solid #ccc;\n  overflow-y: auto;\n  max-height: 90vh;\n}\n\n.video-chat-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0,0,0,0.6);\n  z-index: 9998;\n}\n\n.open-video-btn {\n  background: #4caf50;\n  color: white;\n  padding: 10px 18px;\n  border: none;\n  border-radius: 25px;\n  font-weight: bold;\n  cursor: pointer;\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\n  transition: all 0.2s ease;\n}\n\n.open-video-btn:hover {\n  background: #388e3c;\n}\n\n.close-video-btn {\n  background: #f44336;\n  color: white;\n  padding: 6px 12px;\n  border: none;\n  border-radius: 8px;\n  font-weight: bold;\n  cursor: pointer;\n}\n\n.close-video-btn:hover {\n  background: #d32f2f;\n}\n\n.video-chat-middle-wrapper {\n  margin-top: 30px;\n}\n\n\n.video-chat-panel {\n  background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);\n  border-radius: 16px;\n  padding: 20px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  margin-top: 20px;\n}\n\n.video-chat-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: bold;\n  font-size: 16px;\n  color: #2c3e50;\n  margin-bottom: 10px;\n}\n\n.close-video-btn {\n  background: #f44336;\n  color: white;\n  border: none;\n  padding: 6px 12px;\n  border-radius: 8px;\n  cursor: pointer;\n  font-weight: bold;\n  transition: background 0.2s ease;\n}\n\n.close-video-btn:hover {\n  background: #d32f2f;\n}\n\n.middle-column {\n  display: flex;\n  flex-direction: column;\n  flex: 2;\n  background: rgba(46, 79, 46, 0.9);\n  padding: 20px;\n  border-radius: 15px;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n}\n\n.post-section-wrapper {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.bottom-action-row {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n  margin-top: 30px;\n  flex-wrap: wrap;\n}\n\n.bottom-btn {\n  min-width: 180px;\n  height: 48px;\n  font-size: 14px;\n  font-weight: 600;\n  border-radius: 25px;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 20px;\n  transition: all 0.3s ease;\n  border: none;\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\n}\n\n.green-btn:hover {\n  background: #388e3c;\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(56, 142, 60, 0.4);\n}\n',""]);const o=s},7463:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function E(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,E(e),!m)if(null!==r(c))m=!0,N(S);else{var t=r(u);null!==t&&D(x,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,b(_),_=-1),p=!0;var a=f;try{for(E(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!L());){var s=h.callback;if("function"==typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof o?h.callback=o:h===r(c)&&i(c),E(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(x,d.startTime-n),l=!1}return l}finally{h=null,f=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,T=null,_=-1,A=5,R=-1;function L(){return!(t.unstable_now()-R<A)}function C(){if(null!==T){var e=t.unstable_now();R=e;var n=!0;try{n=T(!0,e)}finally{n?w():(k=!1,T=null)}}else k=!1}if("function"==typeof y)w=function(){y(C)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,I=P.port2;P.port1.onmessage=C,w=function(){I.postMessage(null)}}else w=function(){v(C,0)};function N(e){T=e,k||(k=!0,w())}function D(e,n){_=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,N(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(b(_),_=-1):g=!0,D(x,a-s))):(e.sortIndex=o,n(c,e),m||p||(m=!0,N(S))),e},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},7544:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,"/* BrowseVideos.css - Styled like BrowseRadioStations */\n\n/* Main wrapper matching BrowseRadioStations */\n.categories-wrapper {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n  background: linear-gradient(135deg, #f8f9fa, #ffffff);\n  min-height: 100vh;\n}\n\n/* Header styling */\n.categories-heading {\n  text-align: center;\n  font-size: 2.5rem;\n  font-weight: 700;\n  margin-bottom: 1rem;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.browse-videos-header {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.video-count {\n  font-size: 1.1rem;\n  color: #666;\n  margin-top: 0.5rem;\n}\n\n/* Search Section */\n.search-section {\n  margin-bottom: 2rem;\n}\n\n.search-bar {\n  position: relative;\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.search-input {\n  width: 100%;\n  padding: 1rem 1.5rem;\n  border: 2px solid #e9ecef;\n  border-radius: 25px;\n  font-size: 1rem;\n  background: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n}\n\n.search-input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);\n}\n\n.clear-search-btn {\n  position: absolute;\n  right: 15px;\n  top: 50%;\n  transform: translateY(-50%);\n  background: none;\n  border: none;\n  font-size: 1rem;\n  cursor: pointer;\n  color: #999;\n  transition: color 0.3s ease;\n}\n\n.clear-search-btn:hover {\n  color: #667eea;\n}\n\n/* Controls Section with Navigation Tabs */\n.controls-section {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 2rem;\n  flex-wrap: wrap;\n  gap: 1rem;\n  background: white;\n  padding: 1rem 1.5rem;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* Navigation Tabs - Horizontal */\n.nav-tabs {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n\n.nav-tab {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 0.85rem;\n  font-weight: 500;\n  color: #495057;\n  border: 2px solid transparent;\n  background: #f8f9fa;\n}\n\n.nav-tab:hover {\n  background: linear-gradient(135deg, #f8f9ff, #f0f4ff);\n  color: #667eea;\n  border-color: #667eea;\n  transform: translateY(-2px);\n}\n\n.nav-tab.active {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border-color: #667eea;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n}\n\n.nav-icon {\n  font-size: 1rem;\n}\n\n.nav-text {\n  font-size: 0.85rem;\n  white-space: nowrap;\n}\n\n/* Sort and Filters on the right */\n.sort-and-filters {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.sort-section {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.sort-select {\n  padding: 0.5rem 1rem;\n  border: 2px solid #e9ecef;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  background: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.sort-select:focus {\n  outline: none;\n  border-color: #667eea;\n}\n\n.clear-filters-btn {\n  background: linear-gradient(135deg, #6c757d, #545b62);\n  color: white;\n  border: none;\n  padding: 0.6rem 1.2rem;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 500;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.clear-filters-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n/* Category Navigation - Horizontal Scrolling Style */\n.category-nav {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 2rem;\n  position: relative;\n}\n\n.scroll-button {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  font-size: 1.2rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n  flex-shrink: 0;\n}\n\n.scroll-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n\n.categories-scroll {\n  display: flex;\n  gap: 0.75rem;\n  overflow-x: auto;\n  scroll-behavior: smooth;\n  padding: 1rem 0;\n  flex: 1;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n\n.categories-scroll::-webkit-scrollbar {\n  display: none;\n}\n\n.category-pill {\n  background: white;\n  color: #495057;\n  border: 2px solid #dee2e6;\n  border-radius: 25px;\n  padding: 0.6rem 1.2rem;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  white-space: nowrap;\n  flex-shrink: 0;\n  text-align: center;\n  min-width: fit-content;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.category-pill:hover {\n  border-color: #667eea;\n  color: #667eea;\n  transform: translateY(-2px);\n  background: linear-gradient(135deg, #ffffff, #f8f9ff);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);\n}\n\n.category-pill.active {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border-color: #667eea;\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n}\n\n.category-pill.active:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);\n}\n\n/* Video Section - 4 per row grid for better desktop layout */\n.podcast-section {\n  margin-bottom: 3rem;\n}\n\n.podcast-scroll-row {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 20px;\n  margin-bottom: 2rem;\n}\n\n/* Video Cards - YouTube-style layout */\n.video-card {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  padding: 0;\n  width: 100%;\n  min-width: 0;\n  transition: all 0.3s ease;\n  border: 2px solid transparent;\n  overflow: hidden;\n}\n\n.video-card:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);\n  border-color: #667eea;\n}\n\n.video-thumbnail {\n  width: 100%;\n  height: 200px;\n  object-fit: cover;\n  margin-bottom: 0;\n  background: #f8f9fa;\n}\n\n.video-content {\n  padding: 1rem;\n}\n\n.video-title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  margin: 0 0 8px 0;\n  color: #333;\n  line-height: 1.3;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  min-height: 2.6em;\n}\n\n.video-creator {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  font-size: 0.8rem;\n  padding: 4px 10px;\n  border-radius: 12px;\n  display: inline-block;\n  margin-bottom: 10px;\n  font-weight: 500;\n}\n\n.video-stats {\n  font-size: 0.9rem;\n  color: #666;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.video-duration {\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 3px 8px;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n\n/* Error and No Videos States */\n.error-message,\n.no-videos {\n  text-align: center;\n  padding: 3rem 2rem;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n  margin: 2rem 0;\n}\n\n.error-message h3,\n.no-videos h3 {\n  color: #333;\n  margin-bottom: 1rem;\n  font-size: 1.5rem;\n}\n\n.retry-btn,\n.btn-secondary,\n.btn-primary {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  padding: 0.8rem 1.5rem;\n  border-radius: 8px;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 500;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n  text-decoration: none;\n  display: inline-block;\n  margin: 0.5rem;\n}\n\n.retry-btn:hover,\n.btn-secondary:hover,\n.btn-primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n\n/* Pagination */\n.pagination {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 1rem;\n  margin: 2rem 0;\n  padding: 1rem;\n}\n\n.pagination-btn {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  padding: 0.6rem 1.2rem;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 500;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.pagination-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n}\n\n.pagination-btn:disabled {\n  background: #e9ecef;\n  color: #6c757d;\n  cursor: not-allowed;\n  box-shadow: none;\n}\n\n.pagination-info {\n  text-align: center;\n  color: #666;\n}\n\n.total-items {\n  display: block;\n  font-size: 0.8rem;\n  color: #999;\n  margin-top: 0.25rem;\n}\n\n/* Loading States */\n.loading-spinner {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  color: #666;\n}\n\n.spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid #e9ecef;\n  border-top: 4px solid #667eea;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 1rem;\n}\n\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.3);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* Responsive Design */\n@media (max-width: 1200px) {\n  .podcast-scroll-row {\n    grid-template-columns: repeat(3, 1fr);\n    gap: 18px;\n  }\n}\n\n@media (max-width: 900px) {\n  .podcast-scroll-row {\n    grid-template-columns: repeat(2, 1fr);\n    gap: 16px;\n  }\n  \n  .categories-heading {\n    font-size: 2rem;\n  }\n}\n\n@media (max-width: 768px) {\n  .categories-wrapper {\n    padding: 15px;\n  }\n\n  .controls-section {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 1rem;\n  }\n\n  .nav-tabs {\n    justify-content: center;\n    gap: 0.25rem;\n  }\n\n  .nav-tab {\n    padding: 0.4rem 0.8rem;\n    font-size: 0.8rem;\n  }\n\n  .nav-text {\n    display: none; /* Hide text on mobile, show only icons */\n  }\n\n  .sort-and-filters {\n    justify-content: center;\n  }\n\n  .podcast-scroll-row {\n    grid-template-columns: repeat(2, 1fr);\n    gap: 15px;\n  }\n\n  .video-thumbnail {\n    height: 160px;\n  }\n\n  .category-nav {\n    margin: 0 -15px 2rem;\n    padding: 0 15px;\n  }\n\n  .scroll-button {\n    width: 35px;\n    height: 35px;\n    font-size: 1rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .nav-tabs {\n    overflow-x: auto;\n    padding: 0.5rem 0;\n    gap: 0.5rem;\n  }\n\n  .nav-tab {\n    flex-shrink: 0;\n    padding: 0.5rem;\n  }\n\n  .podcast-scroll-row {\n    grid-template-columns: 1fr;\n    gap: 12px;\n  }\n\n  .video-thumbnail {\n    height: 180px;\n  }\n\n  .categories-heading {\n    font-size: 1.5rem;\n  }\n\n  .search-input {\n    padding: 0.8rem 1.2rem;\n    font-size: 0.9rem;\n  }\n\n  .category-pill {\n    padding: 0.5rem 1rem;\n    font-size: 0.8rem;\n  }\n\n  .video-content {\n    padding: 0.8rem;\n  }\n}\n\n/* Focus states for accessibility */\n.category-pill:focus,\n.scroll-button:focus,\n.pagination-btn:focus,\n.search-input:focus {\n  outline: 2px solid #667eea;\n  outline-offset: 2px;\n}",""]);const o=s},7659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},7866:function(e,t,n){(function(){"use strict";function e(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function i(e,n){if(n)e:{var i=r;e=e.split(".");for(var a=0;a<e.length-1;a++){var s=e[a];if(!(s in i))break e;i=i[s]}(n=n(a=i[e=e[e.length-1]]))!=a&&null!=n&&t(i,e,{configurable:!0,writable:!0,value:n})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(t){var n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:e(t)}}function o(){this.i=!1,this.g=null,this.o=void 0,this.j=1,this.m=0,this.h=null}function l(e){if(e.i)throw new TypeError("Generator is already running");e.i=!0}function c(e,t){e.h={F:t,G:!0},e.j=e.m}function u(e){this.g=new o,this.h=e}function d(e,t,n,r){try{var i=t.call(e.g.g,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.i=!1,i;var a=i.value}catch(t){return e.g.g=null,c(e.g,t),h(e)}return e.g.g=null,r.call(e.g,a),h(e)}function h(e){for(;e.g.j;)try{var t=e.h(e.g);if(t)return e.g.i=!1,{value:t.value,done:!1}}catch(t){e.g.o=void 0,c(e.g,t)}if(e.g.i=!1,e.g.h){if(t=e.g.h,e.g.h=null,t.G)throw t.F;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function f(e){this.next=function(t){return l(e.g),e.g.g?t=d(e,e.g.g.next,t,e.g.l):(e.g.l(t),t=h(e)),t},this.throw=function(t){return l(e.g),e.g.g?t=d(e,e.g.g.throw,t,e.g.l):(c(e.g,t),t=h(e)),t},this.return=function(t){return function(e,t){l(e.g);var n=e.g.g;return n?d(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),h(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function p(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,i){!function e(a){a.done?r(a.value):Promise.resolve(a.value).then(t,n).then(e,i)}(e.next())})}i("Symbol",function(e){function n(e,n){this.g=e,t(this,"description",{configurable:!0,writable:!0,value:n})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new n(r+(t||"")+"_"+i++,t)}}),i("Symbol.iterator",function(n){if(n)return n;n=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),s=0;s<i.length;s++){var o=r[i[s]];"function"==typeof o&&"function"!=typeof o.prototype[n]&&t(o.prototype,n,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return n}),o.prototype.l=function(e){this.o=e},o.prototype.return=function(e){this.h={return:e},this.j=this.m},i("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var a=r.setTimeout;n.prototype.i=function(e){a(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.A),reject:e(this.l)}},t.prototype.A=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.C(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.m(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.D(t,e):this.m(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.m=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.B(),this.H()},t.prototype.B=function(){var e=this;a(function(){if(e.I()){var t=r.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.I=function(){if(this.o)return!1;var e=r.CustomEvent,t=r.Event,n=r.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.H=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.C=function(e){var t=this.j();e.s(t.resolve,t.reject)},t.prototype.D=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){a(e)}}:t}var i,a,s=new t(function(e,t){i=e,a=t});return this.s(r(e,i),r(n,a)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.s=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=s(e),a=r.next();!a.done;a=r.next())i(a.value).s(t,n)})},t.all=function(e){var n=s(e),r=n.next();return r.done?i([]):new t(function(e,t){function a(t){return function(n){s[t]=n,0==--o&&e(s)}}var s=[],o=0;do{s.push(void 0),o++,i(r.value).s(a(s.length-1),t),r=n.next()}while(!r.done)})},t});var m="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};i("Object.assign",function(e){return e||m});var g=this||self,v={facingMode:"user",width:640,height:480};function b(e,t){this.video=e,this.i=0,this.h=Object.assign(Object.assign({},v),t)}function y(e){window.requestAnimationFrame(function(){!function(e){var t=null;e.video.paused||e.video.currentTime===e.i||(e.i=e.video.currentTime,t=e.h.onFrame()),t?t.then(function(){y(e)}):y(e)}(e)})}b.prototype.stop=function(){var e,t,n,r=this;return p(new f(new u(function(i){if(r.g){for(e=r.g.getTracks(),t=s(e),n=t.next();!n.done;n=t.next())n.value.stop();r.g=void 0}i.j=0})))},b.prototype.start=function(){var e,t=this;return p(new f(new u(function(n){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert("No navigator.mediaDevices.getUserMedia exists."),e=t.h,n.return(navigator.mediaDevices.getUserMedia({video:{facingMode:e.facingMode,width:e.width,height:e.height}}).then(function(e){!function(e,t){e.g=t,e.video.srcObject=t,e.video.onloadedmetadata=function(){e.video.play(),y(e)}}(t,e)}).catch(function(e){var t="Failed to acquire camera feed: "+e;throw console.error(t),alert(t),e}))})))};var E,x=["Camera"],S=g;x[0]in S||void 0===S.execScript||S.execScript("var "+x[0]);for(;x.length&&(E=x.shift());)x.length||void 0===b?S=S[E]&&S[E]!==Object.prototype[E]?S[E]:S[E]={}:S[E]=b}).call(this)},8328:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,'/* Enhanced Team Room Styles with Roles & Better UX */\n.team-room-container {\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 20px;\n  background: #1a1a2e;\n  min-height: 100vh;\n  color: white;\n}\n\n.team-room-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n  flex-wrap: wrap;\n  gap: 20px;\n}\n\n.team-room-header h1 {\n  color: #4a9eff;\n  margin: 0;\n  font-size: 2rem;\n}\n\n/* 🆕 NEW: Connection Status Indicator */\n.connection-status {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 16px;\n  border-radius: 20px;\n  font-size: 14px;\n  font-weight: 500;\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.connection-status .status-indicator {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  animation: pulse 2s infinite;\n}\n\n.connection-status.connected .status-indicator {\n  background: #00ff88;\n}\n\n.connection-status.connecting .status-indicator {\n  background: #ffa500;\n}\n\n.connection-status.disconnected .status-indicator {\n  background: #666;\n  animation: none;\n}\n\n.connection-status.error .status-indicator {\n  background: #ff4757;\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.5; }\n}\n\n/* Mode Toggle */\n.mode-toggle {\n  display: flex;\n  gap: 10px;\n  background: rgba(255, 255, 255, 0.1);\n  padding: 5px;\n  border-radius: 25px;\n}\n\n.mode-btn {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 20px;\n  background: transparent;\n  color: #cccccc;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 500;\n}\n\n.mode-btn:hover {\n  background: rgba(74, 158, 255, 0.2);\n  color: #4a9eff;\n}\n\n.mode-btn.active {\n  background: #4a9eff;\n  color: white;\n  box-shadow: 0 2px 10px rgba(74, 158, 255, 0.4);\n}\n\n/* Video Chat Section */\n.video-chat-section {\n  background: rgba(26, 26, 46, 0.8);\n  border-radius: 12px;\n  padding: 25px;\n  border: 1px solid #4a9eff;\n}\n\n/* Room Controls */\n.room-controls {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 25px;\n  flex-wrap: wrap;\n  gap: 15px;\n  padding: 20px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n}\n\n.room-id-section {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.room-id-section label {\n  color: #4a9eff;\n  font-weight: bold;\n  white-space: nowrap;\n}\n\n.room-id-section input {\n  padding: 8px 12px;\n  border: 1px solid #4a9eff;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n  min-width: 200px;\n}\n\n.room-id-section input:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.room-id-section button {\n  padding: 8px 15px;\n  background: #ff6b35;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  white-space: nowrap;\n}\n\n.room-id-section button:hover:not(:disabled) {\n  background: #e55a2b;\n}\n\n.room-id-section button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n/* 🆕 NEW: Role Indicator */\n.role-indicator {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.role-badge {\n  padding: 6px 12px;\n  border-radius: 15px;\n  font-size: 14px;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.role-badge.host {\n  background: linear-gradient(45deg, #ffd700, #ffed4e);\n  color: #1a1a2e;\n  box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);\n}\n\n.role-badge.participant {\n  background: linear-gradient(45deg, #00ff88, #00e577);\n  color: #1a1a2e;\n  box-shadow: 0 2px 10px rgba(0, 255, 136, 0.3);\n}\n\n.role-badge.viewer {\n  background: linear-gradient(45deg, #666, #888);\n  color: white;\n  box-shadow: 0 2px 10px rgba(102, 102, 102, 0.3);\n}\n\n.join-btn, .leave-btn {\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  font-weight: bold;\n  cursor: pointer;\n  font-size: 16px;\n  transition: all 0.3s ease;\n}\n\n.join-btn {\n  background: #00ff88;\n  color: #0f0f23;\n}\n\n.join-btn:hover {\n  background: #00e577;\n  transform: translateY(-2px);\n}\n\n.leave-btn {\n  background: #ff4757;\n  color: white;\n}\n\n.leave-btn:hover {\n  background: #ff3838;\n  transform: translateY(-2px);\n}\n\n/* 🆕 NEW: Participants Panel */\n.participants-panel {\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  padding: 15px;\n  margin-bottom: 20px;\n}\n\n.participants-panel h3 {\n  color: #4a9eff;\n  margin: 0 0 15px 0;\n  font-size: 18px;\n}\n\n.participants-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.participant-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 6px;\n  border-left: 3px solid transparent;\n}\n\n.participant-item:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.participant-info {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  flex: 1;\n}\n\n.participant-role {\n  font-size: 16px;\n  width: 20px;\n  text-align: center;\n}\n\n.participant-name {\n  font-weight: 500;\n  color: white;\n  flex: 1;\n}\n\n.participant-status {\n  display: flex;\n  gap: 5px;\n}\n\n.status-icon {\n  font-size: 12px;\n  opacity: 0.8;\n}\n\n.participant-controls {\n  display: flex;\n  gap: 5px;\n}\n\n.participant-controls button {\n  padding: 4px 8px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 12px;\n  transition: all 0.2s ease;\n}\n\n.promote-btn {\n  background: #00ff88;\n  color: #1a1a2e;\n}\n\n.promote-btn:hover {\n  background: #00e577;\n  transform: scale(1.05);\n}\n\n.demote-btn {\n  background: #ffa500;\n  color: white;\n}\n\n.demote-btn:hover {\n  background: #ff8c00;\n  transform: scale(1.05);\n}\n\n.kick-btn {\n  background: #ff4757;\n  color: white;\n}\n\n.kick-btn:hover {\n  background: #ff3838;\n  transform: scale(1.05);\n}\n\n/* Video Controls */\n.video-controls {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-bottom: 25px;\n  flex-wrap: wrap;\n}\n\n.control-btn {\n  padding: 12px 20px;\n  border: 2px solid #666;\n  border-radius: 8px;\n  background: rgba(255, 255, 255, 0.1);\n  color: #cccccc;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.3s ease;\n  min-width: 120px;\n  position: relative;\n}\n\n.control-btn:hover:not(:disabled) {\n  border-color: #4a9eff;\n  color: #4a9eff;\n  background: rgba(74, 158, 255, 0.1);\n}\n\n.control-btn.enabled {\n  border-color: #00ff88;\n  background: #00ff88;\n  color: #0f0f23;\n}\n\n.control-btn.disabled {\n  border-color: #ff4757;\n  background: rgba(255, 71, 87, 0.2);\n  color: #ff4757;\n}\n\n.control-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.disabled-text {\n  font-size: 10px;\n  display: block;\n  margin-top: 2px;\n  opacity: 0.8;\n}\n\n/* Video Grid */\n.video-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 20px;\n  margin-bottom: 25px;\n}\n\n.video-container {\n  position: relative;\n  background: #0f0f23;\n  border-radius: 12px;\n  overflow: hidden;\n  aspect-ratio: 16/9;\n  border: 2px solid #333;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\n}\n\n.video-container.local-video {\n  border-color: #4a9eff;\n  box-shadow: 0 4px 15px rgba(74, 158, 255, 0.3);\n}\n\n.video-container.screen-share {\n  border-color: #ff6b35;\n  box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);\n  grid-column: span 2;\n}\n\n.video-container.remote-video.host {\n  border-color: #ffd700;\n  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);\n}\n\n.video-container.remote-video.participant {\n  border-color: #00ff88;\n  box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);\n}\n\n.video-container.remote-video.viewer {\n  border-color: #666;\n  box-shadow: 0 4px 15px rgba(102, 102, 102, 0.3);\n}\n\n.video-container.placeholder {\n  border: 2px dashed #666;\n  background: rgba(255, 255, 255, 0.05);\n}\n\n.video-element {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  background: #0f0f23;\n}\n\n.video-label {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));\n  color: white;\n  padding: 10px;\n  font-size: 14px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.user-role {\n  font-size: 16px;\n  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.8));\n}\n\n.video-disabled, .audio-disabled {\n  font-size: 12px;\n  opacity: 0.8;\n}\n\n.placeholder-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  text-align: center;\n  color: #666;\n  padding: 20px;\n}\n\n.placeholder-content p:first-child {\n  font-size: 3rem;\n  margin: 0 0 10px 0;\n}\n\n.placeholder-content p {\n  margin: 5px 0;\n}\n\n.placeholder-content strong {\n  color: #4a9eff;\n  font-family: monospace;\n  background: rgba(74, 158, 255, 0.1);\n  padding: 2px 6px;\n  border-radius: 4px;\n}\n\n.host-tips {\n  margin-top: 20px;\n  padding: 15px;\n  background: rgba(255, 215, 0, 0.1);\n  border-radius: 8px;\n  border-left: 3px solid #ffd700;\n}\n\n.host-tips p {\n  margin: 5px 0;\n  font-size: 13px;\n  color: #cccccc;\n}\n\n.host-tips strong {\n  color: #ffd700;\n}\n\n/* Team Chat */\n.team-chat {\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  padding: 20px;\n  margin-top: 20px;\n}\n\n.team-chat h3 {\n  color: #4a9eff;\n  margin-bottom: 15px;\n  margin-top: 0;\n}\n\n/* Streams Section */\n.streams-section {\n  background: rgba(26, 26, 46, 0.8);\n  border-radius: 12px;\n  padding: 25px;\n  border: 1px solid #00ff88;\n}\n\n.streams-section h2 {\n  color: #00ff88;\n  margin-bottom: 20px;\n  margin-top: 0;\n}\n\n.loading {\n  text-align: center;\n  padding: 60px 20px;\n  color: #4a9eff;\n  font-size: 18px;\n}\n\n.no-streams {\n  text-align: center;\n  padding: 60px 20px;\n  color: #cccccc;\n}\n\n.no-streams button {\n  margin-top: 20px;\n  padding: 12px 24px;\n  background: #4a9eff;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 16px;\n  font-weight: bold;\n}\n\n.no-streams button:hover {\n  background: #3a8eef;\n}\n\n/* Enhanced Room Info Panel */\n.room-info {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background: rgba(26, 26, 46, 0.95);\n  border: 1px solid #4a9eff;\n  border-radius: 8px;\n  padding: 15px;\n  min-width: 250px;\n  max-width: 300px;\n  backdrop-filter: blur(10px);\n  z-index: 1000;\n}\n\n.room-info h3 {\n  color: #4a9eff;\n  margin: 0 0 10px 0;\n  font-size: 16px;\n}\n\n.room-info p {\n  margin: 5px 0;\n  font-size: 14px;\n  color: #cccccc;\n}\n\n.room-info strong {\n  color: white;\n}\n\n.host-controls {\n  margin-top: 15px;\n  padding-top: 15px;\n  border-top: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.host-controls p {\n  margin: 0 0 10px 0;\n  font-weight: bold;\n  color: #ffd700;\n}\n\n.host-controls label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin: 8px 0;\n  font-size: 13px;\n  cursor: pointer;\n}\n\n.host-controls input[type="checkbox"] {\n  accent-color: #4a9eff;\n}\n\n/* Responsive Design */\n@media (max-width: 1024px) {\n  .video-grid {\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  }\n  \n  .video-container.screen-share {\n    grid-column: span 1;\n  }\n  \n  .room-info {\n    position: relative;\n    top: auto;\n    right: auto;\n    margin-top: 20px;\n  }\n  \n  .participants-list {\n    max-height: 150px;\n  }\n}\n\n@media (max-width: 768px) {\n  .team-room-header {\n    flex-direction: column;\n    text-align: center;\n  }\n  \n  .room-controls {\n    flex-direction: column;\n    gap: 15px;\n  }\n  \n  .room-id-section {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .room-id-section input {\n    min-width: auto;\n  }\n  \n  .video-controls {\n    flex-direction: column;\n    align-items: center;\n  }\n  \n  .control-btn {\n    width: 100%;\n    max-width: 200px;\n  }\n  \n  .video-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .mode-toggle {\n    width: 100%;\n    justify-content: center;\n  }\n  \n  .participants-panel {\n    order: -1;\n  }\n  \n  .participants-list {\n    max-height: 120px;\n  }\n  \n  .participant-item {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  \n  .participant-controls {\n    align-self: flex-end;\n  }\n}\n\n/* Additional animations and effects */\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.video-container {\n  animation: fadeInUp 0.3s ease-out;\n}\n\n.participant-item {\n  animation: fadeInUp 0.2s ease-out;\n}\n\n/* Scrollbar styling */\n.participants-list::-webkit-scrollbar {\n  width: 6px;\n}\n\n.participants-list::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 3px;\n}\n\n.participants-list::-webkit-scrollbar-thumb {\n  background: #4a9eff;\n  border-radius: 3px;\n}\n\n.participants-list::-webkit-scrollbar-thumb:hover {\n  background: #3a8eef;\n}',""]);const o=s},8978:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,'.creator-dashboard {\n  padding: 30px;\n  max-width: 960px;\n  margin: 0 auto;\n  font-family: "Inter", sans-serif;\n  color: #1e293b;\n  background-color: #ffffff;\n}\n\n.creator-dashboard h1 {\n  font-size: 2rem;\n  margin-bottom: 25px;\n  color: #0f172a;\n}\n\n.creator-profile-box {\n  background: #f1f5f9;\n  padding: 20px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  margin-bottom: 30px;\n}\n\n.creator-profile-box img {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid #3b82f6;\n}\n\n.creator-profile-info h2 {\n  margin: 0 0 5px;\n  font-size: 1.25rem;\n}\n\n.creator-profile-info p {\n  margin: 2px 0;\n  color: #475569;\n  font-size: 0.95rem;\n}\n\n.creator-metrics {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 30px;\n}\n\n.metric-card {\n  flex: 1;\n  background: #e2e8f0;\n  padding: 16px;\n  border-radius: 10px;\n  text-align: center;\n  font-weight: bold;\n  color: #0f172a;\n}\n\n.creator-section {\n  margin-bottom: 30px;\n}\n\n.creation-list {\n  list-style: none;\n  padding: 0;\n}\n\n.creation-item {\n  background: #0f172a;\n  color: #f1f5f9;\n  padding: 12px;\n  margin-bottom: 12px;\n  border-radius: 8px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.creation-item button {\n  margin-left: 10px;\n  padding: 6px 12px;\n  border: none;\n  border-radius: 4px;\n  background-color: #3b82f6;\n  color: white;\n  cursor: pointer;\n}\n\n.creation-item button:hover {\n  background-color: #2563eb;\n}\n\n.creator-tools ul {\n  padding-left: 20px;\n}\n\n.creator-tools a {\n  text-decoration: none;\n  color: #1d4ed8;\n  font-weight: bold;\n}\n\n.empty-state {\n  font-style: italic;\n  color: #64748b;\n}\n\n.error-message {\n  color: red;\n  font-weight: bold;\n  margin-top: 20px;\n}\n',""]);const o=s},9515:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,"/* Wrapper and Heading */\n.categories-wrapper {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n  font-family: 'Segoe UI', sans-serif;\n}\n\n.categories-heading {\n  font-size: 2rem;\n  font-weight: bold;\n  margin-bottom: 20px;\n  color: #222;\n}\n\n/* Scrollable Category Navigation */\n.category-nav {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 30px;\n}\n\n.scroll-button {\n  background-color: transparent;\n  border: none;\n  font-size: 2rem;\n  cursor: pointer;\n  padding: 0 10px;\n}\n\n.categories-scroll {\n  display: flex;\n  overflow-x: auto;\n  gap: 12px;\n  scroll-behavior: smooth;\n  white-space: nowrap;\n}\n\n.categories-scroll::-webkit-scrollbar {\n  display: none;\n}\n\n.category-pill {\n  background-color: #f2f2f2;\n  border-radius: 999px;\n  padding: 10px 18px;\n  font-weight: bold;\n  text-decoration: none;\n  color: #333;\n  white-space: nowrap;\n  transition: background-color 0.2s ease;\n}\n\n.category-pill:hover {\n  background-color: #ddd;\n}\n\n/* Section Titles */\n.section-title {\n  font-size: 1.4rem;\n  font-weight: 600;\n  margin: 40px 0 15px;\n  color: #333;\n}\n\n/* Grid layout for \"Creators for You\" */\n.podcast-grid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n}\n\n/* Horizontal scroll row for carousels */\n.podcast-scroll-row {\n  display: flex;\n  overflow-x: auto;\n  gap: 20px;\n  padding-bottom: 10px;\n  scroll-behavior: smooth;\n}\n\n.podcast-scroll-row::-webkit-scrollbar {\n  display: none;\n}\n\n/* Podcast Card Style */\n.podcast-card {\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  padding: 12px;\n  width: 180px;\n  flex-shrink: 0;\n  text-align: center;\n  transition: transform 0.2s ease;\n}\n\n.podcast-card:hover {\n  transform: translateY(-4px);\n}\n\n/* Image Style */\n.podcast-img {\n  width: 100%;\n  height: 180px;\n  border-radius: 10px;\n  object-fit: cover;\n  margin-bottom: 10px;\n}\n\n/* Title */\n.podcast-title {\n  font-size: 1rem;\n  font-weight: 600;\n  margin: 6px 0 4px;\n  color: #111;\n}\n\n/* Label (Badge) */\n.podcast-label {\n  display: inline-block;\n  background: #ff6600;\n  color: #fff;\n  font-size: 0.75rem;\n  padding: 2px 6px;\n  border-radius: 8px;\n  margin-bottom: 6px;\n}\n\n/* Description */\n.podcast-desc {\n  font-size: 0.85rem;\n  color: #555;\n  line-height: 1.4;\n}\n",""]);const o=s},9624:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,"/* Navbar */\n.navbar {\n    background: white !important;\n    padding: 12px 20px;\n    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n    border-bottom: 3px solid #FF6600; /* Orange border */\n}\n\n/* Navbar Brand Logo */\n.navbar-brand img {\n    height: 50px;\n}\n\n/* Navigation Links */\n.navbar-nav .nav-link {\n    color: #333 !important;\n    font-size: 14px;\n    padding: 10px;\n    font-weight: bold;\n    transition: color 0.3s ease;\n}\n\n/* Hover Effect for Navigation Links */\n.navbar-nav .nav-link:hover {\n    color: #FF6600 !important;\n}\n\n/* Dropdown Menu */\n.dropdown-menu {\n    background: white;\n    border: 1px solid #ddd;\n    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.dropdown-menu .dropdown-item {\n    color: #333;\n    transition: background 0.3s ease, color 0.3s ease;\n}\n\n/* Hover Effect for Dropdown */\n.dropdown-menu .dropdown-item:hover {\n    background: #FF6600;\n    color: white;\n}\n\n/* Search Bar */\n.form-control {\n    border-radius: 5px;\n    border: 1px solid #FF6600;\n}\n\n.btn-outline-success {\n    color: #FF6600;\n    border-color: #FF6600;\n}\n\n.btn-outline-success:hover {\n    background: #FF6600;\n    color: white;\n}\n\n/* Profile Picture in Navbar */\n.navbar-nav .nav-item.dropdown a {\n    display: flex;\n    align-items: center;\n}\n\n.navbar-nav .nav-item.dropdown img {\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    margin-right: 8px;\n    border: 2px solid #FF6600;\n}\n",""]);const o=s},9760:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,'/* Podcast Create Page Styles */\n.podcast-create-container {\n    max-width: 800px;\n    margin: 0 auto;\n    padding: 2rem;\n    background-color: #fff;\n    border-radius: 10px;\n    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n    font-family: \'Inter\', -apple-system, BlinkMacSystemFont, sans-serif;\n  }\n  \n  .podcast-create-container h1 {\n    color: #4a4a4a;\n    margin-bottom: 2rem;\n    font-size: 2rem;\n    font-weight: 700;\n    text-align: center;\n  }\n  \n  .podcast-create-container label {\n    display: block;\n    margin-top: 1.5rem;\n    margin-bottom: 0.5rem;\n    font-weight: 600;\n    color: #363636;\n    font-size: 1rem;\n  }\n  \n  .podcast-create-container input[type="text"],\n  .podcast-create-container textarea,\n  .podcast-create-container select {\n    width: 100%;\n    padding: 0.75rem;\n    border: 1px solid #ddd;\n    border-radius: 6px;\n    font-size: 1rem;\n    margin-bottom: 1rem;\n    background-color: #f9f9f9;\n    transition: border-color 0.2s, box-shadow 0.2s;\n  }\n  \n  .podcast-create-container input[type="text"]:focus,\n  .podcast-create-container textarea:focus,\n  .podcast-create-container select:focus {\n    outline: none;\n    border-color: #8c66ff;\n    box-shadow: 0 0 0 3px rgba(140, 102, 255, 0.1);\n  }\n  \n  .podcast-create-container textarea {\n    height: 120px;\n    resize: vertical;\n  }\n  \n  .podcast-create-container input[type="file"] {\n    width: 100%;\n    padding: 0.75rem;\n    border: 1px dashed #ddd;\n    border-radius: 6px;\n    background-color: #f9f9f9;\n    font-size: 0.9rem;\n    cursor: pointer;\n    margin-bottom: 1rem;\n  }\n  \n  .podcast-create-container input[type="checkbox"] {\n    margin-right: 0.5rem;\n    transform: scale(1.2);\n    cursor: pointer;\n  }\n  \n  .podcast-create-container .btn-primary {\n    background-color: #8c66ff;\n    color: white;\n    border: none;\n    border-radius: 6px;\n    padding: 0.8rem 1.5rem;\n    font-size: 1rem;\n    font-weight: 600;\n    cursor: pointer;\n    margin-top: 2rem;\n    width: 100%;\n    transition: background-color 0.2s, transform 0.1s;\n  }\n  \n  .podcast-create-container .btn-primary:hover {\n    background-color: #7a50f7;\n    transform: translateY(-2px);\n  }\n  \n  .podcast-create-container .btn-primary:active {\n    transform: translateY(0);\n  }\n  \n  /* File upload styling */\n  .podcast-create-container input[type="file"]::file-selector-button {\n    background-color: #e9e9e9;\n    color: #333;\n    padding: 0.5rem 1rem;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-weight: 500;\n    margin-right: 1rem;\n    transition: background-color 0.2s;\n  }\n  \n  .podcast-create-container input[type="file"]::file-selector-button:hover {\n    background-color: #ddd;\n  }\n  \n  /* Responsive styles */\n  @media screen and (max-width: 768px) {\n    .podcast-create-container {\n      padding: 1.5rem;\n      width: 90%;\n    }\n    \n    .podcast-create-container h1 {\n      font-size: 1.5rem;\n    }\n  }',""]);const o=s},9923:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),i=n.n(r),a=n(6314),s=n.n(a)()(i());s.push([e.id,".footer {\n  background: linear-gradient(to right, #6366f1, #4f46e5);\n  color: #f1f5f9;\n  padding: 25px 0;\n  font-family: 'Inter', sans-serif;\n  font-size: 0.95rem;\n  border-top: 4px solid #3b82f6;\n  margin-top: 50px;\n  text-align: center;\n  position: relative;\n}\n\n.footer-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n}\n\n.footer a {\n  color: #c7d2fe;\n  font-weight: 500;\n  text-decoration: none;\n}\n\n.footer a:hover {\n  color: #ffffff;\n  text-decoration: underline;\n}\n\n.footer-links {\n  margin-top: 5px;\n  font-size: 0.85rem;\n}\n\n.footer-links a {\n  margin: 0 10px;\n}\n",""]);const o=s},9982:(e,t,n)=>{"use strict";e.exports=n(7463)}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={id:e,exports:{}};return n[e].call(a.exports,a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var a=Object.create(null);i.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>n[e]);return s.default=()=>n,i.d(a,s),a},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/",i.nc=void 0,(()=>{"use strict";var e={};i.r(e),i.d(e,{hasBrowserEnv:()=>Xa,hasStandardBrowserEnv:()=>Ja,hasStandardBrowserWebWorkerEnv:()=>Za,navigator:()=>Qa,origin:()=>es});var t={};i.r(t),i.d(t,{Decoder:()=>dc,Encoder:()=>cc,PacketType:()=>lc,protocol:()=>oc});var n,r=i(6540),a=i.t(r,2),s=i(961),o=i.t(s,2),l=i(5072),c=i.n(l),u=i(7825),d=i.n(u),h=i(7659),f=i.n(h),p=i(5056),m=i.n(p),g=i(540),v=i.n(g),b=i(1113),y=i.n(b),E=i(1992),x={};function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}x.styleTagTransform=y(),x.setAttributes=m(),x.insert=f().bind(null,"head"),x.domAPI=d(),x.insertStyleElement=v(),c()(E.A,x),E.A&&E.A.locals&&E.A.locals,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const w="popstate";function k(e,t){if(!1===e||null==e)throw new Error(t)}function T(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function _(e,t){return{usr:e.state,key:e.key,idx:t}}function A(e,t,n,r){return void 0===n&&(n=null),S({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?L(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function R(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function L(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var C;function P(e,t,n){return void 0===n&&(n="/"),function(e,t,n,r){let i=H(("string"==typeof t?L(t):t).pathname||"/",n);if(null==i)return null;let a=I(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let s=null;for(let e=0;null==s&&e<a.length;++e){let t=G(i);s=z(a[e],t,r)}return s}(e,t,n,!1)}function I(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(k(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let o=q([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(k(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),I(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:$(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let n of N(e.path))i(e,t,n);else i(e,t)}),t}function N(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let s=N(r.join("/")),o=[];return o.push(...s.map(e=>""===e?a:[a,e].join("/"))),i&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(C||(C={})),new Set(["lazy","caseSensitive","path","id","index","children"]);const D=/^:[\w-]+$/,O=3,M=2,F=1,B=10,U=-2,j=e=>"*"===e;function $(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=U),t&&(r+=M),n.filter(e=>!j(e)).reduce((e,t)=>e+(D.test(t)?O:""===t?F:B),r)}function z(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},a="/",s=[];for(let e=0;e<r.length;++e){let o=r[e],l=e===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=V({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},c),d=o.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=V({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:q([a,u.pathname]),pathnameBase:X(q([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=q([a,u.pathnameBase]))}return s}function V(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),T("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:a,pathnameBase:s,pattern:e}}function G(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return T(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function W(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function K(e,t){let n=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function Y(e,t,n,r){let i;void 0===r&&(r=!1),"string"==typeof e?i=L(e):(i=S({},e),k(!i.pathname||!i.pathname.includes("?"),W("?","pathname","search",i)),k(!i.pathname||!i.pathname.includes("#"),W("#","pathname","hash",i)),k(!i.search||!i.search.includes("#"),W("#","search","hash",i)));let a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?L(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:Q(r),hash:J(i)}}(i,a),c=o&&"/"!==o&&o.endsWith("/"),u=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const q=e=>e.join("/").replace(/\/\/+/g,"/"),X=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const Z=["post","put","patch","delete"],ee=(new Set(Z),["get",...Z]);function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(this,arguments)}new Set(ee),new Set([301,302,303,307,308]),new Set([307,308]),Symbol("deferred");const ne=r.createContext(null),re=r.createContext(null),ie=r.createContext(null),ae=r.createContext(null),se=r.createContext({outlet:null,matches:[],isDataRoute:!1}),oe=r.createContext(null);function le(){return null!=r.useContext(ae)}function ce(){return le()||k(!1),r.useContext(ae).location}function ue(e){r.useContext(ie).static||r.useLayoutEffect(e)}function de(){let{isDataRoute:e}=r.useContext(se);return e?function(){let{router:e}=function(){let e=r.useContext(ne);return e||k(!1),e}(ye.UseNavigateStable),t=xe(Ee.UseNavigateStable),n=r.useRef(!1);ue(()=>{n.current=!0});let i=r.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"==typeof r?e.navigate(r):e.navigate(r,te({fromRouteId:t},i)))},[e,t]);return i}():function(){le()||k(!1);let e=r.useContext(ne),{basename:t,future:n,navigator:i}=r.useContext(ie),{matches:a}=r.useContext(se),{pathname:s}=ce(),o=JSON.stringify(K(a,n.v7_relativeSplatPath)),l=r.useRef(!1);ue(()=>{l.current=!0});let c=r.useCallback(function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"==typeof n)return void i.go(n);let a=Y(n,JSON.parse(o),s,"path"===r.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:q([t,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)},[t,i,o,s,e]);return c}()}function he(){let{matches:e}=r.useContext(se),t=e[e.length-1];return t?t.params:{}}function fe(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(ie),{matches:a}=r.useContext(se),{pathname:s}=ce(),o=JSON.stringify(K(a,i.v7_relativeSplatPath));return r.useMemo(()=>Y(e,JSON.parse(o),s,"path"===n),[e,o,s,n])}function pe(e,t,i,a){le()||k(!1);let{navigator:s}=r.useContext(ie),{matches:o}=r.useContext(se),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,h=ce();if(t){var f;let e="string"==typeof t?L(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||k(!1),d=e}else d=h;let p=d.pathname||"/",m=p;if("/"!==u){let e=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=P(e,{pathname:m}),v=function(e,t,n,i){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=i)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(a=n)?void 0:a.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||k(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let e=0;e<o.length;e++){let t=o[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||i){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,i,a)=>{let s,d=!1,h=null,f=null;var p;n&&(s=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||ge,c&&(u<0&&0===a?(Se[p="route-fallback"]||(Se[p]=!0),d=!0,f=null):u===a&&(d=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,a+1)),g=()=>{let t;return t=s?h:d?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(be,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(ve,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:q([u,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:q([u,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,i,a);return t&&v?r.createElement(ae.Provider,{value:{location:te({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:n.Pop}},v):v}function me(){let e=function(){var e;let t=r.useContext(oe),n=function(){let e=r.useContext(re);return e||k(!1),e}(Ee.UseRouteError),i=xe(Ee.UseRouteError);return void 0!==t?t:null==(e=n.errors)?void 0:e[i]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,null)}const ge=r.createElement(me,null);class ve extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(se.Provider,{value:this.props.routeContext},r.createElement(oe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function be(e){let{routeContext:t,match:n,children:i}=e,a=r.useContext(ne);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(se.Provider,{value:t},i)}var ye=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ye||{}),Ee=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ee||{});function xe(e){let t=function(){let e=r.useContext(se);return e||k(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||k(!1),n.route.id}const Se={};function we(e){k(!1)}function ke(e){let{basename:t="/",children:i=null,location:a,navigationType:s=n.Pop,navigator:o,static:l=!1,future:c}=e;le()&&k(!1);let u=t.replace(/^\/*/,"/"),d=r.useMemo(()=>({basename:u,navigator:o,static:l,future:te({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"==typeof a&&(a=L(a));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:g="default"}=a,v=r.useMemo(()=>{let e=H(h,u);return null==e?null:{location:{pathname:e,search:f,hash:p,state:m,key:g},navigationType:s}},[u,h,f,p,m,g,s]);return null==v?null:r.createElement(ie.Provider,{value:d},r.createElement(ae.Provider,{children:i,value:v}))}function Te(e){let{children:t,location:n}=e;return pe(_e(t),n)}function _e(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let a=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,_e(e.props.children,a));e.type!==we&&k(!1),e.props.index&&e.props.children&&k(!1);let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=_e(e.props.children,a)),n.push(s)}),n}function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ae.apply(this,arguments)}a.startTransition,new Promise(()=>{}),r.Component,new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Re=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(e){}new Map;const Le=a.startTransition;function Ce(e){let{basename:t,children:i,future:a,window:s}=e,o=r.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),function(e,t,r,i){void 0===i&&(i={});let{window:a=document.defaultView,v5Compat:s=!1}=i,o=a.history,l=n.Pop,c=null,u=d();function d(){return(o.state||{idx:null}).idx}function h(){l=n.Pop;let e=d(),t=null==e?null:e-u;u=e,c&&c({action:l,location:p.location,delta:t})}function f(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"==typeof e?e:R(e);return n=n.replace(/ $/,"%20"),k(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,o.replaceState(S({},o.state,{idx:u}),""));let p={get action(){return l},get location(){return e(a,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(w,h),c=e,()=>{a.removeEventListener(w,h),c=null}},createHref:e=>t(a,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=n.Push;let i=A(p.location,e,t);r&&r(i,e),u=d()+1;let h=_(i,u),f=p.createHref(i);try{o.pushState(h,"",f)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;a.location.assign(f)}s&&c&&c({action:l,location:p.location,delta:1})},replace:function(e,t){l=n.Replace;let i=A(p.location,e,t);r&&r(i,e),u=d();let a=_(i,u),h=p.createHref(i);o.replaceState(a,"",h),s&&c&&c({action:l,location:p.location,delta:0})},go:e=>o.go(e)};return p}(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return A("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:R(t)},null,e)}({window:s,v5Compat:!0}));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=a||{},h=r.useCallback(e=>{d&&Le?Le(()=>u(e)):u(e)},[u,d]);return r.useLayoutEffect(()=>l.listen(h),[l,h]),r.useEffect(()=>{return null==(e=a)||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),void(t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation));var e,t},[a]),r.createElement(ke,{basename:t,children:i,location:c.location,navigationType:c.action,navigator:l,future:a})}o.flushSync,a.useId;const Pe="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ne=r.forwardRef(function(e,t){let n,{onClick:i,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Re),{basename:p}=r.useContext(ie),m=!1;if("string"==typeof u&&Ie.test(u)&&(n=u,Pe))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=H(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(e){}let g=function(e,t){let{relative:n}=void 0===t?{}:t;le()||k(!1);let{basename:i,navigator:a}=r.useContext(ie),{hash:s,pathname:o,search:l}=fe(e,{relative:n}),c=o;return"/"!==i&&(c="/"===o?i:q([i,o])),a.createHref({pathname:c,search:l,hash:s})}(u,{relative:a}),v=function(e,t){let{target:n,replace:i,state:a,preventScrollReset:s,relative:o,viewTransition:l}=void 0===t?{}:t,c=de(),u=ce(),d=fe(e,{relative:o});return r.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,n)){t.preventDefault();let n=void 0!==i?i:R(u)===R(d);c(e,{replace:n,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,i,a,n,e,s,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});return r.createElement("a",Ae({},f,{href:n||g,onClick:m||s?i:function(e){i&&i(e),e.defaultPrevented||v(e)},ref:t,target:c}))});var De,Oe;function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Fe(e){var t=function(e){if("object"!=Me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Me(t)?t:t+""}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fe(r.key),r)}}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(De||(De={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Oe||(Oe={}));var $e=i(5556),ze=i.n($e);function Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ve=function(){return!!e})()}var Ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=arguments,n=Ue(n=t),function(e,t){if(t&&("object"==Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ve()?Reflect.construct(n,r||[],Ue(e).constructor):n.apply(e,r));var e,n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}])&&Be(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.Component);const He=Ge;function We(e,t,n){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||Ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t,n,r,i,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function Qe(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){Xe(a,r,i,s,o,"next",e)}function o(e){Xe(a,r,i,s,o,"throw",e)}s(void 0)})}}Ge.propTypes={location:ze().object,children:ze().any};var Je=i(4756),Ze=i.n(Je);function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nt=r.createContext(null);const rt=function(){return r.createElement("div",{className:"streampirex-home"},r.createElement("header",{className:"hero"},r.createElement("div",{className:"hero-content"},r.createElement("h1",null,"🔥 Welcome to StreampireX"),r.createElement("p",null,"The ultimate creator platform for music distribution, streaming, podcasts, radio, gaming communities, and social monetization."),r.createElement("div",{className:"cta-buttons"},r.createElement("button",{onClick:function(){return window.location.href="/signup"},className:"btn btn-primary"},"Get Started"),r.createElement("button",{onClick:function(){return window.location.href="/login"},className:"btn btn-outline-light"},"Log In"))),r.createElement("div",{className:"hero-image-placeholder"},"🎸")),r.createElement("section",{className:"features"},r.createElement("h2",null,"What You Can Do 🎯"),r.createElement("div",{className:"feature-grid"},r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"🌍 Global Music Distribution"),r.createElement("p",null,"Distribute your music to 150+ platforms including Spotify, Apple Music, Amazon Music, YouTube Music, and more worldwide.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"🎧 Stream Music"),r.createElement("p",null,"Upload tracks, share albums, and build your fanbase with our built-in streaming platform.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"🎙️ Launch Podcasts"),r.createElement("p",null,"Host episodes, monetize content, and reach new audiences across podcast directories.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"📻 24/7 Plamix Radio Streams"),r.createElement("p",null,"Create your own radio station with continuous streaming, accept song submissions, and build a loyal listener base around the clock.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"🎮 Gaming Community Hub"),r.createElement("p",null,"Connect with gamers, join squads, find teammates, stream gameplay, and discover crossplay-compatible games across all platforms.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"🌐 Social Media Integration"),r.createElement("p",null,"Share your content across TikTok, Instagram, Facebook, and more. Build your social presence and engage with fans everywhere.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"💰 Performance Rights & Royalties"),r.createElement("p",null,"Collect performance royalties from radio, streaming, and live venues through registered performance rights organizations and digital collection services.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"🛍️ Sell Products & Merch"),r.createElement("p",null,"Create merchandise, sell digital goods, and get paid instantly with Stripe integration.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"📊 Advanced Analytics"),r.createElement("p",null,"Monitor streams, revenue, demographics, gamer stats, and audience behavior across all platforms.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"⚡ Fast Release Process"),r.createElement("p",null,"Get your music live on major platforms in 24-48 hours with our streamlined upload system.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"🎥 Live Streaming & Gaming"),r.createElement("p",null,"Stream your gameplay, host live shows, and share your screen with squad members in real-time.")),r.createElement("div",{className:"feature-card"},r.createElement("h4",null,"🤝 Squad Finder & Team Rooms"),r.createElement("p",null,"Find gaming teammates by skill level, create private squad rooms, and coordinate with your gaming community.")))),r.createElement("section",{className:"distribution-platforms"},r.createElement("h2",null,"🚀 Distribute & Connect Everywhere"),r.createElement("p",null,"Your content will be available on all major streaming platforms, social networks, and gaming communities"),r.createElement("div",{className:"platforms-grid"},r.createElement("div",{className:"platform-category"},r.createElement("h4",null,"🎵 Music Streaming"),r.createElement("ul",null,r.createElement("li",null,"Spotify"),r.createElement("li",null,"Apple Music"),r.createElement("li",null,"Amazon Music"),r.createElement("li",null,"YouTube Music"),r.createElement("li",null,"Deezer"),r.createElement("li",null,"Tidal"))),r.createElement("div",{className:"platform-category"},r.createElement("h4",null,"🌐 Social & Video"),r.createElement("ul",null,r.createElement("li",null,"TikTok"),r.createElement("li",null,"Instagram"),r.createElement("li",null,"Facebook"),r.createElement("li",null,"YouTube Content ID"),r.createElement("li",null,"Snapchat"),r.createElement("li",null,"Twitter/X"))),r.createElement("div",{className:"platform-category"},r.createElement("h4",null,"🎮 Gaming Platforms"),r.createElement("ul",null,r.createElement("li",null,"Steam"),r.createElement("li",null,"PlayStation Network"),r.createElement("li",null,"Xbox Live"),r.createElement("li",null,"Nintendo Switch"),r.createElement("li",null,"Epic Games"),r.createElement("li",null,"Discord Integration"))),r.createElement("div",{className:"platform-category"},r.createElement("h4",null,"📡 Radio & Streaming"),r.createElement("ul",null,r.createElement("li",null,"Plamix 24/7 Radio"),r.createElement("li",null,"SiriusXM"),r.createElement("li",null,"Pandora"),r.createElement("li",null,"iHeartRadio"),r.createElement("li",null,"Shazam"),r.createElement("li",null,"SoundCloud"))))),r.createElement("section",{className:"gaming-social-features"},r.createElement("div",{className:"feature-container"},r.createElement("div",{className:"feature-section"},r.createElement("h3",null,"🎮 Gaming Community Features"),r.createElement("div",{className:"feature-list"},r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"🔍"),r.createElement("div",null,r.createElement("strong",null,"Squad Finder"),r.createElement("p",null,"Find teammates by game, skill level, and region"))),r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"🏠"),r.createElement("div",null,r.createElement("strong",null,"Team Rooms"),r.createElement("p",null,"Private spaces for your squad with voice chat and screen sharing"))),r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"🎥"),r.createElement("div",null,r.createElement("strong",null,"Live Game Streaming"),r.createElement("p",null,"Stream your gameplay to Twitch, YouTube, and more"))),r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"🎯"),r.createElement("div",null,r.createElement("strong",null,"Crossplay Games"),r.createElement("p",null,"Discover games that support crossplay across all platforms"))))),r.createElement("div",{className:"feature-section"},r.createElement("h3",null,"📻 24/7 Plamix Radio"),r.createElement("div",{className:"feature-list"},r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"📡"),r.createElement("div",null,r.createElement("strong",null,"Always-On Broadcasting"),r.createElement("p",null,"Your radio station streams 24/7 with continuous music"))),r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"🎵"),r.createElement("div",null,r.createElement("strong",null,"Song Submissions"),r.createElement("p",null,"Accept tracks from artists and curate your station's sound"))),r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"👥"),r.createElement("div",null,r.createElement("strong",null,"Live Listener Count"),r.createElement("p",null,"See real-time listener engagement and build your audience"))),r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"💰"),r.createElement("div",null,r.createElement("strong",null,"Monetization"),r.createElement("p",null,"Earn revenue through ads, subscriptions, and premium content"))))),r.createElement("div",{className:"feature-section"},r.createElement("h3",null,"🌐 Social Media Power"),r.createElement("div",{className:"feature-list"},r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"📱"),r.createElement("div",null,r.createElement("strong",null,"Multi-Platform Sharing"),r.createElement("p",null,"Post your content across all social networks simultaneously"))),r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"📈"),r.createElement("div",null,r.createElement("strong",null,"Viral Content Tools"),r.createElement("p",null,"Optimize your posts for maximum engagement and reach"))),r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"💬"),r.createElement("div",null,r.createElement("strong",null,"Community Engagement"),r.createElement("p",null,"Interact with fans, respond to comments, and build relationships"))),r.createElement("div",{className:"feature-item"},r.createElement("span",{className:"feature-icon"},"🎯"),r.createElement("div",null,r.createElement("strong",null,"Targeted Promotion"),r.createElement("p",null,"Reach the right audience with smart targeting and analytics"))))))),r.createElement("section",{className:"join-now text-center"},r.createElement("h2",null,"Ready to Share Your Voice with the World?"),r.createElement("p",null,"Create, distribute, game, and grow your creative career on StreampireX."),r.createElement("button",{onClick:function(){return window.location.href="/signup"},className:"btn btn-success btn-lg"},"Start Your Journey Today")),r.createElement("footer",{className:"footer"},r.createElement("p",null,"© ",(new Date).getFullYear()," StreampireX. All rights reserved.")),r.createElement("style",{jsx:!0},"\n\t\t\t\t/* General layout */\n\t\t\t\t.streampirex-home {\n\t\t\t\t\tbackground: #0d1117;\n\t\t\t\t\tcolor: #ffffff;\n\t\t\t\t\tfont-family: 'Segoe UI', sans-serif;\n\t\t\t\t\tmin-height: 100vh;\n\t\t\t\t\tline-height: 1.6;\n\t\t\t\t}\n\n\t\t\t\t/* Hero Section */\n\t\t\t\t.hero {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tpadding: 4rem 2rem;\n\t\t\t\t\tbackground: linear-gradient(145deg, #1f2937, #111827);\n\t\t\t\t\tborder-bottom: 2px solid #00ffc8;\n\t\t\t\t}\n\n\t\t\t\t.hero h1 {\n\t\t\t\t\tfont-size: 2.8rem;\n\t\t\t\t\tcolor: #00ffc8;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\n\t\t\t\t.hero p {\n\t\t\t\t\tcolor: #d1d5db;\n\t\t\t\t\tfont-size: 1.2rem;\n\t\t\t\t\tmax-width: 700px;\n\t\t\t\t\tmargin: 1rem auto;\n\t\t\t\t}\n\n\t\t\t\t.hero-image-placeholder {\n\t\t\t\t\twidth: 270px;\n\t\t\t\t\theight: 270px;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\tbox-shadow: 0 0 25px #00ffc8;\n\t\t\t\t\tmargin-top: 2rem;\n\t\t\t\t\tbackground: linear-gradient(145deg, #1f2937, #374151);\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tfont-size: 4rem;\n\t\t\t\t}\n\n\t\t\t\t/* Call to Action Buttons */\n\t\t\t\t.cta-buttons button {\n\t\t\t\t\tmargin: 0.5rem;\n\t\t\t\t\tfont-size: 1.1rem;\n\t\t\t\t\tpadding: 0.75rem 1.5rem;\n\t\t\t\t\tborder: none;\n\t\t\t\t\tborder-radius: 8px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\ttransition: all 0.3s ease;\n\t\t\t\t}\n\n\t\t\t\t.btn-primary {\n\t\t\t\t\tbackground: #00ffc8;\n\t\t\t\t\tcolor: #0d1117;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\n\t\t\t\t.btn-primary:hover {\n\t\t\t\t\tbackground: #00e6b3;\n\t\t\t\t\ttransform: translateY(-2px);\n\t\t\t\t}\n\n\t\t\t\t.btn-outline-light {\n\t\t\t\t\tbackground: transparent;\n\t\t\t\t\tcolor: #ffffff;\n\t\t\t\t\tborder: 2px solid #ffffff !important;\n\t\t\t\t}\n\n\t\t\t\t.btn-outline-light:hover {\n\t\t\t\t\tbackground: #ffffff;\n\t\t\t\t\tcolor: #0d1117;\n\t\t\t\t}\n\n\t\t\t\t.btn-success {\n\t\t\t\t\tbackground: #10b981;\n\t\t\t\t\tcolor: #ffffff;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\n\t\t\t\t.btn-success:hover {\n\t\t\t\t\tbackground: #059669;\n\t\t\t\t\ttransform: translateY(-2px);\n\t\t\t\t}\n\n\t\t\t\t.btn-lg {\n\t\t\t\t\tfont-size: 1.3rem;\n\t\t\t\t\tpadding: 1rem 2rem;\n\t\t\t\t}\n\n\t\t\t\t/* Features Section */\n\t\t\t\t.features {\n\t\t\t\t\tpadding: 4rem 2rem;\n\t\t\t\t\tbackground: #161b22;\n\t\t\t\t}\n\n\t\t\t\t.features h2 {\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tmargin-bottom: 2.5rem;\n\t\t\t\t\tcolor: #00ffc8;\n\t\t\t\t\tfont-size: 2rem;\n\t\t\t\t}\n\n\t\t\t\t.feature-grid {\n\t\t\t\t\tdisplay: grid;\n\t\t\t\t\tgrid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n\t\t\t\t\tgap: 1.5rem;\n\t\t\t\t\tmax-width: 1400px;\n\t\t\t\t\tmargin: 0 auto;\n\t\t\t\t}\n\n\t\t\t\t.feature-card {\n\t\t\t\t\tbackground: #1f2937;\n\t\t\t\t\tpadding: 1.5rem;\n\t\t\t\t\tborder-radius: 12px;\n\t\t\t\t\tbox-shadow: 0 0 12px rgba(0, 255, 200, 0.1);\n\t\t\t\t\ttransition: transform 0.2s ease, box-shadow 0.2s ease;\n\t\t\t\t}\n\n\t\t\t\t.feature-card:hover {\n\t\t\t\t\ttransform: translateY(-5px);\n\t\t\t\t\tbox-shadow: 0 0 20px rgba(0, 255, 200, 0.2);\n\t\t\t\t}\n\n\t\t\t\t.feature-card h4 {\n\t\t\t\t\tcolor: #00ffc8;\n\t\t\t\t\tmargin-bottom: 0.5rem;\n\t\t\t\t}\n\n\t\t\t\t/* Distribution Platforms Section */\n\t\t\t\t.distribution-platforms {\n\t\t\t\t\tpadding: 4rem 2rem;\n\t\t\t\t\tbackground: #0f172a;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t.distribution-platforms h2 {\n\t\t\t\t\tcolor: #00ffc8;\n\t\t\t\t\tfont-size: 2rem;\n\t\t\t\t\tmargin-bottom: 1rem;\n\t\t\t\t}\n\n\t\t\t\t.distribution-platforms > p {\n\t\t\t\t\tcolor: #d1d5db;\n\t\t\t\t\tfont-size: 1.1rem;\n\t\t\t\t\tmargin-bottom: 3rem;\n\t\t\t\t\tmax-width: 700px;\n\t\t\t\t\tmargin-left: auto;\n\t\t\t\t\tmargin-right: auto;\n\t\t\t\t}\n\n\t\t\t\t.platforms-grid {\n\t\t\t\t\tdisplay: grid;\n\t\t\t\t\tgrid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n\t\t\t\t\tgap: 2rem;\n\t\t\t\t\tmax-width: 1200px;\n\t\t\t\t\tmargin: 0 auto;\n\t\t\t\t}\n\n\t\t\t\t.platform-category {\n\t\t\t\t\tbackground: #1f2937;\n\t\t\t\t\tpadding: 2rem;\n\t\t\t\t\tborder-radius: 12px;\n\t\t\t\t\tbox-shadow: 0 0 12px rgba(0, 255, 200, 0.1);\n\t\t\t\t}\n\n\t\t\t\t.platform-category h4 {\n\t\t\t\t\tcolor: #00ffc8;\n\t\t\t\t\tmargin-bottom: 1rem;\n\t\t\t\t\tfont-size: 1.2rem;\n\t\t\t\t}\n\n\t\t\t\t.platform-category ul {\n\t\t\t\t\tlist-style: none;\n\t\t\t\t\tpadding: 0;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\n\t\t\t\t.platform-category li {\n\t\t\t\t\tcolor: #d1d5db;\n\t\t\t\t\tpadding: 0.4rem 0;\n\t\t\t\t\tborder-bottom: 1px solid #374151;\n\t\t\t\t}\n\n\t\t\t\t.platform-category li:last-child {\n\t\t\t\t\tborder-bottom: none;\n\t\t\t\t}\n\n\t\t\t\t/* Gaming & Social Features Section */\n\t\t\t\t.gaming-social-features {\n\t\t\t\t\tpadding: 4rem 2rem;\n\t\t\t\t\tbackground: #111827;\n\t\t\t\t}\n\n\t\t\t\t.feature-container {\n\t\t\t\t\tmax-width: 1200px;\n\t\t\t\t\tmargin: 0 auto;\n\t\t\t\t\tdisplay: grid;\n\t\t\t\t\tgrid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\n\t\t\t\t\tgap: 3rem;\n\t\t\t\t}\n\n\t\t\t\t.feature-section h3 {\n\t\t\t\t\tcolor: #00ffc8;\n\t\t\t\t\tfont-size: 1.5rem;\n\t\t\t\t\tmargin-bottom: 1.5rem;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t.feature-list {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tgap: 1rem;\n\t\t\t\t}\n\n\t\t\t\t.feature-item {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: flex-start;\n\t\t\t\t\tgap: 1rem;\n\t\t\t\t\tbackground: #1f2937;\n\t\t\t\t\tpadding: 1.2rem;\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\tborder-left: 4px solid #00ffc8;\n\t\t\t\t}\n\n\t\t\t\t.feature-icon {\n\t\t\t\t\tfont-size: 1.5rem;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\n\t\t\t\t.feature-item strong {\n\t\t\t\t\tcolor: #00ffc8;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tmargin-bottom: 0.3rem;\n\t\t\t\t}\n\n\t\t\t\t.feature-item p {\n\t\t\t\t\tcolor: #d1d5db;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tfont-size: 0.9rem;\n\t\t\t\t}\n\n\t\t\t\t/* Join Now Section */\n\t\t\t\t.join-now {\n\t\t\t\t\tbackground: #0f172a;\n\t\t\t\t\tpadding: 4rem 2rem;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t.join-now h2 {\n\t\t\t\t\tcolor: #00ffc8;\n\t\t\t\t\tmargin-bottom: 1rem;\n\t\t\t\t\tfont-size: 2rem;\n\t\t\t\t}\n\n\t\t\t\t.join-now p {\n\t\t\t\t\tcolor: #d1d5db;\n\t\t\t\t\tfont-size: 1.1rem;\n\t\t\t\t\tmargin-bottom: 2rem;\n\t\t\t\t}\n\n\t\t\t\t/* Footer */\n\t\t\t\t.footer {\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tpadding: 1rem;\n\t\t\t\t\tbackground: #0d1117;\n\t\t\t\t\tfont-size: 0.9rem;\n\t\t\t\t\tcolor: #6b7280;\n\t\t\t\t\tborder-top: 1px solid #1f2937;\n\t\t\t\t}\n\n\t\t\t\t/* Responsive Design */\n\t\t\t\t@media (max-width: 768px) {\n\t\t\t\t\t.hero {\n\t\t\t\t\t\tpadding: 2rem 1rem;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.hero h1 {\n\t\t\t\t\t\tfont-size: 2.2rem;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.hero-image-placeholder {\n\t\t\t\t\t\twidth: 200px;\n\t\t\t\t\t\theight: 200px;\n\t\t\t\t\t\tfont-size: 3rem;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.feature-grid {\n\t\t\t\t\t\tgrid-template-columns: 1fr;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.platforms-grid {\n\t\t\t\t\t\tgrid-template-columns: 1fr;\n\t\t\t\t\t}\n\n\t\t\t\t\t.feature-container {\n\t\t\t\t\t\tgrid-template-columns: 1fr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t"))},it=function(){var e=(0,r.useContext)(nt),t=(e.store,e.actions),n=qe((0,r.useState)(""),2),i=n[0],a=n[1],s=qe((0,r.useState)(""),2),o=s[0],l=s[1],c=de(),u=function(){var e=Qe(Ze().mark(function e(n){var r;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=1,t.login(i,o);case 1:(r=e.sent).access_token?(alert("Login successful!"),c("/profile")):alert("Login failed: "+r.error);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.createElement("div",null,r.createElement("form",{onSubmit:u},r.createElement("h1",null,"Login"),r.createElement("input",{type:"email",placeholder:"Email",value:i,onChange:function(e){return a(e.target.value)},autoComplete:"username",required:!0}),r.createElement("input",{type:"password",placeholder:"Password",value:o,onChange:function(e){return l(e.target.value)},autoComplete:"current-password",required:!0}),r.createElement("button",{type:"submit"},"Login"),r.createElement("p",null," Please click ",r.createElement(Ne,{to:"/register"},"here")," to sign up! ")))};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const ot=function(){var e=(0,r.useContext)(nt).actions,t=de(),n=qe((0,r.useState)({email:"",username:"",password:"",role:"Listener",artistName:"",industry:"",ownRights:"yes",profilePicture:null,sampleTrack:null}),2),i=n[0],a=n[1],s=function(e){a(st(st({},i),{},We({},e.target.name,e.target.value)))},o=function(e){a(st(st({},i),{},We({},e.target.name,e.target.files[0])))},l=function(){var n=Qe(Ze().mark(function n(r){var a,s;return Ze().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),a=new FormData,Object.keys(i).forEach(function(e){i[e]&&a.append(e,i[e])}),n.next=1,e.signup(a);case 1:(s=n.sent).message?(alert(s.message),t("/login")):alert("Signup failed: "+s.error);case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();return r.createElement("div",null,r.createElement("h1",null,"Signup"),r.createElement("form",{onSubmit:l,encType:"multipart/form-data"},r.createElement("input",{type:"email",name:"email",placeholder:"Email",value:i.email,onChange:s,required:!0}),r.createElement("input",{type:"text",name:"username",placeholder:"Username",value:i.username,onChange:s,required:!0}),r.createElement("input",{type:"password",name:"password",placeholder:"Password",value:i.password,onChange:s,required:!0}),r.createElement("label",null,"Role:"),r.createElement("select",{name:"role",value:i.role,onChange:s},r.createElement("option",{value:"Listener"},"Listener"),r.createElement("option",{value:"Indie Artist"},"Indie Artist"),r.createElement("option",{value:"Radio DJ"},"Radio DJ"),r.createElement("option",{value:"Podcaster"},"Podcaster"),r.createElement("option",{value:"Radio DJ and Podcaster"},"Radio DJ and Podcaster")),"Indie Artist"===i.role&&r.createElement(r.Fragment,null,r.createElement("input",{type:"text",name:"artistName",placeholder:"Artist Name",value:i.artistName,onChange:s}),r.createElement("input",{type:"text",name:"industry",placeholder:"Industry (Music, Podcasting, Film, etc.)",value:i.industry,onChange:s}),r.createElement("label",null,"Do you own the rights to your music?"),r.createElement("select",{name:"ownRights",value:i.ownRights,onChange:s},r.createElement("option",{value:"yes"},"Yes"),r.createElement("option",{value:"no"},"No")),r.createElement("label",null,"Upload Profile Picture:"),r.createElement("input",{type:"file",name:"profilePicture",accept:"image/*",onChange:o}),r.createElement("label",null,"Upload Sample Track (MP3, WAV):"),r.createElement("input",{type:"file",name:"sampleTrack",accept:"audio/*",onChange:o})),r.createElement("button",{type:"submit"},"Signup")),r.createElement("p",null,"Already have an account? Click ",r.createElement(Ne,{to:"/login"},"here")," to login."))};var lt=function(){return r.createElement("div",{className:"signup-container"},r.createElement("div",{className:"signup-card"},r.createElement(ot,null)))};function ct(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ut=function(){return ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ut.apply(this,arguments)};function dt(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var ht=i(2833),ft=i.n(ht),pt="-ms-",mt="-moz-",gt="-webkit-",vt="comm",bt="rule",yt="decl",Et="@keyframes",xt=Math.abs,St=String.fromCharCode,wt=Object.assign;function kt(e){return e.trim()}function Tt(e,t){return(e=t.exec(e))?e[0]:e}function _t(e,t,n){return e.replace(t,n)}function At(e,t,n){return e.indexOf(t,n)}function Rt(e,t){return 0|e.charCodeAt(t)}function Lt(e,t,n){return e.slice(t,n)}function Ct(e){return e.length}function Pt(e){return e.length}function It(e,t){return t.push(e),e}function Nt(e,t){return e.filter(function(e){return!Tt(e,t)})}var Dt=1,Ot=1,Mt=0,Ft=0,Bt=0,Ut="";function jt(e,t,n,r,i,a,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:Dt,column:Ot,length:s,return:"",siblings:o}}function $t(e,t){return wt(jt("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function zt(e){for(;e.root;)e=$t(e.root,{children:[e]});It(e,e.siblings)}function Vt(){return Bt=Ft>0?Rt(Ut,--Ft):0,Ot--,10===Bt&&(Ot=1,Dt--),Bt}function Gt(){return Bt=Ft<Mt?Rt(Ut,Ft++):0,Ot++,10===Bt&&(Ot=1,Dt++),Bt}function Ht(){return Rt(Ut,Ft)}function Wt(){return Ft}function Kt(e,t){return Lt(Ut,e,t)}function Yt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qt(e){return kt(Kt(Ft-1,Jt(91===e?e+2:40===e?e+1:e)))}function Xt(e){for(;(Bt=Ht())&&Bt<33;)Gt();return Yt(e)>2||Yt(Bt)>3?"":" "}function Qt(e,t){for(;--t&&Gt()&&!(Bt<48||Bt>102||Bt>57&&Bt<65||Bt>70&&Bt<97););return Kt(e,Wt()+(t<6&&32==Ht()&&32==Gt()))}function Jt(e){for(;Gt();)switch(Bt){case e:return Ft;case 34:case 39:34!==e&&39!==e&&Jt(Bt);break;case 40:41===e&&Jt(e);break;case 92:Gt()}return Ft}function Zt(e,t){for(;Gt()&&e+Bt!==57&&(e+Bt!==84||47!==Ht()););return"/*"+Kt(t,Ft-1)+"*"+St(47===e?e:Gt())}function en(e){for(;!Yt(Ht());)Gt();return Kt(e,Ft)}function tn(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function nn(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case yt:return e.return=e.return||e.value;case vt:return"";case Et:return e.return=e.value+"{"+tn(e.children,r)+"}";case bt:if(!Ct(e.value=e.props.join(",")))return""}return Ct(n=tn(e.children,r))?e.return=e.value+"{"+n+"}":""}function rn(e,t,n){switch(function(e,t){return 45^Rt(e,0)?(((t<<2^Rt(e,0))<<2^Rt(e,1))<<2^Rt(e,2))<<2^Rt(e,3):0}(e,t)){case 5103:return gt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return gt+e+e;case 4789:return mt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return gt+e+mt+e+pt+e+e;case 5936:switch(Rt(e,t+11)){case 114:return gt+e+pt+_t(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return gt+e+pt+_t(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return gt+e+pt+_t(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return gt+e+pt+e+e;case 6165:return gt+e+pt+"flex-"+e+e;case 5187:return gt+e+_t(e,/(\w+).+(:[^]+)/,gt+"box-$1$2"+pt+"flex-$1$2")+e;case 5443:return gt+e+pt+"flex-item-"+_t(e,/flex-|-self/g,"")+(Tt(e,/flex-|baseline/)?"":pt+"grid-row-"+_t(e,/flex-|-self/g,""))+e;case 4675:return gt+e+pt+"flex-line-pack"+_t(e,/align-content|flex-|-self/g,"")+e;case 5548:return gt+e+pt+_t(e,"shrink","negative")+e;case 5292:return gt+e+pt+_t(e,"basis","preferred-size")+e;case 6060:return gt+"box-"+_t(e,"-grow","")+gt+e+pt+_t(e,"grow","positive")+e;case 4554:return gt+_t(e,/([^-])(transform)/g,"$1"+gt+"$2")+e;case 6187:return _t(_t(_t(e,/(zoom-|grab)/,gt+"$1"),/(image-set)/,gt+"$1"),e,"")+e;case 5495:case 3959:return _t(e,/(image-set\([^]*)/,gt+"$1$`$1");case 4968:return _t(_t(e,/(.+:)(flex-)?(.*)/,gt+"box-pack:$3"+pt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+gt+e+e;case 4200:if(!Tt(e,/flex-|baseline/))return pt+"grid-column-align"+Lt(e,t)+e;break;case 2592:case 3360:return pt+_t(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(e,n){return t=n,Tt(e.props,/grid-\w+-end/)})?~At(e+(n=n[t].value),"span",0)?e:pt+_t(e,"-start","")+e+pt+"grid-row-span:"+(~At(n,"span",0)?Tt(n,/\d+/):+Tt(n,/\d+/)-+Tt(e,/\d+/))+";":pt+_t(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(e){return Tt(e.props,/grid-\w+-start/)})?e:pt+_t(_t(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return _t(e,/(.+)-inline(.+)/,gt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ct(e)-1-t>6)switch(Rt(e,t+1)){case 109:if(45!==Rt(e,t+4))break;case 102:return _t(e,/(.+:)(.+)-([^]+)/,"$1"+gt+"$2-$3$1"+mt+(108==Rt(e,t+3)?"$3":"$2-$3"))+e;case 115:return~At(e,"stretch",0)?rn(_t(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return _t(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(t,n,r,i,a,s,o){return pt+n+":"+r+o+(i?pt+n+"-span:"+(a?s:+s-+r)+o:"")+e});case 4949:if(121===Rt(e,t+6))return _t(e,":",":"+gt)+e;break;case 6444:switch(Rt(e,45===Rt(e,14)?18:11)){case 120:return _t(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+gt+(45===Rt(e,14)?"inline-":"")+"box$3$1"+gt+"$2$3$1"+pt+"$2box$3")+e;case 100:return _t(e,":",":"+pt)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return _t(e,"scroll-","scroll-snap-")+e}return e}function an(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case yt:return void(e.return=rn(e.value,e.length,n));case Et:return tn([$t(e,{value:_t(e.value,"@","@"+gt)})],r);case bt:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,function(t){switch(Tt(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":zt($t(e,{props:[_t(t,/:(read-\w+)/,":-moz-$1")]})),zt($t(e,{props:[t]})),wt(e,{props:Nt(n,r)});break;case"::placeholder":zt($t(e,{props:[_t(t,/:(plac\w+)/,":"+gt+"input-$1")]})),zt($t(e,{props:[_t(t,/:(plac\w+)/,":-moz-$1")]})),zt($t(e,{props:[_t(t,/:(plac\w+)/,pt+"input-$1")]})),zt($t(e,{props:[t]})),wt(e,{props:Nt(n,r)})}return""})}}function sn(e){return function(e){return Ut="",e}(on("",null,null,null,[""],e=function(e){return Dt=Ot=1,Mt=Ct(Ut=e),Ft=0,[]}(e),0,[0],e))}function on(e,t,n,r,i,a,s,o,l){for(var c=0,u=0,d=s,h=0,f=0,p=0,m=1,g=1,v=1,b=0,y="",E=i,x=a,S=r,w=y;g;)switch(p=b,b=Gt()){case 40:if(108!=p&&58==Rt(w,d-1)){-1!=At(w+=_t(qt(b),"&","&\f"),"&\f",xt(c?o[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:w+=qt(b);break;case 9:case 10:case 13:case 32:w+=Xt(p);break;case 92:w+=Qt(Wt()-1,7);continue;case 47:switch(Ht()){case 42:case 47:It(cn(Zt(Gt(),Wt()),t,n,l),l);break;default:w+="/"}break;case 123*m:o[c++]=Ct(w)*v;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+u:-1==v&&(w=_t(w,/\f/g,"")),f>0&&Ct(w)-d&&It(f>32?un(w+";",r,n,d-1,l):un(_t(w," ","")+";",r,n,d-2,l),l);break;case 59:w+=";";default:if(It(S=ln(w,t,n,c,u,i,o,y,E=[],x=[],d,a),a),123===b)if(0===u)on(w,t,S,S,E,a,d,o,x);else switch(99===h&&110===Rt(w,3)?100:h){case 100:case 108:case 109:case 115:on(e,S,S,r&&It(ln(e,S,S,0,0,i,o,y,i,E=[],d,x),x),i,x,d,o,r?E:x);break;default:on(w,S,S,S,[""],x,0,o,x)}}c=u=f=0,m=v=1,y=w="",d=s;break;case 58:d=1+Ct(w),f=p;default:if(m<1)if(123==b)--m;else if(125==b&&0==m++&&125==Vt())continue;switch(w+=St(b),b*m){case 38:v=u>0?1:(w+="\f",-1);break;case 44:o[c++]=(Ct(w)-1)*v,v=1;break;case 64:45===Ht()&&(w+=qt(Gt())),h=Ht(),u=d=Ct(y=w+=en(Wt())),b++;break;case 45:45===p&&2==Ct(w)&&(m=0)}}return a}function ln(e,t,n,r,i,a,s,o,l,c,u,d){for(var h=i-1,f=0===i?a:[""],p=Pt(f),m=0,g=0,v=0;m<r;++m)for(var b=0,y=Lt(e,h+1,h=xt(g=s[m])),E=e;b<p;++b)(E=kt(g>0?f[b]+" "+y:_t(y,/&\f/g,f[b])))&&(l[v++]=E);return jt(e,t,n,0===i?bt:o,l,c,u,d)}function cn(e,t,n,r){return jt(e,t,n,vt,St(Bt),Lt(e,2,-2),0,r)}function un(e,t,n,r,i){return jt(e,t,n,yt,Lt(e,0,r),Lt(e,r+1,-1),r,i)}var dn={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hn="undefined"!=typeof process&&("MISSING_ENV_VAR".REACT_APP_SC_ATTR||"MISSING_ENV_VAR".SC_ATTR)||"data-styled",fn="active",pn="data-styled-version",mn="6.1.19",gn="/*!sc*/\n",vn="undefined"!=typeof window&&"undefined"!=typeof document,bn=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=="MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY&&""!=="MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY?"false"!=="MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY&&"MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=="MISSING_ENV_VAR".SC_DISABLE_SPEEDY&&""!=="MISSING_ENV_VAR".SC_DISABLE_SPEEDY&&"false"!=="MISSING_ENV_VAR".SC_DISABLE_SPEEDY&&"MISSING_ENV_VAR".SC_DISABLE_SPEEDY),yn=(new Set,Object.freeze([])),En=Object.freeze({});var xn=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Sn=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,wn=/(^-|-$)/g;function kn(e){return e.replace(Sn,"-").replace(wn,"")}var Tn=/(a)(d)/gi,_n=function(e){return String.fromCharCode(e+(e>25?39:97))};function An(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=_n(t%52)+n;return(_n(t%52)+n).replace(Tn,"$1-$2")}var Rn,Ln=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Cn=function(e){return Ln(5381,e)};function Pn(e){return"string"==typeof e&&!0}var In="function"==typeof Symbol&&Symbol.for,Nn=In?Symbol.for("react.memo"):60115,Dn=In?Symbol.for("react.forward_ref"):60112,On={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Mn={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Fn={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Bn=((Rn={})[Dn]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Rn[Nn]=Fn,Rn);function Un(e){return("type"in(t=e)&&t.type.$$typeof)===Nn?Fn:"$$typeof"in e?Bn[e.$$typeof]:On;var t}var jn=Object.defineProperty,$n=Object.getOwnPropertyNames,zn=Object.getOwnPropertySymbols,Vn=Object.getOwnPropertyDescriptor,Gn=Object.getPrototypeOf,Hn=Object.prototype;function Wn(e,t,n){if("string"!=typeof t){if(Hn){var r=Gn(t);r&&r!==Hn&&Wn(e,r,n)}var i=$n(t);zn&&(i=i.concat(zn(t)));for(var a=Un(e),s=Un(t),o=0;o<i.length;++o){var l=i[o];if(!(l in Mn||n&&n[l]||s&&l in s||a&&l in a)){var c=Vn(t,l);try{jn(e,l,c)}catch(e){}}}}return e}function Kn(e){return"function"==typeof e}function Yn(e){return"object"==typeof e&&"styledComponentId"in e}function qn(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Xn(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function Qn(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Jn(e,t,n){if(void 0===n&&(n=!1),!n&&!Qn(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=Jn(e[r],t[r]);else if(Qn(t))for(var r in t)e[r]=Jn(e[r],t[r]);return e}function Zn(e,t){Object.defineProperty(e,"toString",{value:t})}function er(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var tr=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw er(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var s=this.indexOfGroup(e+1),o=(a=0,t.length);a<o;a++)this.tag.insertRule(s,t[a])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+="".concat(this.tag.getRule(a)).concat(gn);return t},e}(),nr=new Map,rr=new Map,ir=1,ar=function(e){if(nr.has(e))return nr.get(e);for(;rr.has(ir);)ir++;var t=ir++;return nr.set(e,t),rr.set(t,e),t},sr=function(e,t){ir=t+1,nr.set(e,t),rr.set(t,e)},or="style[".concat(hn,"][").concat(pn,'="').concat(mn,'"]'),lr=new RegExp("^".concat(hn,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),cr=function(e,t,n){for(var r,i=n.split(","),a=0,s=i.length;a<s;a++)(r=i[a])&&e.registerName(t,r)},ur=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(gn),i=[],a=0,s=r.length;a<s;a++){var o=r[a].trim();if(o){var l=o.match(lr);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(sr(u,c),cr(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(o)}}},dr=function(e){for(var t=document.querySelectorAll(or),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(hn)!==fn&&(ur(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function hr(){return i.nc}var fr=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(hn,"]")));return t[t.length-1]}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(hn,fn),r.setAttribute(pn,mn);var s=hr();return s&&r.setAttribute("nonce",s),n.insertBefore(r,a),r},pr=function(){function e(e){this.element=fr(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw er(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),mr=function(){function e(e){this.element=fr(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),gr=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),vr=vn,br={isServer:!vn,useCSSOMInjection:!bn},yr=function(){function e(e,t,n){void 0===e&&(e=En),void 0===t&&(t={});var r=this;this.options=ut(ut({},br),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&vn&&vr&&(vr=!1,dr(this)),Zn(this,function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return rr.get(e)}(n);if(void 0===i)return"continue";var a=e.names.get(i),s=t.getGroup(n);if(void 0===a||!a.size||0===s.length)return"continue";var o="".concat(hn,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==a&&a.forEach(function(e){e.length>0&&(l+="".concat(e,","))}),r+="".concat(s).concat(o,'{content:"').concat(l,'"}').concat(gn)},a=0;a<n;a++)i(a);return r}(r)})}return e.registerId=function(e){return ar(e)},e.prototype.rehydrate=function(){!this.server&&vn&&dr(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(ut(ut({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new gr(n):t?new pr(n):new mr(n)}(this.options),new tr(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(ar(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(ar(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(ar(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Er=/&/g,xr=/^\s*\/\/.*$/gm;function Sr(e,t){return e.map(function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(e){return"".concat(t," ").concat(e)})),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Sr(e.children,t)),e})}function wr(e){var t,n,r,i=void 0===e?En:e,a=i.options,s=void 0===a?En:a,o=i.plugins,l=void 0===o?yn:o,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push(function(e){e.type===bt&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(Er,n).replace(r,c))}),s.prefix&&u.push(an),u.push(nn);var d=function(e,i,a,o){void 0===i&&(i=""),void 0===a&&(a=""),void 0===o&&(o="&"),t=o,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(xr,""),c=sn(a||i?"".concat(a," ").concat(i," { ").concat(l," }"):l);s.namespace&&(c=Sr(c,s.namespace));var d,h,f=[];return tn(c,(d=u.concat(function(e){e.root||(e=e.return)&&function(e){f.push(e)}(e)}),h=Pt(d),function(e,t,n,r){for(var i="",a=0;a<h;a++)i+=d[a](e,t,n,r)||"";return i})),f};return d.hash=l.length?l.reduce(function(e,t){return t.name||er(15),Ln(e,t.name)},5381).toString():"",d}var kr=new yr,Tr=wr(),_r=r.createContext({shouldForwardProp:void 0,styleSheet:kr,stylis:Tr}),Ar=(_r.Consumer,r.createContext(void 0));function Rr(){return(0,r.useContext)(_r)}function Lr(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],a=Rr().styleSheet,s=(0,r.useMemo)(function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target,a]),o=(0,r.useMemo)(function(){return wr({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})},[e.enableVendorPrefixes,e.namespace,n]);(0,r.useEffect)(function(){ft()(n,e.stylisPlugins)||i(e.stylisPlugins)},[e.stylisPlugins]);var l=(0,r.useMemo)(function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:o}},[e.shouldForwardProp,s,o]);return r.createElement(_r.Provider,{value:l},r.createElement(Ar.Provider,{value:o},e.children))}var Cr=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Tr);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Zn(this,function(){throw er(12,String(n.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=Tr),this.name+e.hash},e}(),Pr=function(e){return e>="A"&&e<="Z"};function Ir(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;Pr(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Nr=function(e){return null==e||!1===e||""===e},Dr=function(e){var t,n,r=[];for(var i in e){var a=e[i];e.hasOwnProperty(i)&&!Nr(a)&&(Array.isArray(a)&&a.isCss||Kn(a)?r.push("".concat(Ir(i),":"),a,";"):Qn(a)?r.push.apply(r,dt(dt(["".concat(i," {")],Dr(a),!1),["}"],!1)):r.push("".concat(Ir(i),": ").concat((t=i,null==(n=a)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in dn||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Or(e,t,n,r){return Nr(e)?[]:Yn(e)?[".".concat(e.styledComponentId)]:Kn(e)?!Kn(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:Or(e(t),t,n,r):e instanceof Cr?n?(e.inject(n,r),[e.getName(r)]):[e]:Qn(e)?Dr(e):Array.isArray(e)?Array.prototype.concat.apply(yn,e.map(function(e){return Or(e,t,n,r)})):[e.toString()];var i}function Mr(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Kn(n)&&!Yn(n))return!1}return!0}var Fr=Cn(mn),Br=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Mr(e),this.componentId=t,this.baseHash=Ln(Fr,t),this.baseStyle=n,yr.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=qn(r,this.staticRulesId);else{var i=Xn(Or(this.rules,e,t,n)),a=An(Ln(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,a)){var s=n(i,".".concat(a),void 0,this.componentId);t.insertRules(this.componentId,a,s)}r=qn(r,a),this.staticRulesId=a}else{for(var o=Ln(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var d=Xn(Or(u,e,t,n));o=Ln(o,d+c),l+=d}}if(l){var h=An(o>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(l,".".concat(h),void 0,this.componentId)),r=qn(r,h)}}return r},e}(),Ur=r.createContext(void 0);Ur.Consumer;var jr={};function $r(e,t,n){var i=Yn(e),a=e,s=!Pn(e),o=t.attrs,l=void 0===o?yn:o,c=t.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":kn(e);jr[n]=(jr[n]||0)+1;var r="".concat(n,"-").concat(function(e){return An(Cn(e)>>>0)}(mn+n+jr[n]));return t?"".concat(t,"-").concat(r):r}(t.displayName,t.parentComponentId):c,d=t.displayName,h=void 0===d?function(e){return Pn(e)?"styled.".concat(e):"Styled(".concat(function(e){return e.displayName||e.name||"Component"}(e),")")}(e):d,f=t.displayName&&t.componentId?"".concat(kn(t.displayName),"-").concat(t.componentId):t.componentId||u,p=i&&a.attrs?a.attrs.concat(l).filter(Boolean):l,m=t.shouldForwardProp;if(i&&a.shouldForwardProp){var g=a.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;m=function(e,t){return g(e,t)&&v(e,t)}}else m=g}var b=new Br(n,f,i?a.componentStyle:void 0);function y(e,t){return function(e,t,n){var i=e.attrs,a=e.componentStyle,s=e.defaultProps,o=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=r.useContext(Ur),d=Rr(),h=e.shouldForwardProp||d.shouldForwardProp,f=function(e,t,n){return void 0===n&&(n=En),e.theme!==n.theme&&e.theme||t||n.theme}(t,u,s)||En,p=function(e,t,n){for(var r,i=ut(ut({},t),{className:void 0,theme:n}),a=0;a<e.length;a+=1){var s=Kn(r=e[a])?r(i):r;for(var o in s)i[o]="className"===o?qn(i[o],s[o]):"style"===o?ut(ut({},i[o]),s[o]):s[o]}return t.className&&(i.className=qn(i.className,t.className)),i}(i,t,f),m=p.as||c,g={};for(var v in p)void 0===p[v]||"$"===v[0]||"as"===v||"theme"===v&&p.theme===f||("forwardedAs"===v?g.as=p.forwardedAs:h&&!h(v,m)||(g[v]=p[v]));var b=function(e,t){var n=Rr();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(a,p),y=qn(o,l);return b&&(y+=" "+b),p.className&&(y+=" "+p.className),g[Pn(m)&&!xn.has(m)?"class":"className"]=y,n&&(g.ref=n),(0,r.createElement)(m,g)}(E,e,t)}y.displayName=h;var E=r.forwardRef(y);return E.attrs=p,E.componentStyle=b,E.displayName=h,E.shouldForwardProp=m,E.foldedComponentIds=i?qn(a.foldedComponentIds,a.styledComponentId):"",E.styledComponentId=f,E.target=i?a.target:e,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)Jn(e,i[r],!0);return e}({},a.defaultProps,e):e}}),Zn(E,function(){return".".concat(E.styledComponentId)}),s&&Wn(E,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function zr(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}new Set;var Vr=function(e){return Object.assign(e,{isCss:!0})};function Gr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Kn(e)||Qn(e))return Vr(Or(zr(yn,dt([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?Or(r):Vr(Or(zr(r,t)))}function Hr(e,t,n){if(void 0===n&&(n=En),!t)throw er(1,t);var r=function(r){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return e(t,n,Gr.apply(void 0,dt([r],i,!1)))};return r.attrs=function(r){return Hr(e,t,ut(ut({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return Hr(e,t,ut(ut({},n),r))},r}var Wr=function(e){return Hr($r,e)},Kr=Wr;xn.forEach(function(e){Kr[e]=Wr(e)}),function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Mr(e),yr.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(Xn(Or(this.rules,t,n,r)),""),a=this.componentId+e;n.insertRules(a,a,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&yr.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}(),function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=hr(),r=Xn([n&&'nonce="'.concat(n,'"'),"".concat(hn,'="true"'),"".concat(pn,'="').concat(mn,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw er(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw er(2);var n=e.instance.toString();if(!n)return[];var i=((t={})[hn]="",t[pn]=mn,t.dangerouslySetInnerHTML={__html:n},t),a=hr();return a&&(i.nonce=a),[r.createElement("style",ut({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new yr({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw er(2);return r.createElement(Lr,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw er(3)}}(),"__sc-".concat(hn,"__");var Yr=i(4140),qr={};qr.styleTagTransform=y(),qr.setAttributes=m(),qr.insert=f().bind(null,"head"),qr.domAPI=d(),qr.insertStyleElement=v(),c()(Yr.A,qr),Yr.A&&Yr.A.locals&&Yr.A.locals;var Xr,Qr,Jr,Zr,ei,ti,ni,ri=Kr.div(Xr||(Xr=ct(["\n  width: 250px;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  background-color: #002b5c;\n"]))),ii=Kr.h4(Qr||(Qr=ct(["\n  color: #ffa726;\n  margin-top: 20px;\n  margin-bottom: 10px;\n  padding-left: 15px;\n  font-weight: bold;\n  text-transform: uppercase;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),ai=Kr(Ne)(Jr||(Jr=ct(["\n  padding: 12px 15px;\n  color: #ffffff;\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  font-size: 15px;\n  border-left: 4px solid transparent;\n  transition: background 0.3s, border-color 0.3s;\n  &:hover {\n    background: #1a3c70;\n  }\n  &.active {\n    background: #1a3c70;\n    border-left: 4px solid #00b8d4;\n  }\n"]))),si=Kr(ai)(Zr||(Zr=ct(["\n  background: rgba(255, 255, 255, 0.02);\n  margin: 2px 0;\n  border-radius: 6px;\n  \n  &:hover {\n    background: #1a3c70;\n    border-left: 4px solid #ffa726;\n    transform: translateX(3px);\n  }\n  \n  &.active {\n    background: #1a3c70;\n    border-left: 4px solid #ffa726;\n    box-shadow: inset 0 0 10px rgba(255, 167, 38, 0.2);\n  }\n"]))),oi=Kr(ai)(ei||(ei=ct(["\n  &:hover {\n    background: #1a4c80;\n    border-left: 4px solid #4a9eff;\n  }\n  \n  &.active {\n    background: #1a4c80;\n    border-left: 4px solid #4a9eff;\n    box-shadow: inset 0 0 10px rgba(74, 158, 255, 0.2);\n  }\n"]))),li=Kr(ii)(ti||(ti=ct(["\n  color: #4a9eff;\n  background: rgba(74, 158, 255, 0.1);\n  border-radius: 8px;\n  padding: 12px 15px;\n  margin: 10px 0;\n  border: 1px solid rgba(74, 158, 255, 0.3);\n"]))),ci=Kr.span(ni||(ni=ct(["\n  background: #ff4757;\n  color: white;\n  font-size: 10px;\n  font-weight: bold;\n  padding: 2px 6px;\n  border-radius: 50%;\n  margin-left: 8px;\n  min-width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));const ui=function(e){e.user;var t=ce(),n=function(e){return t.pathname.startsWith(e.replace(/:\w+/g,""))},i=qe((0,r.useState)(!0),2),a=i[0],s=i[1],o=qe((0,r.useState)({chatrooms:3,teamRoom:1,squads:0}),2),l=o[0];return o[1],(0,r.useEffect)(function(){var e=localStorage.getItem("sidebar_gamer_expanded");s(!e||"true"===e)},[]),(0,r.useEffect)(function(){localStorage.setItem("sidebar_gamer_expanded",a)},[a]),r.createElement(ri,{className:"sidebar"},r.createElement(ii,null,"👤 User"),r.createElement(ai,{to:"/home-feed",className:n("/home-feed")?"active":""},"🏠 Home Feed"),r.createElement("div",{style:{marginLeft:"10px",borderLeft:"2px solid #ffa726",paddingLeft:"5px"}},r.createElement(si,{to:"/profile",className:!n("/profile")||n("/profile/gamer")||n("/profile/artist")?"":"active"},"👤 Regular Profile"),r.createElement(si,{to:"/profile/gamer",className:n("/profile/gamer")?"active":""},"🎮 Gamer Profile"),r.createElement(si,{to:"/profile/artist",className:n("/profile/artist")?"active":""},"🎵 Artist Profile")),r.createElement(ii,null,"📊 Dashboards"),r.createElement(ai,{to:"/creator-dashboard",className:n("/creator-dashboard")?"active":""},"🚀 Creator Dashboard"),r.createElement(ai,{to:"/artist-dashboard",className:n("/artist-dashboard")?"active":""},"🎤 Artist Dashboard"),r.createElement(ai,{to:"/podcast-dashboard",className:n("/podcast-dashboard")?"active":""},"🎧 Podcast Dashboard"),r.createElement(ai,{to:"/radio-dashboard",className:n("/radio-dashboard")?"active":""},"📻 Radio Dashboard"),r.createElement(li,{onClick:function(){return s(!a)}},r.createElement("span",null,"🎮 Gamers"),r.createElement("span",null,a?"🔽":"▶️")),a&&r.createElement(r.Fragment,null,r.createElement(oi,{to:"/gamers/chat",className:n("/gamers/chat")?"active":""},"💬 Gamer Chatrooms",l.chatrooms>0&&r.createElement(ci,null,l.chatrooms)),r.createElement(oi,{to:"/team-room",className:n("/team-room")?"active":""},"🧑‍🤝‍🧑 Team Room",l.teamRoom>0&&r.createElement(ci,null,l.teamRoom)),r.createElement(oi,{to:"/squad-finder",className:n("/squad-finder")?"active":""},"🔍 Find Squads")),r.createElement(ii,null,"🎧 Podcasts"),r.createElement(ai,{to:"/podcast-create",className:n("/podcast-create")?"active":""},"🎙️ Create Podcast"),r.createElement(ai,{to:"/browse-podcast-categories",className:n("/browse-podcast-categories")?"active":""},"🎧 Browse Categories"),r.createElement(ii,null,"🎬 Videos"),r.createElement(ai,{to:"/videos",className:n("/videos")?"active":""},"🎞️ Browse Videos"),r.createElement(ii,null,"📻 Radio Stations"),r.createElement(ai,{to:"/browse-radio-stations",className:n("/browse-radio-stations")?"active":""},"📻 Browse Stations"),r.createElement(ai,{to:"/create-radio",className:n("/create-radio")?"active":""},"➕ Create Station"),r.createElement(ii,null,"🎤 Indie Artists"),r.createElement(ai,{to:"/upload-music",className:n("/upload-music")?"active":""},"⬆️ Upload Music"),r.createElement(ai,{to:"/search",className:n("/search")?"active":""},"🔍 Search Artists"),r.createElement(ii,null,"🎥 Live Streaming"),r.createElement(ai,{to:"/live-streams",className:n("/live-streams")?"active":""},"📡 Live Streams"),r.createElement(ai,{to:"/live-concerts",className:n("/live-concerts")?"active":""},"🎶 Live Concerts"),r.createElement(ii,null,"👤 Account"),r.createElement(ai,{to:"/settings",className:n("/settings")?"active":""},"⚙️ Settings"))};var di,hi,fi,pi,mi;Kr.div(di||(di=ct(["\n  background: #222;\n  padding: 20px;\n  border-radius: 10px;\n  margin-bottom: 20px;\n"]))),Kr.div(hi||(hi=ct(["\n  background: #222;\n  padding: 20px;\n  border-radius: 10px;\n"]))),Kr.div(fi||(fi=ct(["\n  display: flex;\n  justify-content: space-between;\n  padding: 10px;\n  border-bottom: 1px solid #444;\n"]))),Kr.div(pi||(pi=ct(["\n  background: #222;\n  padding: 20px;\n  border-radius: 10px;\n  margin-top: 20px;\n"]))),Kr.div(mi||(mi=ct(["\n  background: #333;\n  padding: 10px;\n  margin-bottom: 5px;\n  border-radius: 5px;\n"])));const gi=function(e){var t=e.episodeId,n=e.podcastId,i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=function(){var e=Qe(Ze().mark(function e(){var r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/podcast/").concat(n,"/episode/schedule"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({episode_id:t,release_time:a})});case 1:return r=e.sent,e.next=2,r.json();case 2:i=e.sent,r.ok?alert("✅ Scheduled!"):alert("❌ "+i.error);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.createElement("div",null,r.createElement("input",{type:"datetime-local",value:a,onChange:function(e){return s(e.target.value.replace("T"," ")+":00")}}),r.createElement("button",{onClick:o},"📅 Schedule Episode"))};var vi=i(2154),bi={};bi.styleTagTransform=y(),bi.setAttributes=m(),bi.insert=f().bind(null,"head"),bi.domAPI=d(),bi.insertStyleElement=v(),c()(vi.A,bi),vi.A&&vi.A.locals&&vi.A.locals;const yi=function(){var e=qe((0,r.useState)([]),2),t=e[0],n=e[1],i=qe((0,r.useState)(null),2),a=i[0],s=i[1],o=qe((0,r.useState)([]),2),l=o[0],c=o[1],u=qe((0,r.useState)(!0),2),d=u[0],h=u[1],f=qe((0,r.useState)({total:0,ads:0,subscriptions:0,donations:0}),2),p=f[0];return f[1],(0,r.useEffect)(function(){var e=function(){var e=Qe(Ze().mark(function e(){var t,r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/podcast/dashboard"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 1:if((t=e.sent).ok){e.next=2;break}throw new Error("Status: ".concat(t.status));case 2:return e.next=3,t.json();case 3:if(r=e.sent,Array.isArray(r)){e.next=4;break}throw new Error("Data is not an array");case 4:n(r),e.next=6;break;case 5:e.prev=5,i=e.catch(0),console.error("Podcast fetch error:",i);case 6:return e.prev=6,h(!1),e.finish(6);case 7:case"end":return e.stop()}},e,null,[[0,5,6,7]])}));return function(){return e.apply(this,arguments)}}();e()},[]),d?r.createElement("p",{className:"loading"},"Loading your podcasts..."):r.createElement("div",{className:"podcast-dashboard"},r.createElement("h1",null,"🎙 Podcast Dashboard"),r.createElement("div",{className:"podcast-section"},r.createElement("h2",null,"📊 Summary"),r.createElement("div",{className:"summary-info"},r.createElement("strong",null,"Total Podcasts:")," ",t.length),r.createElement("div",{className:"summary-info"},r.createElement("strong",null,"Total Earnings:")," $",p.total.toFixed(2)),r.createElement("div",{className:"summary-info"},r.createElement("strong",null,"Ad Revenue:")," $",p.ads.toFixed(2)),r.createElement("div",{className:"summary-info"},r.createElement("strong",null,"Subscription Revenue:")," $",p.subscriptions.toFixed(2)),r.createElement("div",{className:"summary-info"},r.createElement("strong",null,"Donation Revenue:")," $",p.donations.toFixed(2))),r.createElement("div",{className:"podcast-section"},r.createElement("h2",null,"🎥 Go Live"),r.createElement(Ne,{to:"/live-studio"},r.createElement("button",{className:"btn-live"},"🎥 Start Live Podcast"))),r.createElement("div",{className:"podcast-section"},r.createElement("h2",null,"🎙️ Your Podcasts"),0===t.length?r.createElement("p",{className:"empty-state"},"No podcasts found. Create your first show!"):r.createElement("div",{className:"podcast-list"},t.map(function(e){return r.createElement("div",{key:e.id,className:"podcast-card"},r.createElement("img",{src:e.cover_art_url,alt:e.title,className:"podcast-cover"}),r.createElement("div",{className:"podcast-content"},r.createElement("h3",null,e.title),r.createElement("p",null,e.description),r.createElement("div",{className:"podcast-actions"},r.createElement("button",{onClick:function(){return t=e.id,s(t),void fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/podcasts/").concat(t,"/episodes")).then(function(e){return e.json()}).then(function(e){return c(e)}).catch(function(e){return console.error("Error fetching episodes:",e)});var t},className:"btn-primary"},"View Episodes"),r.createElement(Ne,{to:"/podcasts/".concat(e.id,"/edit"),className:"btn-edit"},"Edit"),r.createElement("button",{onClick:function(){return r=e.id,void(window.confirm("Are you sure you want to delete this podcast?")&&fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/podcasts/").concat(r),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(){return n(t.filter(function(e){return e.id!==r}))}).catch(function(e){return console.error("Error deleting podcast:",e)}));var r},className:"btn-delete"},"Delete")),r.createElement(gi,{podcastId:e.id})))})),r.createElement("div",{className:"create-podcast"},r.createElement(Ne,{to:"/create-podcast"},r.createElement("button",{className:"btn-create"},"➕ Create New Podcast")))),a&&r.createElement("div",{className:"podcast-section"},r.createElement("h2",null,"🎧 Episodes"),0===l.length?r.createElement("p",{className:"empty-state"},"No episodes found for this podcast."):r.createElement("ul",{className:"episode-list"},l.map(function(e){return r.createElement("li",{key:e.id,className:"episode-item"},r.createElement("strong",null,e.title),r.createElement("audio",{controls:!0},r.createElement("source",{src:e.file_url,type:"audio/mp3"}),"Your browser does not support the audio element."),r.createElement("button",{className:"btn-delete"},"🗑 Delete"))}))),r.createElement("div",{className:"podcast-section"},r.createElement("h2",null,"📈 Recent Episodes"),r.createElement("div",{className:"placeholder-content"},r.createElement("p",{className:"empty-state"},"No recent episodes to display."),r.createElement("p",null,"Your latest episodes will appear here once you start creating content."))),r.createElement("div",{className:"podcast-section"},r.createElement("h2",null,"👥 Audience Interaction"),r.createElement("div",{className:"placeholder-content"},r.createElement("p",{className:"empty-state"},"No audience interactions yet."),r.createElement("p",null,"Comments, likes, and audience engagement will be shown here."))),r.createElement("div",{className:"podcast-section"},r.createElement("h2",null,"🛠️ Podcast Tools"),r.createElement("ul",{className:"tools-list"},r.createElement("li",null,r.createElement(Ne,{to:"/create-podcast"},"Create New Podcast")),r.createElement("li",null,r.createElement(Ne,{to:"/upload-episode"},"Upload Episode")),r.createElement("li",null,r.createElement(Ne,{to:"/analytics"},"View Analytics")),r.createElement("li",null,r.createElement(Ne,{to:"/monetization"},"Monetization Settings")),r.createElement("li",null,r.createElement(Ne,{to:"/audience-insights"},"Audience Insights")))))};var Ei=i(9760),xi={};xi.styleTagTransform=y(),xi.setAttributes=m(),xi.insert=f().bind(null,"head"),xi.domAPI=d(),xi.insertStyleElement=v(),c()(Ei.A,xi),Ei.A&&Ei.A.locals&&Ei.A.locals;const Si=function(){var e=qe((0,r.useState)(""),2),t=e[0],n=e[1],i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=qe((0,r.useState)(""),2),l=o[0],c=o[1],u=qe((0,r.useState)(null),2),d=u[0],h=u[1],f=qe((0,r.useState)(null),2),p=f[0],m=f[1],g=qe((0,r.useState)(null),2),v=g[0],b=g[1],y=qe((0,r.useState)("Free"),2),E=y[0],x=y[1],S=qe((0,r.useState)(!1),2),w=S[0],k=S[1],T=qe((0,r.useState)(""),2),_=T[0],A=T[1],R=qe((0,r.useState)([]),2),L=R[0],C=R[1],P=de();(0,r.useEffect)(function(){fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/podcasts/categories")).then(function(e){return e.json()}).then(function(e){return C(e)}).catch(function(e){return console.error("Error fetching categories:",e)})},[]);var I=function(){var e=Qe(Ze().mark(function e(){var n,r,i,s;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim()&&a.trim()&&l){e.next=1;break}return alert("⚠️ Please fill in the title, description, and category."),e.abrupt("return");case 1:if(p||v){e.next=2;break}return alert("⚠️ Please upload either an audio or video file."),e.abrupt("return");case 2:return(n=new FormData).append("title",t),n.append("description",a),n.append("category",l),d&&n.append("cover_art",d),p&&n.append("audio",p),v&&n.append("video",v),n.append("subscription_tier",E),n.append("streaming_enabled",w),_&&n.append("scheduled_release",_),e.prev=3,e.next=4,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/upload_podcast"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:n});case 4:return r=e.sent,e.next=5,r.json();case 5:i=e.sent,r.ok?(alert("✅ Podcast uploaded successfully!"),P("/podcast-dashboard")):alert("❌ Upload error: ".concat(i.error||"Unknown error")),e.next=7;break;case 6:e.prev=6,s=e.catch(3),console.error("Upload failed:",s),alert("❌ Unexpected error occurred during upload.");case 7:case"end":return e.stop()}},e,null,[[3,6]])}));return function(){return e.apply(this,arguments)}}();return r.createElement("div",{className:"podcast-create-container"},r.createElement("h1",null,"🎙️ Create a Podcast"),r.createElement("label",null,"📌 Title:"),r.createElement("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)}}),r.createElement("label",null,"📝 Description:"),r.createElement("textarea",{value:a,onChange:function(e){return s(e.target.value)}}),r.createElement("label",null,"📂 Category:"),r.createElement("select",{value:l,onChange:function(e){return c(e.target.value)}},r.createElement("option",{value:""},"Select a Category"),L.map(function(e){return r.createElement("option",{key:e.id,value:e.slug},e.name)})),r.createElement("label",null,"🎨 Cover Art:"),r.createElement("input",{type:"file",accept:"image/*",onChange:function(e){return h(e.target.files[0])}}),r.createElement("label",null,"🎵 Podcast Audio:"),r.createElement("input",{type:"file",accept:"audio/*",onChange:function(e){return m(e.target.files[0])}}),r.createElement("label",null,"🎥 Podcast Video (optional):"),r.createElement("input",{type:"file",accept:"video/*",onChange:function(e){return b(e.target.files[0])}}),r.createElement("label",null,"🔴 Enable Live Podcast Streaming:"),r.createElement("input",{type:"checkbox",checked:w,onChange:function(){return k(!w)}}),r.createElement("label",null,"📅 Schedule Release:"),r.createElement("input",{type:"datetime-local",value:_,onChange:function(e){return A(e.target.value)}}),r.createElement("label",null,"💰 Monetization Tier:"),r.createElement("select",{value:E,onChange:function(e){return x(e.target.value)}},r.createElement("option",{value:"Free"},"Free"),r.createElement("option",{value:"5"},"Tier 1 - $5/month"),r.createElement("option",{value:"10"},"Tier 2 - $10/month"),r.createElement("option",{value:"20"},"Tier 3 - $20/month")),r.createElement("button",{className:"btn-primary",onClick:I},"📤 Upload Podcast"))},wi=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ki=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),Ti=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var _i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ai=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:s,iconNode:o,...l},c)=>(0,r.createElement)("svg",{ref:c,..._i,width:t,height:t,stroke:e,strokeWidth:i?24*Number(n)/Number(t):n,className:ki("lucide",a),...!s&&!Ti(l)&&{"aria-hidden":"true"},...l},[...o.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(s)?s:[s]])),Ri=(e,t)=>{const n=(0,r.forwardRef)(({className:n,...i},a)=>{return(0,r.createElement)(Ai,{ref:a,iconNode:t,className:ki(`lucide-${s=wi(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...i});var s});return n.displayName=wi(e),n},Li=Ri("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Ci=Ri("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Pi=Ri("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Ii=Ri("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ni=Ri("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),Di=Ri("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Oi=function(e){var t=e.podcastId,n=void 0===t?"101":t,i=qe((0,r.useState)(null),2),a=i[0],s=i[1],o=qe((0,r.useState)([]),2),l=o[0],c=o[1],u=qe((0,r.useState)(!0),2),d=u[0],h=u[1],f=qe((0,r.useState)(null),2),p=f[0],m=f[1],g=qe((0,r.useState)(null),2),v=g[0],b=g[1],y=qe((0,r.useState)(!1),2),E=y[0],x=y[1],S=qe((0,r.useState)(!1),2),w=S[0],k=S[1];(0,r.useEffect)(function(){var e=function(){var e=Qe(Ze().mark(function e(){var t,n;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),m(null),t=[{id:1,title:"The Vanishing of Sarah Chen",description:"In 2019, a promising young software engineer disappeared without a trace from her downtown apartment. Tonight, we examine the evidence and interview those closest to the case.",file_url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",duration:"45:32",uploaded_at:"2024-01-15T10:30:00Z"},{id:2,title:"The Missing Inheritance Papers",description:"A wealthy businessman's will goes missing just days before his death. His family is left with nothing but questions and a legal battle that spans decades.",file_url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",duration:"52:18",uploaded_at:"2024-01-08T14:20:00Z"},{id:3,title:"Secrets in the Archive",description:"When a historian discovers a hidden room in the city library, she uncovers documents that could solve a 50-year-old mystery.",file_url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",duration:"38:45",uploaded_at:"2024-01-01T09:15:00Z"}],s({id:101,title:"Cold Cases Uncovered",description:"Exploring the dark corners of justice. Dive deep into unsolved mysteries and cold cases that have baffled investigators for years.",category:"True Crime & Investigative Journalism",cover_art_url:"https://images.unsplash.com/photo-1590736969955-71cc94901144?w=300&h=300&fit=crop",uploaded_at:"2024-01-15T10:30:00Z"}),c(t),h(!1),e.abrupt("return");case 1:e.prev=1,n=e.catch(0),console.error("Error fetching podcast or episodes:",n),m(n.message);case 2:return e.prev=2,h(!1),e.finish(2);case 3:case"end":return e.stop()}},e,null,[[0,1,2,3]])}));return function(){return e.apply(this,arguments)}}();e()},[n]);var T=function(){console.log("Going back to previous page")},_=function(){var e=Qe(Ze().mark(function e(){return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:k(!w);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return d?r.createElement("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center"},r.createElement("div",{className:"text-center"},r.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-500 mx-auto"}),r.createElement("p",{className:"mt-4 text-lg"},"Loading podcast details..."))):p||!a?r.createElement("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center"},r.createElement("div",{className:"text-center"},r.createElement("h2",{className:"text-3xl font-bold mb-4"},"Podcast Not Found"),r.createElement("p",{className:"text-gray-400 mb-6"},p||"Something went wrong."),r.createElement("button",{onClick:T,className:"bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition-colors"},"← Go Back"))):r.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 text-white"},r.createElement("div",{className:"p-6"},r.createElement("button",{onClick:T,className:"flex items-center text-gray-300 hover:text-white transition-colors mb-6"},"← Back to Browse"),r.createElement("div",{className:"flex flex-col md:flex-row gap-8 mb-8"},r.createElement("div",{className:"flex-shrink-0"},r.createElement("img",{src:a.cover_art_url||a.cover_image_url||"https://via.placeholder.com/300x300/6B46C1/FFFFFF?text=Podcast",alt:a.title,className:"w-72 h-72 object-cover rounded-2xl shadow-2xl"})),r.createElement("div",{className:"flex-grow"},r.createElement("div",{className:"mb-4"},r.createElement("span",{className:"inline-block bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium mb-4"},a.category)),r.createElement("h1",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-white to-purple-300 bg-clip-text text-transparent"},a.title),r.createElement("p",{className:"text-gray-300 text-lg leading-relaxed mb-6"},a.description),r.createElement("div",{className:"flex flex-wrap gap-4"},r.createElement("button",{onClick:_,className:"flex items-center gap-2 px-6 py-3 rounded-lg transition-all ".concat(w?"bg-red-600 hover:bg-red-700":"bg-gray-700 hover:bg-gray-600")},r.createElement(Li,{className:"w-5 h-5 ".concat(w?"fill-current":"")}),w?"Liked":"Like"),r.createElement("button",{onClick:function(){navigator.share?navigator.share({title:null==a?void 0:a.title,text:null==a?void 0:a.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))},className:"flex items-center gap-2 px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors"},r.createElement(Ci,{className:"w-5 h-5"}),"Share"),r.createElement("button",{className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg transition-colors"},r.createElement(Pi,{className:"w-5 h-5"}),"Subscribe")),r.createElement("div",{className:"mt-6 flex gap-6 text-sm text-gray-400"},r.createElement("div",{className:"flex items-center gap-1"},r.createElement(Ii,{className:"w-4 h-4"}),l.length," Episodes"),a.uploaded_at&&r.createElement("div",null,"Created: ",new Date(a.uploaded_at).toLocaleDateString())))),r.createElement("div",{className:"mt-12"},r.createElement("h2",{className:"text-2xl font-bold mb-6"},"Episodes"),0===l.length?r.createElement("div",{className:"text-center py-12"},r.createElement("div",{className:"text-gray-400 text-lg mb-4"},"No episodes available yet"),r.createElement("p",{className:"text-gray-500"},"Check back later for new content!")):r.createElement("div",{className:"space-y-4"},l.map(function(e,t){return r.createElement("div",{key:e.id,className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 hover:bg-gray-800/70 transition-all duration-300"},r.createElement("div",{className:"flex items-start gap-4"},r.createElement("button",{onClick:function(){return t=e.id,void(v===t&&E?x(!1):(b(t),x(!0)));var t},className:"flex-shrink-0 w-12 h-12 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center transition-colors"},v===e.id&&E?r.createElement(Ni,{className:"w-6 h-6"}):r.createElement(Di,{className:"w-6 h-6 ml-1"})),r.createElement("div",{className:"flex-grow"},r.createElement("div",{className:"flex justify-between items-start mb-2"},r.createElement("h3",{className:"text-xl font-semibold text-white"},e.title||"Episode ".concat(t+1)),e.duration&&r.createElement("span",{className:"text-gray-400 text-sm"},e.duration)),e.description&&r.createElement("p",{className:"text-gray-300 mb-4 leading-relaxed"},e.description),e.file_url&&r.createElement("div",{className:"mt-4"},r.createElement("audio",{controls:!0,className:"w-full h-10",style:{filter:"sepia(1) hue-rotate(240deg) saturate(2) brightness(0.8)"}},r.createElement("source",{src:e.file_url,type:"audio/mp3"}),r.createElement("source",{src:e.file_url,type:"audio/wav"}),r.createElement("source",{src:e.file_url,type:"audio/ogg"}),"Your browser does not support the audio element.")),e.uploaded_at&&r.createElement("div",{className:"mt-3 text-sm text-gray-500"},"Published: ",new Date(e.uploaded_at).toLocaleDateString()))))}))),r.createElement("div",{className:"mt-16"},r.createElement("h2",{className:"text-2xl font-bold mb-6"},"More in ",a.category),r.createElement("div",{className:"text-gray-400"},r.createElement(Link,{to:"/podcast-category/".concat(encodeURIComponent(a.category)),className:"text-purple-400 hover:text-purple-300 transition-colors"},"Browse more ",a.category," podcasts →")))))};var Mi=i(9515),Fi={};Fi.styleTagTransform=y(),Fi.setAttributes=m(),Fi.insert=f().bind(null,"head"),Fi.domAPI=d(),Fi.insertStyleElement=v(),c()(Mi.A,Fi),Mi.A&&Mi.A.locals&&Mi.A.locals;const Bi=i.p+"podcast1.png",Ui=i.p+"podcast2.png",ji=i.p+"podcast3.png",$i=i.p+"podcast4.png",zi=i.p+"podcast5.png",Vi=i.p+"podcast6.png",Gi=function(){var e=qe((0,r.useState)([]),2),t=e[0],n=e[1],i=qe((0,r.useState)(null),2),a=i[0],s=i[1],o=qe((0,r.useState)(!0),2),l=o[0],c=o[1],u=qe((0,r.useState)(null),2),d=u[0],h=u[1],f=(0,r.useRef)(null),p=[{name:"True Crime & Investigative Journalism"},{name:"Celebrity Gossip & Reality TV"},{name:"Education & Learning"},{name:"Comedy & Stand-Up"},{name:"Tabletop & Board Games"},{name:"Film & TV Reviews"},{name:"Technology & Science"},{name:"Health & Wellness"},{name:"Business & Finance"},{name:"Sports & Recreation"}];(0,r.useEffect)(function(){var e=function(){var e=Qe(Ze().mark(function e(){var t,r,i,a;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),h(null),t="MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev",e.next=1,fetch("".concat(t,"/api/podcasts/categories"));case 1:if((r=e.sent).ok){e.next=2;break}throw new Error("HTTP error! status: ".concat(r.status));case 2:return e.next=3,r.json();case 3:i=e.sent,Array.isArray(i)&&i.length>0?n(i):(console.warn("Using fallback categories"),n(p)),e.next=5;break;case 4:e.prev=4,a=e.catch(0),console.error("Fetch error:",a),h(a.message),n(p);case 5:return e.prev=5,c(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[0,4,5,6]])}));return function(){return e.apply(this,arguments)}}();e()},[]);var m=[{id:101,title:"Cold Cases Uncovered",desc:"Exploring the dark corners of justice.",label:"New",category:"True Crime & Investigative Journalism",image:Bi},{id:102,title:"Celebrity Circuit",desc:"Daily pop culture recaps & drama.",label:"Popular",category:"Celebrity Gossip & Reality TV",image:Ui},{id:103,title:"Brush & Beyond",desc:"Unlock your artistic side.",label:"Trending",category:"Education & Learning",image:ji},{id:104,title:"Laugh Track Live",desc:"Fresh comedy from new voices.",label:"Trending",category:"Comedy & Stand-Up",image:$i},{id:105,title:"Dice & Destiny",desc:"Your go-to RPG campaign companion.",label:"Top 10",category:"Tabletop & Board Games",image:zi},{id:106,title:"Binge Breakdown",desc:"Reviews, reactions, and recaps.",label:"Popular",category:"Film & TV Reviews",image:Vi}],g=function(e,t){var n=t?m.filter(function(e){return e.category===t}):m;return 0===n.length?r.createElement("div",{className:"podcast-section"},r.createElement("h2",{className:"section-title"},e),r.createElement("p",{className:"no-podcasts"},"No podcasts found in this category.")):r.createElement("div",{className:"podcast-section"},r.createElement("h2",{className:"section-title"},e),r.createElement("div",{className:"podcast-scroll-row"},n.map(function(e){return r.createElement(Ne,{to:"/podcast/".concat(e.id),key:e.id,className:"podcast-card"},r.createElement("img",{src:e.image,alt:e.title,className:"podcast-img"}),r.createElement("h3",{className:"podcast-title"},e.title),r.createElement("span",{className:"podcast-label"},e.label),r.createElement("p",{className:"podcast-desc"},e.desc))})))};return r.createElement("div",{className:"categories-wrapper"},r.createElement("h1",{className:"categories-heading"},"🎧 Podcast Categories"),d&&r.createElement("div",{className:"error-message",style:{background:"#fee",border:"1px solid #fcc",padding:"10px",borderRadius:"5px",margin:"10px 0",color:"#c33"}},"⚠️ Could not load categories from server. Using default categories."),r.createElement("div",{className:"category-nav"},r.createElement("button",{onClick:function(){f.current&&(f.current.scrollLeft-=200)},className:"scroll-button"},"‹"),r.createElement("div",{className:"categories-scroll",ref:f},l?r.createElement("div",{className:"loading-spinner"},"Loading categories..."):t.length>0?t.map(function(e,t){return r.createElement("div",{key:t,onClick:function(){return s(e.name)},className:"category-pill ".concat(a===e.name?"active":"")},e.name)}):r.createElement("p",null,"No categories available")),r.createElement("button",{onClick:function(){f.current&&(f.current.scrollLeft+=200)},className:"scroll-button"},"›")),a?g("🎯 ".concat(a),a):r.createElement(r.Fragment,null,g("🆕 New on StreampireX"),g("🔥 Top Streamers"),g("🌟 Popular This Week")))};function Hi(e,t){return function(){return e.apply(t,arguments)}}const{toString:Wi}=Object.prototype,{getPrototypeOf:Ki}=Object,{iterator:Yi,toStringTag:qi}=Symbol,Xi=(e=>t=>{const n=Wi.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qi=e=>(e=e.toLowerCase(),t=>Xi(t)===e),Ji=e=>t=>typeof t===e,{isArray:Zi}=Array,ea=Ji("undefined"),ta=Qi("ArrayBuffer"),na=Ji("string"),ra=Ji("function"),ia=Ji("number"),aa=e=>null!==e&&"object"==typeof e,sa=e=>{if("object"!==Xi(e))return!1;const t=Ki(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||qi in e||Yi in e)},oa=Qi("Date"),la=Qi("File"),ca=Qi("Blob"),ua=Qi("FileList"),da=Qi("URLSearchParams"),[ha,fa,pa,ma]=["ReadableStream","Request","Response","Headers"].map(Qi);function ga(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,i;if("object"!=typeof e&&(e=[e]),Zi(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let s;for(r=0;r<a;r++)s=i[r],t.call(null,e[s],s,e)}}function va(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const ba="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ya=e=>!ea(e)&&e!==ba,Ea=(xa="undefined"!=typeof Uint8Array&&Ki(Uint8Array),e=>xa&&e instanceof xa);var xa;const Sa=Qi("HTMLFormElement"),wa=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),ka=Qi("RegExp"),Ta=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ga(n,(n,i)=>{let a;!1!==(a=t(n,i,e))&&(r[i]=a||n)}),Object.defineProperties(e,r)},_a=Qi("AsyncFunction"),Aa=(Ra="function"==typeof setImmediate,La=ra(ba.postMessage),Ra?setImmediate:La?((e,t)=>(ba.addEventListener("message",({source:n,data:r})=>{n===ba&&r===e&&t.length&&t.shift()()},!1),n=>{t.push(n),ba.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e));var Ra,La;const Ca="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ba):"undefined"!=typeof process&&process.nextTick||Aa,Pa={isArray:Zi,isArrayBuffer:ta,isBuffer:function(e){return null!==e&&!ea(e)&&null!==e.constructor&&!ea(e.constructor)&&ra(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||ra(e.append)&&("formdata"===(t=Xi(e))||"object"===t&&ra(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ta(e.buffer),t},isString:na,isNumber:ia,isBoolean:e=>!0===e||!1===e,isObject:aa,isPlainObject:sa,isReadableStream:ha,isRequest:fa,isResponse:pa,isHeaders:ma,isUndefined:ea,isDate:oa,isFile:la,isBlob:ca,isRegExp:ka,isFunction:ra,isStream:e=>aa(e)&&ra(e.pipe),isURLSearchParams:da,isTypedArray:Ea,isFileList:ua,forEach:ga,merge:function e(){const{caseless:t}=ya(this)&&this||{},n={},r=(r,i)=>{const a=t&&va(n,i)||i;sa(n[a])&&sa(r)?n[a]=e(n[a],r):sa(r)?n[a]=e({},r):Zi(r)?n[a]=r.slice():n[a]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&ga(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(ga(t,(t,r)=>{n&&ra(t)?e[r]=Hi(t,n):e[r]=t},{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,a,s;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],r&&!r(s,e,t)||o[s]||(t[s]=e[s],o[s]=!0);e=!1!==n&&Ki(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Xi,kindOfTest:Qi,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Zi(e))return e;let t=e.length;if(!ia(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Yi]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Sa,hasOwnProperty:wa,hasOwnProp:wa,reduceDescriptors:Ta,freezeMethods:e=>{Ta(e,(t,n)=>{if(ra(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];ra(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return Zi(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:va,global:ba,isContextDefined:ya,isSpecCompliantForm:function(e){return!!(e&&ra(e.append)&&"FormData"===e[qi]&&e[Yi])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(aa(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Zi(e)?[]:{};return ga(e,(e,t)=>{const a=n(e,r+1);!ea(a)&&(i[t]=a)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:_a,isThenable:e=>e&&(aa(e)||ra(e))&&ra(e.then)&&ra(e.catch),setImmediate:Aa,asap:Ca,isIterable:e=>null!=e&&ra(e[Yi])};function Ia(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Pa.inherits(Ia,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Pa.toJSONObject(this.config),code:this.code,status:this.status}}});const Na=Ia.prototype,Da={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Da[e]={value:e}}),Object.defineProperties(Ia,Da),Object.defineProperty(Na,"isAxiosError",{value:!0}),Ia.from=(e,t,n,r,i,a)=>{const s=Object.create(Na);return Pa.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),Ia.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const Oa=Ia;function Ma(e){return Pa.isPlainObject(e)||Pa.isArray(e)}function Fa(e){return Pa.endsWith(e,"[]")?e.slice(0,-2):e}function Ba(e,t,n){return e?e.concat(t).map(function(e,t){return e=Fa(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Ua=Pa.toFlatObject(Pa,{},null,function(e){return/^is[A-Z]/.test(e)}),ja=function(e,t,n){if(!Pa.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Pa.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Pa.isUndefined(t[e])})).metaTokens,i=n.visitor||c,a=n.dots,s=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Pa.isSpecCompliantForm(t);if(!Pa.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Pa.isDate(e))return e.toISOString();if(Pa.isBoolean(e))return e.toString();if(!o&&Pa.isBlob(e))throw new Oa("Blob is not supported. Use a Buffer instead.");return Pa.isArrayBuffer(e)||Pa.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let o=e;if(e&&!i&&"object"==typeof e)if(Pa.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Pa.isArray(e)&&function(e){return Pa.isArray(e)&&!e.some(Ma)}(e)||(Pa.isFileList(e)||Pa.endsWith(n,"[]"))&&(o=Pa.toArray(e)))return n=Fa(n),o.forEach(function(e,r){!Pa.isUndefined(e)&&null!==e&&t.append(!0===s?Ba([n],r,a):null===s?n:n+"[]",l(e))}),!1;return!!Ma(e)||(t.append(Ba(i,n,a),l(e)),!1)}const u=[],d=Object.assign(Ua,{defaultVisitor:c,convertValue:l,isVisitable:Ma});if(!Pa.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Pa.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Pa.forEach(n,function(n,a){!0===(!(Pa.isUndefined(n)||null===n)&&i.call(t,n,Pa.isString(a)?a.trim():a,r,d))&&e(n,r?r.concat(a):[a])}),u.pop()}}(e),t};function $a(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function za(e,t){this._pairs=[],e&&ja(e,this,t)}const Va=za.prototype;Va.append=function(e,t){this._pairs.push([e,t])},Va.toString=function(e){const t=e?function(t){return e.call(this,t,$a)}:$a;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Ga=za;function Ha(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Wa(e,t,n){if(!t)return e;const r=n&&n.encode||Ha;Pa.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(a=i?i(t,n):Pa.isURLSearchParams(t)?t.toString():new Ga(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Ka=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Pa.forEach(this.handlers,function(t){null!==t&&e(t)})}},Ya={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qa={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Ga,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Xa="undefined"!=typeof window&&"undefined"!=typeof document,Qa="object"==typeof navigator&&navigator||void 0,Ja=Xa&&(!Qa||["ReactNative","NativeScript","NS"].indexOf(Qa.product)<0),Za="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,es=Xa&&window.location.href||"http://localhost",ts={...e,...qa},ns=function(e){function t(e,n,r,i){let a=e[i++];if("__proto__"===a)return!0;const s=Number.isFinite(+a),o=i>=e.length;return a=!a&&Pa.isArray(r)?r.length:a,o?(Pa.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!s):(r[a]&&Pa.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&Pa.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}(r[a])),!s)}if(Pa.isFormData(e)&&Pa.isFunction(e.entries)){const n={};return Pa.forEachEntry(e,(e,r)=>{t(function(e){return Pa.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null},rs={transitional:Ya,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Pa.isObject(e);if(i&&Pa.isHTMLForm(e)&&(e=new FormData(e)),Pa.isFormData(e))return r?JSON.stringify(ns(e)):e;if(Pa.isArrayBuffer(e)||Pa.isBuffer(e)||Pa.isStream(e)||Pa.isFile(e)||Pa.isBlob(e)||Pa.isReadableStream(e))return e;if(Pa.isArrayBufferView(e))return e.buffer;if(Pa.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ja(e,new ts.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ts.isNode&&Pa.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Pa.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ja(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e){if(Pa.isString(e))try{return(0,JSON.parse)(e),Pa.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||rs.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Pa.isResponse(e)||Pa.isReadableStream(e))return e;if(e&&Pa.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw Oa.from(e,Oa.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ts.classes.FormData,Blob:ts.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Pa.forEach(["delete","get","head","post","put","patch"],e=>{rs.headers[e]={}});const is=rs,as=Pa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ss=Symbol("internals");function os(e){return e&&String(e).trim().toLowerCase()}function ls(e){return!1===e||null==e?e:Pa.isArray(e)?e.map(ls):String(e)}function cs(e,t,n,r,i){return Pa.isFunction(r)?r.call(this,t,n):(i&&(t=n),Pa.isString(t)?Pa.isString(r)?-1!==t.indexOf(r):Pa.isRegExp(r)?r.test(t):void 0:void 0)}class us{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=os(t);if(!i)throw new Error("header name must be a non-empty string");const a=Pa.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=ls(e))}const a=(e,t)=>Pa.forEach(e,(e,n)=>i(e,n,t));if(Pa.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Pa.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&as[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(Pa.isObject(e)&&Pa.isIterable(e)){let n,r,i={};for(const t of e){if(!Pa.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?Pa.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=os(e)){const n=Pa.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Pa.isFunction(t))return t.call(this,e,n);if(Pa.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=os(e)){const n=Pa.findKey(this,e);return!(!n||void 0===this[n]||t&&!cs(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=os(e)){const i=Pa.findKey(n,e);!i||t&&!cs(0,n[i],i,t)||(delete n[i],r=!0)}}return Pa.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!cs(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Pa.forEach(this,(r,i)=>{const a=Pa.findKey(n,i);if(a)return t[a]=ls(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(i):String(i).trim();s!==i&&delete t[i],t[s]=ls(r),n[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Pa.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Pa.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[ss]=this[ss]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=os(e);t[r]||(function(e,t){const n=Pa.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[r]=!0)}return Pa.isArray(e)?e.forEach(r):r(e),this}}us.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Pa.reduceDescriptors(us.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),Pa.freezeMethods(us);const ds=us;function hs(e,t){const n=this||is,r=t||n,i=ds.from(r.headers);let a=r.data;return Pa.forEach(e,function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function fs(e){return!(!e||!e.__CANCEL__)}function ps(e,t,n){Oa.call(this,null==e?"canceled":e,Oa.ERR_CANCELED,t,n),this.name="CanceledError"}Pa.inherits(ps,Oa,{__CANCEL__:!0});const ms=ps;function gs(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Oa("Request failed with status code "+n.status,[Oa.ERR_BAD_REQUEST,Oa.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const vs=(e,t,n=3)=>{let r=0;const i=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,a=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[s];i||(i=l),n[a]=o,r[a]=l;let u=s,d=0;for(;u!==a;)d+=n[u++],u%=e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let n,r,i=0,a=1e3/t;const s=(t,a=Date.now())=>{i=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-i;o>=a?s(e,t):(n=e,r||(r=setTimeout(()=>{r=null,s(n)},a-o)))},()=>n&&s(n)]}(n=>{const a=n.loaded,s=n.lengthComputable?n.total:void 0,o=a-r,l=i(o);r=a,e({loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&a<=s?(s-a)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})},n)},bs=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},ys=e=>(...t)=>Pa.asap(()=>e(...t)),Es=ts.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ts.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ts.origin),ts.navigator&&/(msie|trident)/i.test(ts.navigator.userAgent)):()=>!0,xs=ts.hasStandardBrowserEnv?{write(e,t,n,r,i,a){const s=[e+"="+encodeURIComponent(t)];Pa.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Pa.isString(r)&&s.push("path="+r),Pa.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ss(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ws=e=>e instanceof ds?{...e}:e;function ks(e,t){t=t||{};const n={};function r(e,t,n,r){return Pa.isPlainObject(e)&&Pa.isPlainObject(t)?Pa.merge.call({caseless:r},e,t):Pa.isPlainObject(t)?Pa.merge({},t):Pa.isArray(t)?t.slice():t}function i(e,t,n,i){return Pa.isUndefined(t)?Pa.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function a(e,t){if(!Pa.isUndefined(t))return r(void 0,t)}function s(e,t){return Pa.isUndefined(t)?Pa.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t,n)=>i(ws(e),ws(t),0,!0)};return Pa.forEach(Object.keys(Object.assign({},e,t)),function(r){const a=l[r]||i,s=a(e[r],t[r],r);Pa.isUndefined(s)&&a!==o||(n[r]=s)}),n}const Ts=e=>{const t=ks({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:l}=t;if(t.headers=o=ds.from(o),t.url=Wa(Ss(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Pa.isFormData(r))if(ts.hasStandardBrowserEnv||ts.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(ts.hasStandardBrowserEnv&&(i&&Pa.isFunction(i)&&(i=i(t)),i||!1!==i&&Es(t.url))){const e=a&&s&&xs.read(s);e&&o.set(a,e)}return t},_s="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=Ts(e);let i=r.data;const a=ds.from(r.headers).normalize();let s,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=ds.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());gs(function(e){t(e),p()},function(e){n(e),p()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Oa("Request aborted",Oa.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Oa("Network Error",Oa.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Ya;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Oa(t,i.clarifyTimeoutError?Oa.ETIMEDOUT:Oa.ECONNABORTED,e,m)),m=null},void 0===i&&a.setContentType(null),"setRequestHeader"in m&&Pa.forEach(a.toJSON(),function(e,t){m.setRequestHeader(t,e)}),Pa.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),f&&([l,u]=vs(f,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=vs(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new ms(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===ts.protocols.indexOf(v)?n(new Oa("Unsupported protocol "+v+":",Oa.ERR_BAD_REQUEST,e)):m.send(i||null)})},As=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Oa?t:new ms(t instanceof Error?t.message:t))}};let a=t&&setTimeout(()=>{a=null,i(new Oa(`timeout ${t} of ms exceeded`,Oa.ETIMEDOUT))},t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:o}=r;return o.unsubscribe=()=>Pa.asap(s),o}},Rs=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Ls=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}}(e))yield*Rs(n,t)}(e,t);let a,s=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return o(),void e.close();let a=r.byteLength;if(n){let e=s+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw o(e),e}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},Cs="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Ps=Cs&&"function"==typeof ReadableStream,Is=Cs&&("function"==typeof TextEncoder?(Ns=new TextEncoder,e=>Ns.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Ns;const Ds=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Os=Ps&&Ds(()=>{let e=!1;const t=new Request(ts.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ms=Ps&&Ds(()=>Pa.isReadableStream(new Response("").body)),Fs={stream:Ms&&(e=>e.body)};var Bs;Cs&&(Bs=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Fs[e]&&(Fs[e]=Pa.isFunction(Bs[e])?t=>t[e]():(t,n)=>{throw new Oa(`Response type '${e}' is not supported`,Oa.ERR_NOT_SUPPORT,n)})}));const Us=Cs&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=Ts(e);c=c?(c+"").toLowerCase():"text";let f,p=As([i,a&&a.toAbortSignal()],s);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&Os&&"get"!==n&&"head"!==n&&0!==(g=await(async(e,t)=>{const n=Pa.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Pa.isBlob(e))return e.size;if(Pa.isSpecCompliantForm(e)){const t=new Request(ts.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Pa.isArrayBufferView(e)||Pa.isArrayBuffer(e)?e.byteLength:(Pa.isURLSearchParams(e)&&(e+=""),Pa.isString(e)?(await Is(e)).byteLength:void 0)})(t):n})(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Pa.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=bs(g,vs(ys(l)));r=Ls(n.body,65536,e,t)}}Pa.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let a=await fetch(f,h);const s=Ms&&("stream"===c||"response"===c);if(Ms&&(o||s&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=a[t]});const t=Pa.toFiniteNumber(a.headers.get("content-length")),[n,r]=o&&bs(t,vs(ys(o),!0))||[];a=new Response(Ls(a.body,65536,n,()=>{r&&r(),m&&m()}),e)}c=c||"text";let v=await Fs[Pa.findKey(Fs,c)||"text"](a,e);return!s&&m&&m(),await new Promise((t,n)=>{gs(t,n,{data:v,headers:ds.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:f})})}catch(t){if(m&&m(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new Oa("Network Error",Oa.ERR_NETWORK,e,f),{cause:t.cause||t});throw Oa.from(t,t&&t.code,e,f)}}),js={http:null,xhr:_s,fetch:Us};Pa.forEach(js,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});const $s=e=>`- ${e}`,zs=e=>Pa.isFunction(e)||null===e||!1===e,Vs=e=>{e=Pa.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!zs(n)&&(r=js[(t=String(n)).toLowerCase()],void 0===r))throw new Oa(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+a]=r}if(!r){const e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));let n=t?e.length>1?"since :\n"+e.map($s).join("\n"):" "+$s(e[0]):"as no adapter specified";throw new Oa("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Gs(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ms(null,e)}function Hs(e){return Gs(e),e.headers=ds.from(e.headers),e.data=hs.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Vs(e.adapter||is.adapter)(e).then(function(t){return Gs(e),t.data=hs.call(e,e.transformResponse,t),t.headers=ds.from(t.headers),t},function(t){return fs(t)||(Gs(e),t&&t.response&&(t.response.data=hs.call(e,e.transformResponse,t.response),t.response.headers=ds.from(t.response.headers))),Promise.reject(t)})}const Ws="1.10.0",Ks={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ks[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ys={};Ks.transitional=function(e,t,n){function r(e,t){return"[Axios v"+Ws+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new Oa(r(i," has been removed"+(t?" in "+t:"")),Oa.ERR_DEPRECATED);return t&&!Ys[i]&&(Ys[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}},Ks.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const qs={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Oa("options must be an object",Oa.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],s=t[a];if(s){const t=e[a],n=void 0===t||s(t,a,e);if(!0!==n)throw new Oa("option "+a+" must be "+n,Oa.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Oa("Unknown option "+a,Oa.ERR_BAD_OPTION)}},validators:Ks},Xs=qs.validators;class Qs{constructor(e){this.defaults=e||{},this.interceptors={request:new Ka,response:new Ka}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=ks(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&qs.assertOptions(n,{silentJSONParsing:Xs.transitional(Xs.boolean),forcedJSONParsing:Xs.transitional(Xs.boolean),clarifyTimeoutError:Xs.transitional(Xs.boolean)},!1),null!=r&&(Pa.isFunction(r)?t.paramsSerializer={serialize:r}:qs.assertOptions(r,{encode:Xs.function,serialize:Xs.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),qs.assertOptions(t,{baseUrl:Xs.spelling("baseURL"),withXsrfToken:Xs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&Pa.merge(i.common,i[t.method]);i&&Pa.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=ds.concat(a,i);const s=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[Hs.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{c=Hs.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Wa(Ss((e=ks(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Pa.forEach(["delete","get","head","options"],function(e){Qs.prototype[e]=function(t,n){return this.request(ks(n||{},{method:e,url:t,data:(n||{}).data}))}}),Pa.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(ks(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Qs.prototype[e]=t(),Qs.prototype[e+"Form"]=t(!0)});const Js=Qs;class Zs{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new ms(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Zs(function(t){e=t}),cancel:e}}}const eo=Zs,to={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(to).forEach(([e,t])=>{to[t]=e});const no=to,ro=function e(t){const n=new Js(t),r=Hi(Js.prototype.request,n);return Pa.extend(r,Js.prototype,n,{allOwnKeys:!0}),Pa.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(ks(t,n))},r}(is);ro.Axios=Js,ro.CanceledError=ms,ro.CancelToken=eo,ro.isCancel=fs,ro.VERSION=Ws,ro.toFormData=ja,ro.AxiosError=Oa,ro.Cancel=ro.CanceledError,ro.all=function(e){return Promise.all(e)},ro.spread=function(e){return function(t){return e.apply(null,t)}},ro.isAxiosError=function(e){return Pa.isObject(e)&&!0===e.isAxiosError},ro.mergeConfig=ks,ro.AxiosHeaders=ds,ro.formToJSON=e=>ns(Pa.isHTMLForm(e)?new FormData(e):e),ro.getAdapter=Vs,ro.HttpStatusCode=no,ro.default=ro;const io=ro,ao=function(){var e=he(),t=e.podcastId,n=e.episodeId,i=qe((0,r.useState)(null),2),a=i[0],s=i[1],o=qe((0,r.useState)(!1),2),l=o[0],c=o[1],u=qe((0,r.useState)(!0),2),d=u[0],h=u[1],f=qe((0,r.useState)(""),2);f[0],f[1],(0,r.useEffect)(function(){var e=function(){var e=Qe(Ze().mark(function e(){var t,r;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,io.get("/api/episodes/".concat(n));case 1:t=e.sent,s(t.data),e.next=3;break;case 2:e.prev=2,r=e.catch(0),console.error("Episode fetch error:",r);case 3:return e.prev=3,h(!1),e.finish(3);case 4:case"end":return e.stop()}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Qe(Ze().mark(function e(){var t,r;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,io.get("/api/episodes/".concat(n,"/access"));case 1:t=e.sent,c(t.data.access),e.next=3;break;case 2:e.prev=2,r=e.catch(0),console.error("Access check failed:",r);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();e(),t()},[n]);var p=function(){var e=Qe(Ze().mark(function e(){var r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,io.post("/podcast/".concat(t,"/purchase"),{episode_id:n});case 1:r=e.sent,window.location.href=r.data.checkout_url,e.next=3;break;case 2:e.prev=2,i=e.catch(0),console.error("Purchase error:",i),alert("Something went wrong while processing your payment.");case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return d||!a?r.createElement("p",null,"Loading..."):r.createElement("div",null,r.createElement("h2",null,a.title),r.createElement("p",null,a.description),a.is_premium&&!l?r.createElement(r.Fragment,null,r.createElement("p",null,"🎧 This episode is premium. Price: $",a.price_per_episode.toFixed(2)),r.createElement("button",{onClick:p},"Unlock Episode")):r.createElement("audio",{controls:!0},r.createElement("source",{src:a.stream_url,type:"audio/mpeg"}),"Your browser does not support the audio element."))};var so=i(7386),oo={};oo.styleTagTransform=y(),oo.setAttributes=m(),oo.insert=f().bind(null,"head"),oo.domAPI=d(),oo.insertStyleElement=v(),c()(so.A,oo),so.A&&so.A.locals&&so.A.locals;const lo=function(){var e=he(),t=e.username,n=e.podcastId,i=qe((0,r.useState)(null),2),a=i[0],s=i[1],o=qe((0,r.useState)([]),2),l=o[0],c=o[1];return(0,r.useEffect)(function(){fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/podcast/").concat(t,"/").concat(n)).then(function(e){return e.json()}).then(function(e){s(e),c(e.episodes)}).catch(function(e){return console.error("Error loading podcast:",e)})},[t,n]),a?r.createElement("div",{className:"podcast-profile"},r.createElement("div",{className:"podcast-header"},r.createElement("img",{src:a.coverImage,alt:a.title,className:"podcast-cover"}),r.createElement("div",null,r.createElement("h1",null,a.title),r.createElement("h3",null,"Hosted by ",a.host),r.createElement("p",null,a.description),r.createElement("button",null,"Follow"),r.createElement("button",null,"Donate"))),r.createElement("h2",null,"Episodes"),r.createElement("ul",{className:"episode-list"},l.map(function(e){return r.createElement("li",{key:e.id,className:"episode"},r.createElement("h3",null,e.title),r.createElement("audio",{controls:!0},r.createElement("source",{src:e.audioUrl,type:"audio/mp3"}),"Your browser does not support the audio tag."),r.createElement("div",{className:"episode-actions"},r.createElement("button",{onClick:function(){return window.open(e.audioUrl)}},"Download"),r.createElement("button",{onClick:function(){return navigator.clipboard.writeText(window.location.href)}},"Share")))}))):r.createElement("p",null,"Loading...")},co=function(){var e=he().categoryName,t=qe((0,r.useState)([]),2),n=t[0],i=t[1];return(0,r.useEffect)(function(){fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/podcast-category/").concat(e)).then(function(e){return e.json()}).then(function(e){return i(e)}).catch(function(e){return console.error("Error fetching category:",e)})},[e]),r.createElement("div",{className:"category-page"},r.createElement("h1",null,"🎧 ",e.replace(/-/g," ")," Podcasts"),0===n.length?r.createElement("p",null,"No podcasts found in this category."):r.createElement("div",{className:"podcast-grid"},n.map(function(e){return r.createElement("div",{key:e.id,className:"podcast-card"},r.createElement("img",{src:e.cover_art_url,alt:e.title}),r.createElement("h3",null,e.title),r.createElement("p",null,e.description))})))};var uo=i(7544),ho={};function fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fo(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}ho.styleTagTransform=y(),ho.setAttributes=m(),ho.insert=f().bind(null,"head"),ho.domAPI=d(),ho.insertStyleElement=v(),c()(uo.A,ho),uo.A&&uo.A.locals&&uo.A.locals,(0,r.memo)(function(e){var t=e.video,n=e.onLike,i=e.onView,a=e.onShare,s=e.formatDuration;return r.createElement("div",{className:"video-card"},r.createElement("div",{className:"video-wrapper"},r.createElement("video",{src:t.file_url,controls:!0,preload:"metadata",className:"video-player",onPlay:function(){i(t.id)},poster:t.thumbnail_url}),t.duration&&r.createElement("div",{className:"video-duration"},s(t.duration))),r.createElement("div",{className:"video-info"},r.createElement("h4",{className:"video-title",title:t.title},t.title||"Untitled"),r.createElement("div",{className:"video-meta"},r.createElement(Ne,{to:"/user/".concat(t.uploader_id),className:"uploader-link"},t.uploader_avatar&&r.createElement("img",{src:t.uploader_avatar,alt:t.uploader_name,className:"uploader-avatar",onError:function(e){e.target.style.display="none"}}),r.createElement("span",{className:"uploader-name"},t.uploader_name||"Unknown"))),r.createElement("div",{className:"video-stats"},void 0!==t.views&&r.createElement("span",{className:"views"},"👁️ ",t.views.toLocaleString()," views"),r.createElement("span",{className:"upload-date"},"📅 ",new Date(t.created_at).toLocaleDateString())),t.description&&r.createElement("p",{className:"video-description",title:t.description},t.description.length>100?"".concat(t.description.substring(0,100),"..."):t.description),t.category&&"Other"!==t.category&&r.createElement("div",{className:"video-category"},r.createElement("span",{className:"category-tag"},"🏷️ ",t.category)),r.createElement("div",{className:"video-actions"},r.createElement("button",{onClick:function(){n(t.id)},className:"like-btn",title:"Like this video"},"👍 ",(t.likes||0).toLocaleString()),void 0!==t.comments_count&&r.createElement("button",{className:"comment-btn",title:"View comments"},"💬 ",t.comments_count.toLocaleString()),r.createElement("button",{onClick:function(){a(t)},className:"share-btn",title:"Share this video"},"📤 Share"))))}).displayName="VideoCard";var mo=[{id:0,name:"All",video_count:0},{id:1,name:"Music",video_count:0},{id:2,name:"Podcasts",video_count:0},{id:3,name:"Live Concerts",video_count:0},{id:4,name:"Music Videos",video_count:0},{id:5,name:"DJ Sets",video_count:0},{id:6,name:"Karaoke",video_count:0},{id:7,name:"Meditation",video_count:0},{id:8,name:"Yoga",video_count:0},{id:9,name:"Fitness",video_count:0},{id:10,name:"Mental Health",video_count:0},{id:11,name:"Nutrition",video_count:0},{id:12,name:"Sleep & Relaxation",video_count:0},{id:13,name:"Education",video_count:0},{id:14,name:"Tutorials",video_count:0},{id:15,name:"Language Learning",video_count:0},{id:16,name:"Science",video_count:0},{id:17,name:"History",video_count:0},{id:18,name:"Philosophy",video_count:0},{id:19,name:"Tech",video_count:0},{id:20,name:"Programming",video_count:0},{id:21,name:"AI & Machine Learning",video_count:0},{id:22,name:"Web Development",video_count:0},{id:23,name:"Mobile Apps",video_count:0},{id:24,name:"Cybersecurity",video_count:0},{id:25,name:"Comedy",video_count:0},{id:26,name:"Movies & TV",video_count:0},{id:27,name:"Anime & Manga",video_count:0},{id:28,name:"Celebrity News",video_count:0},{id:29,name:"Reactions",video_count:0},{id:30,name:"Memes",video_count:0},{id:31,name:"Gaming",video_count:0},{id:32,name:"Game Reviews",video_count:0},{id:33,name:"Esports",video_count:0},{id:34,name:"Game Development",video_count:0},{id:35,name:"Streaming Highlights",video_count:0},{id:36,name:"Lifestyle",video_count:0},{id:37,name:"Fashion",video_count:0},{id:38,name:"Beauty",video_count:0},{id:39,name:"Travel",video_count:0},{id:40,name:"Food & Cooking",video_count:0},{id:41,name:"Home & Garden",video_count:0},{id:42,name:"Parenting",video_count:0},{id:43,name:"Relationships",video_count:0},{id:44,name:"Art",video_count:0},{id:45,name:"Photography",video_count:0},{id:46,name:"Design",video_count:0},{id:47,name:"Writing",video_count:0},{id:48,name:"Crafts & DIY",video_count:0},{id:49,name:"Architecture",video_count:0},{id:50,name:"Business",video_count:0},{id:51,name:"Entrepreneurship",video_count:0},{id:52,name:"Investing",video_count:0},{id:53,name:"Cryptocurrency",video_count:0},{id:54,name:"Marketing",video_count:0},{id:55,name:"Personal Finance",video_count:0},{id:56,name:"Sports",video_count:0},{id:57,name:"Basketball",video_count:0},{id:58,name:"Football",video_count:0},{id:59,name:"Soccer",video_count:0},{id:60,name:"Extreme Sports",video_count:0},{id:61,name:"Martial Arts",video_count:0},{id:62,name:"News",video_count:0},{id:63,name:"Politics",video_count:0},{id:64,name:"Current Events",video_count:0},{id:65,name:"Documentary",video_count:0},{id:66,name:"Spirituality",video_count:0},{id:67,name:"Personal Development",video_count:0},{id:68,name:"Motivation",video_count:0},{id:69,name:"Life Coaching",video_count:0},{id:70,name:"True Crime",video_count:0},{id:71,name:"ASMR",video_count:0},{id:72,name:"Animals",video_count:0},{id:73,name:"Nature",video_count:0},{id:74,name:"Space & Astronomy",video_count:0},{id:75,name:"Product Reviews",video_count:0},{id:76,name:"Vlogs",video_count:0},{id:77,name:"Other",video_count:0}];const go=function(){var e,t=qe((0,r.useState)([]),2),n=t[0],i=t[1],a=qe((0,r.useState)(""),2),s=a[0],o=a[1],l=qe((0,r.useState)("All"),2),c=l[0],u=l[1],d=qe((0,r.useState)("newest"),2),h=d[0],f=d[1],p=qe((0,r.useState)(!0),2),m=p[0],g=p[1],v=qe((0,r.useState)(mo),2),b=v[0],y=v[1],E=qe((0,r.useState)({}),2),x=E[0],S=E[1],w=qe((0,r.useState)(1),2),k=w[0],T=w[1],_=qe((0,r.useState)(null),2),A=_[0],R=_[1],L=qe((0,r.useState)(""),2),C=L[0],P=L[1],I=(0,r.useRef)(null),N=function(e){var t=qe((0,r.useState)(e),2),n=t[0],i=t[1];return(0,r.useEffect)(function(){var t=setTimeout(function(){i(e)},300);return function(){clearTimeout(t)}},[e,300]),n}(s),D=function(){var e="MISSING_ENV_VAR".REACT_APP_BACKEND_URL,t=(0,r.useCallback)(function(){var t=Qe(Ze().mark(function t(n){var r,i,a=arguments;return Ze().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},t.next=1,fetch("".concat(e).concat(n),po({headers:po({"Content-Type":"application/json"},r.headers)},r));case 1:if((i=t.sent).ok){t.next=2;break}throw new Error("HTTP error! status: ".concat(i.status));case 2:return t.abrupt("return",i.json());case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),[e]);return{apiCall:t}}(),O=D.apiCall,M=(0,r.useMemo)(function(){return s||"All"!==c||"newest"!==h},[s,c,h]),F=(0,r.useMemo)(function(){return x.total?"".concat(x.total.toLocaleString()," videos found"):"".concat(n.length.toLocaleString()," videos")},[x.total,n.length]),B=(0,r.useCallback)(Qe(Ze().mark(function e(){var t,n;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,O("/api/videos/categories");case 1:t=e.sent,y(t.categories||mo),e.next=3;break;case 2:e.prev=2,n=e.catch(0),console.error("Failed to fetch categories:",n),y(mo);case 3:case"end":return e.stop()}},e,null,[[0,2]])})),[O]),U=(0,r.useCallback)(Qe(Ze().mark(function e(){var t,n,r;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),R(null),e.prev=1,t=new URLSearchParams({search:N,category:c,sort_by:h,page:k.toString(),per_page:20..toString()}),e.next=2,O("/api/videos?".concat(t));case 2:(n=e.sent).videos?(i(n.videos),S(n.pagination||{})):Array.isArray(n)&&(i(n),S({page:1,total:n.length,has_next:!1,has_prev:!1,pages:1})),e.next=4;break;case 3:e.prev=3,r=e.catch(1),console.error("Failed to fetch videos:",r),R("Failed to load videos. Please try again later."),i([]);case 4:return e.prev=4,g(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])})),[O,N,c,h,k]),j=((0,r.useCallback)(function(){var e=Qe(Ze().mark(function e(t){var n,r,a;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=localStorage.getItem("token")){e.next=1;break}return alert("Please log in to like videos"),e.abrupt("return");case 1:return e.next=2,O("/api/videos/".concat(t,"/like"),{method:"POST",headers:{Authorization:"Bearer ".concat(n)}});case 2:r=e.sent,i(function(e){return e.map(function(e){return e.id===t?po(po({},e),{},{likes:r.likes}):e})}),e.next=4;break;case 3:e.prev=3,a=e.catch(0),console.error("Failed to like video:",a),a.message.includes("401")?alert("Please log in to like videos"):alert("Failed to like video. Please try again.");case 4:case"end":return e.stop()}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}(),[O]),(0,r.useCallback)(function(){var e=Qe(Ze().mark(function e(t){var n;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,O("/api/videos/".concat(t,"/view"),{method:"POST"});case 1:e.next=3;break;case 2:e.prev=2,n=e.catch(0),console.error("Failed to record view:",n);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),[O]),(0,r.useCallback)(function(e){T(e),window.scrollTo({top:0,behavior:"smooth"})},[])),$=(0,r.useCallback)(function(){o(""),u("All"),f("newest"),T(1)},[]),z=((0,r.useCallback)(function(){var e=Qe(Ze().mark(function e(t){var n,r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={title:t.title,url:"".concat(window.location.origin).concat(window.location.pathname,"?video=").concat(t.id)},e.prev=1,!navigator.share||!navigator.canShare(n)){e.next=3;break}return e.next=2,navigator.share(n);case 2:e.next=5;break;case 3:return e.next=4,navigator.clipboard.writeText(n.url);case 4:alert("Video link copied to clipboard!");case 5:e.next=10;break;case 6:return e.prev=6,r=e.catch(1),console.error("Failed to share:",r),e.prev=7,e.next=8,navigator.clipboard.writeText(n.url);case 8:alert("Video link copied to clipboard!"),e.next=10;break;case 9:e.prev=9,i=e.catch(7),console.error("Failed to copy to clipboard:",i),alert("Unable to share or copy link");case 10:case"end":return e.stop()}},e,null,[[1,6],[7,9]])}));return function(t){return e.apply(this,arguments)}}(),[]),(0,r.useCallback)(function(e){if(!e)return"0:00";var t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))},[]));return(0,r.useEffect)(function(){B()},[B]),(0,r.useEffect)(function(){U()},[U]),(0,r.useEffect)(function(){1!==k&&T(1)},[N,c,h]),m&&0===n.length?r.createElement("div",{className:"categories-wrapper"},r.createElement("h1",{className:"categories-heading"},"📹 Browse All Free Videos"),r.createElement("div",{className:"loading-spinner"},r.createElement("div",{className:"spinner"}),r.createElement("p",null,"Loading videos..."))):r.createElement("div",{className:"categories-wrapper"},r.createElement("div",{className:"browse-videos-header"},r.createElement("h1",{className:"categories-heading"},"📹 Browse All Free Videos"),r.createElement("p",{className:"video-count"},F)),r.createElement("div",{className:"search-section"},r.createElement("div",{className:"search-bar"},r.createElement("input",{type:"text",placeholder:"🔍 Search videos, creators, or topics...",value:s,onChange:function(e){return o(e.target.value)},className:"search-input","aria-label":"Search videos"}),s&&r.createElement("button",{onClick:function(){return o("")},className:"clear-search-btn",title:"Clear search","aria-label":"Clear search"},"✖️"))),r.createElement("div",{className:"controls-section"},r.createElement("div",{className:"nav-tabs"},r.createElement("div",{className:"nav-tab ".concat("history"===C?"active":""),onClick:function(){return P("history")}},r.createElement("span",{className:"nav-icon"},"🕐"),r.createElement("span",{className:"nav-text"},"History")),r.createElement("div",{className:"nav-tab ".concat("playlists"===C?"active":""),onClick:function(){return P("playlists")}},r.createElement("span",{className:"nav-icon"},"📋"),r.createElement("span",{className:"nav-text"},"Playlists")),r.createElement("div",{className:"nav-tab ".concat("your-videos"===C?"active":""),onClick:function(){return P("your-videos")}},r.createElement("span",{className:"nav-icon"},"📹"),r.createElement("span",{className:"nav-text"},"Your videos")),r.createElement("div",{className:"nav-tab ".concat("watch-later"===C?"active":""),onClick:function(){return P("watch-later")}},r.createElement("span",{className:"nav-icon"},"🕒"),r.createElement("span",{className:"nav-text"},"Watch later")),r.createElement("div",{className:"nav-tab ".concat("liked"===C?"active":""),onClick:function(){return P("liked")}},r.createElement("span",{className:"nav-icon"},"👍"),r.createElement("span",{className:"nav-text"},"Liked videos")),r.createElement("div",{className:"nav-tab ".concat("downloads"===C?"active":""),onClick:function(){return P("downloads")}},r.createElement("span",{className:"nav-icon"},"⬇️"),r.createElement("span",{className:"nav-text"},"Downloads"))),r.createElement("div",{className:"sort-and-filters"},r.createElement("div",{className:"sort-section"},r.createElement("label",{htmlFor:"sort-select"},"Sort by: "),r.createElement("select",{id:"sort-select",value:h,onChange:function(e){return f(e.target.value)},className:"sort-select"},r.createElement("option",{value:"newest"},"Newest First"),r.createElement("option",{value:"oldest"},"Oldest First"),r.createElement("option",{value:"popular"},"Most Popular"),r.createElement("option",{value:"most_liked"},"Most Liked"))),M&&r.createElement("button",{onClick:$,className:"clear-filters-btn"},"🔄 Clear All Filters"))),r.createElement("div",{className:"category-nav"},r.createElement("button",{onClick:function(){I.current&&(I.current.scrollLeft-=200)},className:"scroll-button"},"‹"),r.createElement("div",{className:"categories-scroll",ref:I},b.map(function(e){return r.createElement("div",{key:e.id,onClick:function(){return u(e.name)},className:"category-pill ".concat(c===e.name?"active":"")},e.name)})),r.createElement("button",{onClick:function(){I.current&&(I.current.scrollLeft+=200)},className:"scroll-button"},"›")),A&&r.createElement("div",{className:"error-message"},r.createElement("h3",null,"⚠️ ",A),r.createElement("button",{onClick:U,className:"retry-btn"},"🔄 Try Again")),!m&&!A&&0===n.length&&r.createElement("div",{className:"no-videos"},r.createElement("h3",null,"🎬 No videos found"),r.createElement("p",null,M?"Try adjusting your search or filters":"No videos have been uploaded yet. Be the first!"),M&&r.createElement("button",{onClick:$,className:"btn-secondary"},"🔄 Clear All Filters"),r.createElement(Ne,{to:"/profile",className:"btn-primary"},"📤 Upload Your First Video")),n.length>0&&r.createElement("div",{className:"podcast-section"},r.createElement("div",{className:"podcast-scroll-row"},n.map(function(e){return r.createElement("div",{key:e.id,className:"video-card"},r.createElement("img",{src:e.thumbnail_url||"/placeholder-thumbnail.jpg",alt:e.title,className:"video-thumbnail"}),r.createElement("div",{className:"video-content"},r.createElement("h3",{className:"video-title"},e.title),r.createElement("span",{className:"video-creator"},e.uploader_name||"Unknown"),r.createElement("div",{className:"video-stats"},r.createElement("span",null,e.views||0," views"),r.createElement("span",{className:"video-duration"},z(e.duration)))))}))),x.pages>1&&r.createElement("div",{className:"pagination"},r.createElement("button",{onClick:function(){return j(k-1)},disabled:!x.has_prev,className:"pagination-btn"},"← Previous"),r.createElement("div",{className:"pagination-info"},r.createElement("span",null,"Page ",x.page," of ",x.pages),r.createElement("span",{className:"total-items"},"(",null===(e=x.total)||void 0===e?void 0:e.toLocaleString()," total videos)")),r.createElement("button",{onClick:function(){return j(k+1)},disabled:!x.has_next,className:"pagination-btn"},"Next →")),m&&n.length>0&&r.createElement("div",{className:"loading-overlay"},r.createElement("div",{className:"spinner"})))};function vo(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Eo=function(e){var t=e.currentUser,n=qe((0,r.useState)(null),2),i=n[0],a=n[1],s=qe((0,r.useState)([]),2),o=s[0],l=s[1],c=qe((0,r.useState)(null),2),u=c[0],d=c[1],h=qe((0,r.useState)(!1),2),f=h[0],p=h[1],m=qe((0,r.useState)(0),2),g=m[0],v=m[1];(0,r.useEffect)(function(){fetch("/api/my_videos",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(e){return l(e.videos||[])}).catch(function(e){return console.error("Error loading videos:",e)})},[]);var b=function(){var e=Qe(Ze().mark(function e(){var t,n,r,s;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=1;break}return e.abrupt("return",alert("No file selected."));case 1:return(t=new FormData).append("video",i),t.append("title","My Video"),t.append("description","My cool video"),p(!0),v(0),e.prev=2,e.next=3,fetch("/api/upload_video",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:t});case 3:return n=e.sent,e.next=4,n.json();case 4:r=e.sent,n.ok?(alert("✅ Uploaded!"),l(function(e){return[r.video].concat(vo(e))}),a(null),d(null)):alert("⚠️ Upload failed: ".concat(r.error)),e.next=6;break;case 5:e.prev=5,s=e.catch(2),console.error(s),alert("Something went wrong.");case 6:return e.prev=6,p(!1),v(0),e.finish(6);case 7:case"end":return e.stop()}},e,null,[[2,5,6,7]])}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Qe(Ze().mark(function e(t){var n,r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete this video?")){e.next=1;break}return e.abrupt("return");case 1:return e.prev=1,e.next=2,fetch("/api/delete_video/".concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:if(!(n=e.sent).ok){e.next=3;break}l(function(e){return e.filter(function(e){return e.id!==t})}),e.next=5;break;case 3:return e.next=4,n.json();case 4:r=e.sent,alert("Failed to delete: ".concat(r.error));case 5:e.next=7;break;case 6:e.prev=6,i=e.catch(1),console.error(i);case 7:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Qe(Ze().mark(function e(t,n){var r,i,a;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,fetch("/api/update_video_title/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({title:n})});case 1:return r=e.sent,e.next=2,r.json();case 2:i=e.sent,r.ok||alert("⚠️ Failed to update: ".concat(i.error)),e.next=4;break;case 3:e.prev=3,a=e.catch(0),console.error(a);case 4:case"end":return e.stop()}},e,null,[[0,3]])}));return function(t,n){return e.apply(this,arguments)}}();return r.createElement("div",{className:"video-upload-wrapper"},r.createElement("h3",null,"📤 Upload a Video"),r.createElement("input",{type:"file",accept:"video/*",onChange:function(e){var n=e.target.files[0],r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=function(){var e=r.duration,i=(null==t?void 0:t.role)||"Free";"Free"===i&&e>120||"Free"!==i&&e>1200?(alert("⛔ Video too long for your subscription plan."),a(null),d(null)):(a(n),d(URL.createObjectURL(n)))},r.src=URL.createObjectURL(n)}}),u&&r.createElement("div",{className:"video-preview"},r.createElement("h4",null,"🔍 Preview:"),r.createElement("video",{src:u,controls:!0,width:"300"})),i&&r.createElement("button",{className:"btn-primary",onClick:b,disabled:f},f?"Uploading... ".concat(g,"%"):"🚀 Upload Video"),r.createElement("hr",null),r.createElement("h3",null,"🎞️ Uploaded Videos"),o.length>0?o.map(function(e){return r.createElement("div",{key:e.id,className:"uploaded-video-card"},r.createElement("video",{src:e.file_url,controls:!0,width:"300"}),r.createElement("input",{type:"text",value:e.title,onChange:function(t){var n=t.target.value;l(function(t){return t.map(function(t){return t.id===e.id?yo(yo({},t),{},{title:n}):t})})},onBlur:function(){return E(e.id,e.title)}}),r.createElement("p",null,e.description),r.createElement("button",{className:"btn-danger",onClick:function(){return y(e.id)}},"🗑️ Delete"))}):r.createElement("p",null,"No videos uploaded yet."))};var xo=function(e,t){return console.log("Socket emit:",e,t)};const So=function(e){var t=e.roomId,n=e.userId,i=e.userName,a=(0,r.useRef)(null),s=(0,r.useRef)(null),o=qe((0,r.useState)(null),2),l=o[0],c=o[1],u=qe((0,r.useState)(new MediaStream),2),d=u[0],h=(u[1],qe((0,r.useState)(null),2)),f=h[0],p=h[1],m=qe((0,r.useState)(!1),2),g=m[0],v=m[1],b=qe((0,r.useState)(!1),2),y=b[0],E=b[1],x={iceServers:[{urls:"stun:stun.l.google.com:19302"}]};(0,r.useEffect)(function(){return console.log("WebRTCChat mounted",{roomId:t,userId:n,userName:i}),xo("join_room",t),function(){console.log("WebRTCChat unmounting"),xo("leave_room",t),console.log("Socket disconnected")}},[t]);var S=function(){var e=new RTCPeerConnection(x);return e.ontrack=function(e){console.log("Remote track received"),e.streams[0].getTracks().forEach(function(e){d.addTrack(e)}),s.current&&(s.current.srcObject=e.streams[0])},e.onicecandidate=function(e){e.candidate&&(console.log("ICE candidate generated"),xo("ice-candidate",{candidate:e.candidate,roomId:t}))},e.onconnectionstatechange=function(){console.log("Connection state:",e.connectionState)},e},w=function(){var e=Qe(Ze().mark(function e(){var n,r,i,s;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting video chat..."),E(!0),e.next=1,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 1:return n=e.sent,a.current&&(a.current.srcObject=n),c(n),v(!0),E(!1),r=S(),n.getTracks().forEach(function(e){return r.addTrack(e,n)}),p(r),e.next=2,r.createOffer();case 2:return i=e.sent,e.next=3,r.setLocalDescription(i);case 3:xo("offer",{offer:i,roomId:t}),console.log("Video chat started successfully"),e.next=5;break;case 4:e.prev=4,s=e.catch(0),console.error("Media access error:",s),E(!1),alert("Could not access camera/microphone: "+s.message);case 5:case"end":return e.stop()}},e,null,[[0,4]])}));return function(){return e.apply(this,arguments)}}();return r.createElement("div",{className:"webrtc-chat-container"},r.createElement("div",{className:"webrtc-header"},r.createElement("h3",{className:"webrtc-title"},"🎥 Video Chat"),r.createElement("span",{className:"webrtc-room-info"},"Room: ",t||"demo-room")),r.createElement("div",{className:"webrtc-videos"},r.createElement("div",{className:"webrtc-video-container"},r.createElement("div",{className:"webrtc-video-label"},"You (",i||"User",")"),r.createElement("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"webrtc-video"})),r.createElement("div",{className:"webrtc-video-container"},r.createElement("div",{className:"webrtc-video-label"},"Remote User"),r.createElement("video",{ref:s,autoPlay:!0,playsInline:!0,className:"webrtc-video remote"}))),r.createElement("div",{className:"webrtc-controls"},r.createElement("button",{onClick:w,disabled:g||y,className:"webrtc-btn ".concat(y?"connecting":"start")},y?"⏳":"🎥"," ",y?"Connecting...":"Start"),r.createElement("button",{onClick:function(){console.log("Stopping video chat..."),null==l||l.getTracks().forEach(function(e){e.stop(),console.log("Stopped track:",e.kind)}),a.current&&(a.current.srcObject=null),s.current&&(s.current.srcObject=null),c(null),v(!1),f&&(f.close(),p(null)),console.log("Video chat stopped")},disabled:!g,className:"webrtc-btn stop"},"⛔ Stop")),r.createElement("div",{className:"webrtc-status ".concat(g?"active":"inactive")},r.createElement("strong",null,"Status:")," ",g?"🟢 Video Active":"🔴 Video Inactive",l&&r.createElement("span",{className:"webrtc-status-tracks"},"| Tracks: ",l.getTracks().length)),r.createElement("details",{className:"webrtc-debug"},r.createElement("summary",null,"🔧 Debug Info"),r.createElement("div",{className:"webrtc-debug-content"},r.createElement("div",{className:"webrtc-debug-item"},"Room ID: ",t||"N/A"),r.createElement("div",{className:"webrtc-debug-item"},"User ID: ",n||"N/A"),r.createElement("div",{className:"webrtc-debug-item"},"User Name: ",i||"N/A"),r.createElement("div",{className:"webrtc-debug-item"},"Local Stream: ",l?"✅ Active":"❌ None"),r.createElement("div",{className:"webrtc-debug-item"},"Peer Connection: ",f?"✅ Connected":"❌ None"),r.createElement("div",{className:"webrtc-debug-item"},"Video Started: ",g?"✅ Yes":"❌ No"))))};function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const To=function(){var e=qe((0,r.useState)([]),2),t=e[0],n=e[1],i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=qe((0,r.useState)(null),2),l=o[0],c=o[1],u=qe((0,r.useState)({}),2),d=u[0],h=u[1],f=qe((0,r.useState)({}),2),p=f[0],m=f[1],g=qe((0,r.useState)([]),2),v=g[0],b=g[1],y=qe((0,r.useState)([]),2),E=y[0],x=y[1],S=qe((0,r.useState)({}),2),w=S[0],k=S[1],T=qe((0,r.useState)(!0),2),_=T[0],A=T[1],R=qe((0,r.useState)(null),2),L=R[0],C=R[1];(0,r.useEffect)(function(){var e=function(){var e=Qe(Ze().mark(function e(){var t,r,i,a,s,o,l,c,u,d,h,f,p,m,g;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,A(!0),C(null),t=localStorage.getItem("token"),r="https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev",console.log("Backend URL:",r),r){e.next=1;break}throw new Error("BACKEND_URL is not defined in environment variables");case 1:return e.prev=1,e.next=2,fetch("".concat(r,"/api/home-feed"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});case 2:if(!(i=e.sent).ok){e.next=4;break}return e.next=3,i.json();case 3:a=e.sent,n(a),e.next=5;break;case 4:console.error("Failed to fetch posts:",i.status,i.statusText);case 5:e.next=7;break;case 6:e.prev=6,h=e.catch(1),console.error("Error fetching posts:",h);case 7:return e.prev=7,e.next=8,fetch("".concat(r,"/api/users/suggested"),{headers:{"Content-Type":"application/json"}});case 8:if(!(s=e.sent).ok){e.next=10;break}return e.next=9,s.json();case 9:o=e.sent,b(o),e.next=11;break;case 10:console.error("Failed to fetch suggested users:",s.status,s.statusText);case 11:e.next=13;break;case 12:e.prev=12,f=e.catch(7),console.error("Error fetching suggested users:",f);case 13:return e.prev=13,e.next=14,fetch("".concat(r,"/api/trending"),{headers:{"Content-Type":"application/json"}});case 14:if(!(l=e.sent).ok){e.next=16;break}return e.next=15,l.json();case 15:c=e.sent,x(c),e.next=17;break;case 16:console.error("Failed to fetch trending content:",l.status,l.statusText);case 17:e.next=19;break;case 18:e.prev=18,p=e.catch(13),console.error("Error fetching trending content:",p);case 19:return e.prev=19,e.next=20,fetch("".concat(r,"/api/profile"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});case 20:if(!(u=e.sent).ok){e.next=22;break}return e.next=21,u.json();case 21:d=e.sent,k(d),e.next=23;break;case 22:console.error("Failed to fetch user profile:",u.status,u.statusText);case 23:e.next=25;break;case 24:e.prev=24,m=e.catch(19),console.error("Error fetching user profile:",m);case 25:e.next=27;break;case 26:e.prev=26,g=e.catch(0),console.error("General fetch error:",g),C(g.message);case 27:return e.prev=27,A(!1),e.finish(27);case 28:case"end":return e.stop()}},e,null,[[0,26,27,28],[1,6],[7,12],[13,18],[19,24]])}));return function(){return e.apply(this,arguments)}}();e()},[]);var P=function(){var e=Qe(Ze().mark(function e(){var r,i,o,u,d,h,f,p;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.trim()){e.next=1;break}return alert("Please enter some content for your post"),e.abrupt("return");case 1:if(e.prev=1,r=localStorage.getItem("token"),!(i="MISSING_ENV_VAR".REACT_APP_BACKEND_URL)||!r){e.next=7;break}return e.prev=2,(o=new FormData).append("content",a),l&&o.append("image",l),e.next=3,fetch("".concat(i,"/api/posts"),{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:o});case 3:if(!(u=e.sent).ok){e.next=5;break}return e.next=4,u.json();case 4:return d=e.sent,n([d].concat(vo(t))),s(""),c(null),e.abrupt("return");case 5:e.next=7;break;case 6:e.prev=6,f=e.catch(2),console.error("Error creating post on server:",f);case 7:h={id:Date.now(),author:w.username||"Anonymous",content:a,image:l?URL.createObjectURL(l):null,comments:[],created_at:(new Date).toISOString()},n([h].concat(vo(t))),s(""),c(null),e.next=9;break;case 8:e.prev=8,p=e.catch(1),console.error("Error creating post:",p),alert("Failed to create post. Please try again.");case 9:case"end":return e.stop()}},e,null,[[1,8],[2,6]])}));return function(){return e.apply(this,arguments)}}(),I=function(e){var t,n=null===(t=d[e])||void 0===t?void 0:t.trim();n&&(m(ko(ko({},p),{},We({},e,[].concat(vo(p[e]||[]),[n])))),h(ko(ko({},d),{},We({},e,""))))};return _?r.createElement("div",{className:"profile-container"},r.createElement("div",{className:"loading-spinner"},r.createElement("p",null,"Loading your feed..."))):r.createElement("div",{className:"profile-container"},L&&r.createElement("div",{className:"error-banner",style:{background:"#ff6b6b",color:"white",padding:"10px",borderRadius:"5px",margin:"10px 0"}},r.createElement("p",null,"⚠️ Connection Error: ",L),r.createElement("p",null,"Some features may not work properly. Check your backend connection.")),r.createElement("div",{className:"profile-layout"},r.createElement("div",{className:"left-column"},r.createElement("h3",null,"👥 Suggested to Follow"),v.length>0?v.map(function(e,t){return r.createElement("div",{key:t,className:"favorite-item"},r.createElement("img",{src:e.profile_picture||"/default-avatar.png",alt:"avatar",className:"favorite-avatar",onError:function(e){e.target.src="/default-avatar.png"}}),r.createElement("div",null,r.createElement("strong",null,"@",e.username),r.createElement("p",null,e.bio||"New creator on the rise!")))}):r.createElement("p",null,"No suggested users at the moment."),r.createElement("h3",null,"📈 Trending"),E.length>0?E.map(function(e,t){return r.createElement("div",{key:t,className:"favorite-item"},r.createElement("img",{src:e.image_url||"/default-trending.png",alt:"trend",className:"favorite-avatar",onError:function(e){e.target.src="/default-trending.png"}}),r.createElement("div",null,r.createElement("strong",null,e.title),r.createElement("p",null,e.description)))}):r.createElement("p",null,"No trending content available.")),r.createElement("div",{className:"middle-column"},r.createElement("h3",null,"📝 What's on your mind?"),r.createElement("div",{className:"post-creation"},r.createElement("textarea",{value:a,onChange:function(e){return s(e.target.value)},placeholder:"Share something with your followers...",maxLength:500,rows:4}),r.createElement("div",{className:"post-controls"},r.createElement("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];if(t){if(t.size>5242880)return void alert("Image size should be less than 5MB");if(!t.type.startsWith("image/"))return void alert("Please select a valid image file");c(t)}},id:"image-upload",style:{display:"none"}}),r.createElement("label",{htmlFor:"image-upload",className:"file-upload-label"},"📷 Add Image"),l&&r.createElement("div",{className:"image-preview"},r.createElement("img",{src:URL.createObjectURL(l),alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px",objectFit:"cover"}}),r.createElement("button",{onClick:function(){return c(null)},className:"remove-image"},"❌")),r.createElement("button",{onClick:P,disabled:!a.trim(),className:"post-button"},"📤 Post"))),r.createElement("div",{className:"posts-feed"},t.length>0?t.map(function(e){var t;return r.createElement("div",{key:e.id,className:"post-card"},r.createElement("div",{className:"post-header"},r.createElement("strong",null,"@",e.author),e.created_at&&r.createElement("span",{className:"post-time"},new Date(e.created_at).toLocaleDateString())),r.createElement("p",{className:"post-content"},e.content),e.image&&r.createElement("img",{src:e.image,alt:"Post",className:"post-image",onError:function(e){e.target.style.display="none"}}),r.createElement("div",{className:"post-interactions"},r.createElement("h5",null,"💬 Comments"),r.createElement("ul",{className:"comments-list"},(p[e.id]||[]).map(function(e,t){return r.createElement("li",{key:t,className:"comment-item"},e)})),r.createElement("div",{className:"comment-input"},r.createElement("input",{type:"text",placeholder:"Write a comment...",value:d[e.id]||"",onChange:function(t){return h(ko(ko({},d),{},We({},e.id,t.target.value)))},onKeyPress:function(t){"Enter"===t.key&&I(e.id)}}),r.createElement("button",{onClick:function(){return I(e.id)},disabled:!(null!==(t=d[e.id])&&void 0!==t&&t.trim())},"💬 Reply"))))}):r.createElement("div",{className:"no-posts"},r.createElement("p",null,"No posts yet. Be the first to share something!")))),r.createElement("div",{className:"right-column"},r.createElement("div",{className:"quick-actions"},r.createElement("h3",null,"🎛️ Quick Actions"),r.createElement(Ne,{to:"/podcast/create"},r.createElement("button",{className:"btn-podcast"},"🎙️ Create Podcast")),r.createElement(Ne,{to:"/create-radio"},r.createElement("button",{className:"btn-radio"},"📡 Create Radio Station")),r.createElement(Ne,{to:"/indie-artist-upload"},r.createElement("button",{className:"btn-indie-upload"},"🎤 Indie Artist Upload")),(null==w?void 0:w.id)&&r.createElement(So,{roomId:"user-".concat(w.id),userId:w.id,userName:w.display_name||w.username||"Anonymous"})),r.createElement("div",{className:"upload-section"},r.createElement("h3",null,"📹 Upload Video"),w?r.createElement(Eo,{currentUser:w,onUpload:function(){return alert("Video uploaded!")}}):r.createElement("p",null,"Please log in to upload videos.")))))};var _o=i(2686),Ao={};Ao.styleTagTransform=y(),Ao.setAttributes=m(),Ao.insert=f().bind(null,"head"),Ao.domAPI=d(),Ao.insertStyleElement=v(),c()(_o.A,Ao),_o.A&&_o.A.locals&&_o.A.locals;const Ro=i.p+"LofiDreams.png",Lo=i.p+"JazzLounge.png",Co=i.p+"TalkNation.png",Po=i.p+"ElectricVibes.png",Io=i.p+"ReggaeRootz.png",No=i.p+"MorningClassical.png",Do=i.p+"PopPulse.png",Oo=i.p+"RockRumble.png",Mo=i.p+"UrbanSoul.png",Fo=i.p+"ChillHopCafe.png",Bo=i.p+"CosmicJazz.png",Uo=i.p+"LofiTemple.png",jo=i.p+"TheSynthLords.png",$o=i.p+"VelvetEcho.png",zo=i.p+"DJNova.png",Vo=i.p+"TheGrooveMechanics.png",Go=i.p+"IndigoRain.png",Ho=i.p+"ZaraMoonlight.png",Wo=function(){var e,t,n,i,a=he(),s=a.id,o=a.type,l=de(),c=qe((0,r.useState)(null),2),u=c[0],d=c[1],h=qe((0,r.useState)(!0),2),f=h[0],p=h[1],m=qe((0,r.useState)(null),2),g=m[0],v=m[1],b=qe((0,r.useState)(!1),2),y=b[0],E=b[1],x=qe((0,r.useState)(null),2),S=x[0],w=x[1],k=qe((0,r.useState)(null),2),T=k[0],_=k[1],A=qe((0,r.useState)(!1),2),R=A[0],L=A[1],C=qe((0,r.useState)(!1),2),P=(C[0],C[1]),I=qe((0,r.useState)("disconnected"),2),N=I[0],D=I[1],O=(0,r.useRef)(null),M=(0,r.useRef)(null),F={static1:{id:"static1",name:"LoFi Dreams",genre:"Lo-Fi",description:"Relaxing lo-fi beats to help you focus, study, or unwind. Perfect background music for any time of day.",image:Ro,listeners:"12.5K",rating:4.8},static2:{id:"static2",name:"Jazz Lounge",genre:"Jazz",description:"Smooth & classy jazz from the golden era to modern interpretations. Experience the sophisticated sounds of jazz legends.",image:Lo,listeners:"8.9K",rating:4.9},static3:{id:"static3",name:"Talk Nation",genre:"Talk Radio",description:"News, discussions, and thought-provoking conversations on current events, politics, and society.",image:Co,listeners:"15.2K",rating:4.6},static4:{id:"static4",name:"Electric Vibes",genre:"Electronic",description:"High-energy electronic music perfect for workouts, parties, or when you need an energy boost.",image:Po,listeners:"18.7K",rating:4.7},static5:{id:"static5",name:"Reggae Rootz",genre:"Reggae",description:"Authentic reggae rhythms and roots music that transport you to the islands. Feel the positive vibrations.",image:Io,listeners:"6.3K",rating:4.8},static6:{id:"static6",name:"Morning Classical",genre:"Classical",description:"Uplifting orchestral works perfect for starting your day. Beautiful classical compositions from renowned composers.",image:No,listeners:"4.1K",rating:4.9},static7:{id:"static7",name:"Pop Pulse",genre:"Pop",description:"The hottest pop hits and chart-toppers. Stay up to date with the latest mainstream music trends.",image:Do,listeners:"25.8K",rating:4.5},static8:{id:"static8",name:"Rock Rumble",genre:"Rock",description:"Hard-hitting rock classics and modern rock anthems. Turn up the volume and feel the power of rock.",image:Oo,listeners:"14.6K",rating:4.8},static9:{id:"static9",name:"Urban Soul",genre:"Soul",description:"Silky vocals and slow grooves that touch the soul. R&B and soul music at its finest.",image:Mo,listeners:"9.7K",rating:4.7},static10:{id:"static10",name:"Chill Hop Cafe",genre:"Hip Hop",description:"Instrumental hip hop beats perfect for studying, working, or relaxing. Laid-back vibes only.",image:Fo,listeners:"11.4K",rating:4.8},static11:{id:"static11",name:"Cosmic Jazz",genre:"Jazz",description:"Out-of-this-world jazz improvisations and experimental sounds. Journey through space with cosmic jazz.",image:Bo,listeners:"5.8K",rating:4.9},static12:{id:"static12",name:"LoFi Temple",genre:"Lo-Fi",description:"Zen and mellow beats for meditation and mindfulness. Find your inner peace with these calming sounds.",image:Uo,listeners:"16.3K",rating:4.9},static13:{id:"static13",name:"The Synth Lords",genre:"Electronic",description:"Retro synthwave duos bringing back the 80s with modern production. Neon-soaked electronic soundscapes.",image:jo,listeners:"7.2K",rating:4.6},static14:{id:"static14",name:"Velvet Echo",genre:"Soul",description:"Smooth vocal powerhouse delivering emotional performances. Contemporary soul with classic influences.",image:$o,listeners:"8.9K",rating:4.8},static15:{id:"static15",name:"DJ Nova",genre:"House",description:"Galactic EDM grooves and house music that will make you move. Dance floor anthems from across the universe.",image:zo,listeners:"13.1K",rating:4.7},static16:{id:"static16",name:"The Groove Mechanics",genre:"Funk",description:"Bass-heavy funk that gets your body moving. Infectious grooves and rhythms that you can't resist.",image:Vo,listeners:"6.7K",rating:4.8},static17:{id:"static17",name:"Indigo Rain",genre:"Indie",description:"Dreamy alternative sounds and indie rock gems. Discover new artists and underground classics.",image:Go,listeners:"9.4K",rating:4.7},static18:{id:"static18",name:"Zara Moonlight",genre:"Pop",description:"Chart-topping solo artist with powerful vocals and catchy melodies. Pop perfection at its finest.",image:Ho,listeners:"19.8K",rating:4.6}},B=(0,r.useCallback)(function(){return"MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev"},[]),U=(0,r.useCallback)(function(){var e;if(!u)return null;if(u.stream_url)return u.stream_url;if(u.is_loop_enabled&&u.loop_audio_url){var t=B(),n=u.loop_audio_url.startsWith("/")?u.loop_audio_url:"/".concat(u.loop_audio_url);return"".concat(t,"/static").concat(n)}if(null!==(e=u.now_playing_metadata)&&void 0!==e&&e.file_url){var r=B(),i=u.now_playing_metadata.file_url.startsWith("/")?u.now_playing_metadata.file_url:"/".concat(u.now_playing_metadata.file_url);return"".concat(r,"/static").concat(i)}return null},[u,B]),j=(0,r.useCallback)(Qe(Ze().mark(function e(){var t,n,r,i,a;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(!0),v(null),"static"!==o){e.next=1;break}(t=F[s])?d(t):v("Station not found"),p(!1),e.next=7;break;case 1:return n=B(),e.next=2,fetch("".concat(n,"/api/radio-stations/").concat(s));case 2:if((r=e.sent).ok){e.next=3;break}throw new Error("Station not found (".concat(r.status,")"));case 3:return e.next=4,r.json();case 4:if(i=e.sent,d(i),console.log("📻 Station data:",i),!i.is_live){e.next=6;break}return e.next=5,$();case 5:z();case 6:p(!1);case 7:e.next=9;break;case 8:e.prev=8,a=e.catch(0),console.error("❌ Error loading station details:",a),v(a.message),p(!1);case 9:case"end":return e.stop()}},e,null,[[0,8]])})),[s,o,B]),$=(0,r.useCallback)(Qe(Ze().mark(function e(){var t,n,r,i,a;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("static"!==o){e.next=1;break}return e.abrupt("return");case 1:return e.prev=1,t=B(),e.next=2,fetch("".concat(t,"/api/radio/").concat(s,"/now-playing"));case 2:if(n=e.sent,(r=n.headers.get("content-type"))&&r.includes("application/json")){e.next=3;break}return console.warn("⚠️ Now playing endpoint returned non-JSON response"),e.abrupt("return");case 3:if(!n.ok){e.next=5;break}return e.next=4,n.json();case 4:i=e.sent,w(i.now_playing),console.log("📻 Now playing updated:",i.now_playing),e.next=6;break;case 5:console.warn("⚠️ Now playing endpoint returned ".concat(n.status));case 6:e.next=8;break;case 7:e.prev=7,a=e.catch(1),console.warn("⚠️ Could not fetch now playing info:",a.message);case 8:case"end":return e.stop()}},e,null,[[1,7]])})),[s,o,B]),z=(0,r.useCallback)(function(){M.current&&clearInterval(M.current),M.current=setInterval(function(){$()},3e4)},[$]),V=(0,r.useCallback)(function(){console.log("📡 Starting to load stream..."),L(!0),D("connecting")},[]),G=(0,r.useCallback)(function(){console.log("✅ Stream ready to play"),L(!1),P(!0),D("connected")},[]),H=(0,r.useCallback)(function(){console.log("🔊 Audio is playing"),E(!0),L(!1),_(null),D("connected")},[]),W=(0,r.useCallback)(function(){console.log("⏸️ Audio paused"),E(!1),L(!1)},[]),K=(0,r.useCallback)(function(e){var t=O.current;console.error("❌ Audio error:",e),console.error("Error details:",null==t?void 0:t.error);var n="Playback error occurred";if(null!=t&&t.error)switch(t.error.code){case 1:n="Playback was aborted";break;case 2:n="Network error occurred";break;case 3:n="Audio decoding error";break;case 4:n="Audio format not supported";break;default:n=t.error.message||"Unknown playback error"}_(n),E(!1),L(!1),D("error")},[]),Y=(0,r.useCallback)(function(){console.log("⚠️ Audio stalled"),L(!0)},[]),q=(0,r.useCallback)(function(){console.log("⏳ Audio buffering..."),L(!0)},[]),X=(0,r.useCallback)(function(){console.log("🔄 Audio ended"),null!=u&&u.is_loop_enabled?(console.log("🔄 Restarting loop..."),setTimeout(function(){O.current&&y&&(O.current.currentTime=0,O.current.play().catch(console.error))},100)):E(!1)},[u,y]),Q=(0,r.useCallback)(function(){var e=U();if(!e)return null;console.log("🎵 Setting up audio with URL:",e);var t=new Audio;return t.crossOrigin="anonymous",t.preload="metadata",t.addEventListener("loadstart",V),t.addEventListener("canplay",G),t.addEventListener("playing",H),t.addEventListener("pause",W),t.addEventListener("error",K),t.addEventListener("stalled",Y),t.addEventListener("waiting",q),t.addEventListener("ended",X),t.src=e,t},[U,V,G,H,W,K,Y,q,X]),J=(0,r.useCallback)(Qe(Ze().mark(function e(){var t,n,r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("static"!==o){e.next=1;break}return E(!y),console.log(y?"⏸️ Pausing":"▶️ Playing",null==u?void 0:u.name),e.abrupt("return");case 1:if(t=U(),u&&t){e.next=2;break}return _("No audio available for this station"),e.abrupt("return");case 2:if(e.prev=2,!y||!O.current){e.next=3;break}return O.current.pause(),E(!1),console.log("⏸️ Paused:",u.name),e.abrupt("return");case 3:if(_(null),L(!0),O.current&&(O.current.pause(),O.current.src="",O.current=null),console.log("🎵 Creating new audio stream:",t),n=Q()){e.next=4;break}return _("Failed to create audio element"),L(!1),e.abrupt("return");case 4:return O.current=n,e.prev=5,n.load(),e.next=6,new Promise(function(e,t){var r=setTimeout(function(){t(new Error("Timeout loading audio"))},1e4),i=function(){clearTimeout(r),n.removeEventListener("canplay",i),n.removeEventListener("error",a),e()},a=function(e){clearTimeout(r),n.removeEventListener("canplay",i),n.removeEventListener("error",a),t(new Error("Failed to load audio"))};n.addEventListener("canplay",i),n.addEventListener("error",a)});case 6:return e.next=7,n.play();case 7:console.log("▶️ Successfully started playing:",u.name),e.next=9;break;case 8:e.prev=8,r=e.catch(5),console.error("❌ Play error:",r),_("Cannot start playback: ".concat(r.message)),L(!1),D("error");case 9:e.next=11;break;case 10:e.prev=10,i=e.catch(2),console.error("❌ Audio control error:",i),_("Audio error: ".concat(i.message)),L(!1),D("error");case 11:case"end":return e.stop()}},e,null,[[2,10],[5,8]])})),[o,y,u,U,Q]),Z=(0,r.useCallback)(function(){O.current&&(O.current.pause(),O.current=null),M.current&&clearInterval(M.current),l(-1)},[l]),ee=(0,r.useCallback)(function(){_(null)},[]);return(0,r.useEffect)(function(){j()},[j]),(0,r.useEffect)(function(){return function(){O.current&&(O.current.pause(),O.current=null),M.current&&clearInterval(M.current)}},[]),f?r.createElement("div",{className:"station-detail-loading"},r.createElement("div",{className:"loading-spinner"},r.createElement("div",{className:"spinner"}),r.createElement("p",null,"Loading station details..."))):g||!u?r.createElement("div",{className:"station-detail-error"},r.createElement("h2",null,"❌ Station Not Found"),r.createElement("p",null,"Sorry, we couldn't find the radio station you're looking for."),r.createElement("p",{className:"error-details"},g),r.createElement("button",{onClick:Z,className:"back-button"},"← Go Back")):r.createElement("div",{className:"station-detail-container"},r.createElement("div",{className:"station-detail-header"},r.createElement("button",{onClick:Z,className:"back-button"},"← Back to Stations")),r.createElement("div",{className:"station-detail-content"},r.createElement("div",{className:"station-info"},r.createElement("img",{src:u.image||u.cover_image_url||u.logo_url,alt:u.name,className:"station-detail-image",onError:function(e){e.target.src=Ro}}),r.createElement("div",{className:"station-meta"},r.createElement("h1",{className:"station-name"},u.name),r.createElement("p",{className:"station-genre"},u.genre||u.genres&&u.genres[0]),r.createElement("p",{className:"station-description"},u.description),r.createElement("div",{className:"station-stats"},u.listeners&&r.createElement("span",{className:"stat"},"👥 ",u.listeners," listeners"),u.rating&&r.createElement("span",{className:"stat"},"⭐ ",u.rating,"/5.0"),u.is_live&&r.createElement("span",{className:"stat live-indicator"},"🔴 LIVE"),u.is_loop_enabled&&r.createElement("span",{className:"stat loop-indicator"},"🔄 LOOP"),"static"!==o&&!u.is_live&&r.createElement("span",{className:"stat offline-indicator"},"⚫ OFFLINE"),"disconnected"!==N&&function(){switch(N){case"connecting":return r.createElement("span",{className:"connection-status connecting"},"🔄 Connecting...");case"connected":return r.createElement("span",{className:"connection-status connected"},"🟢 Connected");case"error":return r.createElement("span",{className:"connection-status error"},"🔴 Connection Error");default:return null}}()),T&&r.createElement("div",{className:"audio-error"},"⚠️ ",T,r.createElement("button",{onClick:ee,className:"dismiss-error"},"✕")),R&&r.createElement("div",{className:"audio-loading"},"⏳ Loading audio stream..."),r.createElement("div",{className:"station-controls"},(n="static"!==o&&!(null!=u&&u.is_live)||R,i="▶️ Play",R?i="⏳ Loading...":y&&(i="⏸️ Pause"),r.createElement("button",{onClick:J,className:"play-button ".concat(y?"playing":""," ").concat(R?"loading":""),disabled:n},i)),r.createElement("button",{className:"favorite-button"},"❤️ Add to Favorites"),!1))),r.createElement("div",{className:"station-details"},r.createElement("div",{className:"detail-section"},r.createElement("h3",null,"About This Station"),r.createElement("p",null,u.description||"This station brings you the best music in the ".concat(u.genre||(null===(e=u.genres)||void 0===e?void 0:e[0])||"various"," genre."))),"static"!==o&&u.is_live||"static"===o?r.createElement("div",{className:"detail-section"},r.createElement("h3",null,"Now Playing"),"static"===o?r.createElement("div",{className:"now-playing"},r.createElement("p",null,"🎵 Currently streaming ",u.genre," music"),r.createElement("p",null,"🔴 Live broadcast")):null!=u&&u.is_live?r.createElement("div",{className:"now-playing"},u.now_playing_metadata?r.createElement(r.Fragment,null,r.createElement("p",null,r.createElement("strong",null,"🎵 ",u.now_playing_metadata.title||"Unknown Track")),r.createElement("p",null,"👤 ",u.now_playing_metadata.artist||"Unknown Artist"),u.now_playing_metadata.duration&&r.createElement("p",null,"⏱️ Duration: ",u.now_playing_metadata.duration),u.is_loop_enabled&&r.createElement("p",null,"🔄 Looping enabled")):S?r.createElement(r.Fragment,null,r.createElement("p",null,r.createElement("strong",null,"🎵 ",S.title)),r.createElement("p",null,"👤 ",S.artist),S.duration&&r.createElement("p",null,"⏱️ Duration: ",S.duration)):r.createElement("p",null,"🎵 Currently streaming ",u.genre||(null===(t=u.genres)||void 0===t?void 0:t[0])||"music"),r.createElement("p",null,"🔴 Live broadcast")):null):null,r.createElement("div",{className:"detail-section"},r.createElement("h3",null,"Station Info"),r.createElement("div",{className:"station-info-grid"},r.createElement("div",{className:"info-item"},r.createElement("strong",null,"Genre:")," ",u.genre||u.genres&&u.genres[0]||"Music"),r.createElement("div",{className:"info-item"},r.createElement("strong",null,"Type:")," ","static"===o?"Featured Station":"Live Station"),u.listeners&&r.createElement("div",{className:"info-item"},r.createElement("strong",null,"Listeners:")," ",u.listeners),u.rating&&r.createElement("div",{className:"info-item"},r.createElement("strong",null,"Rating:")," ",u.rating,"/5.0 ⭐"),u.creator_name&&r.createElement("div",{className:"info-item"},r.createElement("strong",null,"Created by:")," ",u.creator_name),u.created_at&&r.createElement("div",{className:"info-item"},r.createElement("strong",null,"Created:")," ",new Date(u.created_at).toLocaleDateString()),u.is_loop_enabled&&u.loop_duration_minutes&&r.createElement("div",{className:"info-item"},r.createElement("strong",null,"Loop Duration:")," ",u.loop_duration_minutes," minutes"))),"static"!==o&&u.submission_guidelines&&r.createElement("div",{className:"detail-section"},r.createElement("h3",null,"Submission Guidelines"),r.createElement("p",null,u.submission_guidelines)))))};var Ko=i(4857),Yo={};function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Yo.styleTagTransform=y(),Yo.setAttributes=m(),Yo.insert=f().bind(null,"head"),Yo.domAPI=d(),Yo.insertStyleElement=v(),c()(Ko.A,Yo),Ko.A&&Ko.A.locals&&Ko.A.locals;const Qo=function(){var e,t=(0,r.useContext)(nt).store,n=qe((0,r.useState)(!0),2),i=n[0],a=n[1],s=qe((0,r.useState)({}),2),o=s[0],l=s[1],c=qe((0,r.useState)(!0),2),u=c[0],d=c[1],h=qe((0,r.useState)(!1),2),f=h[0],p=h[1],m=qe((0,r.useState)(""),2),g=m[0],v=m[1],b=qe((0,r.useState)({pc:!1,playstation:!1,xbox:!1,nintendo:!1,mobile:!1}),2),y=b[0],E=b[1],x=qe((0,r.useState)([]),2),S=x[0],w=x[1],k=qe((0,r.useState)(""),2),T=k[0],_=k[1],A=qe((0,r.useState)(""),2),R=A[0],L=A[1],C=qe((0,r.useState)("intermediate"),2),P=C[0],I=C[1],N=qe((0,r.useState)([]),2),D=N[0],O=N[1],M=qe((0,r.useState)([]),2),F=M[0],B=M[1],U=qe((0,r.useState)(""),2),j=U[0],$=U[1],z=qe((0,r.useState)(""),2),V=z[0],G=z[1],H=qe((0,r.useState)(""),2),W=H[0],K=H[1],Y=qe((0,r.useState)([]),2),q=Y[0],X=Y[1],Q=qe((0,r.useState)(""),2),J=Q[0],Z=Q[1],ee=qe((0,r.useState)([]),2),te=ee[0],ne=ee[1],re=qe((0,r.useState)({headset:"",controller:"",other:""}),2),ie=re[0],ae=re[1],se=qe((0,r.useState)(!1),2),oe=se[0],le=se[1],ce=qe((0,r.useState)(""),2),ue=ce[0],de=ce[1],he=qe((0,r.useState)([]),2),fe=he[0],pe=he[1],me=qe((0,r.useState)(""),2),ge=me[0],ve=me[1],be=qe((0,r.useState)({hoursPlayed:0,gamesOwned:0,achievementsUnlocked:0,winRate:0}),2),ye=be[0],Ee=be[1],xe=null===(e=t.user)||void 0===e?void 0:e.id,Se=(0,r.useRef)(null);(0,r.useEffect)(function(){xe&&(setTimeout(function(){var e;l({id:xe,username:(null===(e=t.user)||void 0===e?void 0:e.username)||"Player",gamer_rank:"Casual",favorite_games:["Valorant","Minecraft"],gamer_tags:{steam:"player123",xbox:"PlayerX123"},squad_id:null}),d(!1)},1e3),we())},[xe]);var we=function(){var e=localStorage.getItem("gamer_profile_".concat(xe));if(e){var t=JSON.parse(e);v(t.gamertag||""),E(t.platforms||y),w(t.currentGames||[]),L(t.gamingSchedule||""),I(t.skillLevel||"intermediate"),O(t.lookingFor||[]),B(t.communicationPrefs||[]),$(t.ageRange||""),G(t.timezone||""),K(t.region||""),X(t.favoriteGenres||[]),Z(t.playstyle||""),ne(t.gameModes||[]),ae(t.setupDetails||ie),le(t.streamingStatus||!1),de(t.streamingPlatform||""),pe(t.languages||[]),ve(t.gamerBio||""),Ee(t.gamingStats||ye)}},ke=function(){var e=Qe(Ze().mark(function e(){var t;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={gamertag:g,platforms:y,currentGames:S,gamingSchedule:R,skillLevel:P,lookingFor:D,communicationPrefs:F,ageRange:j,timezone:V,region:W,favoriteGenres:q,playstyle:J,gameModes:te,setupDetails:ie,streamingStatus:oe,streamingPlatform:ue,languages:fe,gamerBio:ge,gamingStats:ye};try{localStorage.setItem("gamer_profile_".concat(xe),JSON.stringify(t)),alert("✅ Gamer profile saved successfully!"),p(!1)}catch(e){console.error("Error saving gamer profile:",e),alert("❌ Failed to save gamer profile")}case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Te=function(e,t,n){e.trim()&&!t.includes(e.trim())&&n([].concat(vo(t),[e.trim()]))},_e=function(e,t,n){t.includes(e)?n(t.filter(function(t){return t!==e})):n([].concat(vo(t),[e]))};return u?r.createElement("div",{className:"loading-container"},r.createElement("p",null,"🎮 Loading gamer profile...")):r.createElement("div",{className:"profile-container gamer-profile"},r.createElement("div",{className:"profile-mode-toggle"},r.createElement("button",{className:"mode-toggle-btn ".concat(i?"":"active"),onClick:function(){return a(!1)}},"👤 Regular Profile"),r.createElement("button",{className:"mode-toggle-btn ".concat(i?"active":""),onClick:function(){return a(!0)}},"🎮 Gamer Profile")),i?r.createElement(r.Fragment,null,r.createElement("div",{className:"cover-photo-container gaming-cover"},r.createElement("div",{className:"gaming-overlay"},r.createElement("h1",null,"🎮 GAMER PROFILE"),r.createElement("p",null,"Level up your gaming experience"))),r.createElement("div",{className:"profile-avatar-toggle-horizontal"},r.createElement("img",{src:o.avatar_url||"/default-gamer-avatar.png",alt:"Gamer Avatar",className:"profile-pic gamer-avatar"}),r.createElement("div",{className:"profile-name-inline"},r.createElement("p",{className:"profile-name-label gamer-tag"},g||o.username||"Your Gamertag"),r.createElement("p",{className:"gamer-rank"},"Rank: ",o.gamer_rank||P),r.createElement("button",{onClick:function(){return Se.current.click()},className:"upload-btn"},"🎮 Upload Gamer Avatar"),r.createElement("input",{ref:Se,type:"file",style:{display:"none"}})),r.createElement("div",{className:"profile-name-header"},r.createElement("div",{className:"gamer-actions"},r.createElement("button",{className:"edit-name-btn small-btn",onClick:function(){return p(!f)}},f?"👁️ View":"✏️ Edit"),r.createElement("button",{className:"message-btn small-btn"},"💬 Message"),r.createElement("button",{className:"invite-btn small-btn"},"🎯 Invite to Game")))),r.createElement("div",{className:"profile-header-flex"},r.createElement("div",{className:"profile-card-bio gamer-bio-card"},r.createElement("label",null,"🎮 Gamer Bio:"),f?r.createElement("textarea",{rows:5,value:ge,onChange:function(e){return ve(e.target.value)},placeholder:"Tell other gamers about yourself..."}):r.createElement("p",null,ge||"Share your gaming story...")),r.createElement("div",{className:"profile-stats-card gaming-stats"},r.createElement("h4",null,"📊 Gaming Stats"),r.createElement("ul",{className:"profile-stats-list"},r.createElement("li",null,"⏱️ Hours Played: ",r.createElement("strong",null,ye.hoursPlayed)),r.createElement("li",null,"🎮 Games Owned: ",r.createElement("strong",null,ye.gamesOwned)),r.createElement("li",null,"🏆 Achievements: ",r.createElement("strong",null,ye.achievementsUnlocked)),r.createElement("li",null,"📈 Win Rate: ",r.createElement("strong",null,ye.winRate,"%")))),r.createElement("div",{className:"gaming-status-card"},r.createElement("h4",null,"🕐 Gaming Schedule"),f?r.createElement("textarea",{rows:3,value:R,onChange:function(e){return L(e.target.value)},placeholder:"When are you usually online? (e.g., Weekdays 7-10 PM EST)"}):r.createElement("p",null,R||"No schedule set"),r.createElement("div",{className:"timezone-region"},f?r.createElement(r.Fragment,null,r.createElement("input",{type:"text",placeholder:"Region (e.g., North America, EU West)",value:W,onChange:function(e){return K(e.target.value)}}),r.createElement("input",{type:"text",placeholder:"Timezone (e.g., EST, PST, GMT)",value:V,onChange:function(e){return G(e.target.value)}})):r.createElement(r.Fragment,null,r.createElement("p",null,r.createElement("strong",null,"🌍 Region:")," ",W||"Not set"),r.createElement("p",null,r.createElement("strong",null,"⏰ Timezone:")," ",V||"Not set"))))),r.createElement("div",{className:"gaming-info-grid"},r.createElement("div",{className:"gaming-card"},r.createElement("h3",null,"🎯 Essential Info"),r.createElement("div",{className:"info-section"},r.createElement("label",null,"🏷️ Gamertag/Username:"),f?r.createElement("input",{type:"text",value:g,onChange:function(e){return v(e.target.value)},placeholder:"Your main gaming identity"}):r.createElement("p",null,g||"Not set")),r.createElement("div",{className:"info-section"},r.createElement("label",null,"🖥️ Platforms:"),f?r.createElement("div",{className:"platform-checkboxes"},Object.entries(y).map(function(e){var t=qe(e,2),n=t[0],i=t[1];return r.createElement("label",{key:n,className:"platform-checkbox"},r.createElement("input",{type:"checkbox",checked:i,onChange:function(e){return E(Xo(Xo({},y),{},We({},n,e.target.checked)))}}),n.charAt(0).toUpperCase()+n.slice(1))})):r.createElement("div",{className:"platform-tags"},Object.entries(y).filter(function(e){var t=qe(e,2);return t[0],t[1]}).map(function(e){var t=qe(e,2),n=t[0];return t[1],r.createElement("span",{key:n,className:"platform-tag"},n.toUpperCase())}))),r.createElement("div",{className:"info-section"},r.createElement("label",null,"⭐ Skill Level:"),f?r.createElement("select",{value:P,onChange:function(e){return I(e.target.value)}},r.createElement("option",{value:"beginner"},"🌱 Beginner"),r.createElement("option",{value:"intermediate"},"🎯 Intermediate"),r.createElement("option",{value:"advanced"},"🏆 Advanced"),r.createElement("option",{value:"competitive"},"🔥 Competitive"),r.createElement("option",{value:"pro"},"👑 Professional")):r.createElement("p",null,P))),r.createElement("div",{className:"gaming-card"},r.createElement("h3",null,"🎮 Current Games"),r.createElement("div",{className:"games-list"},S.map(function(e,t){return r.createElement("div",{key:t,className:"game-tag"},r.createElement("span",null,e),f&&r.createElement("button",{onClick:function(){return t=e,void w(S.filter(function(e){return e!==t}));var t}},"×"))})),f&&r.createElement("div",{className:"add-game"},r.createElement("input",{type:"text",value:T,onChange:function(e){return _(e.target.value)},placeholder:"Add a game...",onKeyPress:function(e){"Enter"===e.key&&(Te(T,S,w),_(""))}}),r.createElement("button",{onClick:function(){Te(T,S,w),_("")}},"Add"))),r.createElement("div",{className:"gaming-card"},r.createElement("h3",null,"👥 Social & Team"),r.createElement("div",{className:"info-section"},r.createElement("label",null,"🔍 Looking For:"),r.createElement("div",{className:"tag-grid"},["Casual Friends","Competitive Teammates","Mentors","Coaching","Just Fun"].map(function(e){return r.createElement("button",{key:e,className:"tag-btn ".concat(D.includes(e)?"active":""),onClick:function(){return f&&_e(e,D,O)},disabled:!f},e)}))),r.createElement("div",{className:"info-section"},r.createElement("label",null,"🎙️ Communication:"),r.createElement("div",{className:"tag-grid"},["Voice Chat","Text Only","Discord","In-game Chat"].map(function(e){return r.createElement("button",{key:e,className:"tag-btn ".concat(F.includes(e)?"active":""),onClick:function(){return f&&_e(e,F,B)},disabled:!f},e)}))),r.createElement("div",{className:"info-section"},r.createElement("label",null,"👥 Age Range:"),f?r.createElement("select",{value:j,onChange:function(e){return $(e.target.value)}},r.createElement("option",{value:""},"Select age range"),r.createElement("option",{value:"13-17"},"13-17"),r.createElement("option",{value:"18-24"},"18-24"),r.createElement("option",{value:"25-34"},"25-34"),r.createElement("option",{value:"35-44"},"35-44"),r.createElement("option",{value:"45+"},"45+")):r.createElement("p",null,j||"Not specified"))),r.createElement("div",{className:"gaming-card"},r.createElement("h3",null,"🎯 Gaming Preferences"),r.createElement("div",{className:"info-section"},r.createElement("label",null,"🎮 Favorite Genres:"),r.createElement("div",{className:"tag-grid"},["FPS","RPG","Strategy","Sports","Racing","Puzzle","Adventure","Fighting"].map(function(e){return r.createElement("button",{key:e,className:"tag-btn ".concat(q.includes(e)?"active":""),onClick:function(){return f&&_e(e,q,X)},disabled:!f},e)}))),r.createElement("div",{className:"info-section"},r.createElement("label",null,"⚔️ Playstyle:"),f?r.createElement("select",{value:J,onChange:function(e){return Z(e.target.value)}},r.createElement("option",{value:""},"Select playstyle"),r.createElement("option",{value:"aggressive"},"⚡ Aggressive"),r.createElement("option",{value:"strategic"},"🧠 Strategic"),r.createElement("option",{value:"supportive"},"🤝 Supportive"),r.createElement("option",{value:"casual"},"😌 Casual"),r.createElement("option",{value:"competitive"},"🏆 Competitive")):r.createElement("p",null,J||"Not set")),r.createElement("div",{className:"info-section"},r.createElement("label",null,"🎯 Game Modes:"),r.createElement("div",{className:"tag-grid"},["Solo","Co-op","PvP","PvE","Team","Battle Royale"].map(function(e){return r.createElement("button",{key:e,className:"tag-btn ".concat(te.includes(e)?"active":""),onClick:function(){return f&&_e(e,te,ne)},disabled:!f},e)})))),r.createElement("div",{className:"gaming-card"},r.createElement("h3",null,"🎧 Setup & Streaming"),r.createElement("div",{className:"info-section"},r.createElement("label",null,"🎧 Setup Details:"),f?r.createElement("div",null,r.createElement("input",{type:"text",placeholder:"Headset model",value:ie.headset,onChange:function(e){return ae(Xo(Xo({},ie),{},{headset:e.target.value}))}}),r.createElement("input",{type:"text",placeholder:"Controller type",value:ie.controller,onChange:function(e){return ae(Xo(Xo({},ie),{},{controller:e.target.value}))}}),r.createElement("input",{type:"text",placeholder:"Other equipment",value:ie.other,onChange:function(e){return ae(Xo(Xo({},ie),{},{other:e.target.value}))}})):r.createElement("div",null,r.createElement("p",null,r.createElement("strong",null,"Headset:")," ",ie.headset||"Not specified"),r.createElement("p",null,r.createElement("strong",null,"Controller:")," ",ie.controller||"Not specified"),r.createElement("p",null,r.createElement("strong",null,"Other:")," ",ie.other||"Not specified"))),r.createElement("div",{className:"info-section"},r.createElement("label",null,"📺 Streaming:"),f?r.createElement("div",null,r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:oe,onChange:function(e){return le(e.target.checked)}}),"I stream my gameplay"),oe&&r.createElement("input",{type:"text",placeholder:"Platform (Twitch, YouTube, etc.)",value:ue,onChange:function(e){return de(e.target.value)}})):r.createElement("p",null,oe?"Yes - ".concat(ue):"No")),r.createElement("div",{className:"info-section"},r.createElement("label",null,"🌍 Languages:"),r.createElement("div",{className:"tag-grid"},["English","Spanish","French","German","Japanese","Korean","Chinese","Other"].map(function(e){return r.createElement("button",{key:e,className:"tag-btn ".concat(fe.includes(e)?"active":""),onClick:function(){return f&&_e(e,fe,pe)},disabled:!f},e)}))))),f&&r.createElement("div",{className:"save-section"},r.createElement("button",{onClick:ke,className:"btn-primary gamer-save"},"💾 Save Gamer Profile"),r.createElement("button",{onClick:function(){return p(!1)},className:"btn-secondary"},"❌ Cancel"))):r.createElement("div",{className:"redirect-message"},r.createElement("h2",null,"👤 Regular Profile Mode"),r.createElement("p",null,"Switch to your regular profile view"),r.createElement(Ne,{to:"/profile",className:"btn btn-primary"},"Go to Regular Profile")))},Jo=function(e){var t=e.username,n=e.content,i=e.timestamp,a=e.isCurrentUser;return r.createElement("div",{className:"d-flex ".concat(a?"justify-content-end":"justify-content-start"," mb-2")},r.createElement("div",{className:"p-2 rounded shadow-sm ".concat(a?"bg-primary text-white":"bg-light text-dark"),style:{maxWidth:"70%"}},r.createElement("div",{className:"small fw-bold mb-1"},t),r.createElement("div",null,n),r.createElement("div",{className:"text-muted small text-end mt-1"},i)))},Zo=Object.create(null);Zo.open="0",Zo.close="1",Zo.ping="2",Zo.pong="3",Zo.message="4",Zo.upgrade="5",Zo.noop="6";const el=Object.create(null);Object.keys(Zo).forEach(e=>{el[Zo[e]]=e});const tl={type:"error",data:"parser error"},nl="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),rl="function"==typeof ArrayBuffer,il=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,al=({type:e,data:t},n,r)=>nl&&t instanceof Blob?n?r(t):sl(t,r):rl&&(t instanceof ArrayBuffer||il(t))?n?r(t):sl(new Blob([t]),r):r(Zo[e]+(t||"")),sl=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function ol(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ll;const cl="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)cl["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;const ul="function"==typeof ArrayBuffer,dl=(e,t)=>{if("string"!=typeof e)return{type:"message",data:fl(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:hl(e.substring(1),t)}:el[n]?e.length>1?{type:el[n],data:e.substring(1)}:{type:el[n]}:tl},hl=(e,t)=>{if(ul){const n=(e=>{let t,n,r,i,a,s=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const c=new ArrayBuffer(s),u=new Uint8Array(c);for(t=0;t<o;t+=4)n=cl[e.charCodeAt(t)],r=cl[e.charCodeAt(t+1)],i=cl[e.charCodeAt(t+2)],a=cl[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&a;return c})(e);return fl(n,t)}return{base64:!0,data:e}},fl=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,pl=String.fromCharCode(30);let ml;function gl(e){return e.reduce((e,t)=>e+t.length,0)}function vl(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function bl(e){if(e)return function(e){for(var t in bl.prototype)e[t]=bl.prototype[t];return e}(e)}bl.prototype.on=bl.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},bl.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},bl.prototype.off=bl.prototype.removeListener=bl.prototype.removeAllListeners=bl.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},bl.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},bl.prototype.emitReserved=bl.prototype.emit,bl.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},bl.prototype.hasListeners=function(e){return!!this.listeners(e).length};const yl="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),El="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function xl(e,...t){return t.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const Sl=El.setTimeout,wl=El.clearTimeout;function kl(e,t){t.useNativeTimers?(e.setTimeoutFn=Sl.bind(El),e.clearTimeoutFn=wl.bind(El)):(e.setTimeoutFn=El.setTimeout.bind(El),e.clearTimeoutFn=El.clearTimeout.bind(El))}function Tl(e){return"string"==typeof e?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}function _l(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Al extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Rl extends bl{constructor(e){super(),this.writable=!1,kl(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Al(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=dl(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class Ll extends Rl{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(pl),r=[];for(let e=0;e<n.length;e++){const i=dl(n[e],t);if(r.push(i),"error"===i.type)break}return r})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((e,a)=>{al(e,!1,e=>{r[a]=e,++i===n&&t(r.join(pl))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=_l()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Cl=!1;try{Cl="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const Pl=Cl;function Il(){}class Nl extends Ll{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class Dl extends bl{constructor(e,t,n){super(),this.createRequest=e,kl(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=xl(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof n.status?n.status:0)},0))},n.send(this._data)}catch(e){return void this.setTimeoutFn(()=>{this._onError(e)},0)}"undefined"!=typeof document&&(this._index=Dl.requestsCount++,Dl.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Il,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Dl.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function Ol(){for(let e in Dl.requests)Dl.requests.hasOwnProperty(e)&&Dl.requests[e].abort()}Dl.requestsCount=0,Dl.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",Ol):"function"==typeof addEventListener&&addEventListener("onpagehide"in El?"pagehide":"unload",Ol,!1));const Ml=function(){const e=Fl({xdomain:!1});return e&&null!==e.responseType}();function Fl(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Pl))return new XMLHttpRequest}catch(e){}if(!t)try{return new(El[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}const Bl="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Ul extends Rl{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Bl?{}:xl(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;al(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch(e){}r&&yl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=_l()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const jl=El.WebSocket||El.MozWebSocket,$l={websocket:class extends Ul{createSocket(e,t,n){return Bl?new jl(e,t,n):t?new jl(e,t):new jl(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Rl{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){ml||(ml=new TextDecoder);const n=[];let r=0,i=-1,a=!1;return new TransformStream({transform(s,o){for(n.push(s);;){if(0===r){if(gl(n)<1)break;const e=vl(n,1);a=!(128&~e[0]),i=127&e[0],r=i<126?3:126===i?1:2}else if(1===r){if(gl(n)<2)break;const e=vl(n,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(gl(n)<8)break;const e=vl(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>Math.pow(2,21)-1){o.enqueue(tl);break}i=a*Math.pow(2,32)+t.getUint32(4),r=3}else{if(gl(n)<i)break;const e=vl(n,i);o.enqueue(dl(a?e:ml.decode(e),t)),r=0}if(0===i||i>e){o.enqueue(tl);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=new TransformStream({transform(e,t){!function(e,t){nl&&e.data instanceof Blob?e.data.arrayBuffer().then(ol).then(t):rl&&(e.data instanceof ArrayBuffer||il(e.data))?t(ol(e.data)):al(e,!1,e=>{ll||(ll=new TextEncoder),t(ll.encode(e))})}(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{i=new Uint8Array(9);const e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!=typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}});r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then(({done:e,value:t})=>{e||(this.onPacket(t),i())}).catch(e=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&yl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends Nl{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Ml&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Dl(Fl,this.uri(),e)}}},zl=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Vl=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Gl(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=zl.exec(e||""),a={},s=14;for(;s--;)a[Vl[s]]=i[s]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1),"/"==t.slice(-1)&&n.splice(n.length-1,1),n}(0,a.path),a.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(n[t]=r)}),n}(0,a.query),a}const Hl="function"==typeof addEventListener&&"function"==typeof removeEventListener,Wl=[];Hl&&addEventListener("offline",()=>{Wl.forEach(e=>e())},!1);class Kl extends bl{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=Gl(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Gl(t.host).host);kl(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),Hl&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Wl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&Kl.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Kl.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=Tl(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,yl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Kl.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Hl&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Wl.indexOf(this._offlineEventListener);-1!==e&&Wl.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Kl.protocol=4;class Yl extends Kl{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Kl.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Kl.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function i(){n||(n=!0,c(),t.close(),t=null)}const a=e=>{const n=new Error("probe error: "+e);n.transport=t.name,i(),this.emitReserved("upgradeError",n)};function s(){a("transport closed")}function o(){a("socket closed")}function l(e){t&&e.name!==t.name&&i()}const c=()=>{t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",s),this.off("close",o),this.off("upgrading",l)};t.once("open",r),t.once("error",a),t.once("close",s),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class ql extends Yl{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(e=>$l[e]).filter(e=>!!e)),super(e,n)}}const Xl="function"==typeof ArrayBuffer,Ql=Object.prototype.toString,Jl="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ql.call(Blob),Zl="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ql.call(File);function ec(e){return Xl&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Jl&&e instanceof Blob||Zl&&e instanceof File}function tc(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(tc(e[t]))return!0;return!1}if(ec(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return tc(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&tc(e[t]))return!0;return!1}function nc(e){const t=[],n=e.data,r=e;return r.data=rc(n,t),r.attachments=t.length,{packet:r,buffers:t}}function rc(e,t){if(!e)return e;if(ec(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=rc(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=rc(e[r],t));return n}return e}function ic(e,t){return e.data=ac(e.data,t),delete e.attachments,e}function ac(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ac(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ac(e[n],t));return e}const sc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],oc=5;var lc;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(lc||(lc={}));class cc{constructor(e){this.replacer=e}encode(e){return e.type!==lc.EVENT&&e.type!==lc.ACK||!tc(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===lc.EVENT?lc.BINARY_EVENT:lc.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==lc.BINARY_EVENT&&e.type!==lc.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=nc(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function uc(e){return"[object Object]"===Object.prototype.toString.call(e)}class dc extends bl{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===lc.BINARY_EVENT;n||t.type===lc.BINARY_ACK?(t.type=n?lc.EVENT:lc.ACK,this.reconstructor=new hc(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!ec(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===lc[n.type])throw new Error("unknown packet type "+n.type);if(n.type===lc.BINARY_EVENT||n.type===lc.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!dc.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case lc.CONNECT:return uc(t);case lc.DISCONNECT:return void 0===t;case lc.CONNECT_ERROR:return"string"==typeof t||uc(t);case lc.EVENT:case lc.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===sc.indexOf(t[0]));case lc.ACK:case lc.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class hc{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=ic(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function fc(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const pc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class mc extends bl{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[fc(e,"open",this.onopen.bind(this)),fc(e,"packet",this.onpacket.bind(this)),fc(e,"error",this.onerror.bind(this)),fc(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,i;if(pc.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:lc.EVENT,data:t,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),a.id=e}const s=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,o=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!s||(o?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},r),a=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,e)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((n,r)=>{const i=(e,t)=>e?r(e):n(t);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...r)=>{if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()}),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:lc.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case lc.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case lc.EVENT:case lc.BINARY_EVENT:this.onevent(e);break;case lc.ACK:case lc.BINARY_ACK:this.onack(e);break;case lc.DISCONNECT:this.ondisconnect();break;case lc.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:lc.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:lc.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function gc(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}gc.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},gc.prototype.reset=function(){this.attempts=0},gc.prototype.setMin=function(e){this.ms=e},gc.prototype.setMax=function(e){this.max=e},gc.prototype.setJitter=function(e){this.jitter=e};class vc extends bl{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,kl(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new gc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||t;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ql(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=fc(t,"open",function(){n.onopen(),e&&e()}),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},a=fc(t,"error",i);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(fc(e,"ping",this.onping.bind(this)),fc(e,"data",this.ondata.bind(this)),fc(e,"error",this.onerror.bind(this)),fc(e,"close",this.onclose.bind(this)),fc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){yl(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new mc(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const bc={};function yc(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=Gl(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,i=n.id,a=n.path,s=bc[i]&&a in bc[i].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?o=new vc(r,t):(bc[i]||(bc[i]=new vc(r,t)),o=bc[i]),n.query&&!t.query&&(t.query=n.queryKey),o.socket(n.path,t)}Object.assign(yc,{Manager:vc,Socket:mc,io:yc,connect:yc});var Ec=i(7238),xc={};xc.styleTagTransform=y(),xc.setAttributes=m(),xc.insert=f().bind(null,"head"),xc.domAPI=d(),xc.insertStyleElement=v(),c()(Ec.A,xc),Ec.A&&Ec.A.locals&&Ec.A.locals;var Sc=yc("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev",{transports:["websocket"],auth:{token:localStorage.getItem("token")},withCredentials:!0});const wc=function(){var e,t,n=(0,r.useContext)(nt).store,i=qe((0,r.useState)([]),2),a=i[0],s=i[1],o=qe((0,r.useState)(""),2),l=o[0],c=o[1],u=qe((0,r.useState)([]),2),d=u[0],h=u[1],f=qe((0,r.useState)([]),2),p=f[0],m=f[1],g=qe((0,r.useState)("general"),2),v=g[0],b=g[1],y=qe((0,r.useState)([]),2),E=y[0],x=y[1],S=qe((0,r.useState)(!1),2),w=S[0],k=S[1],T=qe((0,r.useState)(""),2),_=T[0],A=T[1],R=(0,r.useRef)(null),L=((0,r.useRef)(null),[{id:"general",name:"🎮 General Gaming",icon:"🎮"},{id:"lfg",name:"👥 Looking for Group",icon:"👥"},{id:"competitive",name:"🏆 Competitive",icon:"🏆"},{id:"casual",name:"😌 Casual Gaming",icon:"😌"},{id:"tech-support",name:"🔧 Tech Support",icon:"🔧"},{id:"streaming",name:"📺 Streaming",icon:"📺"}]);(0,r.useEffect)(function(){return Sc.on("connect",function(){var e,t,r,i;console.log("🟢 Connected to gamers-".concat(v)),Sc.emit("joinRoom",{stream_id:"gamers-".concat(v),user_info:{id:null===(e=n.user)||void 0===e?void 0:e.id,username:null===(t=n.user)||void 0===t?void 0:t.username,gamertag:null===(r=n.user)||void 0===r?void 0:r.gamertag,current_game:_||(null===(i=n.user)||void 0===i?void 0:i.current_game_activity)}})}),Sc.on("receive_message",function(e){console.log("📨 Received message:",e),s(function(t){return[].concat(vo(t),[e])})}),Sc.on("users_update",function(e){h(e)}),Sc.on("games_update",function(e){m(e)}),Sc.on("user_typing",function(e){x(function(t){return t.includes(e.username)?t:[].concat(vo(t),[e.username])}),setTimeout(function(){x(function(t){return t.filter(function(t){return t!==e.username})})},3e3)}),Sc.on("user_status_update",function(e){console.log("👤 User status update:",e)}),function(){Sc.emit("leaveRoom",{stream_id:"gamers-".concat(v)}),Sc.off("receive_message"),Sc.off("users_update"),Sc.off("games_update"),Sc.off("user_typing"),Sc.off("user_status_update")}},[v,n.user]),(0,r.useEffect)(function(){var e;null===(e=R.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[a]);var C=function(){var e,t;if(l.trim()){var r={stream_id:"gamers-".concat(v),message:l.trim(),user_info:{gamertag:null===(e=n.user)||void 0===e?void 0:e.gamertag,current_game:_,gamer_rank:null===(t=n.user)||void 0===t?void 0:t.gamer_rank}};Sc.emit("send_message",r),c(""),k(!1)}},P=function(e){var t,r,i={stream_id:"gamers-".concat(v),message:e,user_info:{gamertag:null===(t=n.user)||void 0===t?void 0:t.gamertag,current_game:_,gamer_rank:null===(r=n.user)||void 0===r?void 0:r.gamer_rank}};Sc.emit("send_message",i)},I=L.find(function(e){return e.id===v});return r.createElement("div",{className:"gamers-chatroom-container"},r.createElement("div",{className:"chatroom-header"},r.createElement("h1",null,"💬 Gamers Global Chatroom"),r.createElement("div",{className:"user-status"},r.createElement("span",{className:"online-indicator"},"🟢"),r.createElement("span",null,(null===(e=n.user)||void 0===e?void 0:e.gamertag)||(null===(t=n.user)||void 0===t?void 0:t.username)),_&&r.createElement("span",{className:"game-status"},"🎮 ",_),r.createElement("button",{onClick:function(){var e=prompt("What game are you playing?",_);null!==e&&(A(e),Sc.emit("update_game_status",{stream_id:"gamers-".concat(v),game_status:e}))},className:"status-btn"},_?"🎮 Change Game":"🎮 Set Game Status"))),r.createElement("div",{className:"chatroom-layout"},r.createElement("div",{className:"chatroom-sidebar"},r.createElement("div",{className:"rooms-section"},r.createElement("h3",null,"🏠 Chat Rooms"),r.createElement("div",{className:"rooms-list"},L.map(function(e){return r.createElement("button",{key:e.id,className:"room-btn ".concat(v===e.id?"active":""),onClick:function(){return t=e.id,Sc.emit("leaveRoom",{stream_id:"gamers-".concat(v)}),s([]),b(t),void Sc.emit("joinRoom",{stream_id:"gamers-".concat(t),user_info:{id:null===(r=n.user)||void 0===r?void 0:r.id,username:null===(i=n.user)||void 0===i?void 0:i.username,gamertag:null===(a=n.user)||void 0===a?void 0:a.gamertag,current_game:_}});var t,r,i,a}},r.createElement("span",{className:"room-icon"},e.icon),r.createElement("span",{className:"room-name"},e.name))}))),r.createElement("div",{className:"online-section"},r.createElement("h3",null,"👥 Online (",d.length,")"),r.createElement("div",{className:"users-list"},d.map(function(e,t){return r.createElement("div",{key:t,className:"user-item"},r.createElement("span",{className:"user-status"},"🟢"),r.createElement("span",{className:"user-name"},e.gamertag||e.username),e.current_game&&r.createElement("span",{className:"user-game"},"🎮 ",e.current_game))}))),p.length>0&&r.createElement("div",{className:"games-section"},r.createElement("h3",null,"🎮 Active Games"),r.createElement("div",{className:"games-list"},p.map(function(e,t){return r.createElement("div",{key:t,className:"game-item"},r.createElement("span",{className:"game-name"},e.name),r.createElement("span",{className:"game-count"},e.players," players"))})))),r.createElement("div",{className:"chat-main"},r.createElement("div",{className:"room-header"},r.createElement("h2",null,null==I?void 0:I.icon," ",null==I?void 0:I.name),r.createElement("div",{className:"room-actions"},r.createElement("button",{className:"action-btn",title:"Voice Chat"},"🎤"),r.createElement("button",{className:"action-btn",title:"Screen Share"},"🖥️"),r.createElement("button",{className:"action-btn",title:"Game Invite"},"🎯"))),r.createElement("div",{className:"chat-messages"},a.map(function(e,t){var i,a,s;return r.createElement(Jo,{key:t,username:e.username||e.gamertag||"Anonymous",content:e.message,timestamp:e.timestamp||"",isCurrentUser:e.user_id===(null===(i=n.user)||void 0===i?void 0:i.id),gameInfo:null===(a=e.user_info)||void 0===a?void 0:a.current_game,gamerRank:null===(s=e.user_info)||void 0===s?void 0:s.gamer_rank})}),E.length>0&&r.createElement("div",{className:"typing-indicator"},r.createElement("span",null,E.join(", ")," ",1===E.length?"is":"are"," typing...")),r.createElement("div",{ref:R})),r.createElement("div",{className:"quick-actions"},r.createElement("button",{onClick:function(){return P("LFG! 🎮")},className:"quick-btn"},"👥 Looking for Group"),r.createElement("button",{onClick:function(){return P("GG! 🏆")},className:"quick-btn"},"🏆 Good Game"),r.createElement("button",{onClick:function(){return P("Need help! 🆘")},className:"quick-btn"},"🆘 Need Help"),r.createElement("button",{onClick:function(){return P("Anyone up for a match? ⚔️")},className:"quick-btn"},"⚔️ Match Request")),r.createElement("div",{className:"message-input-area"},w&&r.createElement("div",{className:"emoji-picker"},["🎮","🏆","⚡","🔥","💯","👍","👎","😎","😤","💀","🎯","⭐"].map(function(e){return r.createElement("button",{key:e,onClick:function(){return function(e){c(function(t){return t+e}),k(!1)}(e)},className:"emoji-btn"},e)})),r.createElement("div",{className:"input-group"},r.createElement("button",{className:"emoji-toggle-btn",onClick:function(){return k(!w)}},"😎"),r.createElement("input",{type:"text",className:"message-input",placeholder:"Message ".concat(null==I?void 0:I.name,"..."),value:l,onChange:function(e){var t,r;c(e.target.value),Sc.emit("typing",{stream_id:"gamers-".concat(v),username:(null===(t=n.user)||void 0===t?void 0:t.username)||(null===(r=n.user)||void 0===r?void 0:r.gamertag)})},onKeyDown:function(e){return"Enter"===e.key&&C()},maxLength:500}),r.createElement("button",{className:"send-btn",onClick:C},"🚀 Send")),r.createElement("div",{className:"input-footer"},r.createElement("span",{className:"char-count"},l.length,"/500"))))))};var kc=function(e){var t=e.earnings,n=e.followers;return r.createElement("div",{style:{padding:"20px",background:"#f5f5f5",margin:"20px 0",borderRadius:"8px"}},r.createElement("h3",null,"📈 Analytics"),r.createElement("p",null,r.createElement("strong",null,"Earnings:")," $",t),r.createElement("p",null,r.createElement("strong",null,"Followers:")," ",n))},Tc=function(e){var t=e.isLive,n=(e.stationId,e.onStart),i=e.onStop;return r.createElement("div",{style:{padding:"15px",background:t?"#e8f5e8":"#fff3e0",borderRadius:"8px"}},r.createElement("p",null,r.createElement("strong",null,"Status:")," ",t?"🔴 Live":"⚫ Offline"),r.createElement("button",{onClick:t?i:n,style:{padding:"10px 20px",backgroundColor:t?"#f44336":"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},t?"Stop Stream":"Start Stream"))};const _c=function(){var e=he().id,t=qe((0,r.useState)([]),2),n=t[0],i=t[1],a=qe((0,r.useState)([]),2),s=a[0],o=a[1],l=qe((0,r.useState)([]),2),c=l[0],u=l[1],d=qe((0,r.useState)(null),2),h=d[0],f=d[1],p=qe((0,r.useState)(""),2),m=p[0],g=p[1],v=qe((0,r.useState)(""),2),b=v[0],y=v[1],E=qe((0,r.useState)(0),2),x=E[0],S=E[1],w=qe((0,r.useState)(0),2),k=w[0],T=w[1],_=qe((0,r.useState)(!1),2),A=_[0],R=_[1],L=qe((0,r.useState)(null),2),C=L[0],P=L[1];(0,r.useEffect)(function(){fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/radio-stations"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(i).catch(console.error),fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/uploaded-tracks"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(u).catch(console.error),e&&(f(e),I(e))},[]);var I=function(e){f(e),fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/radio/station/").concat(e,"/tracks")).then(function(e){return e.json()}).then(o),fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/radio/station/").concat(e,"/analytics")).then(function(e){return e.json()}).then(function(e){S(e.earnings),T(e.followers),R(e.is_live)}),fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/radio/station/").concat(e)).then(function(e){return e.json()}).then(function(e){return P(e.playlist_schedule)})},N=function(){var e=Qe(Ze().mark(function e(){return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=1;break}return e.abrupt("return",alert("Select a track first."));case 1:return e.next=2,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/radio/station/").concat(h,"/add-track"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({track_id:m})});case 2:I(h);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Qe(Ze().mark(function e(t){var n,r,i,a,s;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.target.files[0])&&"audio/mpeg"===n.type){e.next=1;break}return y("❌ Please select a valid MP3 file."),e.abrupt("return");case 1:if(!(n.size>209715200)){e.next=2;break}return y("❌ MP3 must be under 200MB."),e.abrupt("return");case 2:return(r=new FormData).append("loop_audio",n),e.prev=3,e.next=4,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/radio/station/").concat(h,"/upload-loop"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:r});case 4:return i=e.sent,e.next=5,i.json();case 5:a=e.sent,i.ok?(y("✅ Loop uploaded successfully!"),I(h)):y("❌ Error: ".concat(a.error)),e.next=7;break;case 6:e.prev=6,s=e.catch(3),console.error(s),y("❌ Upload failed.");case 7:case"end":return e.stop()}},e,null,[[3,6]])}));return function(t){return e.apply(this,arguments)}}();return r.createElement("div",{className:"dashboard-container"},r.createElement(ui,null),r.createElement("div",{className:"content"},r.createElement("h1",null,"📻 Radio Station Dashboard"),r.createElement(kc,{earnings:x,followers:k}),r.createElement("h2",null,"Your Stations"),0===n.length?r.createElement("div",null,r.createElement("p",null,"No stations yet."),r.createElement(Ne,{to:"/create-radio"},r.createElement("button",{className:"btn-create"},"➕ Create Station"))):r.createElement("ul",null,n.map(function(e){return r.createElement("li",{key:e.id},r.createElement("strong",null,e.name),r.createElement("button",{onClick:function(){return I(e.id)}},"View"))})),h&&r.createElement(r.Fragment,null,r.createElement("h2",null,"🎵 Station Tracks"),r.createElement("ul",null,s.map(function(e){return r.createElement("li",{key:e.id},r.createElement("p",null,e.title),r.createElement("audio",{controls:!0,src:e.file_url}),e.cover_url&&r.createElement("img",{src:e.cover_url,alt:"cover",width:"50"}))})),r.createElement("h3",null,"Add a Track"),r.createElement("select",{value:m,onChange:function(e){return g(e.target.value)}},r.createElement("option",{value:""},"-- Select your uploaded track --"),c.map(function(e){return r.createElement("option",{key:e.id,value:e.id},e.title)})),r.createElement("button",{onClick:N},"Add"),r.createElement("h2",null,"🎙️ Live Streaming"),r.createElement(Tc,{isLive:A,stationId:h,onStart:function(){},onStop:function(){}}),r.createElement("h3",null,"🔁 Upload 3-Hour MP3 Loop"),r.createElement("input",{type:"file",accept:"audio/mp3",onChange:D}),b&&r.createElement("p",null,b),C&&r.createElement("div",null,r.createElement("h4",null,"Current Playlist Metadata:"),r.createElement("pre",null,JSON.stringify(C,null,2))),r.createElement("h3",null,"🔗 Public Station Link:"),r.createElement("p",null,r.createElement("a",{href:"/radio/".concat(h)},"streampirex.com/radio/",h)))))};var Ac=i(6686),Rc={};Rc.styleTagTransform=y(),Rc.setAttributes=m(),Rc.insert=f().bind(null,"head"),Rc.domAPI=d(),Rc.insertStyleElement=v(),c()(Ac.A,Rc),Ac.A&&Ac.A.locals&&Ac.A.locals;const Lc=function(){var e=qe((0,r.useState)([]),2),t=e[0],n=e[1],i=qe((0,r.useState)([]),2),a=i[0],s=i[1],o=qe((0,r.useState)(""),2),l=o[0],c=o[1],u=qe((0,r.useState)(""),2),d=u[0],h=u[1];(0,r.useEffect)(function(){fetch("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev/api/radio-stations").then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(e){return console.error("Error fetching radio stations:",e)})},[]),(0,r.useEffect)(function(){fetch("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev/api/radio/categories").then(function(e){return e.json()}).then(function(e){return s(e)}).catch(function(e){return console.error("Error fetching radio categories:",e)})},[]);var f=t.filter(function(e){return e.name.toLowerCase().includes(l.toLowerCase())&&(""===d||e.category===d)});return r.createElement("div",{className:"radio-stations-container"},r.createElement("h1",null,"📻 Browse Radio Stations"),r.createElement("input",{type:"text",placeholder:"Search radio stations...",className:"search-bar",value:l,onChange:function(e){return c(e.target.value)}}),r.createElement("div",{className:"categories-bar"},r.createElement("button",{className:"category-badge ".concat(""===d?"active":""),onClick:function(){return h("")}},"All"),a.map(function(e,t){return r.createElement("button",{key:t,className:"category-badge ".concat(d===e?"active":""),onClick:function(){return function(e){h(e===d?"":e)}(e)}},e)})),r.createElement("div",{className:"radio-list"},f.length>0?f.map(function(e){return r.createElement("div",{key:e.id,className:"radio-card"},r.createElement("h2",null,e.name),r.createElement("p",null,e.description),r.createElement("p",null,r.createElement("strong",null,"Category:")," ",e.category),e.is_live?r.createElement("audio",{controls:!0},r.createElement("source",{src:e.stream_url,type:"audio/mpeg"}),"Your browser does not support the audio element."):r.createElement("p",{className:"offline"},"🔴 Offline"),r.createElement(Ne,{to:"/radio-stations/".concat(e.id),className:"view-details"},"View Details →"))}):r.createElement("p",{className:"no-results"},"No radio stations found.")))};function Cc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ic(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ic(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Dc={container:{maxWidth:"700px",margin:"auto",padding:"20px",textAlign:"left",border:"2px solid #ddd",borderRadius:"10px",backgroundColor:"#fff",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)"},formSection:{marginBottom:"20px",padding:"15px",borderRadius:"8px",backgroundColor:"#f9f9f9"},sectionDescription:{fontSize:"14px",color:"#666",marginBottom:"15px",fontStyle:"italic"},input:{width:"100%",padding:"12px",marginBottom:"10px",borderRadius:"5px",border:"1px solid #ccc",fontSize:"16px",boxSizing:"border-box"},inputHalf:{width:"48%",padding:"12px",marginBottom:"10px",borderRadius:"5px",border:"1px solid #ccc",fontSize:"16px",boxSizing:"border-box"},rowInputs:{display:"flex",justifyContent:"space-between",gap:"10px"},textarea:{width:"100%",padding:"12px",marginBottom:"10px",borderRadius:"5px",border:"1px solid #ccc",minHeight:"80px",fontSize:"16px",boxSizing:"border-box"},select:{width:"100%",padding:"12px",marginBottom:"10px",borderRadius:"5px",border:"1px solid #ccc",fontSize:"16px"},button:{width:"100%",padding:"12px",backgroundColor:"#28A745",color:"#fff",borderRadius:"5px",cursor:"pointer",border:"none",fontSize:"16px"},message:{fontWeight:"bold",marginBottom:"10px",padding:"10px",borderRadius:"5px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6"},checkboxContainer:{display:"flex",alignItems:"center",marginBottom:"10px"},imageUploadContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"15px",marginBottom:"10px"},imageUploadBox:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},uploadPreview:{width:"150px",height:"150px",border:"2px dashed #ccc",borderRadius:"5px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px"},coverPreview:{width:"250px",height:"120px"},uploadHint:{fontSize:"12px",color:"#666",margin:"0"},audioUploadContainer:{marginBottom:"15px"},audioDropzone:{width:"100%",minHeight:"120px",border:"2px dashed #ccc",borderRadius:"8px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",backgroundColor:"#fafafa",transition:"border-color 0.3s ease",marginBottom:"15px"},uploadPrompt:{textAlign:"center",padding:"20px"},uploadIcon:{fontSize:"48px",marginBottom:"10px"},audioFileInfo:{display:"flex",alignItems:"center",gap:"15px",padding:"20px"},audioIcon:{fontSize:"48px",color:"#28A745"},audioPreview:{width:"300px",marginTop:"10px"},mixMetadata:{backgroundColor:"#fff",padding:"15px",borderRadius:"8px",border:"1px solid #e0e0e0"},nextStepsInfo:{textAlign:"center",marginTop:"15px",fontSize:"14px",color:"#666"}};const Oc=function(){var e=qe((0,r.useState)(""),2),t=e[0],n=e[1],i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=qe((0,r.useState)(""),2),l=o[0],c=o[1],u=qe((0,r.useState)([]),2),d=u[0],h=u[1],f=qe((0,r.useState)(""),2),p=f[0],m=f[1],g=qe((0,r.useState)(!1),2),v=g[0],b=g[1],y=qe((0,r.useState)(""),2),E=y[0],x=y[1],S=qe((0,r.useState)("24/7"),2),w=S[0],k=S[1],T=qe((0,r.useState)(!1),2),_=T[0],A=T[1],R=qe((0,r.useState)(""),2),L=R[0],C=R[1],P=qe((0,r.useState)(""),2),I=P[0],N=P[1],D=qe((0,r.useState)({website:"",instagram:"",twitter:""}),2),O=D[0],M=D[1],F=qe((0,r.useState)(null),2),B=F[0],U=F[1],j=qe((0,r.useState)(null),2),$=j[0],z=j[1],V=qe((0,r.useState)(null),2),G=V[0],H=V[1],W=qe((0,r.useState)(null),2),K=W[0],Y=W[1],q=qe((0,r.useState)(null),2),X=q[0],Q=q[1],J=qe((0,r.useState)(""),2),Z=J[0],ee=J[1],te=qe((0,r.useState)(""),2),ne=te[0],re=te[1],ie=qe((0,r.useState)(""),2),ae=ie[0],se=ie[1],oe=qe((0,r.useState)(""),2),le=oe[0],ce=oe[1],ue=qe((0,r.useState)(""),2),de=ue[0],he=ue[1],fe=qe((0,r.useState)(""),2),pe=fe[0],me=fe[1],ge=qe((0,r.useState)(null),2),ve=ge[0],be=ge[1],ye=(0,r.useRef)(null),Ee=(0,r.useRef)(null),xe=(0,r.useRef)(null);(0,r.useEffect)(function(){var e=function(){var e=Qe(Ze().mark(function e(){var t,n,r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev",console.log("🔍 Fetching categories from:","".concat(t,"/api/radio/categories")),e.next=1,fetch("".concat(t,"/api/radio/categories"));case 1:if(n=e.sent,console.log("📡 Categories response status:",n.status),n.ok){e.next=2;break}throw new Error("Failed to fetch categories: ".concat(n.status," ").concat(n.statusText));case 2:return e.next=3,n.json();case 3:r=e.sent,console.log("📋 Categories data:",r),h(r),e.next=5;break;case 4:e.prev=4,i=e.catch(0),console.error("❌ Error fetching categories:",i),h(["Top 40 & Pop Hits","Classic Pop","K-Pop & J-Pop","Indie & Alternative Pop","Classic Rock","Hard Rock & Metal","Alternative Rock","Punk Rock","Grunge","Hip-Hop & Rap","R&B & Soul","Neo-Soul","Old-School Hip-Hop","EDM","House & Deep House","Techno","Trance","Drum & Bass","Dubstep","Lo-Fi","Smooth Jazz","Classic Jazz","Blues & Soul Blues","Jazz Fusion","Swing & Big Band","Classical & Opera","Film Scores & Soundtracks","Instrumental & Piano Music","Reggaeton","Salsa & Merengue","Cumbia & Bachata","Afrobeat","Modern Country","Classic Country","Americana","Bluegrass","Reggae","Dancehall","Roots Reggae","50s & 60s Classics","70s & 80s Hits","90s & 2000s Throwbacks","Talk Radio","News","Sports","Comedy"]),m("⚠️ Using offline categories - some features may be limited.");case 5:case"end":return e.stop()}},e,null,[[0,4]])}));return function(){return e.apply(this,arguments)}}();e()},[]),(0,r.useEffect)(function(){return function(){G&&URL.revokeObjectURL(G),K&&URL.revokeObjectURL(K),ve&&URL.revokeObjectURL(ve)}},[G,K,ve]);var Se=function(e,t){M(function(n){return Nc(Nc({},n),{},We({},e,t))})},we=function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},ke=function(){var e=Qe(Ze().mark(function e(){var r,i,o,u,d,h,f,p,g,v;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim()&&l&&E.trim()){e.next=1;break}return m("❗ Station name, category, and target audience are required!"),e.abrupt("return");case 1:if(B){e.next=2;break}return m("❗ Please upload a logo for your station!"),e.abrupt("return");case 2:if(X){e.next=3;break}return m("❗ Please upload an initial mix to get your station started!"),e.abrupt("return");case 3:b(!0),m("🔄 Creating your radio station..."),e.prev=4,(r=new FormData).append("name",t.trim()),r.append("description",a.trim()),r.append("category",l),r.append("targetAudience",E.trim()),r.append("broadcastHours",w),r.append("isExplicit",_),r.append("tags",JSON.stringify(L.split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e}))),r.append("welcomeMessage",I.trim()),r.append("socialLinks",JSON.stringify(O)),B&&r.append("logo",B),$&&r.append("cover",$),X&&r.append("initialMix",X),r.append("mixTitle",Z.trim()),r.append("mixDescription",ne.trim()),r.append("djName",ae.trim()),r.append("bpm",le.trim()),r.append("mood",de.trim()),r.append("subGenres",pe.trim()),i="".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/profile/radio/create"),console.log("🚀 Creating station with endpoint:",i),console.log("📦 FormData contents:"),o=Cc(r.entries());try{for(o.s();!(u=o.n()).done;)d=qe(u.value,2),h=d[0],(f=d[1])instanceof File?console.log("".concat(h,": File(").concat(f.name,", ").concat(we(f.size),")")):console.log("".concat(h,": ").concat(f))}catch(e){o.e(e)}finally{o.f()}return e.next=5,fetch(i,{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:r});case 5:return p=e.sent,console.log("📡 Response status:",p.status,p.statusText),e.next=6,p.json();case 6:if(g=e.sent,console.log("📄 Response data:",g),!p.ok){e.next=7;break}m("🎶 Radio station created successfully!"),n(""),s(""),c(""),x(""),k("24/7"),A(!1),C(""),N(""),M({website:"",instagram:"",twitter:""}),U(null),z(null),H(null),Y(null),Q(null),ee(""),re(""),se(""),ce(""),he(""),me(""),be(null),m("🎶 Radio station created successfully! Redirecting to browse stations..."),setTimeout(function(){console.log("Navigate to: ".concat("/radio/browse"))},2e3),e.next=8;break;case 7:throw new Error(g.error||g.message||"Failed to create radio station");case 8:e.next=10;break;case 9:e.prev=9,v=e.catch(4),console.error("❌ Error creating radio station:",v),v.message.includes("fetch")?m("❌ Could not connect to server. Please check your connection and try again."):v.message.includes("401")?m("❌ Authentication error. Please log in again."):v.message.includes("413")?m("❌ Files too large. Please reduce file sizes and try again."):v.message.includes("500")?m("❌ Server error. Please try again later."):m("❌ Error: ".concat(v.message));case 10:return e.prev=10,b(!1),e.finish(10);case 11:case"end":return e.stop()}},e,null,[[4,9,10,11]])}));return function(){return e.apply(this,arguments)}}();return r.createElement("div",{style:Dc.container},r.createElement("h2",null,"Create a New Radio Station 🎙️"),p&&r.createElement("p",{style:Nc(Nc({},Dc.message),{},{color:p.includes("❌")?"#dc3545":p.includes("⚠️")?"#ffc107":p.includes("🔄")?"#007bff":"#28a745"})},p),r.createElement("div",{style:Dc.formSection},r.createElement("h3",null,"Basic Information"),r.createElement("input",{type:"text",placeholder:"Enter Radio Station Name *",value:t,onChange:function(e){return n(e.target.value)},style:Dc.input}),r.createElement("textarea",{placeholder:"Enter Description (optional)",value:a,onChange:function(e){return s(e.target.value)},style:Dc.textarea}),r.createElement("select",{value:l,onChange:function(e){return c(e.target.value)},style:Dc.select},r.createElement("option",{value:""},"🎵 Select a Category *"),d.map(function(e,t){return r.createElement("option",{key:t,value:e},e)}))),r.createElement("div",{style:Dc.formSection},r.createElement("h3",null,"🎧 Upload Your Initial Mix *"),r.createElement("p",{style:Dc.sectionDescription},"Upload a mix or playlist to get your station started. This will be the first thing listeners hear!"),r.createElement("div",{style:Dc.audioUploadContainer},r.createElement("div",{style:Nc(Nc({},Dc.audioDropzone),{},{borderColor:X?"#28A745":"#ccc"}),onClick:function(){return xe.current.click()}},X?r.createElement("div",{style:Dc.audioFileInfo},r.createElement("div",{style:Dc.audioIcon},"🎵"),r.createElement("div",null,r.createElement("strong",null,X.name),r.createElement("p",null,we(X.size)),ve&&r.createElement("audio",{controls:!0,style:Dc.audioPreview},r.createElement("source",{src:ve,type:X.type})))):r.createElement("div",{style:Dc.uploadPrompt},r.createElement("div",{style:Dc.uploadIcon},"🎧"),r.createElement("p",null,r.createElement("strong",null,"Click to upload your mix")),r.createElement("p",null,"MP3, WAV, or other audio formats • Max 120MB"))),r.createElement("input",{type:"file",ref:xe,accept:"audio/*",onChange:function(e){var t=e.target.files[0];if(t){if(!t.type.startsWith("audio/"))return void m("❗ Please upload a valid audio file");if(t.size>209715200)return void m("❗ Audio file must be less than 120MB");if(ve&&URL.revokeObjectURL(ve),Q(t),be(URL.createObjectURL(t)),!Z){var n=t.name.replace(/\.[^/.]+$/,"");ee(n)}m("")}},style:{display:"none"}})),X&&r.createElement("div",{style:Dc.mixMetadata},r.createElement("h4",null,"Mix Details"),r.createElement("input",{type:"text",placeholder:"Mix Title *",value:Z,onChange:function(e){return ee(e.target.value)},style:Dc.input}),r.createElement("div",{style:Dc.rowInputs},r.createElement("input",{type:"text",placeholder:"DJ Name (optional)",value:ae,onChange:function(e){return se(e.target.value)},style:Dc.inputHalf}),r.createElement("input",{type:"text",placeholder:"BPM (optional)",value:le,onChange:function(e){return ce(e.target.value)},style:Dc.inputHalf})),r.createElement("div",{style:Dc.rowInputs},r.createElement("input",{type:"text",placeholder:"Mood/Vibe (e.g., Chill, Energetic)",value:de,onChange:function(e){return he(e.target.value)},style:Dc.inputHalf}),r.createElement("input",{type:"text",placeholder:"Sub-genres (e.g., Deep House, Techno)",value:pe,onChange:function(e){return me(e.target.value)},style:Dc.inputHalf})),r.createElement("textarea",{placeholder:"Tracklist or Mix Notes (optional)",value:ne,onChange:function(e){return re(e.target.value)},style:Dc.textarea}))),r.createElement("div",{style:Dc.formSection},r.createElement("h3",null,"Station Visuals"),r.createElement("div",{style:Dc.imageUploadContainer},r.createElement("div",{style:Dc.imageUploadBox},r.createElement("h4",null,"Station Logo *"),r.createElement("div",{style:Nc(Nc({},Dc.uploadPreview),{},{backgroundImage:G?"url(".concat(G,")"):"none"}),onClick:function(){return ye.current.click()}},!G&&r.createElement("p",null,"Click to upload logo")),r.createElement("p",{style:Dc.uploadHint},"Square image, max 2MB"),r.createElement("input",{type:"file",ref:ye,accept:"image/jpeg, image/png, image/gif",onChange:function(e){var t=e.target.files[0];if(t){if(t.size>2097152)return void m("❗ Logo image must be less than 2MB");G&&URL.revokeObjectURL(G),U(t),H(URL.createObjectURL(t))}},style:{display:"none"}})),r.createElement("div",{style:Dc.imageUploadBox},r.createElement("h4",null,"Cover Image (Optional)"),r.createElement("div",{style:Nc(Nc(Nc({},Dc.uploadPreview),Dc.coverPreview),{},{backgroundImage:K?"url(".concat(K,")"):"none"}),onClick:function(){return Ee.current.click()}},!K&&r.createElement("p",null,"Click to upload cover")),r.createElement("p",{style:Dc.uploadHint},"Banner image, max 5MB"),r.createElement("input",{type:"file",ref:Ee,accept:"image/jpeg, image/png",onChange:function(e){var t=e.target.files[0];if(t){if(t.size>5242880)return void m("❗ Cover image must be less than 5MB");K&&URL.revokeObjectURL(K),z(t),Y(URL.createObjectURL(t))}},style:{display:"none"}})))),r.createElement("div",{style:Dc.formSection},r.createElement("h3",null,"Audience & Content"),r.createElement("input",{type:"text",placeholder:"Target Audience *",value:E,onChange:function(e){return x(e.target.value)},style:Dc.input}),r.createElement("select",{value:w,onChange:function(e){return k(e.target.value)},style:Dc.select},r.createElement("option",{value:"24/7"},"24/7 Broadcasting"),r.createElement("option",{value:"mornings"},"Morning Hours"),r.createElement("option",{value:"evenings"},"Evening Hours"),r.createElement("option",{value:"weekends"},"Weekends Only"),r.createElement("option",{value:"custom"},"Custom Schedule")),r.createElement("div",{style:Dc.checkboxContainer},r.createElement("input",{type:"checkbox",id:"explicitContent",checked:_,onChange:function(e){return A(e.target.checked)}}),r.createElement("label",{htmlFor:"explicitContent"},"Contains explicit content")),r.createElement("input",{type:"text",placeholder:"Tags (comma-separated)",value:L,onChange:function(e){return C(e.target.value)},style:Dc.input}),r.createElement("textarea",{placeholder:"Welcome Message for Listeners",value:I,onChange:function(e){return N(e.target.value)},style:Dc.textarea})),r.createElement("div",{style:Dc.formSection},r.createElement("h3",null,"Social Media Links"),r.createElement("input",{type:"url",placeholder:"Website URL",value:O.website,onChange:function(e){return Se("website",e.target.value)},style:Dc.input}),r.createElement("input",{type:"text",placeholder:"Instagram Handle",value:O.instagram,onChange:function(e){return Se("instagram",e.target.value)},style:Dc.input}),r.createElement("input",{type:"text",placeholder:"Twitter Handle",value:O.twitter,onChange:function(e){return Se("twitter",e.target.value)},style:Dc.input})),r.createElement("button",{onClick:ke,style:Dc.button,disabled:v},v?"⏳ Creating Station...":"📡 Create Station"),r.createElement("p",{style:Dc.nextStepsInfo},"After creating your station, you'll be able to upload more music and manage your playlists."))};var Mc=i(5879),Fc={};Fc.styleTagTransform=y(),Fc.setAttributes=m(),Fc.insert=f().bind(null,"head"),Fc.domAPI=d(),Fc.insertStyleElement=v(),c()(Mc.A,Fc),Mc.A&&Mc.A.locals&&Mc.A.locals;const Bc=function(){var e=(0,r.useRef)(null),t=(de(),qe((0,r.useState)(["Lo-Fi","Jazz","Reggae","Electronic","Talk Radio","Rock","Hip Hop","Classical","Indie","Ambient","Soul","R&B","Funk","Country","Latin","Afrobeats","K-Pop","Pop","House","Techno","Dubstep","News","Sports","Spiritual"]),1)[0]),n=qe((0,r.useState)([]),2),i=n[0],a=n[1],s=qe((0,r.useState)(null),2),o=s[0],l=s[1],c=qe((0,r.useState)(!0),2),u=c[0],d=c[1],h=qe((0,r.useState)(null),2),f=h[0],p=h[1],m=qe((0,r.useState)(!1),2),g=m[0],v=m[1],b=[{id:"static1",name:"LoFi Dreams",genre:"Lo-Fi",description:"Relaxing lo-fi beats.",image:Ro},{id:"static2",name:"Jazz Lounge",genre:"Jazz",description:"Smooth & classy jazz.",image:Lo},{id:"static3",name:"Talk Nation",genre:"Talk Radio",description:"News and discussions.",image:Co},{id:"static4",name:"Electric Vibes",genre:"Electronic",description:"Club and synth mixes.",image:Po},{id:"static5",name:"Reggae Rootz",genre:"Reggae",description:"Island rhythms and roots.",image:Io},{id:"static6",name:"Morning Classical",genre:"Classical",description:"Uplifting orchestral works.",image:No},{id:"static7",name:"Pop Pulse",genre:"Pop",description:"Top charting hits.",image:Do},{id:"static8",name:"Rock Rumble",genre:"Rock",description:"Hard-hitting rock classics.",image:Oo},{id:"static9",name:"Urban Soul",genre:"Soul",description:"Silky vocals & slow grooves.",image:Mo},{id:"static10",name:"Chill Hop Cafe",genre:"Hip Hop",description:"Instrumental hip hop.",image:Fo},{id:"static11",name:"Cosmic Jazz",genre:"Jazz",description:"Out-of-this-world improvisation.",image:Bo},{id:"static12",name:"LoFi Temple",genre:"Lo-Fi",description:"Zen and mellow beats.",image:Uo},{id:"static13",name:"The Synth Lords",genre:"Electronic",description:"Retro synthwave duos.",image:jo},{id:"static14",name:"Velvet Echo",genre:"Soul",description:"Smooth vocal powerhouse.",image:$o},{id:"static15",name:"DJ Nova",genre:"House",description:"Galactic EDM grooves.",image:zo},{id:"static16",name:"The Groove Mechanics",genre:"Funk",description:"Bass-heavy funkadelics.",image:Vo},{id:"static17",name:"Indigo Rain",genre:"Indie",description:"Dreamy alternative sounds.",image:Go},{id:"static18",name:"Zara Moonlight",genre:"Pop",description:"Chart-topping solo artist.",image:Ho}];(0,r.useEffect)(function(){var e=function(){var e=Qe(Ze().mark(function e(){var t,n,r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),p(null),v(!1),t="MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev",console.log("Fetching from:","".concat(t,"/api/radio-stations")),e.next=1,fetch("".concat(t,"/api/radio-stations"));case 1:if(n=e.sent,console.log("Response status:",n.status,"OK:",n.ok),n.ok){e.next=2;break}throw new Error("Server error: ".concat(n.status," ").concat(n.statusText));case 2:return e.next=3,n.json();case 3:r=e.sent,console.log("Received data:",r),v(!0),Array.isArray(r)?(a(r),console.log("✅ Loaded ".concat(r.length," stations from API"))):r&&Array.isArray(r.stations)?(a(r.stations),console.log("✅ Loaded ".concat(r.stations.length," stations from data.stations"))):(console.log("✅ API successful but unexpected format, using featured stations only"),a([])),p(null),e.next=5;break;case 4:e.prev=4,i=e.catch(0),console.error("❌ API call failed:",i),v(!1),p(i.message),a([]);case 5:return e.prev=5,d(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[0,4,5,6]])}));return function(){return e.apply(this,arguments)}}();e()},[]);var y=[].concat(b,vo(i)),E=o?y.filter(function(e){return e.genre===o}):y,x=function(e,t){return 0===t.length?r.createElement("div",{className:"podcast-section"},r.createElement("h2",{className:"section-title"},e),r.createElement("p",{className:"no-stations"},"No radio stations found in this category.")):r.createElement("div",{className:"podcast-section"},r.createElement("h2",{className:"section-title"},e),r.createElement("div",{className:"podcast-scroll-row"},t.map(function(e){var t=String(e.id||"").startsWith("static"),n="/radio/station/".concat(e.id,t?"/static":"/dynamic");return r.createElement(Ne,{to:n,key:e.id,className:"podcast-card"},r.createElement("img",{src:e.image||e.cover_art_url||e.logo_url,alt:e.name,className:"podcast-img"}),r.createElement("h3",{className:"podcast-title"},e.name),r.createElement("span",{className:"podcast-label"},e.genre),r.createElement("p",{className:"podcast-desc"},e.description))})))};return r.createElement("div",{className:"categories-wrapper"},r.createElement("h1",{className:"categories-heading"},"📡 Browse Radio Stations"),f&&!g&&r.createElement("div",{className:"error-message",style:{background:"#fee",border:"1px solid #fcc",padding:"10px",borderRadius:"5px",margin:"10px 0",color:"#c33"}},"⚠️ Could not load radio stations from server: ",f),r.createElement("div",{className:"category-nav"},r.createElement("button",{onClick:function(){e.current&&(e.current.scrollLeft-=200)},className:"scroll-button"},"‹"),r.createElement("div",{className:"categories-scroll",ref:e},u?r.createElement("div",{className:"loading-spinner"},"Loading genres..."):t.map(function(e,t){return r.createElement("div",{key:t,onClick:function(){return l(e)},className:"category-pill ".concat(o===e?"active":"")},e)})),r.createElement("button",{onClick:function(){e.current&&(e.current.scrollLeft+=200)},className:"scroll-button"},"›")),o?x("🎯 ".concat(o," Stations"),E):r.createElement(r.Fragment,null,x("🆕 Featured Stations",b.slice(0,6)),x("📻 Top Radio Stations",b.slice(6,12)),x("🌟 Popular Artists",b.slice(12)),i.length>0&&x("🌐 Live Stations",i)))};function Uc(e){return e+.5|0}const jc=(e,t,n)=>Math.max(Math.min(e,n),t);function $c(e){return jc(Uc(2.55*e),0,255)}function zc(e){return jc(Uc(255*e),0,255)}function Vc(e){return jc(Uc(e/2.55)/100,0,1)}function Gc(e){return jc(Uc(100*e),0,100)}const Hc={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Wc=[..."0123456789ABCDEF"],Kc=e=>Wc[15&e],Yc=e=>Wc[(240&e)>>4]+Wc[15&e],qc=e=>(240&e)>>4==(15&e);const Xc=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Qc(e,t,n){const r=t*Math.min(n,1-n),i=(t,i=(t+e/30)%12)=>n-r*Math.max(Math.min(i-3,9-i,1),-1);return[i(0),i(8),i(4)]}function Jc(e,t,n){const r=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Zc(e,t,n){const r=Qc(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function eu(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),a=Math.min(t,n,r),s=(i+a)/2;let o,l,c;return i!==a&&(c=i-a,l=s>.5?c/(2-i-a):c/(i+a),o=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),o=60*o+.5),[0|o,l||0,s]}function tu(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(zc)}function nu(e,t,n){return tu(Qc,e,t,n)}function ru(e){return(e%360+360)%360}const iu={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},au={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let su;const ou=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,lu=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,cu=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function uu(e,t,n){if(e){let r=eu(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=nu(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function du(e,t){return e?Object.assign(t||{},e):e}function hu(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=zc(e[3]))):(t=du(e,{r:0,g:0,b:0,a:1})).a=zc(t.a),t}function fu(e){return"r"===e.charAt(0)?function(e){const t=ou.exec(e);let n,r,i,a=255;if(t){if(t[7]!==n){const e=+t[7];a=t[8]?$c(e):jc(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?$c(n):jc(n,0,255)),r=255&(t[4]?$c(r):jc(r,0,255)),i=255&(t[6]?$c(i):jc(i,0,255)),{r:n,g:r,b:i,a}}}(e):function(e){const t=Xc.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?$c(+t[5]):zc(+t[5]));const i=ru(+t[2]),a=+t[3]/100,s=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return tu(Zc,e,t,n)}(i,a,s):"hsv"===t[1]?function(e,t,n){return tu(Jc,e,t,n)}(i,a,s):nu(i,a,s),{r:n[0],g:n[1],b:n[2],a:r}}(e)}class pu{constructor(e){if(e instanceof pu)return e;const t=typeof e;let n;var r,i,a;"object"===t?n=hu(e):"string"===t&&(a=(r=e).length,"#"===r[0]&&(4===a||5===a?i={r:255&17*Hc[r[1]],g:255&17*Hc[r[2]],b:255&17*Hc[r[3]],a:5===a?17*Hc[r[4]]:255}:7!==a&&9!==a||(i={r:Hc[r[1]]<<4|Hc[r[2]],g:Hc[r[3]]<<4|Hc[r[4]],b:Hc[r[5]]<<4|Hc[r[6]],a:9===a?Hc[r[7]]<<4|Hc[r[8]]:255})),n=i||function(e){su||(su=function(){const e={},t=Object.keys(au),n=Object.keys(iu);let r,i,a,s,o;for(r=0;r<t.length;r++){for(s=o=t[r],i=0;i<n.length;i++)a=n[i],o=o.replace(a,iu[a]);a=parseInt(au[s],16),e[o]=[a>>16&255,a>>8&255,255&a]}return e}(),su.transparent=[0,0,0,0]);const t=su[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(e)||fu(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=du(this._rgb);return e&&(e.a=Vc(e.a)),e}set rgb(e){this._rgb=hu(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Vc(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?function(e){var t=(e=>qc(e.r)&&qc(e.g)&&qc(e.b)&&qc(e.a))(e)?Kc:Yc;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=eu(e),n=t[0],r=Gc(t[1]),i=Gc(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${i}%, ${Vc(e.a)})`:`hsl(${n}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const a=t===i?.5:t,s=2*a-1,o=n.a-r.a,l=((s*o===-1?s:(s+o)/(1+s*o))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=cu(Vc(e.r)),i=cu(Vc(e.g)),a=cu(Vc(e.b));return{r:zc(lu(r+n*(cu(Vc(t.r))-r))),g:zc(lu(i+n*(cu(Vc(t.g))-i))),b:zc(lu(a+n*(cu(Vc(t.b))-a))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new pu(this.rgb)}alpha(e){return this._rgb.a=zc(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Uc(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return uu(this._rgb,2,e),this}darken(e){return uu(this._rgb,2,-e),this}saturate(e){return uu(this._rgb,1,e),this}desaturate(e){return uu(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=eu(e);n[0]=ru(n[0]+t),n=nu(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function mu(){}const gu=(()=>{let e=0;return()=>e++})();function vu(e){return null==e}function bu(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function yu(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Eu(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function xu(e,t){return Eu(e)?e:t}function Su(e,t){return void 0===e?t:e}const wu=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ku(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)}function Tu(e,t,n,r){let i,a,s;if(bu(e))if(a=e.length,r)for(i=a-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<a;i++)t.call(n,e[i],i);else if(yu(e))for(s=Object.keys(e),a=s.length,i=0;i<a;i++)t.call(n,e[s[i]],s[i])}function _u(e,t){let n,r,i,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],a=t[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function Au(e){if(bu(e))return e.map(Au);if(yu(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=Au(e[n[i]]);return t}return e}function Ru(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Lu(e,t,n,r){if(!Ru(e))return;const i=t[e],a=n[e];yu(i)&&yu(a)?Cu(i,a,r):t[e]=Au(a)}function Cu(e,t,n){const r=bu(t)?t:[t],i=r.length;if(!yu(e))return e;const a=(n=n||{}).merger||Lu;let s;for(let t=0;t<i;++t){if(s=r[t],!yu(s))continue;const i=Object.keys(s);for(let t=0,r=i.length;t<r;++t)a(i[t],e,s,n)}return e}function Pu(e,t){return Cu(e,t,{merger:Iu})}function Iu(e,t,n){if(!Ru(e))return;const r=t[e],i=n[e];yu(r)&&yu(i)?Pu(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Au(i))}const Nu={"":e=>e,x:e=>e.x,y:e=>e.y};function Du(e,t){const n=Nu[t]||(Nu[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const e of t)r+=e,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Ou(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Mu=e=>void 0!==e,Fu=e=>"function"==typeof e,Bu=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},Uu=Math.PI,ju=2*Uu,$u=ju+Uu,zu=Number.POSITIVE_INFINITY,Vu=Uu/180,Gu=Uu/2,Hu=Uu/4,Wu=2*Uu/3,Ku=Math.log10,Yu=Math.sign;function qu(e,t,n){return Math.abs(e-t)<n}function Xu(e){const t=Math.round(e);e=qu(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Ku(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Qu(e){return!function(e){return"symbol"==typeof e||"object"==typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Ju(e,t,n){let r,i,a;for(r=0,i=e.length;r<i;r++)a=e[r][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function Zu(e){return e*(Uu/180)}function ed(e){return e*(180/Uu)}function td(e){if(!Eu(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function nd(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*Uu&&(a+=ju),{angle:a,distance:i}}function rd(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function id(e,t){return(e-t+$u)%ju-Uu}function ad(e){return(e%ju+ju)%ju}function sd(e,t,n,r){const i=ad(e),a=ad(t),s=ad(n),o=ad(a-i),l=ad(s-i),c=ad(i-a),u=ad(i-s);return i===a||i===s||r&&a===s||o>l&&c<u}function od(e,t,n){return Math.max(t,Math.min(n,e))}function ld(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function cd(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,a=0;for(;i-a>1;)r=a+i>>1,n(r)?a=r:i=r;return{lo:a,hi:i}}const ud=(e,t,n,r)=>cd(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),dd=(e,t,n)=>cd(e,n,r=>e[r][t]>=n),hd=["push","pop","shift","splice","unshift"];function fd(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(hd.forEach(t=>{delete e[t]}),delete e._chartjs)}function pd(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const md="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function gd(e,t){let n=[],r=!1;return function(...i){n=i,r||(r=!0,md.call(window,()=>{r=!1,e.apply(t,n)}))}}const vd=e=>"start"===e?"left":"end"===e?"right":"center",bd=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function yd(e,t,n){const r=t.length;let i=0,a=r;if(e._sorted){const{iScale:s,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=s.axis,{min:d,max:h,minDefined:f,maxDefined:p}=s.getUserBounds();if(f){if(i=Math.min(ud(l,u,d).lo,n?r:ud(t,u,s.getPixelForValue(d)).lo),c){const e=l.slice(0,i+1).reverse().findIndex(e=>!vu(e[o.axis]));i-=Math.max(0,e)}i=od(i,0,r-1)}if(p){let e=Math.max(ud(l,s.axis,h,!0).hi+1,n?0:ud(t,u,s.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!vu(e[o.axis]));e+=Math.max(0,t)}a=od(e,i,r)-i}else a=r-i}return{start:i,count:a}}function Ed(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const a=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),a}const xd=e=>0===e||1===e,Sd=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ju/n),wd=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ju/n)+1,kd={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Gu),easeOutSine:e=>Math.sin(e*Gu),easeInOutSine:e=>-.5*(Math.cos(Uu*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>xd(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>xd(e)?e:Sd(e,.075,.3),easeOutElastic:e=>xd(e)?e:wd(e,.075,.3),easeInOutElastic(e){const t=.1125;return xd(e)?e:e<.5?.5*Sd(2*e,t,.45):.5+.5*wd(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-kd.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*kd.easeInBounce(2*e):.5*kd.easeOutBounce(2*e-1)+.5};function Td(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function _d(e){return Td(e)?e:new pu(e)}function Ad(e){return Td(e)?e:new pu(e).saturate(.5).darken(.1).hexString()}const Rd=["x","y","borderWidth","radius","tension"],Ld=["color","borderColor","backgroundColor"],Cd=new Map;function Pd(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=Cd.get(n);return r||(r=new Intl.NumberFormat(e,t),Cd.set(n,r)),r}(t,n).format(e)}const Id={values:e=>bu(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,a=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),a=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}(e,n)}const s=Ku(Math.abs(a)),o=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Pd(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Ku(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?Id.numeric.call(this,e,t,n):""}};var Nd={formatters:Id};const Dd=Object.create(null),Od=Object.create(null);function Md(e,t){if(!t)return e;const n=t.split(".");for(let t=0,r=n.length;t<r;++t){const r=n[t];e=e[r]||(e[r]=Object.create(null))}return e}function Fd(e,t,n){return"string"==typeof t?Cu(Md(e,t),n):Cu(Md(e,""),t)}class Bd{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Ad(t.backgroundColor),this.hoverBorderColor=(e,t)=>Ad(t.borderColor),this.hoverColor=(e,t)=>Ad(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Fd(this,e,t)}get(e){return Md(this,e)}describe(e,t){return Fd(Od,e,t)}override(e,t){return Fd(Dd,e,t)}route(e,t,n,r){const i=Md(this,e),a=Md(this,n),s="_"+t;Object.defineProperties(i,{[s]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=a[r];return yu(e)?Object.assign({},t,e):Su(e,t)},set(e){this[s]=e}}})}apply(e){e.forEach(e=>e(this))}}var Ud=new Bd({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Ld},numbers:{type:"number",properties:Rd}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Nd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function jd(e,t,n,r,i){let a=t[i];return a||(a=t[i]=e.measureText(i).width,n.push(i)),a>r&&(r=a),r}function $d(e,t,n,r){let i=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},a=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let s=0;const o=n.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=n[l],null==d||bu(d)){if(bu(d))for(c=0,u=d.length;c<u;c++)h=d[c],null==h||bu(h)||(s=jd(e,i,a,s,h))}else s=jd(e,i,a,s,d);e.restore();const f=a.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[a[l]];a.splice(0,f)}return s}function zd(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function Vd(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Gd(e,t,n,r){Hd(e,t,n,r,null)}function Hd(e,t,n,r,i){let a,s,o,l,c,u,d,h;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*Vu;if(f&&"object"==typeof f&&(a=f.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,m,0,0,ju):e.arc(n,r,m,0,ju),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=Wu,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=Wu,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,s=Math.cos(g+Hu)*l,d=Math.cos(g+Hu)*(i?i/2-c:l),o=Math.sin(g+Hu)*l,h=Math.sin(g+Hu)*(i?i/2-c:l),e.arc(n-d,r-o,c,g-Uu,g-Gu),e.arc(n+h,r-s,c,g-Gu,g),e.arc(n+d,r+o,c,g,g+Gu),e.arc(n-h,r+s,c,g+Gu,g+Uu),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}g+=Hu;case"rectRot":d=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-o),e.lineTo(n+h,r-s),e.lineTo(n+d,r+o),e.lineTo(n-h,r+s),e.closePath();break;case"crossRot":g+=Hu;case"cross":d=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s);break;case"star":d=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s),g+=Hu,d=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s);break;case"line":s=i?i/2:Math.cos(g)*m,o=Math.sin(g)*m,e.moveTo(n-s,r-o),e.lineTo(n+s,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Wd(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Kd(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Yd(e){e.restore()}function qd(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Xd(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Qd(e,t,n,r,i){if(i.strikethrough||i.underline){const a=e.measureText(r),s=t-a.actualBoundingBoxLeft,o=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,c=n+a.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(s,u),e.lineTo(o,u),e.stroke()}}function Jd(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Zd(e,t,n,r,i,a={}){const s=bu(t)?t:[t],o=a.strokeWidth>0&&""!==a.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),vu(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),l=0;l<s.length;++l)c=s[l],a.backdrop&&Jd(e,a.backdrop),o&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),vu(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(c,n,r,a.maxWidth)),e.fillText(c,n,r,a.maxWidth),Qd(e,n,r,c,a),r+=Number(i.lineHeight);e.restore()}function eh(e,t){const{x:n,y:r,w:i,h:a,radius:s}=t;e.arc(n+s.topLeft,r+s.topLeft,s.topLeft,1.5*Uu,Uu,!0),e.lineTo(n,r+a-s.bottomLeft),e.arc(n+s.bottomLeft,r+a-s.bottomLeft,s.bottomLeft,Uu,Gu,!0),e.lineTo(n+i-s.bottomRight,r+a),e.arc(n+i-s.bottomRight,r+a-s.bottomRight,s.bottomRight,Gu,0,!0),e.lineTo(n+i,r+s.topRight),e.arc(n+i-s.topRight,r+s.topRight,s.topRight,0,-Gu,!0),e.lineTo(n+s.topLeft,r)}const th=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,nh=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function rh(e,t){const n=(""+e).match(th);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const ih=e=>+e||0;function ah(e,t){const n={},r=yu(t),i=r?Object.keys(t):t,a=yu(e)?r?n=>Su(e[n],e[t[n]]):t=>e[t]:()=>e;for(const e of i)n[e]=ih(a(e));return n}function sh(e){return ah(e,{top:"y",right:"x",bottom:"y",left:"x"})}function oh(e){return ah(e,["topLeft","topRight","bottomLeft","bottomRight"])}function lh(e){const t=sh(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ch(e,t){e=e||{},t=t||Ud.font;let n=Su(e.size,t.size);"string"==typeof n&&(n=parseInt(n,10));let r=Su(e.style,t.style);r&&!(""+r).match(nh)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Su(e.family,t.family),lineHeight:rh(Su(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Su(e.weight,t.weight),string:""};return i.string=function(e){return!e||vu(e.size)||vu(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function uh(e,t,n,r){let i,a,s,o=!0;for(i=0,a=e.length;i<a;++i)if(s=e[i],void 0!==s&&(void 0!==t&&"function"==typeof s&&(s=s(t),o=!1),void 0!==n&&bu(s)&&(s=s[n%s.length],o=!1),void 0!==s))return r&&!o&&(r.cacheable=!1),s}function dh(e,t){return Object.assign(Object.create(e),t)}function hh(e,t=[""],n,r,i=()=>e[0]){const a=n||e;void 0===r&&(r=wh("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:r,_getTarget:i,override:n=>hh([n,...e],t,a,r)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>vh(n,r,()=>function(e,t,n,r){let i;for(const a of t)if(i=wh(mh(a,e),n),void 0!==i)return gh(e,i)?xh(n,r,e,i):i}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>kh(e).includes(t),ownKeys:e=>kh(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function fh(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:ph(e,r),setContext:t=>fh(e,t,n,r),override:i=>fh(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>vh(e,t,()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:a,_descriptors:s}=e;let o=r[t];return Fu(o)&&s.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:i,_context:a,_subProxy:s,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(a,s||r);return o.delete(e),gh(e,l)&&(l=xh(i._scopes,i,e,l)),l}(t,o,e,n)),bu(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:i,_context:a,_subProxy:s,_descriptors:o}=n;if(void 0!==a.index&&r(e))return t[a.index%t.length];if(yu(t[0])){const n=t,r=i._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=xh(r,i,e,l);t.push(fh(n,a,s&&s[e],o))}}return t}(t,o,e,s.isIndexable)),gh(t,o)&&(o=fh(o,i,a&&a[t],s)),o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function ph(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Fu(n)?n:()=>n,isIndexable:Fu(r)?r:()=>r}}const mh=(e,t)=>e?e+Ou(t):t,gh=(e,t)=>yu(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function vh(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function bh(e,t,n){return Fu(e)?e(t,n):e}const yh=(e,t)=>!0===e?t:"string"==typeof e?Du(t,e):void 0;function Eh(e,t,n,r,i){for(const a of t){const t=yh(n,a);if(t){e.add(t);const a=bh(t._fallback,n,i);if(void 0!==a&&a!==n&&a!==r)return a}else if(!1===t&&void 0!==r&&n!==r)return null}return!1}function xh(e,t,n,r){const i=t._rootScopes,a=bh(t._fallback,n,r),s=[...e,...i],o=new Set;o.add(r);let l=Sh(o,s,n,a||n,r);return null!==l&&(void 0===a||a===n||(l=Sh(o,s,a,l,r),null!==l))&&hh(Array.from(o),[""],i,a,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];return bu(i)&&yu(n)?n:i||{}}(t,n,r))}function Sh(e,t,n,r,i){for(;n;)n=Eh(e,t,n,r,i);return n}function wh(e,t){for(const n of t){if(!n)continue;const t=n[e];if(void 0!==t)return t}}function kh(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Th(e,t,n,r){const{iScale:i}=e,{key:a="r"}=this._parsing,s=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],s[o]={r:i.parse(Du(u,a),c)};return s}const _h=Number.EPSILON||1e-14,Ah=(e,t)=>t<e.length&&!e[t].skip&&e[t],Rh=e=>"x"===e?"y":"x";function Lh(e,t,n,r){const i=e.skip?t:e,a=t,s=n.skip?t:n,o=rd(a,i),l=rd(s,a);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:a.x-d*(s.x-i.x),y:a.y-d*(s.y-i.y)},next:{x:a.x+h*(s.x-i.x),y:a.y+h*(s.y-i.y)}}}function Ch(e,t,n){return Math.max(Math.min(e,n),t)}function Ph(e,t,n,r,i){let a,s,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)!function(e,t="x"){const n=Rh(t),r=e.length,i=Array(r).fill(0),a=Array(r);let s,o,l,c=Ah(e,0);for(s=0;s<r;++s)if(o=l,l=c,c=Ah(e,s+1),l){if(c){const e=c[t]-l[t];i[s]=0!==e?(c[n]-l[n])/e:0}a[s]=o?c?Yu(i[s-1])!==Yu(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}!function(e,t,n){const r=e.length;let i,a,s,o,l,c=Ah(e,0);for(let u=0;u<r-1;++u)l=c,c=Ah(e,u+1),l&&c&&(qu(t[u],0,_h)?n[u]=n[u+1]=0:(i=n[u]/t[u],a=n[u+1]/t[u],o=Math.pow(i,2)+Math.pow(a,2),o<=9||(s=3/Math.sqrt(o),n[u]=i*s*t[u],n[u+1]=a*s*t[u])))}(e,i,a),function(e,t,n="x"){const r=Rh(n),i=e.length;let a,s,o,l=Ah(e,0);for(let c=0;c<i;++c){if(s=o,o=l,l=Ah(e,c+1),!o)continue;const i=o[n],u=o[r];s&&(a=(i-s[n])/3,o[`cp1${n}`]=i-a,o[`cp1${r}`]=u-a*t[c]),l&&(a=(l[n]-i)/3,o[`cp2${n}`]=i+a,o[`cp2${r}`]=u+a*t[c])}}(e,a,t)}(e,i);else{let n=r?e[e.length-1]:e[0];for(a=0,s=e.length;a<s;++a)o=e[a],l=Lh(n,o,e[Math.min(a+1,s-(r?0:1))%s],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,i,a,s,o=Wd(e[0],t);for(n=0,r=e.length;n<r;++n)s=a,a=o,o=n<r-1&&Wd(e[n+1],t),a&&(i=e[n],s&&(i.cp1x=Ch(i.cp1x,t.left,t.right),i.cp1y=Ch(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=Ch(i.cp2x,t.left,t.right),i.cp2y=Ch(i.cp2y,t.top,t.bottom)))}(e,n)}function Ih(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Nh(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Dh(e,t,n){let r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const Oh=e=>e.ownerDocument.defaultView.getComputedStyle(e,null),Mh=["top","right","bottom","left"];function Fh(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const a=Mh[i];r[a]=parseFloat(e[t+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Bh(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=Oh(n),a="border-box"===i.boxSizing,s=Fh(i,"padding"),o=Fh(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:a}=r;let s,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,a,e.target))s=i,o=a;else{const e=t.getBoundingClientRect();s=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:s,y:o,box:l}}(e,n),d=s.left+(u&&o.left),h=s.top+(u&&o.top);let{width:f,height:p}=t;return a&&(f-=s.width+o.width,p-=s.height+o.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}const Uh=e=>Math.round(10*e)/10;function jh(e,t,n){const r=t||1,i=Math.floor(e.height*r),a=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||s.height!==i||s.width!==a)&&(e.currentDevicePixelRatio=r,s.height=i,s.width=a,e.ctx.setTransform(r,0,0,r,0,0),!0)}const $h=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Ih()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(e){}return e}();function zh(e,t){const n=function(e,t){return Oh(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Vh(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Gh(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Hh(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},s=Vh(e,i,n),o=Vh(i,a,n),l=Vh(a,t,n),c=Vh(s,o,n),u=Vh(o,l,n);return Vh(c,u,n)}function Wh(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Kh(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Yh(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function qh(e){return"angle"===e?{between:sd,compare:id,normalize:ad}:{between:ld,compare:(e,t)=>e-t,normalize:e=>e}}function Xh({start:e,end:t,count:n,loop:r,style:i}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n==0,style:i}}function Qh(e,t,n){if(!n)return[e];const{property:r,start:i,end:a}=n,s=t.length,{compare:o,between:l,normalize:c}=qh(r),{start:u,end:d,loop:h,style:f}=function(e,t,n){const{property:r,start:i,end:a}=n,{between:s,normalize:o}=qh(r),l=t.length;let c,u,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&s(o(t[d%l][r]),i,a);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),p=[];let m,g,v,b=!1,y=null;const E=()=>b||l(i,v,m)&&0!==o(i,v),x=()=>!b||0===o(a,m)||l(a,v,m);for(let e=u,n=u;e<=d;++e)g=t[e%s],g.skip||(m=c(g[r]),m!==v&&(b=l(m,i,a),null===y&&E()&&(y=0===o(m,i)?e:n),null!==y&&x()&&(p.push(Xh({start:y,end:e,loop:h,count:s,style:f})),y=null),n=e,v=m));return null!==y&&p.push(Xh({start:y,end:d,loop:h,count:s,style:f})),p}function Jh(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const a=Qh(r[i],e.points,t);a.length&&n.push(...a)}return n}function Zh(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ef(e,t){if(!t)return!1;const n=[],r=function(e,t){return Td(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function tf(e,t,n){return e.options.clip?e[n]:t[n]}function nf(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:tf(n,t,"left"),right:tf(n,t,"right"),top:tf(r,t,"top"),bottom:tf(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class rf{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],a=t.duration;i.forEach(r=>r({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=md.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let a,s=i.length-1,o=!1;for(;s>=0;--s)a=i[s],a._active?(a._total>n.duration&&(n.duration=a._total),a.tick(e),o=!0):(i[s]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var af=new rf;const sf="transparent",of={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=_d(e||sf),i=r.valid&&_d(t||sf);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class lf{constructor(e,t,n,r){const i=t[n];r=uh([e.to,r,i,e.from]);const a=uh([e.from,i,r]);this._active=!0,this._fn=e.fn||of[e.type||typeof a],this._easing=kd[e.easing]||kd.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=uh([e.to,t,r,e.from]),this._from=uh([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,a=this._loop,s=this._to;let o;if(this._active=i!==s&&(a||t<n),!this._active)return this._target[r]=s,void this._notify(!0);t<0?this._target[r]=i:(o=t/n%2,o=a&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(i,s,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let e=0;e<n.length;e++)n[e][t]()}}class cf{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!yu(e))return;const t=Object.keys(Ud.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!yu(i))return;const a={};for(const e of t)a[e]=i[e];(bu(i.properties)&&i.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,a)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(n)return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;e.options=t}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let t=0;t<r.length;t++){const i=e[r[t]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),a=Object.keys(t),s=Date.now();let o;for(o=a.length-1;o>=0;--o){const l=a[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,s);continue}u.cancel()}d&&d.duration?(i[l]=u=new lf(d,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(af.add(this._chart,n),!0):void 0}}function uf(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:r?a:i,end:r?i:a}}function df(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,a;for(i=0,a=r.length;i<a;++i)n.push(r[i].index);return n}function hf(e,t,n,r={}){const i=e.keys,a="single"===r.mode;let s,o,l,c;if(null===t)return;let u=!1;for(s=0,o=i.length;s<o;++s){if(l=+i[s],l===n){if(u=!0,r.all)continue;break}c=e.values[l],Eu(c)&&(a||0===t||Yu(t)===Yu(c))&&(t+=c)}return u||r.all?t:0}function ff(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function pf(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function mf(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function gf(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:a,vScale:s,index:o}=r,l=a.axis,c=s.axis,u=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(a,s,r),d=t.length;let h;for(let e=0;e<d;++e){const n=t[e],{[l]:a,[c]:d}=n;h=(n._stacks||(n._stacks={}))[c]=pf(i,u,a),h[o]=d,h._top=mf(h,s,!0,r.type),h._bottom=mf(h,s,!1,r.type),(h._visualValues||(h._visualValues={}))[o]=d}}function vf(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function bf(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const yf=e=>"reset"===e||"none"===e,Ef=(e,t)=>t?e:Object.assign({},e);class xf{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ff(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&bf(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=Su(n.xAxisID,vf(e,"x")),a=t.yAxisID=Su(n.yAxisID,vf(e,"y")),s=t.rAxisID=Su(n.rAxisID,vf(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,i,a,s),c=t.vAxisID=r(o,a,i,s);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&fd(this._data,this),e._stacked&&bf(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(yu(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",a="x"===r.axis?"x":"y",s=Object.keys(e),o=new Array(s.length);let l,c,u;for(l=0,c=s.length;l<c;++l)u=s[l],o[l]={[i]:u,[a]:e[u]};return o}(t,e)}else if(n!==t){if(n){fd(n,this);const e=this._cachedMeta;bf(e),e._parsed=[]}t&&Object.isExtensible(t)&&((r=t)._chartjs?r._chartjs.listeners.push(this):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),hd.forEach(e=>{const t="_onData"+Ou(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(...e){const i=n.apply(this,e);return r._chartjs.listeners.forEach(n=>{"function"==typeof n[t]&&n[t](...e)}),i}})}))),this._syncList=[],this._data=t}var r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=ff(t.vScale,t),t.stack!==n.stack&&(r=!0,bf(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(gf(this,t._parsed),t._stacked=ff(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:a}=n,s=i.axis;let o,l,c,u=0===e&&t===r.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=bu(r[e])?this.parseArrayData(n,r,e,t):yu(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[s]||d&&l[s]<d[s];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(i()&&(u=!1),d=l);n._sorted=u}a&&gf(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:a}=e,s=i.axis,o=a.axis,l=i.getLabels(),c=i===a,u=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,u[d]={[s]:c||i.parse(l[f],f),[o]:a.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:a}=e,s=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],s[o]={x:i.parse(u[0],c),y:a.parse(u[1],c)};return s}parseObjectData(e,t,n,r){const{xScale:i,yScale:a}=e,{xAxisKey:s="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=t[d],l[c]={x:i.parse(Du(h,s),d),y:a.parse(Du(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,a=t[e.axis];return hf({keys:df(r,!0),values:t._stacks[e.axis]._visualValues},a,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let a=null===i?NaN:i;const s=r&&n._stacks[t.axis];r&&s&&(r.values=s,a=hf(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,a=r.length,s=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:df(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(s);let d,h;function f(){h=r[d];const t=h[s.axis];return!Eu(h[e.axis])||c>t||u<t}for(d=0;d<a&&(f()||(this.updateRangeFromParsed(l,e,h,o),!i));++d);if(i)for(d=a-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,a;for(r=0,i=t.length;r<i;++r)a=t[r][e.axis],Eu(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return yu(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(Su(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=uf(e,n),i=uf(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,a=[],s=this._drawStart||0,o=this._drawCount||r.length-s,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,s,o),c=s;c<s+o;++c){const t=r[c];t.hidden||(t.active&&l?a.push(t):t.draw(e,i))}for(c=0;c<a.length;++c)a[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return dh(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return dh(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const r="active"===t,i=this._cachedDataOpts,a=e+"-"+t,s=i[a],o=this.enableOptionSharing&&Mu(n);if(s)return Ef(s,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Ud.elements[e]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,r,t),u);return f.$shared&&(f.$shared=o,i[a]=Object.freeze(Ef(f,o))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,a=`animation-${t}`,s=i[a];if(s)return s;let o;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),a=r.getOptionScopes(this.getDataset(),i);o=r.createResolver(a,this.getContext(e,n,t))}const l=new cf(r,o&&o.animations);return o&&o._cacheable&&(i[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||yf(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:a}}updateElement(e,t,n,r){yf(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!yf(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[e,t,n]of this._syncList)this[e](t,n);this._syncList=[];const r=n.length,i=t.length,a=Math.min(i,r);a&&this.parse(0,a),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t,n=!0){const r=this._cachedMeta,i=r.data,a=e+t;let s;const o=e=>{for(e.length+=t,s=e.length-1;s>=a;s--)e[s]=e[s-t]};for(o(i),s=e;s<a;++s)i[s]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&bf(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Sf(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=pd(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,i,a,s,o=t._length;const l=()=>{32767!==a&&-32768!==a&&(Mu(s)&&(o=Math.min(o,Math.abs(a-s)||o)),s=a)};for(r=0,i=n.length;r<i;++r)a=t.getPixelForValue(n[r]),l();for(s=void 0,r=0,i=t.ticks.length;r<i;++r)a=t.getPixelForTick(r),l();return o}function wf(e,t,n,r){return bu(e)?function(e,t,n,r){const i=n.parse(e[0],r),a=n.parse(e[1],r),s=Math.min(i,a),o=Math.max(i,a);let l=s,c=o;Math.abs(s)>Math.abs(o)&&(l=o,c=s),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:a,min:s,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function kf(e,t,n,r){const i=e.iScale,a=e.vScale,s=i.getLabels(),o=i===a,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=t[c],d={},d[i.axis]=o||i.parse(s[c],c),l.push(wf(h,d,a,c));return l}function Tf(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function _f(e,t,n,r){let i=t.borderSkipped;const a={};if(!i)return void(e.borderSkipped=a);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,a;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",a="start"):(i="start",a="end"),{start:n,end:r,reverse:t,top:i,bottom:a}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(a[Af(u,s,o,l)]=!0,i=c)),a[Af(i,s,o,l)]=!0,e.borderSkipped=a}function Af(e,t,n,r){var i,a,s;return r?(s=n,e=Rf(e=(i=e)===(a=t)?s:i===s?a:i,n,t)):e=Rf(e,t,n),e}function Rf(e,t,n){return"start"===e?t:"end"===e?n:e}function Lf(e,{inflateAmount:t},n){e.inflateAmount="auto"===t?1===n?.33:0:t}class Cf extends xf{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const a=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,a,s=e=>+n[e];if(yu(n[e])){const{key:e="value"}=this._parsing;s=t=>+Du(n[t],e)}for(i=e,a=e+t;i<a;++i)r._parsed[i]=s(i)}}_getRotation(){return Zu(this.options.rotation-90)}_getCircumference(){return Zu(this.options.circumference)}_getRotationExtents(){let e=ju,t=-ju;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),a=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-a)/2,0),o=Math.min(((e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t)(this.options.cutout,s),1),l=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:d,ratioY:h,offsetX:f,offsetY:p}=function(e,t,n){let r=1,i=1,a=0,s=0;if(t<ju){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),f=(e,t,r)=>sd(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>sd(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),m=f(0,c,d),g=f(Gu,u,h),v=p(Uu,c,d),b=p(Uu+Gu,u,h);r=(m-v)/2,i=(g-b)/2,a=-(m+v)/2,s=-(g+b)/2}return{ratioX:r,ratioY:i,offsetX:a,offsetY:s}}(u,c,o),m=(n.width-a)/d,g=(n.height-a)/h,v=Math.max(Math.min(m,g)/2,0),b=wu(this.options.radius,v),y=(b-Math.max(b*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*b,this.offsetY=p*b,r.total=this.calculateTotal(),this.outerRadius=b-y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-y*l,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/ju)}updateElements(e,t,n,r){const i="reset"===r,a=this.chart,s=a.chartArea,o=a.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,u=i&&o.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,i);for(m=t;m<t+n;++m){const t=this._circumference(m,i),n=e[m],a={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:d};p&&(a.options=f||this.resolveDataElementOptions(m,n.active?"active":r)),g+=t,this.updateElement(n,m,a,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ju*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Pd(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,a,s,o;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,s=a.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)o=s.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Su(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Pf extends xf{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const a=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Pd(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return Th.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),a=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,n,r){const i="reset"===r,a=this.chart,s=a.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*Uu;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,r,f);for(d=t;d<t+n;d++){const t=e[d];let n=h,p=h+this._computeAngle(d,r,f),m=a.getDataVisibility(d)?o.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=p,i&&(s.animateScale&&(m=0),s.animateRotate&&(n=p=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(d,t.active?"active":r)};this.updateElement(t,d,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Zu(this.resolveDataElementOptions(e,t).angle||n):0}}var If=Object.freeze({__proto__:null,BarController:class extends xf{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,n,r){return kf(e,t,n,r)}parseArrayData(e,t,n,r){return kf(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:a}=e,{xAxisKey:s="x",yAxisKey:o="y"}=this._parsing,l="x"===i.axis?s:o,c="x"===a.axis?s:o,u=[];let d,h,f,p;for(d=n,h=n+r;d<h;++d)p=t[d],f={},f[i.axis]=i.parse(Du(p,l),d),u.push(wf(Du(p,c),f,a,d));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),a=i._custom,s=Tf(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:a,_cachedMeta:{vScale:s}}=this,o=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=i||vu(t[s.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[s.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||Tf(t._custom)||a===p._top||a===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(m.options=u||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=m.options||e[h].options;_f(m,g,p,a),Lf(m,g,c.ratio),this.updateElement(e[h],h,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),i=n.options.stacked,a=[],s=this._cachedMeta.controller.getParsed(t),o=s&&s[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),r=t&&t[e.vScale.axis];if(vu(r)||isNaN(r))return!0};for(const n of r)if((void 0===t||!l(n))&&((!1===i||-1===a.indexOf(n.stack)||void 0===i&&void 0===n.stack)&&a.push(n.stack),n.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Su("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,a;for(i=0,a=t.data.length;i<a;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const s=e.barThickness;return{min:s||Sf(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:a}}=this,s=i||0,o=this.getParsed(e),l=o._custom,c=Tf(l);let u,d,h=o[t.axis],f=0,p=n?this.applyStack(t,o,n):h;p!==h&&(f=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&Yu(h)!==Yu(l.barEnd)&&(f=0),f+=h);const m=vu(i)||c?f:i;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):g,d=u-g,Math.abs(d)<a){d=function(e,t,n){return 0!==e?Yu(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,s)*a,h===s&&(g-=d/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);g=Math.max(Math.min(g,f),l),u=g+d,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(s)){const e=Yu(d)*t.getLineWidthForValue(s)/2;g+=e,d-=e}return{size:d,base:g,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,a=Su(r.maxBarThickness,1/0);let s,o;const l=this._getAxisCount();if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,a=i[e];let s=e>0?i[e-1]:null,o=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===s&&(s=a-(null===o?t.end-t.start:o-a)),null===o&&(o=a+a-s);const c=a-(a-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const i=n.barThickness;let a,s;return vu(i)?(a=t.min*n.categoryPercentage,s=n.barPercentage):(a=i*r,s=1),{chunk:a/r,ratio:s,start:t.pixels[e]-a/2}}(e,t,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(Su(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+d;s=c.start+c.chunk*h+c.chunk/2,o=Math.min(a,c.chunk*c.ratio)}else s=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(a,t.min*t.ratio);return{base:s-o/2,head:s+o/2,center:s,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}},BubbleController:class extends xf{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let e=0;e<i.length;e++)i[e]._custom=this.resolveDataElementOptions(e+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let e=0;e<i.length;e++){const r=t[n+e];i[e]._custom=Su(r[2],this.resolveDataElementOptions(e+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let e=0;e<i.length;e++){const r=t[n+e];i[e]._custom=Su(r&&r.r&&+r.r,this.resolveDataElementOptions(e+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,a=this.getParsed(e),s=r.getLabelForValue(a.x),o=i.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+s+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:s}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=a.axis,u=s.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!i&&this.getParsed(d),h={},f=h[c]=i?a.getPixelForDecimal(.5):a.getPixelForValue(n[c]),p=h[u]=i?s.getBasePixel():s.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=o||this.resolveDataElementOptions(d,t.active?"active":r),i&&(h.options.radius=0)),this.updateElement(t,d,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=Su(n&&n._custom,i),r}},DoughnutController:Cf,LineController:class extends xf{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,a=this.chart._animationsDisabled;let{start:s,count:o}=yd(t,r,a);this._drawStart=s,this._drawCount=o,Ed(t)&&(s=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},e),this.updateElements(r,s,o,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:s,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),d=a.axis,h=s.axis,{spanGaps:f,segment:p}=this.options,m=Qu(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,v=t+n,b=e.length;let y=t>0&&this.getParsed(t-1);for(let n=0;n<b;++n){const f=e[n],b=g?f:{};if(n<t||n>=v){b.skip=!0;continue}const E=this.getParsed(n),x=vu(E[h]),S=b[d]=a.getPixelForValue(E[d],n),w=b[h]=i||x?s.getBasePixel():s.getPixelForValue(o?this.applyStack(s,E,o):E[h],n);b.skip=isNaN(S)||isNaN(w)||x,b.stop=n>0&&Math.abs(E[d]-y[d])>m,p&&(b.parsed=E,b.raw=l.data[n]),u&&(b.options=c||this.resolveDataElementOptions(n,f.active?"active":r)),g||this.updateElement(f,n,b,r),y=E}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}},PieController:class extends Cf{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:Pf,RadarController:class extends xf{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return Th.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const a={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,a="reset"===r;for(let s=t;s<t+n;s++){const t=e[s],n=this.resolveDataElementOptions(s,t.active?"active":r),o=i.getPointPositionForValue(s,this.getParsed(s).r),l=a?i.xCenter:o.x,c=a?i.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,s,u,r)}}},ScatterController:class extends xf{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,a=this.getParsed(e),s=r.getLabelForValue(a.x),o=i.getLabelForValue(a.y);return{label:n[e]||"",value:"("+s+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:a}=yd(t,n,r);if(this._drawStart=i,this._drawCount=a,Ed(t)&&(i=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:a}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=n;const s=this.resolveDatasetElementOptions(e);s.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:s},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:s,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),d=this.includeOptions(r,u),h=a.axis,f=s.axis,{spanGaps:p,segment:m}=this.options,g=Qu(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let b=t>0&&this.getParsed(t-1);for(let c=t;c<t+n;++c){const t=e[c],n=this.getParsed(c),p=v?t:{},y=vu(n[f]),E=p[h]=a.getPixelForValue(n[h],c),x=p[f]=i||y?s.getBasePixel():s.getPixelForValue(o?this.applyStack(s,n,o):n[f],c);p.skip=isNaN(E)||isNaN(x)||y,p.stop=c>0&&Math.abs(n[h]-b[h])>g,m&&(p.parsed=n,p.raw=l.data[c]),d&&(p.options=u||this.resolveDataElementOptions(c,t.active?"active":r)),v||this.updateElement(t,c,p,r),b=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,a)/2}}});function Nf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Df{static override(e){Object.assign(Df.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Nf()}parse(){return Nf()}format(){return Nf()}add(){return Nf()}diff(){return Nf()}startOf(){return Nf()}endOf(){return Nf()}}var Of=Df;function Mf(e,t,n,r){const{controller:i,data:a,_sorted:s}=e,o=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&s&&a.length){const s=o._reversePixels?dd:ud;if(!r){const r=s(a,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,a=n.slice(0,r.lo+1).reverse().findIndex(e=>!vu(e[t.axis]));r.lo-=Math.max(0,a);const s=n.slice(r.hi).findIndex(e=>!vu(e[t.axis]));r.hi+=Math.max(0,s)}return r}if(i._sharedOptions){const e=a[0],r="function"==typeof e.getRange&&e.getRange(t);if(r){const e=s(a,t,n-r),i=s(a,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:a.length-1}}function Ff(e,t,n,r,i){const a=e.getSortedVisibleDatasetMetas(),s=n[t];for(let e=0,n=a.length;e<n;++e){const{index:n,data:o}=a[e],{lo:l,hi:c}=Mf(a[e],t,s,i);for(let e=l;e<=c;++e){const t=o[e];t.skip||r(t,n,e)}}}function Bf(e,t,n,r,i){const a=[];return i||e.isPointInArea(t)?(Ff(e,n,t,function(n,s,o){(i||Wd(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&a.push({element:n,datasetIndex:s,index:o})},!0),a):a}function Uf(e,t,n,r,i,a){return a||e.isPointInArea(t)?"r"!==n||r?function(e,t,n,r,i,a){let s=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,a=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}(n);let l=Number.POSITIVE_INFINITY;return Ff(e,n,t,function(n,c,u){const d=n.inRange(t.x,t.y,i);if(r&&!d)return;const h=n.getCenterPoint(i);if(!a&&!e.isPointInArea(h)&&!d)return;const f=o(t,h);f<l?(s=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&s.push({element:n,datasetIndex:c,index:u})}),s}(e,t,n,r,i,a):function(e,t,n,r){let i=[];return Ff(e,n,t,function(e,n,a){const{startAngle:s,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=nd(e,{x:t.x,y:t.y});sd(l,s,o)&&i.push({element:e,datasetIndex:n,index:a})}),i}(e,t,n,i):[]}function jf(e,t,n,r,i){const a=[],s="x"===n?"inXRange":"inYRange";let o=!1;return Ff(e,n,t,(e,r,l)=>{e[s]&&e[s](t[n],i)&&(a.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,i))}),r&&!o?[]:a}var $f={evaluateInteractionItems:Ff,modes:{index(e,t,n,r){const i=Bh(t,e),a=n.axis||"x",s=n.includeInvisible||!1,o=n.intersect?Bf(e,i,a,r,s):Uf(e,i,a,!1,r,s),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const i=Bh(t,e),a=n.axis||"xy",s=n.includeInvisible||!1;let o=n.intersect?Bf(e,i,a,r,s):Uf(e,i,a,!1,r,s);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>Bf(e,Bh(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=Bh(t,e),a=n.axis||"xy",s=n.includeInvisible||!1;return Uf(e,i,a,n.intersect,r,s)},x:(e,t,n,r)=>jf(e,Bh(t,e),"x",n.intersect,r),y:(e,t,n,r)=>jf(e,Bh(t,e),"y",n.intersect,r)}};const zf=["left","top","right","bottom"];function Vf(e,t){return e.filter(e=>e.pos===t)}function Gf(e,t){return e.filter(e=>-1===zf.indexOf(e.pos)&&e.box.axis===t)}function Hf(e,t){return e.sort((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function Wf(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Kf(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Yf(e,t,n,r){const{pos:i,box:a}=n,s=e.maxPadding;if(!yu(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?a.height:a.width),n.size=t.size/t.count,e[i]+=n.size}a.getPadding&&Kf(s,a.getPadding());const o=Math.max(0,t.outerWidth-Wf(s,e,"left","right")),l=Math.max(0,t.outerHeight-Wf(s,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function qf(e,t){const n=t.maxPadding;return function(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}(e?["left","right"]:["top","bottom"])}function Xf(e,t,n,r){const i=[];let a,s,o,l,c,u;for(a=0,s=e.length,c=0;a<s;++a){o=e[a],l=o.box,l.update(o.width||t.w,o.height||t.h,qf(o.horizontal,t));const{same:s,other:d}=Yf(t,n,o,r);c|=s&&i.length,u=u||d,l.fullSize||i.push(o)}return c&&Xf(i,t,n,r)||u}function Qf(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function Jf(e,t,n,r){const i=n.padding;let{x:a,y:s}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,a=l.size||e.height;Mu(l.start)&&(s=l.start),e.fullSize?Qf(e,i.left,s,n.outerWidth-i.right-i.left,a):Qf(e,t.left+l.placed,s,r,a),l.start=s,l.placed+=r,s=e.bottom}else{const r=t.h*c,s=l.size||e.width;Mu(l.start)&&(a=l.start),e.fullSize?Qf(e,a,i.top,s,n.outerHeight-i.bottom-i.top):Qf(e,a,t.top+l.placed,s,r),l.start=a,l.placed+=r,a=e.right}}t.x=a,t.y=s}var Zf={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=lh(e.options.layout.padding),a=Math.max(t-i.width,0),s=Math.max(n-i.height,0),o=function(e){const t=function(e){const t=[];let n,r,i,a,s,o;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:a,options:{stack:s,stackWeight:o=1}}=i),t.push({index:n,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&a+s,stackWeight:o});return t}(e),n=Hf(t.filter(e=>e.box.fullSize),!0),r=Hf(Vf(t,"left"),!0),i=Hf(Vf(t,"right")),a=Hf(Vf(t,"top"),!0),s=Hf(Vf(t,"bottom")),o=Gf(t,"x"),l=Gf(t,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:i.concat(l).concat(s).concat(o),chartArea:Vf(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:a.concat(s).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Tu(e.boxes,e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},i);Kf(h,lh(r));const f=Object.assign({maxPadding:h,w:a,h:s,x:i.left,y:i.top},i),p=function(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!zf.includes(r))continue;const a=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let a,s,o;for(a=0,s=e.length;a<s;++a){o=e[a];const{fullSize:s}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:s&&t.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:s&&t.availableHeight)}return n}(l.concat(c),d);Xf(o.fullSize,f,d,p),Xf(l,f,d,p),Xf(c,f,d,p)&&Xf(l,f,d,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),Jf(o.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Jf(o.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Tu(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class ep{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class tp extends ep{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const np="$chartjs",rp={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ip=e=>null===e||""===e,ap=!!$h&&{passive:!0};function sp(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,ap)}function op(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function lp(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||op(n.addedNodes,r),t=t&&!op(n.removedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function cp(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||op(n.removedNodes,r),t=t&&!op(n.addedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const up=new Map;let dp=0;function hp(){const e=window.devicePixelRatio;e!==dp&&(dp=e,up.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function fp(e,t,n){const r=e.canvas,i=r&&Nh(r);if(!i)return;const a=gd((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()},window),s=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||a(n,r)});return s.observe(i),function(e,t){up.size||window.addEventListener("resize",hp),up.set(e,t)}(e,a),s}function pp(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){up.delete(e),up.size||window.removeEventListener("resize",hp)}(e)}function mp(e,t,n){const r=e.canvas,i=gd(t=>{null!==e.ctx&&n(function(e,t){const n=rp[e.type]||e.type,{x:r,y:i}=Bh(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,ap)}(r,t,i),i}class gp extends ep{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[np]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ip(i)){const t=zh(e,"width");void 0!==t&&(e.width=t)}if(ip(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=zh(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[np])return!1;const n=t[np].initial;["height","width"].forEach(e=>{const r=n[e];vu(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[np],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:lp,detach:cp,resize:fp}[t]||mp;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];r&&(({attach:pp,detach:pp,resize:pp}[t]||sp)(e,t,r),n[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return function(e,t,n,r){const i=Oh(e),a=Fh(i,"margin"),s=Dh(i.maxWidth,e,"clientWidth")||zu,o=Dh(i.maxHeight,e,"clientHeight")||zu,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const a=e&&Nh(e);if(a){const e=a.getBoundingClientRect(),s=Oh(a),o=Fh(s,"border","width"),l=Fh(s,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=Dh(s.maxWidth,a,"clientWidth"),i=Dh(s.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||zu,maxHeight:i||zu}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=Fh(i,"border","width"),t=Fh(i,"padding");c-=t.width+e.width,u-=t.height+e.height}return c=Math.max(0,c-a.width),u=Math.max(0,r?c/r:u-a.height),c=Uh(Math.min(c,s,l.maxWidth)),u=Uh(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Uh(c/2)),(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=Uh(Math.floor(u*r))),{width:c,height:u}}(e,t,n,r)}isAttached(e){const t=e&&Nh(e);return!(!t||!t.isConnected)}}class vp{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Qu(this.x)&&Qu(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function bp(e,t,n,r,i){const a=Su(r,0),s=Math.min(Su(i,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),i&&(o=i-r,n=o/Math.floor(o/n)),c=a;c<0;)u++,c=Math.round(a+u*n);for(l=Math.max(a,0);l<s;l++)l===c&&(t.push(e[l]),u++,c=Math.round(a+u*n))}const yp=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,Ep=(e,t)=>Math.min(t||e,e);function xp(e,t){const n=[],r=e.length/t,i=e.length;let a=0;for(;a<i;a+=r)n.push(e[Math.floor(a)]);return n}function Sp(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),a=e._startPixel,s=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-a,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<a-o||c>s+o)))return c}function wp(e){return e.drawTicks?e.tickLength:0}function kp(e,t){if(!e.display)return 0;const n=ch(e.font,t),r=lh(e.padding);return(bu(e.text)?e.text.length:1)*n.lineHeight+r.height}function Tp(e,t,n){let r=vd(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class _p extends vp{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=xu(e,Number.POSITIVE_INFINITY),t=xu(t,Number.NEGATIVE_INFINITY),n=xu(n,Number.POSITIVE_INFINITY),r=xu(r,Number.NEGATIVE_INFINITY),{min:xu(e,n),max:xu(t,r),minDefined:Eu(e),maxDefined:Eu(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:a}=this.getUserBounds();if(i&&a)return{min:n,max:r};const s=this.getMatchingVisibleMetas();for(let o=0,l=s.length;o<l;++o)t=s[o].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),a||(r=Math.max(r,t.max));return n=a&&n>r?r:n,r=i&&n>r?n:r,{min:xu(n,xu(r,n)),max:xu(r,xu(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ku(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:a}=this.options,s=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,a=wu(t,(i-r)/2),s=(e,t)=>n&&0===e?0:e+t;return{min:s(r,-Math.abs(a)),max:s(i,a)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=s<this.ticks.length;this._convertTicksToLabels(o?xp(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=function(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],s=a.length,o=a[0],l=a[s-1],c=[];if(s>i)return function(e,t,n,r){let i,a=0,s=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===s&&(t.push(e[i]),a++,s=n[a*r])}(t,c,a,s/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const a=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let e=0,t=a.length-1;e<t;e++){const t=a[e];if(t>i)return t}return Math.max(i,1)}(a,t,i);if(s>0){let e,n;const r=s>1?Math.round((l-o)/(s-1)):null;for(bp(t,c,u,vu(r)?0:o-r,o),e=0,n=s-1;e<n;e++)bp(t,c,u,a[e],a[e+1]);return bp(t,c,u,l,vu(r)?t.length:l+r),c}return bp(t,c,u),c}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ku(this.options.afterUpdate,[this])}beforeSetDimensions(){ku(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ku(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ku(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ku(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=ku(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){ku(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ku(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Ep(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let a,s,o,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=od(this.chart.width-u,0,this.maxWidth);a=e.offset?this.maxWidth/n:h/(n-1),u+6>a&&(a=h/(n-(e.offset?.5:1)),s=this.maxHeight-wp(e.grid)-t.padding-kp(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=ed(Math.min(Math.asin(od((c.highest.height+6)/a,-1,1)),Math.asin(od(s/o,-1,1))-Math.asin(od(d/o,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){ku(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ku(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,a=this._isVisible(),s=this.isHorizontal();if(a){const a=kp(r,t.options.font);if(s?(e.width=this.maxWidth,e.height=wp(i)+a):(e.height=this.maxHeight,e.width=wp(i)+a),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:a}=this._getLabelSizes(),o=2*n.padding,l=Zu(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(s){const t=n.mirror?0:u*i.width+c*a.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*i.width+u*a.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:a},position:s}=this.options,o=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=r*e.width,d=n*t.height):(u=n*e.height,d=r*t.width):"start"===i?d=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-s+a)*this.width/(this.width-s),0),this.paddingRight=Math.max((d-c+a)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+a,this.paddingBottom=r+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ku(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)vu(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=xp(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,a=[],s=[],o=Math.floor(t/Ep(t,n));let l,c,u,d,h,f,p,m,g,v,b,y=0,E=0;for(l=0;l<t;l+=o){if(d=e[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,p=i[f]=i[f]||{data:{},gc:[]},m=h.lineHeight,g=v=0,vu(d)||bu(d)){if(bu(d))for(c=0,u=d.length;c<u;++c)b=d[c],vu(b)||bu(b)||(g=jd(r,p.data,p.gc,g,b),v+=m)}else g=jd(r,p.data,p.gc,g,d),v=m;a.push(g),s.push(v),y=Math.max(g,y),E=Math.max(v,E)}!function(e,t){Tu(e,e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}})}(i,t);const x=a.indexOf(y),S=s.indexOf(E),w=e=>({width:a[e]||0,height:s[e]||0});return{first:w(0),last:w(t-1),widest:w(x),highest:w(S),widths:a,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return od(e,-32768,32767)}(this._alignToPixels?zd(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return dh(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=dh(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Zu(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,s=i?i.widest.width+a:0,o=i?i.highest.height+a:0;return this.isHorizontal()?o*n>s*r?s/n:o/r:o*r<s*n?o/n:s/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:a,border:s}=r,o=i.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=wp(i),d=[],h=s.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,m=function(e){return zd(n,e,f)};let g,v,b,y,E,x,S,w,k,T,_,A;if("top"===a)g=m(this.bottom),x=this.bottom-u,w=g-p,T=m(e.top)+p,A=e.bottom;else if("bottom"===a)g=m(this.top),T=e.top,A=m(e.bottom)-p,x=g+p,w=this.top+u;else if("left"===a)g=m(this.right),E=this.right-u,S=g-p,k=m(e.left)+p,_=e.right;else if("right"===a)g=m(this.left),k=e.left,_=m(e.right)-p,E=g+p,S=this.left+u;else if("x"===t){if("center"===a)g=m((e.top+e.bottom)/2+.5);else if(yu(a)){const e=Object.keys(a)[0],t=a[e];g=m(this.chart.scales[e].getPixelForValue(t))}T=e.top,A=e.bottom,x=g+p,w=x+u}else if("y"===t){if("center"===a)g=m((e.left+e.right)/2);else if(yu(a)){const e=Object.keys(a)[0],t=a[e];g=m(this.chart.scales[e].getPixelForValue(t))}E=g-p,S=E-u,k=e.left,_=e.right}const R=Su(r.ticks.maxTicksLimit,c),L=Math.max(1,Math.ceil(c/R));for(v=0;v<c;v+=L){const e=this.getContext(v),t=i.setContext(e),r=s.setContext(e),a=t.lineWidth,c=t.color,u=r.dash||[],h=r.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;b=Sp(this,v,o),void 0!==b&&(y=zd(n,b,a),l?E=S=k=_=y:x=w=T=A=y,d.push({tx1:E,ty1:x,tx2:S,ty2:w,x1:k,y1:T,x2:_,y2:A,width:a,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,a=this.isHorizontal(),s=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=i,d=wp(n.grid),h=d+c,f=u?-c:h,p=-Zu(this.labelRotation),m=[];let g,v,b,y,E,x,S,w,k,T,_,A,R="middle";if("top"===r)x=this.bottom-f,S=this._getXAxisLabelAlignment();else if("bottom"===r)x=this.top+f,S=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);S=e.textAlign,E=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);S=e.textAlign,E=e.x}else if("x"===t){if("center"===r)x=(e.top+e.bottom)/2+h;else if(yu(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)+h}S=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)E=(e.left+e.right)/2-h;else if(yu(r)){const e=Object.keys(r)[0],t=r[e];E=this.chart.scales[e].getPixelForValue(t)}S=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?R="top":"end"===o&&(R="bottom"));const L=this._getLabelSizes();for(g=0,v=s.length;g<v;++g){b=s[g],y=b.label;const e=i.setContext(this.getContext(g));w=this.getPixelForTick(g)+i.labelOffset,k=this._resolveTickFontOptions(g),T=k.lineHeight,_=bu(y)?y.length:1;const t=_/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=S;if(a?(E=w,"inner"===S&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),A="top"===r?"near"===l||0!==p?-_*T+T/2:"center"===l?-L.highest.height/2-t*T+T:-L.highest.height+T/2:"near"===l||0!==p?T/2:"center"===l?L.highest.height/2-t*T:L.highest.height-_*T,u&&(A*=-1),0===p||e.showLabelBackdrop||(E+=T/2*Math.sin(p))):(x=w,A=(1-_)*T/2),e.showLabelBackdrop){const t=lh(e.backdropPadding),n=L.heights[g],r=L.widths[g];let i=A-t.top,a=0-t.left;switch(R){case"middle":i-=n/2;break;case"bottom":i-=n}switch(S){case"center":a-=r/2;break;case"right":a-=r;break;case"inner":g===v-1?a-=r:g>0&&(a-=r/2)}d={left:a,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:y,font:k,textOffset:A,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:R,translation:[E,x],backdrop:d}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Zu(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,a=e+i,s=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+i,"near"===n?o="left":"center"===n?(o="center",l+=s/2):(o="right",l+=s)):(l=this.right-a,"near"===n?o="right":"center"===n?(o="center",l-=s/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?o="right":"center"===n?(o="center",l-=s/2):(o="left",l-=s)):(l=this.left+a,"near"===n?o="left":"center"===n?(o="center",l+=s/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);return n>=0?t.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const s=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,a=r.length;i<a;++i){const e=r[i];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),a=n.display?i.width:0;if(!a)return;const s=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=zd(e,this.left,a)-a/2,c=zd(e,this.right,s)+s/2,u=d=o):(u=zd(e,this.top,a)-a/2,d=zd(e,this.bottom,s)+s/2,l=c=o),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Kd(t,n);const r=this.getLabelItems(e);for(const e of r){const n=e.options,r=e.font;Zd(t,e.label,0,e.textOffset,r,n)}n&&Yd(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=ch(n.font),a=lh(n.padding),s=n.align;let o=i.lineHeight/2;"bottom"===t||"center"===t||yu(t)?(o+=a.bottom,bu(n.text)&&(o+=i.lineHeight*(n.text.length-1))):o+=a.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,r){const{top:i,left:a,bottom:s,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,f,p=0;const m=s-i,g=o-a;if(e.isHorizontal()){if(h=bd(r,a,o),yu(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:yp(e,n,t);d=o-a}else{if(yu(n)){const e=Object.keys(n)[0],r=n[e];h=u[e].getPixelForValue(r)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:yp(e,n,t);f=bd(r,s,i),p="left"===n?-Gu:Gu}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,o,t,s);Zd(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:d,textAlign:Tp(s,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Su(e.grid&&e.grid.z,-1),r=Su(e.border&&e.border.z,0);return this._isVisible()&&this.draw===_p.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,a;for(i=0,a=t.length;i<a;++i){const a=t[i];a[n]!==this.id||e&&a.type!==e||r.push(a)}return r}_resolveTickFontOptions(e){return ch(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ap{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=Cu(Object.create(null),[n?Ud.get(n):{},Ud.get(t),e.defaults]);Ud.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),a=[e].concat(r).join("."),s=t[n].split("."),o=s.pop(),l=s.join(".");Ud.route(a,i,l,o)})}(t,e.defaultRoutes),e.descriptors&&Ud.describe(t,e.descriptors)}(e,a,n),this.override&&Ud.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Ud[r]&&(delete Ud[r][n],this.override&&delete Dd[n])}}class Rp{constructor(){this.controllers=new Ap(xf,"datasets",!0),this.elements=new Ap(vp,"elements"),this.plugins=new Ap(Object,"plugins"),this.scales=new Ap(_p,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):Tu(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=Ou(e);ku(n["before"+r],[],n),t[e](n),ku(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Lp=new Rp;class Cp{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===ku(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){vu(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=Su(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(Lp.plugins.items);for(let e=0;e<r.length;e++)n.push(Lp.getPlugin(r[e]));const i=e.plugins||[];for(let e=0;e<i.length;e++){const r=i[e];-1===n.indexOf(r)&&(n.push(r),t[r.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,{plugins:t,localIds:n},r,i){const a=[],s=e.getContext();for(const o of t){const t=o.id,l=Pp(r[t],i);null!==l&&a.push({plugin:o,options:Ip(e.config,{plugin:o,local:n[t]},l,s)})}return a}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function Pp(e,t){return t||!1!==e?!0===e?{}:e:null}function Ip(e,{plugin:t,local:n},r,i){const a=e.pluginScopeKeys(t),s=e.getOptionScopes(r,a);return n&&t.defaults&&s.push(t.defaults),e.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Np(e,t){const n=Ud.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Dp(e){if("x"===e||"y"===e||"r"===e)return e}function Op(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Mp(e,...t){if(Dp(e))return e;for(const n of t){const t=n.axis||Op(n.position)||e.length>1&&Dp(e[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Fp(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Bp(e){const t=e.options||(e.options={});t.plugins=Su(t.plugins,{}),t.scales=function(e,t){const n=Dd[e.type]||{scales:{}},r=t.scales||{},i=Np(e.type,t),a=Object.create(null);return Object.keys(r).forEach(t=>{const s=r[t];if(!yu(s))return console.error(`Invalid scale configuration for scale: ${t}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const o=Mp(t,s,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return Fp(e,"x",n[0])||Fp(e,"y",n[0])}return{}}(t,e),Ud.scales[s.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,i),c=n.scales||{};a[t]=Pu(Object.create(null),[{axis:o},s,c[o],c[l]])}),e.data.datasets.forEach(n=>{const i=n.type||e.type,s=n.indexAxis||Np(i,t),o=(Dd[i]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),i=n[t+"AxisID"]||t;a[i]=a[i]||Object.create(null),Pu(a[i],[{axis:t},r[i],o[e]])})}),Object.keys(a).forEach(e=>{const t=a[e];Pu(t,[Ud.scales[t.type],Ud.scale])}),a}(e,t)}function Up(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const jp=new Map,$p=new Set;function zp(e,t){let n=jp.get(e);return n||(n=t(),jp.set(e,n),$p.add(n)),n}const Vp=(e,t,n)=>{const r=Du(t,n);void 0!==r&&e.add(r)};class Gp{constructor(e){this._config=function(e){return(e=e||{}).data=Up(e.data),Bp(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Up(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Bp(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return zp(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return zp(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return zp(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return zp(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,a=this._cachedScopes(e,n),s=a.get(t);if(s)return s;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>Vp(o,e,t))),t.forEach(e=>Vp(o,r,e)),t.forEach(e=>Vp(o,Dd[i]||{},e)),t.forEach(e=>Vp(o,Ud,e)),t.forEach(e=>Vp(o,Od,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),$p.has(t)&&a.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Dd[t]||{},Ud.datasets[t]||{},{type:t},Ud,Od]}resolveNamedOptions(e,t,n,r=[""]){const i={$shared:!0},{resolver:a,subPrefixes:s}=Hp(this._resolverCache,e,r);let o=a;(function(e,t){const{isScriptable:n,isIndexable:r}=ph(e);for(const i of t){const t=n(i),a=r(i),s=(a||t)&&e[i];if(t&&(Fu(s)||Wp(s))||a&&bu(s))return!0}return!1})(a,t)&&(i.$shared=!1,o=fh(a,n=Fu(n)?n():n,this.createResolver(e,n,s)));for(const e of t)i[e]=o[e];return i}createResolver(e,t,n=[""],r){const{resolver:i}=Hp(this._resolverCache,e,n);return yu(t)?fh(i,t,void 0,r):i}}function Hp(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let a=r.get(i);return a||(a={resolver:hh(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(i,a)),a}const Wp=e=>yu(e)&&Object.getOwnPropertyNames(e).some(t=>Fu(e[t])),Kp=["top","bottom","left","right","chartArea"];function Yp(e,t){return"top"===e||"bottom"===e||-1===Kp.indexOf(e)&&"x"===t}function qp(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Xp(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ku(n&&n.onComplete,[e],t)}function Qp(e){const t=e.chart,n=t.options.animation;ku(n&&n.onProgress,[e],t)}function Jp(e){return Ih()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Zp={},em=e=>{const t=Jp(e);return Object.values(Zp).filter(e=>e.canvas===t).pop()};function tm(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const a=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=a)}}}class nm{static defaults=Ud;static instances=Zp;static overrides=Dd;static registry=Lp;static version="4.5.0";static getChart=em;static register(...e){Lp.add(...e),rm()}static unregister(...e){Lp.remove(...e),rm()}constructor(e,t){const n=this.config=new Gp(t),r=Jp(e),i=em(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Ih()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?tp:gp}(r)),this.platform.updateConfig(n);const s=this.platform.acquireContext(r,a.aspectRatio),o=s&&s.canvas,l=o&&o.height,c=o&&o.width;this.id=gu(),this.ctx=s,this.canvas=o,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Cp,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),a.resizeDelay||0),this._dataChanges=[],Zp[this.id]=this,s&&o?(af.listen(this,"complete",Xp),af.listen(this,"progress",Qp),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return vu(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Lp}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():jh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Vd(this.canvas,this.ctx),this}stop(){return af.stop(this),this}resize(e,t){af.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,i),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,jh(this,s,!0)&&(this.notifyPlugins("resize",{size:a}),ku(n.onResize,[this,a],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Tu(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let i=[];t&&(i=i.concat(Object.keys(t).map(e=>{const n=t[e],r=Mp(e,n),i="r"===r,a="x"===r;return{options:n,dposition:i?"chartArea":a?"bottom":"left",dtype:i?"radialLinear":a?"category":"linear"}}))),Tu(i,t=>{const i=t.options,a=i.id,s=Mp(a,i),o=Su(i.type,t.dtype);void 0!==i.position&&Yp(i.position,s)===Yp(t.dposition)||(i.position=t.dposition),r[a]=!0;let l=null;a in n&&n[a].type===o?l=n[a]:(l=new(Lp.getScale(o))({id:a,type:o,ctx:this.ctx,chart:this}),n[l.id]=l),l.init(i,e)}),Tu(r,(e,t)=>{e||delete n[t]}),Tu(n,e=>{Zf.configure(this,e,e.options),Zf.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(qp("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const a=r.type||this.config.type;if(i.type&&i.type!==a&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=a,i.indexAxis=r.indexAxis||Np(a,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=Lp.getController(a),{datasetElementType:r,dataElementType:s}=Ud.datasets[a];Object.assign(t,{dataElementType:Lp.getElement(s),datasetElementType:r&&Lp.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){Tu(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let e=0,t=this.data.datasets.length;e<t;e++){const{controller:t}=this.getDatasetMeta(e),n=!r&&-1===i.indexOf(t);t.buildOrUpdateElements(n),a=Math.max(+t.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||Tu(i,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(qp("z","_idx"));const{_active:s,_lastEvent:o}=this;o?this._eventHandler(o,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){Tu(this.scales,e=>{Zf.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Bu(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t)tm(e,r,"_removeElements"===n?-i:i)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let e=1;e<t;e++)if(!Bu(r,n(e)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Zf.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Tu(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Fu(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(af.has(this)?this.attached&&!af.running(this)&&af.start(this):(this.draw(),Xp({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=nf(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&Kd(t,r),e.controller.draw(),r&&Yd(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Wd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=$f.modes[t];return"function"==typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=dh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"==typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,r);Mu(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(i,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),af.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Vd(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Zp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Tu(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let a;const s=()=>{r("attach",s),this.attached=!0,this.resize(),n("resize",i),n("detach",a)};a=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",s)},t.isAttached(this.canvas)?s():a()}unbindEvents(){Tu(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Tu(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,a,s,o;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),s=0,o=e.length;s<o;++s){a=e[s];const t=a&&this.getDatasetMeta(a.datasetIndex).controller;t&&t[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(({datasetIndex:e,index:t})=>{const n=this.getDatasetMeta(e);if(!n)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:n.data[t],index:t}});!_u(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),a=i(t,e),s=n?e:i(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,a=t,s=this._getActiveElements(e,r,n,a),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,ku(i.onHover,[e,s,this],this),o&&ku(i.onClick,[e,s,this],this));const c=!_u(s,r);return(c||t)&&(this._active=s,this._updateHoverStyles(s,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function rm(){return Tu(nm.instances,e=>e._plugins.invalidate())}function im(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function am(e,t,n,r,i,a){const{x:s,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(d>0?d-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const m=(p-Math.max(.001,p*d-n/Uu)/d)/2,g=l+m+f,v=i-m-f,{outerStart:b,outerEnd:y,innerStart:E,innerEnd:x}=function(e,t,n,r){const i=function(e){return ah(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),a=(n-t)/2,s=Math.min(a,r*t/2),o=e=>{const t=(n-Math.min(a,e))*r/2;return od(e,0,Math.min(a,t))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:od(i.innerStart,0,s),innerEnd:od(i.innerEnd,0,s)}}(t,h,d,v-g),S=d-b,w=d-y,k=g+b/S,T=v-y/w,_=h+E,A=h+x,R=g+E/_,L=v-x/A;if(e.beginPath(),a){const t=(k+T)/2;if(e.arc(s,o,d,k,t),e.arc(s,o,d,t,T),y>0){const t=im(w,T,s,o);e.arc(t.x,t.y,y,T,v+Gu)}const n=im(A,v,s,o);if(e.lineTo(n.x,n.y),x>0){const t=im(A,L,s,o);e.arc(t.x,t.y,x,v+Gu,L+Math.PI)}const r=(v-x/h+(g+E/h))/2;if(e.arc(s,o,h,v-x/h,r,!0),e.arc(s,o,h,r,g+E/h,!0),E>0){const t=im(_,R,s,o);e.arc(t.x,t.y,E,R+Math.PI,g-Gu)}const i=im(S,g,s,o);if(e.lineTo(i.x,i.y),b>0){const t=im(S,k,s,o);e.arc(t.x,t.y,b,g-Gu,k)}}else{e.moveTo(s,o);const t=Math.cos(k)*d+s,n=Math.sin(k)*d+o;e.lineTo(t,n);const r=Math.cos(T)*d+s,i=Math.sin(T)*d+o;e.lineTo(r,i)}e.closePath()}function sm(e,t,n=t){e.lineCap=Su(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Su(n.borderDash,t.borderDash)),e.lineDashOffset=Su(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Su(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Su(n.borderWidth,t.borderWidth),e.strokeStyle=Su(n.borderColor,t.borderColor)}function om(e,t,n){e.lineTo(n.x,n.y)}function lm(e,t,n={}){const r=e.length,{start:i=0,end:a=r-1}=n,{start:s,end:o}=t,l=Math.max(i,s),c=Math.min(a,o),u=i<s&&a<s||i>o&&a>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function cm(e,t,n,r){const{points:i,options:a}=t,{count:s,start:o,loop:l,ilen:c}=lm(i,n,r),u=function(e){return e.stepped?qd:e.tension||"monotone"===e.cubicInterpolationMode?Xd:om}(a);let d,h,f,{move:p=!0,reverse:m}=r||{};for(d=0;d<=c;++d)h=i[(o+(m?c-d:d))%s],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):u(e,f,h,m,a.stepped),f=h);return l&&(h=i[(o+(m?c:0))%s],u(e,f,h,m,a.stepped)),!!l}function um(e,t,n,r){const i=t.points,{count:a,start:s,ilen:o}=lm(i,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,f,p,m,g=0,v=0;const b=e=>(s+(c?o-e:e))%a,y=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(d=i[b(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=i[b(u)],d.skip)continue;const t=d.x,n=d.y,r=0|t;r===h?(n<f?f=n:n>p&&(p=n),g=(v*g+t)/++v):(y(),e.lineTo(t,n),h=r,v=0,f=p=n),m=n}y()}function dm(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||n?cm:um}const hm="function"==typeof Path2D;class fm extends vp{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Ph(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const a=!!e._loop,{start:s,end:o}=function(e,t,n,r){let i=0,a=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(a+=i);a>i&&e[a%t].skip;)a--;return a%=t,{start:i,end:a}}(n,i,a,r);return function(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),a=Zh(e.options),{_datasetIndex:s,options:{spanGaps:o}}=e,l=n.length,c=[];let u=a,d=t[0].start,h=d;function f(e,t,r,i){const a=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,d=t%l)}}for(const e of t){d=o?d:e.start;let t,a=n[d%l];for(h=d+1;h<=e.end;h++){const o=n[h%l];t=Zh(r.setContext(dh(i,{type:"segment",p0:a,p1:o,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),ef(t,u)&&f(d,h-1,e.loop,u),a=o,u=t}d<h-1&&f(d,h-1,e.loop,u)}return c}(e,t,n,r):t}(e,!0===r?[{start:s,end:o,loop:a}]:function(e,t,n,r){const i=e.length,a=[];let s,o=t,l=e[t];for(s=t+1;s<=n;++s){const n=e[s%i];n.skip||n.stop?l.skip||(r=!1,a.push({start:t%i,end:(s-1)%i,loop:r}),t=o=n.stop?s:null):(o=s,l.skip&&(t=s)),l=n}return null!==o&&a.push({start:t%i,end:o%i,loop:r}),a}(n,s,o<s?o+i:o,!!e._fullLoop&&0===s&&o===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,a=Jh(this,{property:t,start:r,end:r});if(!a.length)return;const s=[],o=function(e){return e.stepped?Gh:e.tension||"monotone"===e.cubicInterpolationMode?Hh:Vh}(n);let l,c;for(l=0,c=a.length;l<c;++l){const{start:c,end:u}=a[l],d=i[c],h=i[u];if(d===h){s.push(d);continue}const f=o(d,h,Math.abs((r-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],s.push(f)}return 1===s.length?s[0]:s}pathSegment(e,t,n){return dm(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=dm(this);let a=this._loop;t=t||0,n=n||this.points.length-t;for(const s of r)a&=i(e,this,s,{start:t,end:t+n-1});return!!a}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),function(e,t,n,r){hm&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),sm(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:a}=t,s=dm(t);for(const o of i)sm(e,a,o.style),e.beginPath(),s(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function pm(e,t,n,r){const i=e.options,{[n]:a}=e.getProps([n],r);return Math.abs(t-a)<i.radius+i.hitRadius}function mm(e,t){const{x:n,y:r,base:i,width:a,height:s}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,d;return e.horizontal?(d=s/2,o=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=a/2,o=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:o,top:c,right:l,bottom:u}}function gm(e,t,n,r){return e?0:od(t,n,r)}function vm(e,t,n,r){const i=null===t,a=null===n,s=e&&!(i&&a)&&mm(e,r);return s&&(i||ld(t,s.left,s.right))&&(a||ld(n,s.top,s.bottom))}function bm(e,t){e.rect(t.x,t.y,t.w,t.h)}function ym(e,t,n={}){const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-r,s=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+a,h:e.h+s,radius:e.radius}}var Em=Object.freeze({__proto__:null,ArcElement:class extends vp{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:a}=nd(r,{x:e,y:t}),{startAngle:s,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=Su(u,o-s),f=sd(i,s,o)&&s!==o,p=h>=ju||f,m=ld(a,l+d,c+d);return p&&m}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:a,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+i)/2,u=(a+s+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>ju?Math.floor(n/ju):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*r,Math.sin(s)*r);const o=r*(1-Math.sin(Math.min(Uu,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:a,startAngle:s,circumference:o}=t;let l=t.endAngle;if(a){am(e,t,n,r,l,i);for(let t=0;t<a;++t)e.fill();isNaN(o)||(l=s+(o%ju||ju))}am(e,t,n,r,l,i),e.fill()}(e,this,o,i,a),function(e,t,n,r,i){const{fullCircles:a,startAngle:s,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(a){am(e,t,n,r,m,i);for(let t=0;t<a;++t)e.stroke();isNaN(o)||(m=s+(o%ju||ju))}p&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:a,y:s,outerRadius:o,innerRadius:l}=t;let c=i/o;e.beginPath(),e.arc(a,s,o,r-c,n+c),l>i?(c=i/l,e.arc(a,s,l,n+c,r-c,!0)):e.arc(a,s,i,n+Gu,r-Gu),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-s>=Uu&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:r,x:i,y:a,outerRadius:s,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/s,ad(r-n));if(e.beginPath(),e.arc(i,a,s-c/2,r+d/2,n-d/2),o>0){const t=Math.min(c/o,ad(r-n));e.arc(i,a,o+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,s*ad(r-n));if("round"===u)e.arc(i,a,t,n-Uu/2,r+Uu/2,!0);else if("bevel"===u){const s=2*t*t,o=-s*Math.cos(n+Uu/2)+i,l=-s*Math.sin(n+Uu/2)+a,c=s*Math.cos(r+Uu/2)+i,u=s*Math.sin(r+Uu/2)+a;e.lineTo(o,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),a||(am(e,t,n,r,m,i),e.stroke())}(e,this,o,i,a),e.restore()}},BarElement:class extends vp{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:a}=function(e){const t=mm(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,a=sh(r);return{t:gm(i.top,a.top,0,n),r:gm(i.right,a.right,0,t),b:gm(i.bottom,a.bottom,0,n),l:gm(i.left,a.left,0,t)}}(e,n/2,r/2),a=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,a=oh(i),s=Math.min(t,n),o=e.borderSkipped,l=r||yu(i);return{topLeft:gm(!l||o.top||o.left,a.topLeft,0,s),topRight:gm(!l||o.top||o.right,a.topRight,0,s),bottomLeft:gm(!l||o.bottom||o.left,a.bottomLeft,0,s),bottomRight:gm(!l||o.bottom||o.right,a.bottomRight,0,s)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:a},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}(this),s=(o=a.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?eh:bm;var o;e.save(),a.w===i.w&&a.h===i.h||(e.beginPath(),s(e,ym(a,t,i)),e.clip(),s(e,ym(i,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),s(e,ym(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return vm(this,e,t,n)}inXRange(e,t){return vm(this,e,null,t)}inYRange(e,t){return vm(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},LineElement:fm,PointElement:class extends vp{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:a}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return pm(this,e,"x",t)}inYRange(e,t){return pm(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;return t=Math.max(t,t&&e.hoverRadius||0),2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Wd(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Gd(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}});const xm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Sm=xm.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function wm(e){return xm[e%xm.length]}function km(e){return Sm[e%Sm.length]}function Tm(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var _m={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=e.config,{elements:a}=i,s=Tm(r)||(o=i)&&(o.borderColor||o.backgroundColor)||a&&Tm(a)||"rgba(0,0,0,0.1)"!==Ud.borderColor||"rgba(0,0,0,0.1)"!==Ud.backgroundColor;var o;if(!n.forceOverride&&s)return;const l=function(e){let t=0;return(n,r)=>{const i=e.getDatasetMeta(r).controller;i instanceof Cf?t=function(e,t){return e.backgroundColor=e.data.map(()=>wm(t++)),t}(n,t):i instanceof Pf?t=function(e,t){return e.backgroundColor=e.data.map(()=>km(t++)),t}(n,t):i&&(t=function(e,t){return e.borderColor=wm(t),e.backgroundColor=km(t),++t}(n,t))}}(e);r.forEach(l)}};function Am(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Rm(e){e.data.datasets.forEach(e=>{Am(e)})}var Lm={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void Rm(e);const r=e.width;e.data.datasets.forEach((t,i)=>{const{_data:a,indexAxis:s}=t,o=e.getDatasetMeta(i),l=a||t.data;if("y"===uh([s,e.options.indexAxis]))return;if(!o.controller.supportsDecimation)return;const c=e.scales[o.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let u,{start:d,count:h}=function(e,t){const n=t.length;let r,i=0;const{iScale:a}=e,{min:s,max:o,minDefined:l,maxDefined:c}=a.getUserBounds();return l&&(i=od(ud(t,a.axis,s).lo,0,n-1)),r=c?od(ud(t,a.axis,o).hi+1,i,n)-i:n-i,{start:i,count:r}}(o,l);if(h<=(n.threshold||4*r))Am(t);else{switch(vu(a)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":u=function(e,t,n,r,i){const a=i.samples||r;if(a>=n)return e.slice(t,t+n);const s=[],o=(n-2)/(a-2);let l=0;const c=t+n-1;let u,d,h,f,p,m=t;for(s[l++]=e[m],u=0;u<a-2;u++){let r,i=0,a=0;const c=Math.floor((u+1)*o)+1+t,g=Math.min(Math.floor((u+2)*o)+1,n)+t,v=g-c;for(r=c;r<g;r++)i+=e[r].x,a+=e[r].y;i/=v,a/=v;const b=Math.floor(u*o)+1+t,y=Math.min(Math.floor((u+1)*o)+1,n)+t,{x:E,y:x}=e[m];for(h=f=-1,r=b;r<y;r++)f=.5*Math.abs((E-i)*(e[r].y-x)-(E-e[r].x)*(a-x)),f>h&&(h=f,d=e[r],p=r);s[l++]=d,m=p}return s[l++]=e[c],s}(l,d,h,r,n);break;case"min-max":u=function(e,t,n,r){let i,a,s,o,l,c,u,d,h,f,p=0,m=0;const g=[],v=t+n-1,b=e[t].x,y=e[v].x-b;for(i=t;i<t+n;++i){a=e[i],s=(a.x-b)/y*r,o=a.y;const t=0|s;if(t===l)o<h?(h=o,c=i):o>f&&(f=o,u=i),p=(m*p+a.x)/++m;else{const n=i-1;if(!vu(c)&&!vu(u)){const t=Math.min(c,u),r=Math.max(c,u);t!==d&&t!==n&&g.push({...e[t],x:p}),r!==d&&r!==n&&g.push({...e[r],x:p})}i>0&&n!==d&&g.push(e[n]),g.push(a),l=t,m=0,h=f=o,c=u=d=i}}return g}(l,d,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}t._decimated=u}})},destroy(e){Rm(e)}};function Cm(e,t,n,r){if(r)return;let i=t[e],a=n[e];return"angle"===e&&(i=ad(i),a=ad(a)),{property:e,start:i,end:a}}function Pm(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function Im(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function Nm(e,t){let n=[],r=!1;return bu(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},i=t.points,a=[];return t.segments.forEach(({start:e,end:t})=>{t=Pm(e,t,i);const s=i[e],o=i[t];null!==r?(a.push({x:s.x,y:r}),a.push({x:o.x,y:r})):null!==n&&(a.push({x:n,y:s.y}),a.push({x:n,y:o.y}))}),a}(e,t),n.length?new fm({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Dm(e){return e&&!1!==e.fill}function Om(e,t,n){let r=e[t].fill;const i=[t];let a;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!Eu(r))return r;if(a=e[r],!a)return!1;if(a.visible)return r;i.push(r),r=a.fill}return!1}function Mm(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=Su(n&&n.target,n);return void 0===r&&(r=!!t.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(e);if(yu(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return Eu(i)&&Math.floor(i)===i?function(e,t,n,r){return"-"!==e&&"+"!==e||(n=t+n),!(n===t||n<0||n>=r)&&n}(r[0],t,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Fm(e,t,n){const r=[];for(let i=0;i<n.length;i++){const a=n[i],{first:s,last:o,point:l}=Bm(a,t,"x");if(!(!l||s&&o))if(s)r.unshift(l);else if(e.push(l),!o)break}e.push(...r)}function Bm(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const i=r[n],a=e.segments,s=e.points;let o=!1,l=!1;for(let e=0;e<a.length;e++){const t=a[e],r=s[t.start][n],c=s[t.end][n];if(ld(i,r,c)){o=i===r,l=i===c;break}}return{first:o,last:l,point:r}}class Um{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:i,radius:a}=this;return t=t||{start:0,end:ju},e.arc(r,i,a,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,i=e.angle;return{x:t+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function jm(e,t,n){const r=function(e){const{chart:t,fill:n,line:r}=e;if(Eu(n))return function(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,i=[],a=r.segments,s=r.points,o=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let e=0;e<r.length;e++){const i=r[e];if(i.index===t)break;i.hidden||n.unshift(i.dataset)}return n}(t,n);o.push(Nm({x:null,y:t.bottom},r));for(let e=0;e<a.length;e++){const t=a[e];for(let e=t.start;e<=t.end;e++)Fm(i,s[e],o)}return new fm({points:i,options:{}})}(e);if("shape"===n)return!0;const i=function(e){return(e.scale||{}).getPointPositionForValue?function(e){const{scale:t,fill:n}=e,r=t.options,i=t.getLabels().length,a=r.reverse?t.max:t.min,s=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:yu(e)?e.value:t.getBaseValue(),r}(n,t,a),o=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,a);return new Um({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(s)})}for(let e=0;e<i;++e)o.push(t.getPointPositionForValue(e,s));return o}(e):function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:yu(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(Eu(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return i instanceof Um?i:Nm(i,r)}(t),{chart:i,index:a,line:s,scale:o,axis:l}=t,c=s.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},p=i.getDatasetMeta(a),m=nf(i,p);r&&s.points.length&&(Kd(e,n),function(e,t){const{line:n,target:r,above:i,below:a,area:s,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save();let u=a;a!==i&&("x"===c?($m(e,r,s.top),Vm(e,{line:n,target:r,color:i,scale:o,property:c,clip:l}),e.restore(),e.save(),$m(e,r,s.bottom)):"y"===c&&(zm(e,r,s.left),Vm(e,{line:n,target:r,color:a,scale:o,property:c,clip:l}),e.restore(),e.save(),zm(e,r,s.right),u=i)),Vm(e,{line:n,target:r,color:u,scale:o,property:c,clip:l}),e.restore()}(e,{line:s,target:r,above:h,below:f,area:n,scale:o,axis:l,clip:m}),Yd(e))}function $m(e,t,n){const{segments:r,points:i}=t;let a=!0,s=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=i[r],u=i[Pm(r,l,i)];a?(e.moveTo(c.x,c.y),a=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),s=!!t.pathSegment(e,o,{move:s}),s?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function zm(e,t,n){const{segments:r,points:i}=t;let a=!0,s=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=i[r],u=i[Pm(r,l,i)];a?(e.moveTo(c.x,c.y),a=!1):(e.lineTo(n,c.y),e.lineTo(c.x,c.y)),s=!!t.pathSegment(e,o,{move:s}),s?e.closePath():e.lineTo(n,u.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function Vm(e,t){const{line:n,target:r,property:i,color:a,scale:s,clip:o}=t,l=function(e,t,n){const r=e.segments,i=e.points,a=t.points,s=[];for(const e of r){let{start:r,end:o}=e;o=Pm(r,o,i);const l=Cm(n,i[r],i[o],e.loop);if(!t.segments){s.push({source:e,target:l,start:i[r],end:i[o]});continue}const c=Jh(t,l);for(const t of c){const r=Cm(n,a[t.start],a[t.end],t.loop),o=Qh(e,i,r);for(const e of o)s.push({source:e,target:t,start:{[n]:Im(l,r,"start",Math.max)},end:{[n]:Im(l,r,"end",Math.min)}})}}return s}(n,r,i);for(const{source:t,target:c,start:u,end:d}of l){const{style:{backgroundColor:l=a}={}}=t,h=!0!==r;e.save(),e.fillStyle=l,Gm(e,s,o,h&&Cm(i,u,d)),e.beginPath();const f=!!n.pathSegment(e,t);let p;if(h){f?e.closePath():Hm(e,r,d,i);const t=!!r.pathSegment(e,c,{move:f,reverse:!0});p=f&&t,p||Hm(e,r,u,i)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function Gm(e,t,n,r){const i=t.chart.chartArea,{property:a,start:s,end:o}=r||{};if("x"===a||"y"===a){let t,r,l,c;"x"===a?(t=s,r=i.top,l=o,c=i.bottom):(t=i.left,r=s,l=i.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),e.rect(t,r,l-t,c-r),e.clip()}}function Hm(e,t,n,r){const i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var Wm={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,i=[];let a,s,o,l;for(s=0;s<r;++s)a=e.getDatasetMeta(s),o=a.dataset,l=null,o&&o.options&&o instanceof fm&&(l={visible:e.isDatasetVisible(s),index:s,fill:Mm(o,s,r),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:o}),a.$filler=l,i.push(l);for(s=0;s<r;++s)l=i[s],l&&!1!==l.fill&&(l.fill=Om(i,s,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,i=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let t=i.length-1;t>=0;--t){const n=i[t].$filler;n&&(n.line.updateControlPoints(a,n.axis),r&&n.fill&&jm(e.ctx,n,a))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let t=r.length-1;t>=0;--t){const n=r[t].$filler;Dm(n)&&jm(e.ctx,n,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;Dm(r)&&"beforeDatasetDraw"===n.drawTime&&jm(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Km=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class Ym extends vp{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ku(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=ch(n.font),i=r.size,a=this._computeTitleHeight(),{boxWidth:s,itemHeight:o}=Km(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,i,s,o)+10):(c=this.maxHeight,l=this._fitCols(a,r,s,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:a,options:{labels:{padding:s}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+s;let u=e;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*s>a)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),o[f]={left:0,top:h,row:d,width:p,height:r},l[l.length-1]+=p+s}),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:a,options:{labels:{padding:s}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e;let u=s,d=0,h=0,f=0,p=0;return this.legendItems.forEach((e,a)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,i){const a=function(e,t,n,r){let i=e.text;return i&&"string"!=typeof i&&(i=i.reduce((e,t)=>e.length>t.length?e:t)),t+n.size/2+r.measureText(i).width}(r,e,t,n),s=function(e,t,n){let r=e;return"string"!=typeof t.text&&(r=qm(t,n)),r}(i,r,t.lineHeight);return{itemWidth:a,itemHeight:s}}(n,t,i,e,r);a>0&&h+g+2*s>c&&(u+=d+s,l.push({width:d,height:h}),f+=d+s,p++,d=h=0),o[a]={left:f,top:h,col:p,width:m,height:g},d=Math.max(d,m),h+=g+s}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,a=Wh(i,this.left,this.width);if(this.isHorizontal()){let i=0,s=bd(n,this.left+r,this.right-this.lineWidths[i]);for(const o of t)i!==o.row&&(i=o.row,s=bd(n,this.left+r,this.right-this.lineWidths[i])),o.top+=this.top+e+r,o.left=a.leftForLtr(a.x(s),o.width),s+=o.width+r}else{let i=0,s=bd(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const o of t)o.col!==i&&(i=o.col,s=bd(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),o.top=s,o.left+=this.left+r,o.left=a.leftForLtr(a.x(o.left),o.width),s+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Kd(e,this),this._draw(),Yd(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:a}=e,s=Ud.color,o=Wh(e.rtl,this.left,this.width),l=ch(a.font),{padding:c}=a,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=Km(a,u),g=this.isHorizontal(),v=this._computeTitleHeight();h=g?{x:bd(i,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:bd(i,this.top+v+c,this.bottom-t[0].height),line:0},Kh(this.ctx,e.textDirection);const b=m+c;this.legendItems.forEach((y,E)=>{r.strokeStyle=y.fontColor,r.fillStyle=y.fontColor;const x=r.measureText(y.text).width,S=o.textAlign(y.textAlign||(y.textAlign=a.textAlign)),w=f+d+x;let k=h.x,T=h.y;if(o.setWidth(this.width),g?E>0&&k+w+c>this.right&&(T=h.y+=b,h.line++,k=h.x=bd(i,this.left+c,this.right-n[h.line])):E>0&&T+b>this.bottom&&(k=h.x=k+t[h.line].width+c,h.line++,T=h.y=bd(i,this.top+v+c,this.bottom-t[h.line].height)),function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=Su(n.lineWidth,1);if(r.fillStyle=Su(n.fillStyle,s),r.lineCap=Su(n.lineCap,"butt"),r.lineDashOffset=Su(n.lineDashOffset,0),r.lineJoin=Su(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=Su(n.strokeStyle,s),r.setLineDash(Su(n.lineDash,[])),a.usePointStyle){const s={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=o.xPlus(e,f/2);Hd(r,s,l,t+d,a.pointStyleWidth&&f)}else{const a=t+Math.max((u-p)/2,0),s=o.leftForLtr(e,f),l=oh(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?eh(r,{x:s,y:a,w:f,h:p,radius:l}):r.rect(s,a,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(o.x(k),T,y),k=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(S,k+f+d,g?k+w:this.right,e.rtl),function(e,t,n){Zd(r,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(k),T,y),g)h.x+=w+c;else if("string"!=typeof y.text){const e=l.lineHeight;h.y+=qm(y,e)+c}else h.y+=b}),Yh(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=ch(t.font),r=lh(t.padding);if(!t.display)return;const i=Wh(e.rtl,this.left,this.width),a=this.ctx,s=t.position,o=n.size/2,l=r.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=bd(e.align,u,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+bd(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=bd(s,u,u+d);a.textAlign=i.textAlign(vd(s)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,Zd(a,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=ch(e.font),n=lh(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(ld(e,this.left,this.right)&&ld(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],ld(e,r.left,r.left+r.width)&&ld(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){return!("mousemove"!==e&&"mouseout"!==e||!t.onHover&&!t.onLeave)||!(!t.onClick||"click"!==e&&"mouseup"!==e)}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const a=this._hoveredItem,s=(i=n,null!==(r=a)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);a&&!s&&ku(t.onLeave,[e,a,this],this),this._hoveredItem=n,n&&!s&&ku(t.onHover,[e,n,this],this)}else n&&ku(t.onClick,[e,n,this],this);var r,i}}function qm(e,t){return t*(e.text?e.text.length:0)}var Xm={id:"legend",_element:Ym,start(e,t,n){const r=e.legend=new Ym({ctx:e.ctx,options:n,chart:e});Zf.configure(e,r,n),Zf.addBox(e,r)},stop(e){Zf.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Zf.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:a,useBorderRadius:s,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=lh(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:s&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Qm extends vp{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=bu(n.text)?n.text.length:1;this._padding=lh(n.padding);const i=r*ch(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:a}=this,s=a.align;let o,l,c,u=0;return this.isHorizontal()?(l=bd(s,n,i),c=t+e,o=i-n):("left"===a.position?(l=n+e,c=bd(s,r,t),u=-.5*Uu):(l=i-e,c=bd(s,t,r),u=.5*Uu),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=ch(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:a,maxWidth:s,rotation:o}=this._drawArgs(r);Zd(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:o,textAlign:vd(t.align),textBaseline:"middle",translation:[i,a]})}}var Jm={id:"title",_element:Qm,start(e,t,n){!function(e,t){const n=new Qm({ctx:e.ctx,options:t,chart:e});Zf.configure(e,n,t),Zf.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Zf.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Zf.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zm=new WeakMap;var eg={id:"subtitle",start(e,t,n){const r=new Qm({ctx:e.ctx,options:n,chart:e});Zf.configure(e,r,n),Zf.addBox(e,r),Zm.set(e,r)},stop(e){Zf.removeBox(e,Zm.get(e)),Zm.delete(e)},beforeUpdate(e,t,n){const r=Zm.get(e);Zf.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const tg={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,a=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++a}}if(0===a||0===r.size)return!1;return{x:[...r].reduce((e,t)=>e+t)/r.size,y:i/a}},nearest(e,t){if(!e.length)return!1;let n,r,i,a=t.x,s=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=rd(t,r.getCenterPoint());e<o&&(o=e,i=r)}}if(i){const e=i.tooltipPosition();a=e.x,s=e.y}return{x:a,y:s}}};function ng(e,t){return t&&(bu(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function rg(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function ig(e,t){const{element:n,datasetIndex:r,index:i}=t,a=e.getDatasetMeta(r).controller,{label:s,value:o}=a.getLabelAndValue(i);return{chart:e,label:s,parsed:a.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:o,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function ag(e,t){const n=e.chart.ctx,{body:r,footer:i,title:a}=e,{boxWidth:s,boxHeight:o}=t,l=ch(t.bodyFont),c=ch(t.titleFont),u=ch(t.footerFont),d=a.length,h=i.length,f=r.length,p=lh(t.padding);let m=p.height,g=0,v=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);v+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v&&(m+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing),h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let b=0;const y=function(e){g=Math.max(g,n.measureText(e).width+b)};return n.save(),n.font=c.string,Tu(e.title,y),n.font=l.string,Tu(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?s+2+t.boxPadding:0,Tu(r,e=>{Tu(e.before,y),Tu(e.lines,y),Tu(e.after,y)}),b=0,n.font=u.string,Tu(e.footer,y),n.restore(),g+=p.width,{width:g,height:m}}function sg(e,t,n,r){const{x:i,width:a}=n,{width:s,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=i<=(o+l)/2?"left":"right":i<=a/2?c="left":i>=s-a/2&&(c="right"),function(e,t,n,r){const{x:i,width:a}=r,s=n.caretSize+n.caretPadding;return"left"===e&&i+a+s>t.width||"right"===e&&i-a-s<0||void 0}(c,e,t,n)&&(c="center"),c}function og(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||sg(e,t,n,r),yAlign:r}}function lg(e,t,n,r){const{caretSize:i,caretPadding:a,cornerRadius:s}=e,{xAlign:o,yAlign:l}=n,c=i+a,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=oh(s);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,h)+i:"right"===o&&(p+=Math.max(d,f)+i),{x:od(p,0,r.width-t.width),y:od(m,0,r.height-t.height)}}function cg(e,t,n){const r=lh(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function ug(e){return ng([],rg(e))}function dg(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const hg={beforeTitle:mu,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:mu,beforeBody:mu,beforeLabel:mu,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return vu(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:mu,afterBody:mu,beforeFooter:mu,footer:mu,afterFooter:mu};function fg(e,t,n,r){const i=e[t].call(n,r);return void 0===i?hg[t].call(n,r):i}class pg extends vp{static positioners=tg;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new cf(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=dh(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"}))}getTitle(e,t){const{callbacks:n}=t,r=fg(n,"beforeTitle",this,e),i=fg(n,"title",this,e),a=fg(n,"afterTitle",this,e);let s=[];return s=ng(s,rg(r)),s=ng(s,rg(i)),s=ng(s,rg(a)),s}getBeforeBody(e,t){return ug(fg(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return Tu(e,e=>{const t={before:[],lines:[],after:[]},i=dg(n,e);ng(t.before,rg(fg(i,"beforeLabel",this,e))),ng(t.lines,fg(i,"label",this,e)),ng(t.after,rg(fg(i,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return ug(fg(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=fg(n,"beforeFooter",this,e),i=fg(n,"footer",this,e),a=fg(n,"afterFooter",this,e);let s=[];return s=ng(s,rg(r)),s=ng(s,rg(i)),s=ng(s,rg(a)),s}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],a=[];let s,o,l=[];for(s=0,o=t.length;s<o;++s)l.push(ig(this.chart,t[s]));return e.filter&&(l=l.filter((t,r,i)=>e.filter(t,r,i,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),Tu(l,t=>{const n=dg(e.callbacks,t);r.push(fg(n,"labelColor",this,t)),i.push(fg(n,"labelPointStyle",this,t)),a.push(fg(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,a=[];if(r.length){const e=tg[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const t=this._size=ag(this,n),s=Object.assign({},e,t),o=og(this.chart,n,s),l=lg(n,s,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:a,cornerRadius:s}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=oh(s),{x:d,y:h}=e,{width:f,height:p}=t;let m,g,v,b,y,E;return"center"===i?(y=h+p/2,"left"===r?(m=d,g=m-a,b=y+a,E=y-a):(m=d+f,g=m+a,b=y-a,E=y+a),v=m):(g="left"===r?d+Math.max(o,c)+a:"right"===r?d+f-Math.max(l,u)-a:this.caretX,"top"===i?(b=h,y=b-a,m=g-a,v=g+a):(b=h+p,y=b+a,m=g+a,v=g-a),E=b),{x1:m,x2:g,x3:v,y1:b,y2:y,y3:E}}drawTitle(e,t,n){const r=this.title,i=r.length;let a,s,o;if(i){const l=Wh(n.rtl,this.x,this.width);for(e.x=cg(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",a=ch(n.titleFont),s=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,o=0;o<i;++o)t.fillText(r[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+s,o+1===i&&(e.y+=n.titleMarginBottom-s)}}_drawColorBox(e,t,n,r,i){const a=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=i,c=ch(i.bodyFont),u=cg(this,"left",i),d=r.x(u),h=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+h;if(i.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=f+o/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Gd(e,t,n,c),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Gd(e,t,n,c)}else{e.lineWidth=yu(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const t=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),s=oh(a.borderRadius);Object.values(s).some(e=>0!==e)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,eh(e,{x:t,y:f,w:l,h:o,radius:s}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),eh(e,{x:n,y:f+1,w:l-2,h:o-2,radius:s}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=a.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:a,displayColors:s,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=ch(n.bodyFont);let d=u.lineHeight,h=0;const f=Wh(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+i},m=f.textAlign(a);let g,v,b,y,E,x,S;for(t.textAlign=a,t.textBaseline="middle",t.font=u.string,e.x=cg(this,m,n),t.fillStyle=n.bodyColor,Tu(this.beforeBody,p),h=s&&"right"!==m?"center"===a?l/2+c:l+2+c:0,y=0,x=r.length;y<x;++y){for(g=r[y],v=this.labelTextColors[y],t.fillStyle=v,Tu(g.before,p),b=g.lines,s&&b.length&&(this._drawColorBox(t,e,y,f,n),d=Math.max(u.lineHeight,o)),E=0,S=b.length;E<S;++E)p(b[E]),d=u.lineHeight;Tu(g.after,p)}h=0,d=u.lineHeight,Tu(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let a,s;if(i){const o=Wh(n.rtl,this.x,this.width);for(e.x=cg(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",a=ch(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,s=0;s<i;++s)t.fillText(r[s],o.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:a}=this,{x:s,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=oh(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(s+u,o),"top"===a&&this.drawCaret(e,t,n,r),t.lineTo(s+l-d,o),t.quadraticCurveTo(s+l,o,s+l,o+d),"center"===a&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(s+l,o+c-f),t.quadraticCurveTo(s+l,o+c,s+l-f,o+c),"bottom"===a&&this.drawCaret(e,t,n,r),t.lineTo(s+h,o+c),t.quadraticCurveTo(s,o+c,s,o+c-h),"center"===a&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(s,o+u),t.quadraticCurveTo(s,o,s+u,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=tg[e.position].call(this,this._active,this._eventPosition);if(!n)return;const a=this._size=ag(this,e),s=Object.assign({},n,this._size),o=og(t,e,s),l=lg(e,s,o,t);r._to===l.x&&i._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=a.width,this.height=a.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=lh(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),Kh(e,t.textDirection),i.y+=a.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),Yh(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(({datasetIndex:e,index:t})=>{const n=this.chart.getDatasetMeta(e);if(!n)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:n.data[t],index:t}}),i=!_u(n,r),a=this._positionChanged(r,t);(i||a)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],a=this._getActiveElements(e,i,t,n),s=this._positionChanged(a,e),o=t||!_u(a,i)||s;return o&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const a=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,a=tg[i.position].call(this,e,t);return!1!==a&&(n!==a.x||r!==a.y)}}var mg={id:"tooltip",_element:pg,positioners:tg,afterInit(e,t,n){n&&(e.tooltip=new pg({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:hg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},gg=Object.freeze({__proto__:null,Colors:_m,Decimation:Lm,Filler:Wm,Legend:Xm,SubTitle:eg,Title:Jm,Tooltip:mg});function vg(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}function bg(e,t,{horizontal:n,minRotation:r}){const i=Zu(r),a=(n?Math.sin(i):Math.cos(i))||.001,s=.75*t*(""+e).length;return Math.min(t/a,s)}class yg extends _p{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return vu(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const a=e=>r=t?r:e,s=e=>i=n?i:e;if(e){const e=Yu(r),t=Yu(i);e<0&&t<0?s(0):e>0&&t>0&&a(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);s(i+t),e||a(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=function(e,t){const n=[],{bounds:r,step:i,min:a,max:s,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=i||1,f=c-1,{min:p,max:m}=t,g=!vu(a),v=!vu(s),b=!vu(l),y=(m-p)/(u+1);let E,x,S,w,k=Xu((m-p)/f/h)*h;if(k<1e-14&&!g&&!v)return[{value:p},{value:m}];w=Math.ceil(m/k)-Math.floor(p/k),w>f&&(k=Xu(w*k/f/h)*h),vu(o)||(E=Math.pow(10,o),k=Math.ceil(k*E)/E),"ticks"===r?(x=Math.floor(p/k)*k,S=Math.ceil(m/k)*k):(x=p,S=m),g&&v&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((s-a)/i,k/1e3)?(w=Math.round(Math.min((s-a)/k,c)),k=(s-a)/w,x=a,S=s):b?(x=g?a:x,S=v?s:S,w=l-1,k=(S-x)/w):(w=(S-x)/k,w=qu(w,Math.round(w),k/1e3)?Math.round(w):Math.ceil(w));const T=Math.max(td(k),td(x));E=Math.pow(10,vu(o)?T:o),x=Math.round(x*E)/E,S=Math.round(S*E)/E;let _=0;for(g&&(d&&x!==a?(n.push({value:a}),x<a&&_++,qu(Math.round((x+_*k)*E)/E,a,bg(a,y,e))&&_++):x<a&&_++);_<w;++_){const e=Math.round((x+_*k)*E)/E;if(v&&e>s)break;n.push({value:e})}return v&&d&&S!==s?n.length&&qu(n[n.length-1].value,s,bg(s,y,e))?n[n.length-1].value=s:n.push({value:s}):v&&S!==s||n.push({value:S}),n}({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Ju(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Pd(e,this.chart.options.locale,this.options.ticks.format)}}class Eg extends yg{static id="linear";static defaults={ticks:{callback:Nd.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Eu(e)?e:0,this.max=Eu(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Zu(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const xg=e=>Math.floor(Ku(e)),Sg=(e,t)=>Math.pow(10,xg(e)+t);function wg(e){return 1===e/Math.pow(10,xg(e))}function kg(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}class Tg extends _p{static id="logarithmic";static defaults={ticks:{callback:Nd.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=yg.prototype.parse.apply(this,[e,t]);if(0!==n)return Eu(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Eu(e)?Math.max(0,e):null,this.max=Eu(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Eu(this._userMin)&&(this.min=e===Sg(this.min,0)?Sg(this.min,-1):Sg(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,a=e=>r=t?r:e;n===r&&(n<=0?(i(1),a(10)):(i(Sg(n,-1)),a(Sg(r,1)))),n<=0&&i(Sg(r,-1)),r<=0&&a(Sg(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=function(e,{min:t,max:n}){t=xu(e.min,t);const r=[],i=xg(t);let a=function(e,t){let n=xg(t-e);for(;kg(e,t,n)>10;)n++;for(;kg(e,t,n)<10;)n--;return Math.min(n,xg(e))}(t,n),s=a<0?Math.pow(10,Math.abs(a)):1;const o=Math.pow(10,a),l=i>a?Math.pow(10,i):0,c=Math.round((t-l)*s)/s,u=Math.floor((t-l)/o/10)*o*10;let d=Math.floor((c-u)/Math.pow(10,a)),h=xu(e.min,Math.round((l+u+d*Math.pow(10,a))*s)/s);for(;h<n;)r.push({value:h,major:wg(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,s=a>=0?1:s),h=Math.round((l+u+d*Math.pow(10,a))*s)/s;const f=xu(e.max,h);return r.push({value:f,major:wg(f),significand:d}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Ju(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Pd(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ku(e),this._valueRange=Ku(this.max)-Ku(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ku(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function _g(e){const t=e.ticks;if(t.display&&e.display){const e=lh(t.backdropPadding);return Su(t.font&&t.font.size,Ud.font.size)+e.height}return 0}function Ag(e,t,n){return n=bu(n)?n:[n],{w:$d(e,t.string,n),h:n.length*t.lineHeight}}function Rg(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function Lg(e,t,n,r,i){const a=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/a,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/a,e.r=Math.max(e.r,t.r+o)),i.start<t.t?(l=(t.t-i.start)/s,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function Cg(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:a,padding:s,size:o}=n,l=e.getPointPosition(t,r+i+s,a),c=Math.round(ed(ad(l.angle+Gu))),u=function(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}(l.y,o.h,c),d=function(e){return 0===e||180===e?"center":e<180?"left":"right"}(c),h=function(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function Pg(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:a}=e;return!(Wd({x:n,y:r},t)||Wd({x:n,y:a},t)||Wd({x:i,y:r},t)||Wd({x:i,y:a},t))}function Ig(e,t,n){const{left:r,top:i,right:a,bottom:s}=n,{backdropColor:o}=t;if(!vu(o)){const n=oh(t.borderRadius),l=lh(t.backdropPadding);e.fillStyle=o;const c=r-l.left,u=i-l.top,d=a-r+l.width,h=s-i+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),eh(e,{x:c,y:u,w:d,h,radius:n}),e.fill()):e.fillRect(c,u,d,h)}}function Ng(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,ju);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let a=1;a<r;a++)n=e.getPointPosition(a,t),i.lineTo(n.x,n.y)}}class Dg extends yg{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Nd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=lh(_g(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Eu(e)&&!isNaN(e)?e:0,this.max=Eu(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/_g(this.options))}generateTickLabels(e){yg.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=ku(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?function(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],a=e._pointLabels.length,s=e.options.pointLabels,o=s.centerPointLabels?Uu/a:0;for(let l=0;l<a;l++){const a=s.setContext(e.getPointLabelContext(l));i[l]=a.padding;const c=e.getPointPosition(l,e.drawingArea+i[l],o),u=ch(a.font),d=Ag(e.ctx,u,e._pointLabels[l]);r[l]=d;const h=ad(e.getIndexAngle(l)+o),f=Math.round(ed(h));Lg(n,t,h,Rg(f,c.x,d.w,0,180),Rg(f,c.y,d.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,a=e.options,{centerPointLabels:s,display:o}=a.pointLabels,l={extra:_g(a)/2,additionalAngle:s?Uu/i:0};let c;for(let a=0;a<i;a++){l.padding=n[a],l.size=t[a];const i=Cg(e,a,l);r.push(i),"auto"===o&&(i.visible=Pg(i,c),i.visible&&(c=i))}return r}(e,r,i)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return ad(e*(ju/(this._pointLabels.length||1))+Zu(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(vu(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(vu(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return dh(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t,n=0){const r=this.getIndexAngle(e)-Gu+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Ng(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,a=this._pointLabels.length;let s,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const a=r.setContext(e.getPointLabelContext(i));Ig(n,a,t);const s=ch(a.font),{x:o,y:l,textAlign:c}=t;Zd(n,e._pointLabels[i],o,l+s.lineHeight/2,s,{color:a.color,textAlign:c,textBaseline:"middle"})}}(this,a),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),s=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const a=e.ctx,s=t.circular,{color:o,lineWidth:l}=t;!s&&!r||!o||!l||n<0||(a.save(),a.strokeStyle=o,a.lineWidth=l,a.setLineDash(i.dash||[]),a.lineDashOffset=i.dashOffset,a.beginPath(),Ng(e,n,s,r),a.closePath(),a.stroke(),a.restore())}(this,s,o,a,l)}}),n.display){for(e.save(),s=a-1;s>=0;s--){const r=n.setContext(this.getPointLabelContext(s)),{color:i,lineWidth:a}=r;a&&i&&(e.lineWidth=a,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(s,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,s)=>{if(0===s&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(s)),l=ch(o.font);if(i=this.getDistanceFromCenterForValue(this.ticks[s].value),o.showLabelBackdrop){e.font=l.string,a=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=lh(o.backdropPadding);e.fillRect(-a/2-t.left,-i-l.size/2-t.top,a+t.width,l.size+t.height)}Zd(e,r.label,0,-i,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}const Og={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Mg=Object.keys(Og);function Fg(e,t){return e-t}function Bg(e,t){if(vu(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:a}=e._parseOpts;let s=t;return"function"==typeof r&&(s=r(s)),Eu(s)||(s="string"==typeof r?n.parse(s,r):n.parse(s)),null===s?null:(i&&(s="week"!==i||!Qu(a)&&!0!==a?n.startOf(s,i):n.startOf(s,"isoWeek",a)),+s)}function Ug(e,t,n,r){const i=Mg.length;for(let a=Mg.indexOf(e);a<i-1;++a){const e=Og[Mg[a]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return Mg[a]}return Mg[i-1]}function jg(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=cd(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function $g(e,t,n){const r=[],i={},a=t.length;let s,o;for(s=0;s<a;++s)o=t[s],i[o]=s,r.push({value:o,major:!1});return 0!==a&&n?function(e,t,n,r){const i=e._adapter,a=+i.startOf(t[0].value,r),s=t[t.length-1].value;let o,l;for(o=a;o<=s;o=+i.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class zg extends _p{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const n=e.time||(e.time={}),r=this._adapter=new Of(e.adapters.date);r.init(t),Pu(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Bg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:a,maxDefined:s}=this.getUserBounds();function o(e){a||isNaN(e.min)||(r=Math.min(r,e.min)),s||isNaN(e.max)||(i=Math.max(i,e.max))}a&&s||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=Eu(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=Eu(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,a=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?Ug(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let a=Mg.length-1;a>=Mg.indexOf(n);a--){const n=Mg[a];if(Og[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return Mg[n?Mg.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=Mg.indexOf(e)+1,n=Mg.length;t<n;++t)if(Og[Mg[t]].common)return Mg[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&a.reverse(),$g(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t,n,r=0,i=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),i=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;r=od(r,0,a),i=od(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,a=i.unit||Ug(i.minUnit,t,n,this._getLabelCapacity(t)),s=Su(r.ticks.stepSize,1),o="week"===a&&i.isoWeekday,l=Qu(o)||!0===o,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":a),e.diff(n,t,a)>1e5*s)throw new Error(t+" and "+n+" are too far apart with stepSize of "+s+" "+a);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,s,a),d++)jg(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==d||jg(c,u,f),Object.keys(c).sort(Fg).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,a=i.ticks.callback;if(a)return ku(a,[e,t,n],this);const s=i.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&s[o],u=l&&s[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,r||(h?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=Zu(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),a=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:n*i+s*a,h:n*a+s*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,$g(this,[e],this._majorUnit),r),a=this._getLabelSize(i),s=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(Bg(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return pd(e.sort(Fg))}}function Vg(e,t,n){let r,i,a,s,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=ud(e,"pos",t)),({pos:r,time:a}=e[o]),({pos:i,time:s}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=ud(e,"time",t)),({time:r,pos:a}=e[o]),({time:i,pos:s}=e[l]));const c=i-r;return c?a+(s-a)*(t-r)/c:a}var Gg=Object.freeze({__proto__:null,CategoryScale:class extends _p{static id="category";static defaults={ticks:{callback:vg}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(vu(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:od(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:function(e,t,n,r){const i=e.indexOf(t);return-1===i?((e,t,n,r)=>("string"==typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r):i!==e.lastIndexOf(t)?n:i}(n,e,Su(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=e;n<=t;n++)r.push({value:n});return r}getLabelForValue(e){return vg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:Eg,LogarithmicScale:Tg,RadialLinearScale:Dg,TimeScale:zg,TimeSeriesScale:class extends zg{static id="timeseries";static defaults=zg.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Vg(t,this.min),this._tableRange=Vg(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let a,s,o,l,c;for(a=0,s=e.length;a<s;++a)l=e[a],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,s=r.length;a<s;++a)c=r[a+1],o=r[a-1],l=r[a],Math.round((c+o)/2)!==l&&i.push({time:l,pos:a/(s-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Vg(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Vg(this._table,n*this._tableRange+this._minPos,!0)}}});const Hg=[If,Em,gg,Gg];nm.register(...Hg);var Wg=i(8978),Kg={};Kg.styleTagTransform=y(),Kg.setAttributes=m(),Kg.insert=f().bind(null,"head"),Kg.domAPI=d(),Kg.insertStyleElement=v(),c()(Wg.A,Kg),Wg.A&&Wg.A.locals&&Wg.A.locals,i.p;const Yg=i.p+"zenmaster.png",qg=i.p+"fit_jay.png",Xg=i.p+"lofi_lounge.png",Qg=i.p+"jazzhub.png",Jg=i.p+"energy_reset.png",Zg=i.p+"chicast.png",ev=i.p+"campfire.png",tv=function(){var e=qe((0,r.useState)({}),2),t=e[0],n=e[1],i=qe((0,r.useState)("profiles"),2),a=i[0],s=i[1],o=qe((0,r.useState)(""),2),l=o[0],c=o[1],u=qe((0,r.useState)([]),2),d=u[0],h=u[1],f=qe((0,r.useState)([]),2),p=f[0],m=f[1];(0,r.useEffect)(function(){var e=localStorage.getItem("token");console.log("Token check:",e?"Token found":"No token found"),console.log("All localStorage keys:",Object.keys(localStorage)),e?(console.log("Making API call to fetch profile..."),fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then(function(){var e=Qe(Ze().mark(function e(t){var n;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("API Response status:",t.status),t.ok){e.next=2;break}return e.next=1,t.text();case 1:throw n=e.sent,console.error("API Error:",t.status,n),401!==t.status&&403!==t.status||(console.warn("Authentication failed - token may be expired"),localStorage.removeItem("token")),new Error("API Error: ".concat(t.status));case 2:return e.abrupt("return",t.json());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(e){console.log("Profile data received:",e);var t=e.user||e;n(t),h(t.videos||[]),m(t.images||t.gallery||[])}).catch(function(e){console.error("Error fetching profile:",e),console.warn("Profile fetch failed, user may need to log in")})):console.warn("No token found - user may need to log in")},[]);var g=[{username:"@zenmaster",quote:"Grateful for the community 🙏",image:Yg},{username:"@fit_jay",quote:"Morning flow complete ✅",image:qg}],v=[{name:"DJ Nova",genre:"Ambient & Chillwave",image:zo},{name:"Electric Vibes",genre:"Electronic Fusion",image:Po}],b=[{title:"LoFi Lounge",desc:"Chill beats 24/7",image:Xg},{title:"JazzHub",desc:"Smooth jazz and more 🎷",image:Qg}],y=[{title:"The Energy Reset",desc:"How to ground yourself",image:Jg},{title:"ChiCast",desc:"Breathwork for busy lives",image:Zg}],E=function(e,t){return e&&Array.isArray(e)?e.filter(function(e){return e&&e[t]&&"string"==typeof e[t]&&e[t].toLowerCase().includes(l.toLowerCase())}):[]},x=function(){var e=Qe(Ze().mark(function e(t){var n,r,i,a,s,o,l;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0]){e.next=1;break}return e.abrupt("return");case 1:return(r=t.target).disabled=!0,(i=new FormData).append("file",n),i.append("upload_preset","your_unsigned_preset"),e.prev=2,console.log("Uploading video..."),e.next=3,fetch("https://api.cloudinary.com/v1_1/dli7r0d7s/video/upload",{method:"POST",body:i});case 3:if((a=e.sent).ok){e.next=4;break}throw new Error("Upload failed: ".concat(a.status));case 4:return e.next=5,a.json();case 5:return s=e.sent,console.log("Video uploaded successfully:",s),o={file_url:s.secure_url,title:n.name},h(function(e){return[].concat(vo(e),[o])}),e.next=6,w("videos",[].concat(vo(d),[o]));case 6:r.value="",e.next=8;break;case 7:e.prev=7,l=e.catch(2),console.error("Video upload error:",l),alert("Video upload failed: ".concat(l.message));case 8:return e.prev=8,r.disabled=!1,e.finish(8);case 9:case"end":return e.stop()}},e,null,[[2,7,8,9]])}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Qe(Ze().mark(function e(t){var n,r,i,a,s,o,l;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0]){e.next=1;break}return e.abrupt("return");case 1:return(r=t.target).disabled=!0,(i=new FormData).append("file",n),i.append("upload_preset","your_unsigned_preset"),e.prev=2,console.log("Uploading image..."),e.next=3,fetch("https://api.cloudinary.com/v1_1/dli7r0d7s/image/upload",{method:"POST",body:i});case 3:if((a=e.sent).ok){e.next=4;break}throw new Error("Upload failed: ".concat(a.status));case 4:return e.next=5,a.json();case 5:return s=e.sent,console.log("Image uploaded successfully:",s),o={file_url:s.secure_url,title:n.name},m(function(e){return[].concat(vo(e),[o])}),e.next=6,w("images",[].concat(vo(p),[o]));case 6:r.value="",e.next=8;break;case 7:e.prev=7,l=e.catch(2),console.error("Image upload error:",l),alert("Image upload failed: ".concat(l.message));case 8:return e.prev=8,r.disabled=!1,e.finish(8);case 9:case"end":return e.stop()}},e,null,[[2,7,8,9]])}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Qe(Ze().mark(function e(t,n){var r,i,a,s;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=localStorage.getItem("token")){e.next=1;break}return console.error("No token found"),e.abrupt("return");case 1:return e.prev=1,console.log("Updating ".concat(t," in backend...")),e.next=2,fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/profile"),{method:"PUT",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(We({},t,n))});case 2:if((i=e.sent).ok){e.next=4;break}return e.next=3,i.text();case 3:throw a=e.sent,console.error("Failed to update ".concat(t,":"),i.status,a),new Error("Backend update failed: ".concat(i.status));case 4:console.log("".concat(t," updated successfully in backend")),e.next=6;break;case 5:e.prev=5,s=e.catch(1),console.error("Failed to update ".concat(t,":"),s),alert("Warning: File uploaded to cloud but failed to save to profile: ".concat(s.message));case 6:case"end":return e.stop()}},e,null,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}();return r.createElement("div",{className:"profile-container"},r.createElement("div",{className:"cover-photo-container"},r.createElement("img",{src:t.cover_photo||ev,alt:"Cover",className:"cover-photo"})),r.createElement("div",{style:{marginBottom:"20px"}},r.createElement(Ne,{to:"/profile",className:"upload-btn"},"⬅ Back to Profile Page")),!localStorage.getItem("token")&&r.createElement("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",borderRadius:"4px",marginBottom:"20px",textAlign:"center"}},"Please log in to upload and view your personal content"),r.createElement("div",{className:"tabs"},r.createElement("button",{onClick:function(){return s("profiles")},className:"profiles"===a?"active":""},"Favorite Profiles"),r.createElement("button",{onClick:function(){return s("artists")},className:"artists"===a?"active":""},"Favorite Artists"),r.createElement("button",{onClick:function(){return s("stations")},className:"stations"===a?"active":""},"Radio Stations"),r.createElement("button",{onClick:function(){return s("podcasts")},className:"podcasts"===a?"active":""},"Podcasts"),r.createElement("button",{onClick:function(){return s("videos")},className:"videos"===a?"active":""},"Video Uploads"),r.createElement("button",{onClick:function(){return s("images")},className:"images"===a?"active":""},"Image Uploads")),r.createElement("div",{className:"search-bar"},r.createElement("input",{type:"text",placeholder:"Search ".concat(a),value:l,onChange:function(e){return c(e.target.value)}})),"videos"===a&&localStorage.getItem("token")&&r.createElement("div",{style:{marginBottom:"15px"}},r.createElement("input",{type:"file",accept:"video/*",onChange:x})),"images"===a&&localStorage.getItem("token")&&r.createElement("div",{style:{marginBottom:"15px"}},r.createElement("input",{type:"file",accept:"image/*",onChange:S})),r.createElement("div",{className:"favorites-grid"},"profiles"===a&&E(g,"username").map(function(e,t){return r.createElement("div",{key:t,className:"favorite-card"},r.createElement("img",{src:e.image,alt:e.username}),r.createElement("strong",null,e.username),r.createElement("p",null,e.quote))}),"artists"===a&&E(v,"name").map(function(e,t){return r.createElement("div",{key:t,className:"favorite-card"},r.createElement("img",{src:e.image,alt:e.name}),r.createElement("strong",null,e.name),r.createElement("p",null,e.genre))}),"stations"===a&&E(b,"title").map(function(e,t){return r.createElement("div",{key:t,className:"favorite-card"},r.createElement("img",{src:e.image,alt:e.title}),r.createElement("strong",null,e.title),r.createElement("p",null,e.desc))}),"podcasts"===a&&E(y,"title").map(function(e,t){return r.createElement("div",{key:t,className:"favorite-card"},r.createElement("img",{src:e.image,alt:e.title}),r.createElement("strong",null,e.title),r.createElement("p",null,e.desc))}),"videos"===a&&(d.length>0?E(d,"title").map(function(e,t){return r.createElement("div",{key:t,className:"favorite-card"},r.createElement("video",{src:e.file_url,controls:!0,width:"250"}),r.createElement("p",null,e.title))}):r.createElement("p",null,"No videos found.")),"images"===a&&(p.length>0?E(p,"title").map(function(e,t){return r.createElement("div",{key:t,className:"favorite-card"},r.createElement("img",{src:e.file_url,alt:e.title,style:{width:"100%",borderRadius:"6px"}}),r.createElement("p",null,e.title))}):r.createElement("p",null,"No images found."))))};var nv=function(){var e=Qe(Ze().mark(function e(t){var n;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,fetch("/api/streams/live",{headers:{Authorization:"Bearer ".concat(t)}});case 1:return n=e.sent,e.abrupt("return",n.json());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();const rv=function(e){var t=e.stream;return r.createElement("div",{className:"card shadow-sm mb-4"},r.createElement("div",{className:"card-body"},r.createElement("h5",{className:"card-title"},t.title||"Untitled Stream"),r.createElement("p",{className:"card-text"},"Platform: ",t.platform),r.createElement("div",{className:"ratio ratio-16x9"},r.createElement("iframe",{src:t.stream_url,title:"Stream by ".concat(t.creator_id),allow:"autoplay",allowFullScreen:!0}))))},iv=function(e){var t=e.streams;return t&&0!==t.length?r.createElement("div",{className:"row"},t.map(function(e){return r.createElement("div",{key:e.id,className:"col-md-6 col-lg-4"},r.createElement(rv,{stream:e}))})):r.createElement("p",{className:"text-muted"},"No active squad streams.")};var av=i(8328),sv={};function ov(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ov(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ov(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}sv.styleTagTransform=y(),sv.setAttributes=m(),sv.insert=f().bind(null,"head"),sv.domAPI=d(),sv.insertStyleElement=v(),c()(av.A,sv),av.A&&av.A.locals&&av.A.locals;const cv=function(){var e,t,n,i=(0,r.useContext)(nt).store,a=i.token,s=null===(e=i.user)||void 0===e?void 0:e.id,o=(null===(t=i.user)||void 0===t?void 0:t.username)||(null===(n=i.user)||void 0===n?void 0:n.display_name),l=qe((0,r.useState)([]),2),c=l[0],u=l[1],d=qe((0,r.useState)(!0),2),h=d[0],f=d[1],p=qe((0,r.useState)("video-chat"),2),m=p[0],g=p[1],v=qe((0,r.useState)(!0),2),b=v[0],y=v[1],E=qe((0,r.useState)(!0),2),x=E[0],S=E[1],w=qe((0,r.useState)([]),2),k=w[0],T=w[1],_=qe((0,r.useState)(""),2),A=_[0],R=_[1],L=qe((0,r.useState)(!1),2),C=L[0],P=L[1],I=qe((0,r.useState)("participant"),2),N=I[0],D=I[1],O=qe((0,r.useState)({allowViewers:!0,requirePermission:!1,maxParticipants:8}),2),M=O[0],F=O[1],B=qe((0,r.useState)(!1),2),U=B[0],j=B[1],$=qe((0,r.useState)(!1),2),z=$[0],V=$[1],G=qe((0,r.useState)(null),2),H=G[0],W=G[1],K=qe((0,r.useState)("disconnected"),2),Y=K[0],q=K[1],X=qe((0,r.useState)([]),2),Q=X[0],J=X[1],Z=qe((0,r.useState)([]),2),ee=(Z[0],Z[1],(0,r.useRef)(null)),te=(0,r.useRef)(null);(0,r.useEffect)(function(){var e;a&&nv(a).then(function(e){u(e),f(!1)}).catch(function(e){console.error("Error fetching squad streams:",e),f(!1)}),null!==(e=i.user)&&void 0!==e&&e.squad_id?R("squad-".concat(i.user.squad_id)):R("user-".concat(s,"-room"))},[a,i.user]);var ne=function(){var e=Qe(Ze().mark(function e(){var t,n,r;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q("connecting"),t={video:!!b&&{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}},audio:!!x&&{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}},e.next=1,navigator.mediaDevices.getUserMedia(t);case 1:return n=e.sent,ee.current&&(ee.current.srcObject=n),te.current=n,q("connected"),e.abrupt("return",n);case 2:e.prev=2,r=e.catch(0),console.error("Error accessing media devices:",r),q("error"),"NotAllowedError"===r.name?alert("Camera/microphone access denied. Please allow permissions and try again."):"NotFoundError"===r.name?alert("No camera/microphone found. Please connect a device and try again."):alert("Could not access camera/microphone. Please check your device settings.");case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Qe(Ze().mark(function e(){var t,n;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("viewer"!==N){e.next=1;break}return alert("Viewers cannot share screen. Ask the host for participant access."),e.abrupt("return");case 1:return e.prev=1,e.next=2,navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:15}},audio:!0});case 2:t=e.sent,W(t),V(!0),ae({userId:s,userName:o,isScreenSharing:!0,screenShareId:"screen-".concat(s)}),t.getVideoTracks()[0].addEventListener("ended",function(){ie()}),e.next=4;break;case 3:e.prev=3,n=e.catch(1),console.error("Error starting screen share:",n),"NotAllowedError"===n.name&&alert("Screen sharing permission denied.");case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),ie=function(){H&&(H.getTracks().forEach(function(e){return e.stop()}),W(null),V(!1),ae({userId:s,userName:o,isScreenSharing:!1}))},ae=function(e){console.log("Broadcasting status update:",e)},se=function(){var e=Qe(Ze().mark(function e(){var t;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A.trim()){e.next=1;break}return alert("Please enter a room ID"),e.abrupt("return");case 1:if(Q.length){e.next=2;break}D("host"),j(!0),e.next=4;break;case 2:if(!M.requirePermission){e.next=3;break}return D("viewer"),oe(),e.abrupt("return");case 3:D("participant");case 4:return e.next=5,ne();case 5:P(!0),t={id:s,name:o,role:N,videoEnabled:b,audioEnabled:x,joinedAt:(new Date).toISOString()},J(function(e){return[].concat(vo(e),[t])});case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),oe=function(){alert("This room requires permission. Waiting for host approval...")},le=function(e){return{displayName:e.id===s?"You (".concat(e.name,")"):e.name,roleBadge:{host:"👑",participant:"🎤",viewer:"👁️"}[e.role]||"👤",statusIndicators:[!e.videoEnabled&&"📹❌",!e.audioEnabled&&"🎤❌"].filter(Boolean)}};return r.createElement("div",{className:"team-room-container"},r.createElement("div",{className:"team-room-header"},r.createElement("h1",null,"🧑‍🤝‍🧑 Team Room"),r.createElement("div",{className:"connection-status ".concat(Y)},r.createElement("span",{className:"status-indicator"}),"connected"===Y&&"Connected","connecting"===Y&&"Connecting...","disconnected"===Y&&"Disconnected","error"===Y&&"Connection Error"),r.createElement("div",{className:"mode-toggle"},r.createElement("button",{className:"mode-btn ".concat("video-chat"===m?"active":""),onClick:function(){return g("video-chat")}},"📹 Video Chat"),r.createElement("button",{className:"mode-btn ".concat("streams"===m?"active":""),onClick:function(){return g("streams")}},"📺 Squad Streams"))),"video-chat"===m?r.createElement("div",{className:"video-chat-section"},r.createElement("div",{className:"room-controls"},r.createElement("div",{className:"room-id-section"},r.createElement("label",null,"Room ID:"),r.createElement("input",{type:"text",value:A,onChange:function(e){return R(e.target.value)},placeholder:"Enter room ID",disabled:C}),r.createElement("button",{onClick:function(){var e=prompt("Enter room ID to join:");e&&R(e)},disabled:C},"🔗 Custom Room")),C&&r.createElement("div",{className:"role-indicator"},r.createElement("span",{className:"role-badge ".concat(N)},"host"===N&&"👑 Host","participant"===N&&"🎤 Participant","viewer"===N&&"👁️ Viewer")),C?r.createElement("button",{className:"leave-btn",onClick:function(){te.current&&te.current.getTracks().forEach(function(e){return e.stop()}),ie(),P(!1),T([]),q("disconnected"),J(function(e){return e.filter(function(e){return e.id!==s})}),U&&Q.length>1&&Q.find(function(e){return e.id!==s})}},"🚪 Leave Room"):r.createElement("button",{className:"join-btn",onClick:se},"🚪 Join Room")),C&&r.createElement(r.Fragment,null,r.createElement("div",{className:"participants-panel"},r.createElement("h3",null,"👥 Participants (",Q.length,")"),r.createElement("div",{className:"participants-list"},Q.map(function(e){var t=le(e);return r.createElement("div",{key:e.id,className:"participant-item"},r.createElement("div",{className:"participant-info"},r.createElement("span",{className:"participant-role"},t.roleBadge),r.createElement("span",{className:"participant-name"},t.displayName),r.createElement("div",{className:"participant-status"},t.statusIndicators.map(function(e,t){return r.createElement("span",{key:t,className:"status-icon"},e)}))),U&&e.id!==s&&r.createElement("div",{className:"participant-controls"},"viewer"===e.role&&r.createElement("button",{className:"promote-btn",onClick:function(){return t=e.id,void(U&&J(function(e){return e.map(function(e){return e.id===t?lv(lv({},e),{},{role:"participant"}):e})}));var t},title:"Promote to Participant"},"⬆️"),"participant"===e.role&&r.createElement("button",{className:"demote-btn",onClick:function(){return t=e.id,void(U&&J(function(e){return e.map(function(e){return e.id===t?lv(lv({},e),{},{role:"viewer"}):e})}));var t},title:"Demote to Viewer"},"⬇️"),r.createElement("button",{className:"kick-btn",onClick:function(){return t=e.id,void(U&&confirm("Are you sure you want to remove this user from the room?")&&J(function(e){return e.filter(function(e){return e.id!==t})}));var t},title:"Remove from Room"},"🚪")))}))),r.createElement("div",{className:"video-controls"},r.createElement("button",{className:"control-btn ".concat(b?"enabled":"disabled"),onClick:function(){if("viewer"!==N){if(te.current){var e=te.current.getVideoTracks()[0];e&&(e.enabled=!e.enabled,y(e.enabled),ae({userId:s,userName:o,videoEnabled:e.enabled,audioEnabled:x}))}}else alert("Viewers cannot enable video. Ask the host for participant access.")},disabled:"viewer"===N},b?"📹":"📹❌"," Video","viewer"===N&&r.createElement("span",{className:"disabled-text"},"(Viewer)")),r.createElement("button",{className:"control-btn ".concat(x?"enabled":"disabled"),onClick:function(){if("viewer"!==N){if(te.current){var e=te.current.getAudioTracks()[0];e&&(e.enabled=!e.enabled,S(e.enabled),ae({userId:s,userName:o,videoEnabled:b,audioEnabled:e.enabled}))}}else alert("Viewers cannot enable audio. Ask the host for participant access.")},disabled:"viewer"===N},x?"🎤":"🎤❌"," Audio","viewer"===N&&r.createElement("span",{className:"disabled-text"},"(Viewer)")),r.createElement("button",{className:"control-btn ".concat(z?"enabled":""),onClick:z?ie:re,disabled:"viewer"===N},z?"🖥️ Stop Share":"🖥️ Share Screen","viewer"===N&&r.createElement("span",{className:"disabled-text"},"(Viewer)"))),r.createElement("div",{className:"video-grid"},r.createElement("div",{className:"video-container local-video"},r.createElement("video",{ref:ee,autoPlay:!0,muted:!0,playsInline:!0,className:"video-element"}),r.createElement("div",{className:"video-label"},r.createElement("span",{className:"user-role"},"host"===N?"👑":"participant"===N?"🎤":"👁️"),"You (",o,")",!b&&r.createElement("span",{className:"video-disabled"},"📹❌"),!x&&r.createElement("span",{className:"audio-disabled"},"🎤❌"))),z&&H&&r.createElement("div",{className:"video-container screen-share"},r.createElement("video",{autoPlay:!0,playsInline:!0,className:"video-element",ref:function(e){e&&(e.srcObject=H)}}),r.createElement("div",{className:"video-label"},"🖥️ Your Screen Share")),k.map(function(e,t){var n=Q.find(function(t){return t.id===e.id})||{},i=le(lv(lv({},e),n));return r.createElement("div",{key:e.id,className:"video-container remote-video ".concat(n.role)},r.createElement("video",{autoPlay:!0,playsInline:!0,className:"video-element",id:"remote-video-".concat(e.id)}),r.createElement("div",{className:"video-label"},r.createElement("span",{className:"user-role"},i.roleBadge),i.displayName,i.statusIndicators.map(function(e,t){return r.createElement("span",{key:t,className:"status-icon"},e)})))}),0===k.length&&r.createElement("div",{className:"video-container placeholder"},r.createElement("div",{className:"placeholder-content"},r.createElement("p",null,"👥"),r.createElement("p",null,"Waiting for others to join..."),r.createElement("p",null,"Share room ID: ",r.createElement("strong",null,A)),U&&r.createElement("div",{className:"host-tips"},r.createElement("p",null,"💡 ",r.createElement("strong",null,"Host Tips:")),r.createElement("p",null,"• Manage participants in the panel above"),r.createElement("p",null,"• Promote viewers to participants for video/audio"),r.createElement("p",null,"• Share your screen to present to the team"))))),r.createElement("div",{className:"team-chat"},r.createElement("h3",null,"💬 Team Chat"),r.createElement(So,{roomId:A,userId:s,userName:o,userRole:N,enableVideoCall:!1})))):r.createElement("div",{className:"streams-section"},h?r.createElement("div",{className:"loading"},r.createElement("p",null,"Loading squad streams...")):c.length>0?r.createElement(r.Fragment,null,r.createElement("h2",null,"📺 Live Squad Streams"),r.createElement(iv,{streams:c})):r.createElement("div",{className:"no-streams"},r.createElement("p",null,"No live streams from your squad members right now."),r.createElement("button",{onClick:function(){return g("video-chat")}},"📹 Start a video chat instead"))),C&&r.createElement("div",{className:"room-info"},r.createElement("h3",null,"🏠 Room Info"),r.createElement("p",null,r.createElement("strong",null,"Room ID:")," ",A),r.createElement("p",null,r.createElement("strong",null,"Connected:")," ",Q.length," people"),r.createElement("p",null,r.createElement("strong",null,"Your Role:")," ",N),r.createElement("p",null,r.createElement("strong",null,"Your Status:"),b?" 📹":" 📹❌",x?" 🎤":" 🎤❌",z?" 🖥️":""),U&&r.createElement("div",{className:"host-controls"},r.createElement("p",null,r.createElement("strong",null,"Host Controls:")),r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:M.allowViewers,onChange:function(e){return F(function(t){return lv(lv({},t),{},{allowViewers:e.target.checked})})}}),"Allow viewers"),r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:M.requirePermission,onChange:function(e){return F(function(t){return lv(lv({},t),{},{requirePermission:e.target.checked})})}}),"Require permission to join"))))};var uv=i(3963),dv={};dv.styleTagTransform=y(),dv.setAttributes=m(),dv.insert=f().bind(null,"head"),dv.domAPI=d(),dv.insertStyleElement=v(),c()(uv.A,dv),uv.A&&uv.A.locals&&uv.A.locals;var hv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},fv=r.createContext&&r.createContext(hv),pv=function(){return pv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pv.apply(this,arguments)};function mv(e){return e&&e.map(function(e,t){return r.createElement(e.tag,pv({key:t},e.attr),mv(e.child))})}function gv(e){return function(t){return r.createElement(vv,pv({attr:pv({},e.attr)},t),mv(e.child))}}function vv(e){var t=function(t){var n,i=e.attr,a=e.size,s=e.title,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["attr","size","title"]),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",pv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:n,style:pv(pv({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==fv?r.createElement(fv.Consumer,null,function(e){return t(e)}):t(hv)}function bv(e){return gv({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"}}]})(e)}function yv(e){return gv({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"}}]})(e)}function Ev(e){return gv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.63 39L473 9.37a32 32 0 0 0-45.26 0L381.46 55.7a35.14 35.14 0 0 0-8.53 13.79L360.77 106l-76.26 76.26c-12.16-8.76-25.5-15.74-40.1-19.14-33.45-7.78-67-.88-89.88 22a82.45 82.45 0 0 0-20.24 33.47c-6 18.56-23.21 32.69-42.15 34.46-23.7 2.27-45.73 11.45-62.61 28.44C-16.11 327-7.9 409 47.58 464.45S185 528 230.56 482.52c17-16.88 26.16-38.9 28.45-62.71 1.76-18.85 15.89-36.13 34.43-42.14a82.6 82.6 0 0 0 33.48-20.25c22.87-22.88 29.74-56.36 22-89.75-3.39-14.64-10.37-28-19.16-40.2L406 151.23l36.48-12.16a35.14 35.14 0 0 0 13.79-8.53l46.33-46.32a32 32 0 0 0 .03-45.22zM208 352a48 48 0 1 1 48-48 48 48 0 0 1-48 48z"}}]})(e)}function xv(e){return gv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"}}]})(e)}function Sv(e){return gv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"}}]})(e)}function wv(e){return gv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"}}]})(e)}function kv(e){return gv({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function Tv(e){return gv({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"}}]})(e)}function _v(e){return gv({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"}}]})(e)}var Av=i(6286),Rv=i(7866);const Lv=function(e){var t=e.isOpen,n=e.onClose,i=qe((0,r.useState)(!1),2),a=i[0],s=i[1],o=qe((0,r.useState)(!0),2),l=o[0],c=o[1],u=qe((0,r.useState)(!0),2),d=u[0],h=u[1],f=(0,r.useRef)(null),p=(0,r.useRef)(null),m=null,g={audio:!0,video:!0},v=function(e){e.poseLandmarks&&console.log("🧍 Pose Landmarks:",e.poseLandmarks),e.leftHandLandmarks&&console.log("🖐️ Left Hand:",e.leftHandLandmarks),e.rightHandLandmarks&&console.log("✋ Right Hand:",e.rightHandLandmarks),e.faceLandmarks&&console.log("🙂 Face Landmarks:",e.faceLandmarks)},b=function(){var e,t=new Av.Holistic({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/holistic/".concat(e)}});t.setOptions({modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!1,refineFaceLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),t.onResults(v),p.current=new Rv.Camera(f.current,{onFrame:(e=Qe(Ze().mark(function e(){return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t.send({image:f.current});case 1:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),width:640,height:480}),p.current.start()},y=function(){var e=Qe(Ze().mark(function e(){var t;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,navigator.mediaDevices.getUserMedia(g);case 1:m=e.sent,console.log("✅ Media access granted:",m),f.current&&(f.current.srcObject=m,f.current.play(),b()),e.next=3;break;case 2:e.prev=2,t=e.catch(0),console.error("🚫 Media access error:",t);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Qe(Ze().mark(function e(){var t;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,y();case 1:return s(!0),e.prev=2,e.next=3,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/artist/live/start"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({title:"Live DJ Set",description:"Playing exclusive new tracks!"})});case 3:if(e.sent.ok){e.next=4;break}throw new Error("Failed to start live stream");case 4:console.log("🎥 Live stream started"),e.next=6;break;case 5:e.prev=5,t=e.catch(2),console.error("❌ Error starting live stream:",t);case 6:case"end":return e.stop()}},e,null,[[2,5]])}));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Qe(Ze().mark(function e(){var t;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!1),m&&(m.getTracks().forEach(function(e){return e.stop()}),p.current&&p.current.stop()),e.prev=1,e.next=2,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/artist/live/end"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:if(e.sent.ok){e.next=3;break}throw new Error("Failed to end live stream");case 3:console.log("⛔ Live stream ended"),n(),e.next=5;break;case 4:e.prev=4,t=e.catch(1),console.error("❌ Error ending live stream:",t);case 5:case"end":return e.stop()}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}();return t?r.createElement("div",{className:"live-studio-modal"},r.createElement("div",{className:"live-studio-content"},r.createElement("button",{className:"close-btn",onClick:n},"❌"),r.createElement("h2",null,"🎙️ Live Studio"),r.createElement("div",{className:"video-preview"},r.createElement("video",{ref:f,id:"video",autoPlay:!0,playsInline:!0,muted:!0,width:"640",height:"480"})),r.createElement("div",{className:"controls"},r.createElement("button",{onClick:function(){return c(!l)}},l?"🎤 Mute Mic":"🎙️ Unmute Mic"),r.createElement("button",{onClick:function(){return h(!d)}},d?"📹 Turn Off Camera":"📷 Turn On Camera"),a?r.createElement("button",{className:"end-live",onClick:x},"❌ End Live"):r.createElement("button",{className:"go-live",onClick:E},"🚀 Go Live")),a&&r.createElement("p",null,"🔴 You are live! Listeners: 100"))):null},Cv=function(e){var t=e.show,n=e.onClose,i=e.onAgree;return t?r.createElement("div",{className:"modal show d-block",tabIndex:"-1",role:"dialog"},r.createElement("div",{className:"modal-dialog",role:"document"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h5",{className:"modal-title"},"Confirm Distribution Rights"),r.createElement("button",{type:"button",className:"close",onClick:n},r.createElement("span",null,"×"))),r.createElement("div",{className:"modal-body"},r.createElement("p",null,"By continuing, you confirm that you own or control all rights to this music and that you authorize StreampireX to distribute it to digital platforms.")),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:n},"Cancel"),r.createElement("button",{type:"button",className:"btn btn-primary",onClick:i},"I Agree"))))):null},Pv=function(e){var t=e.album;return r.createElement("div",{className:"card mb-3"},r.createElement("div",{className:"card-body"},r.createElement("h5",{className:"card-title"},t.title),r.createElement("p",{className:"card-text"},"Genre: ",t.genre),r.createElement(Ne,{to:"/album/".concat(t.id),className:"btn btn-outline-primary btn-sm mt-2"},"View Album")))};function Iv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iv(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Dv=function(e){var t=e.trackId,n=qe((0,r.useState)(null),2),i=n[0],a=n[1];(0,r.useEffect)(function(){fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/track/").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(e){return a(e.track)})},[t]);var s=function(e){a(Nv(Nv({},i),{},We({},e.target.name,e.target.value)))},o=function(){var e=Qe(Ze().mark(function e(){var n,r;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/track/").concat(t,"/edit"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(i)});case 1:return n=e.sent,e.next=2,n.json();case 2:r=e.sent,alert(r.message);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return i?r.createElement("div",{className:"edit-track-form"},r.createElement("h3",null,"✏️ Edit Track"),r.createElement("input",{name:"title",value:i.title,onChange:s,placeholder:"Title"}),r.createElement("input",{name:"genre",value:i.genre,onChange:s,placeholder:"Genre"}),r.createElement("textarea",{name:"description",value:i.description,onChange:s,placeholder:"Description"}),r.createElement("label",null,"Explicit:",r.createElement("input",{type:"checkbox",name:"is_explicit",checked:i.is_explicit,onChange:function(e){return a(Nv(Nv({},i),{},{is_explicit:e.target.checked}))}})),r.createElement("button",{onClick:o},"💾 Save Changes")):r.createElement("p",null,"Loading...")},Ov=function(e){var t=e.album,n=e.onUpdateSuccess,i=e.onCancel,a=qe((0,r.useState)(t.title),2),s=a[0],o=a[1],l=qe((0,r.useState)(t.description||""),2),c=l[0],u=l[1],d=qe((0,r.useState)(null),2),h=d[0],f=d[1],p=qe((0,r.useState)(!1),2),m=p[0],g=p[1],v=function(){var e=Qe(Ze().mark(function e(r){var i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),g(!0),(i=new FormData).append("title",s),i.append("description",c),h&&i.append("cover_image",h),e.prev=1,e.next=2,fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL,"/api/album/").concat(t.id,"/edit"),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:i});case 2:if(e.sent.ok){e.next=3;break}throw new Error("Failed to update album");case 3:n(),e.next=5;break;case 4:e.prev=4,e.catch(1),alert("❌ Failed to update album");case 5:return e.prev=5,g(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[1,4,5,6]])}));return function(t){return e.apply(this,arguments)}}();return r.createElement("div",{className:"edit-album-form"},r.createElement("h3",null,"✏️ Edit Album"),r.createElement("form",{onSubmit:v},r.createElement("div",null,r.createElement("label",null,"Album Title:"),r.createElement("input",{type:"text",value:s,onChange:function(e){return o(e.target.value)},required:!0})),r.createElement("div",null,r.createElement("label",null,"Description:"),r.createElement("textarea",{value:c,onChange:function(e){return u(e.target.value)}})),r.createElement("div",null,r.createElement("label",null,"Change Cover Image:"),r.createElement("input",{type:"file",accept:"image/*",onChange:function(e){return f(e.target.files[0])}})),r.createElement("div",{className:"form-buttons"},r.createElement("button",{type:"submit",disabled:m},m?"Saving...":"✅ Save Changes"),r.createElement("button",{type:"button",onClick:i},"❌ Cancel"))))},Mv=function(){var e=qe((0,r.useState)(""),2),t=e[0],n=e[1],i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=qe((0,r.useState)(null),2),l=o[0],c=o[1],u=qe((0,r.useState)(!1),2),d=u[0],h=u[1],f=qe((0,r.useState)([]),2),p=f[0],m=f[1],g=qe((0,r.useState)(""),2),v=(g[0],g[1],qe((0,r.useState)(!1),2)),b=v[0],y=v[1],E=qe((0,r.useState)(!1),2),x=(E[0],E[1],qe((0,r.useState)(!1),2)),S=x[0],w=x[1],k=qe((0,r.useState)(null),2),T=k[0],_=k[1],A=qe((0,r.useState)(null),2),R=A[0],L=A[1],C=qe((0,r.useState)(!1),2),P=C[0],I=C[1],N=qe((0,r.useState)(""),2),D=N[0],O=N[1];(0,r.useEffect)(function(){fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/categories")).then(function(e){return e.json()}).then(function(e){return m(e)}).catch(function(e){return O("Error fetching genres.")})},[]);var M=function(){var e=Qe(Ze().mark(function e(){var r,i,o;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&l){e.next=1;break}return O("Please fill in all fields before uploading."),e.abrupt("return");case 1:return O(""),(r=new FormData).append("title",t),r.append("genre",a),r.append("audio",l),r.append("explicit",d),e.prev=2,e.next=3,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/upload-track"),{method:"POST",body:r});case 3:return i=e.sent,e.next=4,i.json();case 4:o=e.sent,i.ok?(alert("Upload successful!"),n(""),s(""),c(null),h(!1)):O(o.error||"Upload failed."),e.next=6;break;case 5:e.prev=5,e.catch(2),O("Server error during upload.");case 6:case"end":return e.stop()}},e,null,[[2,5]])}));return function(){return e.apply(this,arguments)}}();return r.createElement("div",{className:"artist-dashboard"},r.createElement("h1",null,r.createElement(Sv,null)," Artist Dashboard"),r.createElement("div",{className:"stats-row"},r.createElement("div",{className:"stat-card"},r.createElement("h3",null,r.createElement(yv,null)," Total Earnings"),r.createElement("p",null,"$0.00")),r.createElement("div",{className:"stat-card"},r.createElement("h3",null,r.createElement(Tv,null)," Followers"),r.createElement("p",null,"0")),r.createElement("div",{className:"stat-card"},r.createElement("h3",null,r.createElement(Sv,null)," Uploaded Tracks"),r.createElement("p",null,"0")),r.createElement("div",{className:"stat-card"},r.createElement("h3",null,r.createElement(xv,null)," Total Engagement"),r.createElement("p",null,"0"))),r.createElement("div",{className:"artist-section"},r.createElement("h2",null,r.createElement(bv,null)," Quick Actions"),r.createElement("button",{className:"video-upload-btn",onClick:function(){return y(!0)}},r.createElement(bv,null)," Open Live Studio"),r.createElement("button",{className:"video-info-btn"},r.createElement(kv,null)," Upload Lyrics")),r.createElement("div",{className:"music-distribution-center"},r.createElement("h2",null,r.createElement(Ev,null)," Music Distribution"),r.createElement("p",null,"Get your music on Spotify, Apple Music, YouTube Music, Amazon Music & 100+ platforms!"),r.createElement("div",{className:"video-actions"},r.createElement("button",{className:"music-upload-btn"},r.createElement(kv,null)," Upload Music"),r.createElement("button",{className:"music-info-btn"},"How Distribution Works"))),r.createElement("div",{className:"artist-section"},r.createElement("h2",null,r.createElement(kv,null)," Upload Music"),D&&r.createElement("p",{className:"error-message"},D),r.createElement("div",{className:"add-track-form"},r.createElement("input",{type:"text",placeholder:"Title",value:t,onChange:function(e){return n(e.target.value)}}),r.createElement("select",{value:a,onChange:function(e){return s(e.target.value)}},r.createElement("option",{value:""},"Select Genre"),p.map(function(e){return r.createElement("option",{key:e.id,value:e.name},e.name)})),r.createElement("input",{type:"file",accept:"audio/*",onChange:function(e){return c(e.target.files[0])}}),r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:d,onChange:function(){return h(!d)}})," Explicit Lyrics"),r.createElement("button",{onClick:M},"Upload"))),r.createElement("div",{className:"video-distribution-center"},r.createElement("h2",null,r.createElement(_v,null)," Music Video Distribution"),r.createElement("p",null,"Distribute music videos, lyric videos, and visual content to video platforms!"),r.createElement("div",{className:"distribution-option"},r.createElement("h4",null,r.createElement(kv,null)," Upload & Distribute Music Videos"),r.createElement("p",null,"Get your music videos on YouTube, Vevo, Facebook, Instagram, TikTok & more."),r.createElement("ul",null,r.createElement("li",null,"🎯 TikTok • Vevo • Facebook • Instagram • Triller • Snapchat"),r.createElement("li",null,"🧠 Monetization enabled • Global placement • ID & Analytics tracking")),r.createElement("div",{className:"video-actions"},r.createElement("button",{className:"video-upload-btn",onClick:function(){alert("Video distribution triggered!")}},r.createElement(kv,null)," Upload & Distribute Video"),r.createElement("button",{className:"video-info-btn"},"📘 Video Requirements & Info")))),r.createElement("div",{className:"artist-section"},r.createElement("h2",null,r.createElement(wv,null)," Upload Music Video"),r.createElement("form",{className:"add-track-form"},r.createElement("input",{type:"text",placeholder:"Title",required:!0}),r.createElement("input",{type:"text",placeholder:"Director / Producer",required:!0}),r.createElement("input",{type:"file"}),r.createElement("label",null,r.createElement("input",{type:"checkbox"})," Explicit Content"),r.createElement("button",{type:"submit"},"Upload Video"))),r.createElement("div",{className:"artist-section"},r.createElement("h2",null,r.createElement(bv,null)," Your Indie Station"),r.createElement("p",null,"You don’t have an indie station yet."),r.createElement("button",{className:"video-upload-btn"},"➕ Create Station")),b&&r.createElement(Lv,{onClose:function(){return y(!1)}}),S&&r.createElement(Cv,{onClose:function(){return w(!1)}}),T&&r.createElement(Dv,{track:T,onClose:function(){return _(null)}}),R&&r.createElement(Ov,{album:R,onClose:function(){return L(null)}}),P&&r.createElement(Pv,{onClose:function(){return I(!1)}}))};var Fv=i(5916),Bv={};Bv.styleTagTransform=y(),Bv.setAttributes=m(),Bv.insert=f().bind(null,"head"),Bv.domAPI=d(),Bv.insertStyleElement=v(),c()(Fv.A,Bv),Fv.A&&Fv.A.locals&&Fv.A.locals;const Uv=function(){var e=qe((0,r.useState)([]),2),t=e[0],n=e[1],i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=qe((0,r.useState)(null),2),l=o[0],c=o[1],u=qe((0,r.useState)("list"),2),d=u[0],h=u[1],f=qe((0,r.useState)(""),2),p=f[0],m=f[1],g=qe((0,r.useState)(""),2),v=g[0],b=g[1],y=qe((0,r.useState)("name"),2),E=y[0],x=y[1],S=qe((0,r.useState)(""),2),w=S[0],k=S[1],T=qe((0,r.useState)(""),2),_=T[0],A=T[1],R=qe((0,r.useState)(""),2),L=R[0],C=R[1],P=qe((0,r.useState)(""),2),I=P[0],N=P[1],D=qe((0,r.useState)(""),2),O=D[0],M=D[1],F=qe((0,r.useState)(""),2),B=F[0],U=F[1],j=qe((0,r.useState)(""),2),$=j[0],z=j[1],V=qe((0,r.useState)(null),2),G=V[0],H=V[1],W=qe((0,r.useState)(""),2),K=W[0],Y=W[1];(0,r.useEffect)(function(){var e=localStorage.getItem("token");e?fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/radio/stations/detailed"),{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){n(e),console.log("Stations loaded:",e)}).catch(function(t){console.error("Failed to load stations",t),fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/radio/stations"),{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(){return Y("Error loading radio stations")})}):Y("Please log in to submit music.")},[]);var q,X,Q=function(e){s(e);var n=t.find(function(t){return t.id===parseInt(e)});c(n)},J=function(){var e=Qe(Ze().mark(function e(){var t,n,r;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&G&&_&&w){e.next=1;break}return Y("Please fill in all required fields and select a station."),e.abrupt("return");case 1:return(t=new FormData).append("station_id",a),t.append("artist_name",w),t.append("track_title",_),t.append("album_name",L),t.append("bio",I),t.append("genre",O),t.append("social_links",B),t.append("notes",$),t.append("audio",G),e.prev=2,e.next=3,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/radio/upload_music"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:t});case 3:return n=e.sent,e.next=4,n.json();case 4:r=e.sent,n.ok?(Y("🎵 Track submitted successfully!"),s(""),c(null),k(""),A(""),C(""),N(""),M(""),U(""),z(""),H(null)):Y("❌ Error: ".concat(r.error)),e.next=6;break;case 5:e.prev=5,e.catch(2),Y("❌ Network error. Please try again.");case 6:case"end":return e.stop()}},e,null,[[2,5]])}));return function(){return e.apply(this,arguments)}}(),Z=((q=t.filter(function(e){var t=e.name.toLowerCase().includes(p.toLowerCase())||e.description&&e.description.toLowerCase().includes(p.toLowerCase()),n=!v||e.genres&&e.genres.includes(v)||e.preferred_genres&&e.preferred_genres.includes(v);return t&&n})).sort(function(e,t){var n,r;switch(E){case"followers":return(t.followers||0)-(e.followers||0);case"genre":return((null===(n=e.genres)||void 0===n?void 0:n[0])||"").localeCompare((null===(r=t.genres)||void 0===r?void 0:r[0])||"");default:return e.name.localeCompare(t.name)}}),q),ee=(X=new Set,t.forEach(function(e){e.genres&&e.genres.forEach(function(e){return X.add(e)}),e.preferred_genres&&e.preferred_genres.forEach(function(e){return X.add(e)})}),Array.from(X).sort());return r.createElement("div",{className:"upload-music-page"},r.createElement("div",{className:"upload-music-card"},r.createElement("h2",null,r.createElement("i",{className:"fas fa-music"})," Submit Music to a Radio Station"),K&&r.createElement("p",{className:"upload-message"},K),r.createElement("div",{className:"form-section"},r.createElement("h3",null,"🎤 Artist Information"),r.createElement("label",null,"🎙️ Artist Name *"),r.createElement("input",{value:w,onChange:function(e){return k(e.target.value)},type:"text",placeholder:"Your artist/stage name"}),r.createElement("label",null,"🎵 Track Title *"),r.createElement("input",{value:_,onChange:function(e){return A(e.target.value)},type:"text",placeholder:"Name of the track"}),r.createElement("label",null,"💿 Album Name"),r.createElement("input",{value:L,onChange:function(e){return C(e.target.value)},type:"text",placeholder:"Album or project name"}),r.createElement("label",null,"🎧 Genre"),r.createElement("input",{value:O,onChange:function(e){return M(e.target.value)},type:"text",placeholder:"e.g. Lo-Fi, Jazz, Hip Hop"}),r.createElement("label",null,"📝 Short Artist Bio"),r.createElement("textarea",{value:I,onChange:function(e){return N(e.target.value)},rows:3,placeholder:"Tell us about yourself..."}),r.createElement("label",null,"🔗 Social or Music Links"),r.createElement("input",{value:B,onChange:function(e){return U(e.target.value)},type:"text",placeholder:"Spotify, YouTube, SoundCloud..."}),r.createElement("label",null,"📁 Upload Audio File *"),r.createElement("input",{type:"file",accept:"audio/*",onChange:function(e){return H(e.target.files[0])}})),r.createElement("div",{className:"form-section"},r.createElement("h3",null,"📻 Choose Radio Station *"),r.createElement("div",{className:"station-controls"},r.createElement("div",{className:"control-row"},r.createElement("input",{type:"text",placeholder:"🔍 Search stations...",value:p,onChange:function(e){return m(e.target.value)},className:"search-input"}),r.createElement("select",{value:v,onChange:function(e){return b(e.target.value)},className:"genre-filter"},r.createElement("option",{value:""},"All Genres"),ee.map(function(e){return r.createElement("option",{key:e,value:e},e)})),r.createElement("select",{value:E,onChange:function(e){return x(e.target.value)},className:"sort-select"},r.createElement("option",{value:"name"},"Sort by Name"),r.createElement("option",{value:"followers"},"Sort by Popularity"),r.createElement("option",{value:"genre"},"Sort by Genre"))),r.createElement("div",{className:"view-controls"},r.createElement("button",{className:"view-btn ".concat("list"===d?"active":""),onClick:function(){return h("list")}},"📋 List"),r.createElement("button",{className:"view-btn ".concat("cards"===d?"active":""),onClick:function(){return h("cards")}},"🃏 Cards"))),"list"===d?r.createElement("div",{className:"stations-list"},Z.length>0?Z.map(function(e){return r.createElement("div",{key:e.id,className:"station-item ".concat(a==e.id?"selected":""),onClick:function(){return Q(e.id)}},r.createElement("div",{className:"station-info"},r.createElement("h4",null,e.name),r.createElement("p",{className:"station-description"},e.description||"No description available"),r.createElement("div",{className:"station-meta"},r.createElement("span",{className:"followers"},"👥 ",e.followers||0," followers"),e.genres&&e.genres.length>0&&r.createElement("span",{className:"genres"},"🎵 ",e.genres.slice(0,3).join(", "),e.genres.length>3&&"..."))),r.createElement("div",{className:"station-actions"},r.createElement("button",{className:"select-btn ".concat(a==e.id?"selected":""),onClick:function(t){t.stopPropagation(),Q(e.id)}},a==e.id?"✓ Selected":"Select")))}):r.createElement("p",{className:"no-stations"},"No stations found matching your criteria.")):r.createElement("div",{className:"stations-grid"},Z.length>0?Z.map(function(e){return r.createElement("div",{key:e.id,className:"station-card ".concat(a==e.id?"selected":""),onClick:function(){return Q(e.id)}},r.createElement("div",{className:"card-header"},r.createElement("h4",null,e.name),r.createElement("span",{className:"followers"},"👥 ",e.followers||0)),r.createElement("p",{className:"card-description"},e.description?e.description.length>100?e.description.substring(0,100)+"...":e.description:"No description available"),e.genres&&e.genres.length>0&&r.createElement("div",{className:"card-genres"},e.genres.slice(0,2).map(function(e){return r.createElement("span",{key:e,className:"genre-tag"},e)})),r.createElement("button",{className:"card-select-btn ".concat(a==e.id?"selected":""),onClick:function(t){t.stopPropagation(),Q(e.id)}},a==e.id?"✓ Selected":"Select Station"))}):r.createElement("p",{className:"no-stations"},"No stations found matching your criteria.")),l&&r.createElement("div",{className:"selected-station-details"},r.createElement("h4",null,"📻 Selected Station: ",l.name),r.createElement("div",{className:"station-detail-grid"},r.createElement("div",{className:"detail-item"},r.createElement("strong",null,"Description:"),r.createElement("p",null,l.description||"No description available")),l.genres&&l.genres.length>0&&r.createElement("div",{className:"detail-item"},r.createElement("strong",null,"Preferred Genres:"),r.createElement("p",null,l.genres.join(", "))),r.createElement("div",{className:"detail-item"},r.createElement("strong",null,"Followers:"),r.createElement("p",null,l.followers||0," listeners")),l.submission_guidelines&&r.createElement("div",{className:"detail-item"},r.createElement("strong",null,"Submission Guidelines:"),r.createElement("p",null,l.submission_guidelines))))),a&&r.createElement("div",{className:"form-section"},r.createElement("label",null,"📩 Notes to ",(null==l?void 0:l.name)||"Station"),r.createElement("textarea",{value:$,onChange:function(e){return z(e.target.value)},rows:3,placeholder:"Optional message to the station..."})),r.createElement("button",{className:"upload-btn",onClick:J,disabled:!(a&&G&&_&&w)},"Submit Track to ",(null==l?void 0:l.name)||"Station")))},jv=function(){var e=qe((0,r.useState)([]),2),t=e[0],n=e[1];return(0,r.useEffect)(function(){fetch("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev/api/profiles").then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(e){return console.error("Error fetching profiles:",e)})},[]),r.createElement("div",{className:"browse-profiles"},r.createElement("h1",null,"👥 Browse Profiles"),r.createElement("div",{className:"profile-list"},t.map(function(e){return r.createElement("div",{key:e.id,className:"profile-card"},r.createElement("img",{src:e.profile_picture||"/default-avatar.png",alt:e.username,className:"profile-pic"}),r.createElement("h3",null,e.username),r.createElement("p",null,"Email: ",e.email),r.createElement(Ne,{to:"/profile/".concat(e.id),className:"btn-secondary"},"View Profile"))})))};var $v=i(5988),zv={};function Vv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vv(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}zv.styleTagTransform=y(),zv.setAttributes=m(),zv.insert=f().bind(null,"head"),zv.domAPI=d(),zv.insertStyleElement=v(),c()($v.A,zv),$v.A&&$v.A.locals&&$v.A.locals;const Hv=function(e){var t=e.balance,n=e.method,i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=qe((0,r.useState)(""),2),l=o[0],c=o[1],u=qe((0,r.useState)(""),2),d=u[0],h=u[1];return r.createElement("div",{className:"payout-request"},r.createElement("h3",null,"💸 Send Payment"),r.createElement("input",{type:"text",placeholder:"Recipient User ID (optional)",value:l,onChange:function(e){return c(e.target.value)}}),r.createElement("input",{type:"email",placeholder:"Recipient Email (optional)",value:d,onChange:function(e){return h(e.target.value)}}),r.createElement("input",{type:"number",placeholder:"Amount (Max: $".concat((null==t?void 0:t.toFixed(2))||"...",")"),value:a,onChange:function(e){return s(e.target.value)}}),r.createElement("button",{onClick:function(){if(!a||parseFloat(a)<=0)return alert("Please enter a valid amount.");if(!l&&!d)return alert("Enter a recipient user ID or email.");var e=Gv(Gv({amount:a,method:n},l&&{recipient_id:l}),d&&{recipient_email:d});fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL,"/api/send-payment"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return alert(e.message)}).catch(function(e){return console.error("Payment failed:",e)})},disabled:!l&&!d||!a||parseFloat(a)<=0||t&&parseFloat(a)>t},"Send Payment"))};function Wv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Kv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wv(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Yv=function(){var e=qe((0,r.useState)({enableChat:!0,useAvatar:!1,enableNotifications:!0,emailNotifications:!0,darkMode:!1,profileVisibility:"public",subscriptionPlan:"Free Plan",twoFactorEnabled:!1,payoutMethod:"",defaultStreamQuality:"high",defaultVRRoom:"Main Hall"}),2),t=e[0],n=e[1],i=qe((0,r.useState)(0),2),a=i[0],s=i[1];(0,r.useEffect)(function(){fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL,"/api/user/settings"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(e){return n(function(t){return Kv(Kv({},t),e)})}).catch(function(e){return console.error("Error loading settings:",e)}),fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL,"/api/user/earnings"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(e){return s(e.available_balance||0)}).catch(function(e){return console.error("Error loading earnings:",e)})},[]);var o=function(e){var r=Kv(Kv({},t),{},We({},e,!t[e]));n(r),c(r)},l=function(e,r){var i=Kv(Kv({},t),{},We({},e,r));n(i),c(i)},c=function(e){fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL,"/api/user/settings"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)}).catch(function(e){return console.error("Failed to save settings:",e)})};return r.createElement("div",{className:"settings-page"},r.createElement("h1",null,"⚙️ Account Settings"),r.createElement("h2",null,"👤 Account Info"),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Subscription Plan"),r.createElement("span",null,t.subscriptionPlan),r.createElement("button",{onClick:function(){window.location.href="/billing"}},"Manage")),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Two-Factor Authentication"),r.createElement("input",{type:"checkbox",checked:t.twoFactorEnabled,onChange:function(){return o("twoFactorEnabled")}})),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Delete Account"),r.createElement("button",{className:"delete-button",onClick:function(){window.confirm("Are you sure you want to permanently delete your account?")&&fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL,"/api/user/delete-account"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(){localStorage.removeItem("token"),window.location.href="/"}).catch(function(e){return console.error("Account deletion failed:",e)})}},"Delete")),r.createElement("h2",null,"🔒 Privacy & Security"),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Profile Visibility"),r.createElement("select",{value:t.profileVisibility,onChange:function(e){return l("profileVisibility",e.target.value)}},r.createElement("option",{value:"public"},"Public"),r.createElement("option",{value:"followers"},"Followers Only"),r.createElement("option",{value:"private"},"Private"))),r.createElement("h2",null,"🔔 Notifications"),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Enable Chat"),r.createElement("input",{type:"checkbox",checked:t.enableChat,onChange:function(){return o("enableChat")}})),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Site Notifications"),r.createElement("input",{type:"checkbox",checked:t.enableNotifications,onChange:function(){return o("enableNotifications")}})),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Email Notifications"),r.createElement("input",{type:"checkbox",checked:t.emailNotifications,onChange:function(){return o("emailNotifications")}})),r.createElement("h2",null,"🎙️ Streaming Preferences"),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Default Stream Quality"),r.createElement("select",{value:t.defaultStreamQuality,onChange:function(e){return l("defaultStreamQuality",e.target.value)}},r.createElement("option",{value:"high"},"High"),r.createElement("option",{value:"medium"},"Medium"),r.createElement("option",{value:"low"},"Low"))),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Default VR Room"),r.createElement("select",{value:t.defaultVRRoom,onChange:function(e){return l("defaultVRRoom",e.target.value)}},r.createElement("option",{value:"Main Hall"},"Main Hall"),r.createElement("option",{value:"Studio A"},"Studio A"),r.createElement("option",{value:"Indie Lounge"},"Indie Lounge"))),r.createElement("h2",null,"💰 Creator / Payout Settings"),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Payout Method"),r.createElement("select",{value:t.payoutMethod,onChange:function(e){return l("payoutMethod",e.target.value)}},r.createElement("option",{value:""},"Select"),r.createElement("option",{value:"stripe"},"Stripe"),r.createElement("option",{value:"paypal"},"PayPal"))),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Available for Payout"),r.createElement("span",null,"$",a.toFixed(2))),r.createElement("div",{className:"setting-item"},r.createElement(Hv,{balance:a,method:t.payoutMethod})),r.createElement("h2",null,"🎨 Appearance"),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Dark Mode"),r.createElement("input",{type:"checkbox",checked:t.darkMode,onChange:function(){return o("darkMode")}})))};var qv=i(3573),Xv={};Xv.styleTagTransform=y(),Xv.setAttributes=m(),Xv.insert=f().bind(null,"head"),Xv.domAPI=d(),Xv.insertStyleElement=v(),c()(qv.A,Xv),qv.A&&qv.A.locals&&qv.A.locals;var Qv=yc("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev",{transports:["websocket"],withCredentials:!0});const Jv=function(e){var t=e.recipientId,n=e.recipientName,i=e.currentUserId,a=e.onClose,s=e.enableTypingIndicator,o=void 0===s||s,l=(e.enableThreads,e.autoScroll),c=void 0===l||l,u=e.enableMediaUpload,d=void 0===u||u,h=(e.enableGroupChat,qe((0,r.useState)([]),2)),f=h[0],p=h[1],m=qe((0,r.useState)(""),2),g=m[0],v=m[1],b=qe((0,r.useState)(!1),2),y=b[0],E=b[1],x=qe((0,r.useState)(!1),2),S=x[0],w=x[1],k=qe((0,r.useState)(null),2),T=k[0],_=k[1],A=(0,r.useRef)(null),R=[i,t].sort().join("-");(0,r.useEffect)(function(){return Qv.emit("join_room",{roomId:R,userId:i,username:"User".concat(i)}),Qv.on("receive_message",function(e){p(function(t){return[].concat(vo(t),[e])})}),Qv.on("user_typing",function(e){e.username,o&&w(!0)}),Qv.on("stop_typing",function(e){e.username,o&&w(!1)}),function(){Qv.emit("leave_room",R),Qv.off("receive_message"),Qv.off("user_typing"),Qv.off("stop_typing")}},[R,t,o]),(0,r.useEffect)(function(){var e;c&&(null===(e=A.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))},[f,c]);var L=function(){if(g.trim()||T){var e={roomId:R,senderId:i,message:g,mediaUrl:T?URL.createObjectURL(T):null,timestamp:(new Date).toISOString()};Qv.emit("send_message",e),p(function(t){return[].concat(vo(t),[e])}),v(""),_(null),Qv.emit("stop_typing",{roomId:R,username:"User".concat(i)})}};return r.createElement("div",{className:"chat-modal"},r.createElement("div",{className:"chat-header"},r.createElement("h4",null,"Chat with ",n),r.createElement("button",{onClick:a},"✖")),r.createElement("div",{className:"chat-body"},f.map(function(e,t){return r.createElement("div",{key:t,className:"chat-message ".concat(e.senderId===i?"sent":"received")},e.mediaUrl&&r.createElement("img",{src:e.mediaUrl,alt:"attachment",className:"chat-media"}),r.createElement("p",null,e.message),r.createElement("small",null,new Date(e.timestamp).toLocaleTimeString()))}),S&&r.createElement("p",{className:"typing-indicator"},"Typing..."),r.createElement("div",{ref:A})),r.createElement("div",{className:"chat-input"},d&&r.createElement("input",{type:"file",accept:"image/*,video/*",onChange:function(e){return _(e.target.files[0])}}),r.createElement("input",{type:"text",placeholder:"Type a message...",value:g,onChange:function(e){v(e.target.value),!y&&o&&(E(!0),Qv.emit("typing",{roomId:R,username:"User".concat(i)})),clearTimeout(window.typingTimeout),window.typingTimeout=setTimeout(function(){E(!1),Qv.emit("stop_typing",{roomId:R,username:"User".concat(i)})},1500)},onKeyDown:function(e){return"Enter"===e.key&&L()}}),r.createElement("button",{onClick:L},"Send")))},Zv=function(){var e=qe((0,r.useState)(!1),2),t=e[0],n=e[1];return r.createElement("div",{className:"video-chat-middle-wrapper"},!t&&r.createElement("button",{className:"open-video-btn",onClick:function(){return n(!0)}},"🎥 Open Video Chat"),t&&r.createElement("div",{className:"video-chat-panel"},r.createElement("div",{className:"video-chat-header"},r.createElement("span",null,"🎥 Video Chat"),r.createElement("button",{className:"close-video-btn",onClick:function(){return n(!1)}},"✖")),r.createElement(So,null)))};var eb=i(505),tb={};tb.styleTagTransform=y(),tb.setAttributes=m(),tb.insert=f().bind(null,"head"),tb.domAPI=d(),tb.insertStyleElement=v(),c()(eb.A,tb),eb.A&&eb.A.locals&&eb.A.locals;const nb=i.p+"lady1.png";function rb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ib(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rb(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const ab=function(){var e=qe((0,r.useState)({}),2),t=e[0],n=e[1],i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=qe((0,r.useState)(!1),2),l=o[0],c=o[1],u=qe((0,r.useState)(""),2),d=u[0],h=u[1],f=qe((0,r.useState)(""),2),p=f[0],m=f[1],g=qe((0,r.useState)(null),2),v=g[0],b=(g[1],qe((0,r.useState)(null),2)),y=b[0],E=b[1],x=qe((0,r.useState)(""),2),S=x[0],w=x[1],k=qe((0,r.useState)(""),2),T=(k[0],k[1],qe((0,r.useState)({twitter:"",facebook:"",instagram:"",linkedin:"",custom:[]}),2)),_=T[0],A=(T[1],qe((0,r.useState)(""),2)),R=A[0],L=(A[1],qe((0,r.useState)(""),2)),C=L[0],P=(L[1],qe((0,r.useState)(""),2)),I=P[0],N=(P[1],qe((0,r.useState)([]),2)),D=N[0],O=(N[1],qe((0,r.useState)([]),2)),M=(O[0],O[1],qe((0,r.useState)(""),2)),F=(M[0],M[1],qe((0,r.useState)([]),2)),B=(F[0],F[1],qe((0,r.useState)([]),2)),U=(B[0],B[1],qe((0,r.useState)([]),2)),j=(U[0],U[1],qe((0,r.useState)(!1),2)),$=j[0],z=j[1],V=qe((0,r.useState)([]),2),G=V[0],H=V[1],W=qe((0,r.useState)([]),2),K=W[0],Y=W[1],q=qe((0,r.useState)({}),2),X=q[0],Q=q[1],J=qe((0,r.useState)(!1),2),Z=J[0],ee=J[1],te=qe((0,r.useState)({typing:!1,groupMode:!1}),2),ne=(te[0],te[1],qe((0,r.useState)(!1),2)),re=ne[0],ie=ne[1],ae=qe((0,r.useState)([]),2),se=ae[0],oe=ae[1],le=qe((0,r.useState)(""),2),ce=le[0],ue=le[1],de=qe((0,r.useState)(null),2),he=de[0],fe=de[1],pe=qe((0,r.useState)({}),2),me=pe[0],ge=pe[1],ve=qe((0,r.useState)({}),2),be=ve[0],ye=ve[1],Ee=qe((0,r.useState)(!1),2),xe=Ee[0],Se=Ee[1],we=qe((0,r.useState)("😌 Chill"),2),ke=we[0],Te=we[1],_e=parseInt(localStorage.getItem("user_id"))||1,Ae=localStorage.getItem("username"),Re=(0,r.useRef)(null),Le=(0,r.useRef)(null);(0,r.useEffect)(function(){var e=localStorage.getItem("token");if(console.log("ProfilePage - Token check:",e?"Token found":"No token found"),console.log("ProfilePage - All localStorage keys:",Object.keys(localStorage)),!e)return console.warn("No token found - using fallback user data"),void(_e&&n({id:_e,username:Ae||"user_".concat(_e),display_name:Ae||"User ".concat(_e)}));console.log("Making API call to fetch profile..."),fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then(function(){var e=Qe(Ze().mark(function e(t){var r,i,a,o;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("ProfilePage API Response status:",t.status),t.ok){e.next=2;break}return e.next=1,t.text();case 1:throw r=e.sent,console.error("ProfilePage API Error:",t.status,r),new Error("API Error: ".concat(t.status));case 2:return e.next=3,t.text();case 3:i=e.sent;try{a=JSON.parse(i),console.log("ProfilePage - Profile data received:",a),!(o=a.user||a).id&&_e&&(o.id=_e),n(o),o.bio&&s(o.bio),o.display_name&&h(o.display_name),o.business_name&&m(o.business_name),void 0!==o.use_avatar&&ie(o.use_avatar),o.videos&&H(o.videos),o.images&&Y(o.images),o.gallery&&!o.images&&Y(o.gallery)}catch(e){console.error("Failed to parse JSON:",i),_e&&n({id:_e,username:Ae||"user_".concat(_e),display_name:Ae||"User ".concat(_e)})}case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.error("Fetch profile error:",e),_e&&n({id:_e,username:Ae||"user_".concat(_e),display_name:Ae||"User ".concat(_e)})})},[_e,Ae]);var Ce=function(){var e=Qe(Ze().mark(function e(t){var r,i,a,s,o,l;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.files[0]){e.next=1;break}return e.abrupt("return");case 1:if(i=localStorage.getItem("token")){e.next=2;break}return alert("Please log in to upload profile picture"),e.abrupt("return");case 2:return(a=new FormData).append("profile_picture",r),e.prev=3,e.next=4,fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/profile"),{method:"PUT",headers:{Authorization:"Bearer ".concat(i)},body:a});case 4:if((s=e.sent).ok){e.next=5;break}throw new Error("Upload failed: ".concat(s.status));case 5:return e.next=6,s.json();case 6:o=e.sent,n(function(e){return ib(ib({},e),{},{profile_picture:o.url})}),alert("✅ Profile picture updated successfully!"),e.next=8;break;case 7:e.prev=7,l=e.catch(3),console.error("Profile picture upload error:",l),alert("❌ Failed to upload profile picture");case 8:case"end":return e.stop()}},e,null,[[3,7]])}));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Qe(Ze().mark(function e(t){var n,r,i,a,s,o;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0]){e.next=1;break}return e.abrupt("return");case 1:return(r=new FormData).append("file",n),r.append("upload_preset","your_unsigned_preset"),e.prev=2,console.log("Uploading video to Cloudinary..."),e.next=3,fetch("https://api.cloudinary.com/v1_1/dli7r0d7s/video/upload",{method:"POST",body:r});case 3:if((i=e.sent).ok){e.next=4;break}throw new Error("Upload failed: ".concat(i.status));case 4:return e.next=5,i.json();case 5:return a=e.sent,console.log("Uploaded video URL:",a.secure_url),s={file_url:a.secure_url,title:n.name},H(function(e){return[].concat(vo(e),[s])}),e.next=6,Ie("videos",[].concat(vo(G),[s]));case 6:e.next=8;break;case 7:e.prev=7,o=e.catch(2),console.error("Video upload error:",o),alert("Video upload failed: ".concat(o.message));case 8:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Qe(Ze().mark(function e(t,n){var r,i,a,s;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=localStorage.getItem("token")){e.next=1;break}return console.error("No token found for backend update"),e.abrupt("return");case 1:return e.prev=1,console.log("Updating ".concat(t," in backend...")),e.next=2,fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/profile"),{method:"PUT",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(We({},t,n))});case 2:if((i=e.sent).ok){e.next=4;break}return e.next=3,i.text();case 3:throw a=e.sent,console.error("Failed to update ".concat(t,":"),i.status,a),new Error("Backend update failed: ".concat(i.status));case 4:console.log("".concat(t," updated successfully in backend")),e.next=6;break;case 5:e.prev=5,s=e.catch(1),console.error("Failed to update ".concat(t,":"),s),alert("Warning: File uploaded to cloud but failed to save to profile: ".concat(s.message));case 6:case"end":return e.stop()}},e,null,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),De=function(){var e=Qe(Ze().mark(function e(){var t,r,i,s,o,l;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token")){e.next=1;break}return alert("Please log in to save profile"),e.abrupt("return");case 1:return r=ib(ib(ib(ib(ib(ib(ib(ib(ib(ib({},(null==d?void 0:d.trim())&&{display_name:d}),(null==p?void 0:p.trim())&&{business_name:p}),(null==a?void 0:a.trim())&&{bio:a}),Array.isArray(_)&&_.length>0&&{social_links:_}),Array.isArray(G)&&G.length>0&&{videos:G}),Array.isArray(K)&&K.length>0&&{images:K}),C&&!Array.isArray(C)&&Object.keys(C).length>0&&{podcast:C}),(null==R?void 0:R.trim())&&{radio_station:R}),v&&{profile_picture:v}),y&&{cover_photo:y}),e.prev=2,console.log("Saving profile with payload:",r),e.next=3,fetch("".concat("MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/profile"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(r)});case 3:if((i=e.sent).ok){e.next=5;break}return e.next=4,i.text();case 4:throw s=e.sent,console.error("Save profile error:",i.status,s),new Error("Save failed: ".concat(i.status));case 5:return e.next=6,i.json();case 6:o=e.sent,console.log("Profile saved successfully:",o),alert("✅ Profile saved successfully!"),o.user&&n(o.user),Se(!0),setTimeout(function(){return Se(!1)},3e3),e.next=8;break;case 7:e.prev=7,l=e.catch(2),console.error("Save profile error:",l),alert("An error occurred while saving profile: ".concat(l.message));case 8:case"end":return e.stop()}},e,null,[[2,7]])}));return function(){return e.apply(this,arguments)}}(),Oe=(null==t?void 0:t.id)||_e;return(null==t?void 0:t.display_name)||(null==t?void 0:t.username)||Ae||"User ".concat(Oe),console.log("ProfilePage render - effectiveUserId:",Oe),console.log("ProfilePage render - condition check:",!!Oe),console.log("ProfilePage render - user object:",t),console.log("ProfilePage render - loggedInUserId:",_e),r.createElement("div",{className:"profile-container"},r.createElement("div",{className:"cover-photo-container "},r.createElement("img",{src:y||t.cover_photo||ev,alt:"Cover",className:"cover-photo"}),r.createElement("button",{onClick:function(){return Le.current.click()},className:"upload-btn"},"📷 Upload Cover Photo"),r.createElement("input",{ref:Le,type:"file",style:{display:"none"},onChange:function(e){e.target.files.length>0&&(E(URL.createObjectURL(e.target.files[0])),w(e.target.files[0].name))}}),S&&r.createElement("p",{className:"filename-display"},"📁 ",S)),Z&&r.createElement(Jv,{recipientId:t.id,recipientName:t.display_name||t.username,currentUserId:_e,onClose:function(){return ee(!1)},enableTypingIndicator:!0,enableThreads:!0,autoScroll:!0,enableMediaUpload:!0,enableGroupChat:!0}),r.createElement("div",{className:"profile-avatar-toggle-horizontal"},r.createElement("img",{src:re?t.avatar_url:v||t.profile_picture||nb,alt:"Profile",className:"profile-pic"}),r.createElement("div",{className:"profile-name-inline"},r.createElement("p",{className:"profile-name-label"},d||t.username||"Your Name"),r.createElement("button",{onClick:function(){return Re.current.click()},className:"upload-btn"},"😀 Upload Profile Picture"),r.createElement("input",{ref:Re,type:"file",style:{display:"none"},onChange:Ce})),r.createElement("div",{className:"profile-name-header"},$?r.createElement("div",{className:"edit-name-input"},r.createElement("input",{type:"text",className:"name-input",value:d,onChange:function(e){return h(e.target.value)},autoFocus:!0}),r.createElement("button",{className:"name-save-btn",onClick:function(){return z(!1)}},"Save")):r.createElement("div",{className:"name-and-actions"},r.createElement("div",{className:"name-actions"},r.createElement("button",{className:"edit-name-btn small-btn",onClick:function(){return z(!0)}},"✏️"),t.id!==_e&&r.createElement("button",{className:"message-btn small-btn",onClick:function(){return ee(!0)}},"💬"))))),r.createElement("div",{className:"profile-header-flex"},r.createElement("div",{className:"profile-card-bio"},r.createElement("label",null,"📝 Bio:"),l?r.createElement(r.Fragment,null,r.createElement("textarea",{rows:5,value:a,onChange:function(e){return s(e.target.value)}}),r.createElement("button",{onClick:function(){c(!1),De()}},"✅ Save Bio")):r.createElement(r.Fragment,null,r.createElement("p",null,a),r.createElement("button",{onClick:function(){return c(!0)}},"✏️ Edit Bio"))),r.createElement("div",{className:"profile-stats-card"},r.createElement("h4",null,"📊 Quick Stats"),r.createElement("ul",{className:"profile-stats-list"},r.createElement("li",null,"📊 Streams: ",r.createElement("strong",null,"158")),r.createElement("li",null,"🎧 Podcasts: ",r.createElement("strong",null,"12")),r.createElement("li",null,"📻 Stations: ",r.createElement("strong",null,"5")),r.createElement("li",null,"⭐ Followers: ",r.createElement("strong",null,"623")))),r.createElement("div",{className:"mood-section"},r.createElement("div",{className:"mood-card"},r.createElement("h4",null,"🎨 Current Mood"),r.createElement("div",{className:"mood-selector"},r.createElement("button",{className:"mood-btn ".concat("😌 Chill"===ke?"active":""),onClick:function(){return Te("😌 Chill")}},"😌 Chill"),r.createElement("button",{className:"mood-btn ".concat("🎵 Creative"===ke?"active":""),onClick:function(){return Te("🎵 Creative")}},"🎵 Creative"),r.createElement("button",{className:"mood-btn ".concat("🔥 Energetic"===ke?"active":""),onClick:function(){return Te("🔥 Energetic")}},"🔥 Energetic"),r.createElement("button",{className:"mood-btn ".concat("🧘 Zen"===ke?"active":""),onClick:function(){return Te("🧘 Zen")}},"🧘 Zen"),r.createElement("button",{className:"mood-btn ".concat("🎸 Jamming"===ke?"active":""),onClick:function(){return Te("🎸 Jamming")}},"🎸 Jamming"),r.createElement("button",{className:"mood-btn ".concat("📚 Focused"===ke?"active":""),onClick:function(){return Te("📚 Focused")}},"📚 Focused")),r.createElement("div",{className:"current-mood-display"},r.createElement("p",null,"Currently: ",r.createElement("strong",null,ke)))))),r.createElement("div",{className:"social-links"},r.createElement("h4",null,"🔗 Social Links"),r.createElement("div",{className:"social-links-grid"},r.createElement("a",{href:"https://twitter.com/susansmith_dev",target:"_blank",rel:"noopener noreferrer",className:"social-link"},r.createElement("span",{className:"social-icon"},"🐦"),r.createElement("div",{className:"social-info"},r.createElement("strong",null,"@susansmith_dev"),r.createElement("p",null,"Follow for tech & wellness tips"))),r.createElement("a",{href:"https://instagram.com/susan.mindful.codes",target:"_blank",rel:"noopener noreferrer",className:"social-link"},r.createElement("span",{className:"social-icon"},"📸"),r.createElement("div",{className:"social-info"},r.createElement("strong",null,"@susan.mindful.codes"),r.createElement("p",null,"Daily meditation & coding journey"))),r.createElement("a",{href:"https://linkedin.com/in/susansmith-developer",target:"_blank",rel:"noopener noreferrer",className:"social-link"},r.createElement("span",{className:"social-icon"},"💼"),r.createElement("div",{className:"social-info"},r.createElement("strong",null,"Susan Smith"),r.createElement("p",null,"Senior Full Stack Developer"))),r.createElement("a",{href:"https://youtube.com/c/CodeAndCalm",target:"_blank",rel:"noopener noreferrer",className:"social-link"},r.createElement("span",{className:"social-icon"},"📺"),r.createElement("div",{className:"social-info"},r.createElement("strong",null,"Code & Calm"),r.createElement("p",null,"Programming tutorials & mindfulness"))),r.createElement("a",{href:"https://github.com/susansmith-dev",target:"_blank",rel:"noopener noreferrer",className:"social-link"},r.createElement("span",{className:"social-icon"},"💻"),r.createElement("div",{className:"social-info"},r.createElement("strong",null,"susansmith-dev"),r.createElement("p",null,"Open source wellness tools"))))),r.createElement("div",{className:"profile-layout"},r.createElement("div",{className:"left-column"},r.createElement("h3",null,"⭐ ",r.createElement(Ne,{to:"/favorites"},"Favorite Profiles")),r.createElement("div",{className:"favorite-item"},r.createElement("img",{src:Yg,alt:"Zen Master",className:"favorite-avatar"}),r.createElement("div",null,r.createElement("strong",null,"@zenmaster"),r.createElement("p",null,'"Grateful for the community 🙏"'))),r.createElement("div",{className:"favorite-item"},r.createElement("img",{src:qg,alt:"Fit Jay",className:"favorite-avatar"}),r.createElement("div",null,r.createElement("strong",null,"@fit_jay"),r.createElement("p",null,'"Morning flow complete ✅"'))),r.createElement("h3",null,"📡 ",r.createElement(Ne,{to:"/favorites"},"Favorite Radio Stations")),r.createElement("div",{className:"favorite-item"},r.createElement("img",{src:Xg,alt:"LoFi Lounge",className:"favorite-avatar"}),r.createElement("div",null,r.createElement("strong",null,"LoFi Lounge"),r.createElement("p",null,"Chill beats 24/7"))),r.createElement("div",{className:"favorite-item"},r.createElement("img",{src:Qg,alt:"Jazz Hub",className:"favorite-avatar"}),r.createElement("div",null,r.createElement("strong",null,"JazzHub"),r.createElement("p",null,"Smooth jazz and more 🎷"))),r.createElement("h3",null,"🎙️ ",r.createElement(Ne,{to:"/favorites"},"Favorite Podcasts")),r.createElement("div",{className:"favorite-item"},r.createElement("img",{src:Jg,alt:"Energy Reset",className:"favorite-avatar"}),r.createElement("div",null,r.createElement("strong",null,"The Energy Reset"),r.createElement("p",null,'"How to ground yourself"'))),r.createElement("div",{className:"favorite-item"},r.createElement("img",{src:Zg,alt:"Chi Cast",className:"favorite-avatar"}),r.createElement("div",null,r.createElement("strong",null,"ChiCast"),r.createElement("p",null,'"Breathwork for busy lives"')))),r.createElement("div",{className:"middle-column"},r.createElement("div",{className:"post-section-wrapper"},r.createElement("h3",null,"📝 Create a Post"),r.createElement("textarea",{value:ce,onChange:function(e){return ue(e.target.value)},placeholder:"Write something..."}),r.createElement("input",{type:"file",accept:"image/*",onChange:function(e){return fe(e.target.files[0])}}),r.createElement("button",{onClick:function(){var e={id:Date.now(),content:ce,image:he?URL.createObjectURL(he):null,comments:[]};oe([e].concat(vo(se))),ue(""),fe(null)}},"📤 Post"),se.map(function(e){return r.createElement("div",{key:e.id,className:"post-card"},r.createElement("p",null,e.content),e.image&&r.createElement("img",{src:e.image,alt:"Post",className:"post-image"}),r.createElement("h5",null,"💬 Comments"),r.createElement("ul",null,(me[e.id]||[]).map(function(e,t){return r.createElement("li",{key:t},e)})),r.createElement("input",{type:"text",placeholder:"Write a comment...",value:be[e.id]||"",onChange:function(t){return ye(ib(ib({},be),{},We({},e.id,t.target.value)))}}),r.createElement("button",{onClick:function(){var t,n=null===(t=be[e.id])||void 0===t?void 0:t.trim();n&&(ge(ib(ib({},me),{},We({},e.id,[].concat(vo(me[e.id]||[]),[n])))),ye(ib(ib({},be),{},We({},e.id,""))))}},"💬 Reply"))}),(null==t?void 0:t.role)&&["Pro","Premium","Free"].includes(t.role)&&r.createElement("div",{className:"upload-video-section"},r.createElement("h3",null,"🎬 Upload a Video"),r.createElement(Eo,{currentUser:t,onUpload:function(){var e=localStorage.getItem("token");e&&t.id&&fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/").concat(t.id,"/videos"),{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){return H(e)}).catch(function(e){return console.error("Error fetching videos:",e)})}})),r.createElement("div",{className:"manual-upload-section"},r.createElement("h3",null,"🎬 Quick Video Upload"),r.createElement("input",{type:"file",accept:"video/*",onChange:Pe})),G.length>0&&r.createElement("div",{className:"uploaded-videos"},r.createElement("h4",null,"📹 Your Uploaded Videos"),G.map(function(e,t){return r.createElement("div",{key:e.id||t,className:"video-wrapper"},r.createElement("video",{src:e.file_url,controls:!0,width:"300"}),r.createElement("p",null,e.title),r.createElement("button",{onClick:function(){return alert("Liked!")}},"👍 ",e.likes||0),r.createElement("input",{type:"text",placeholder:"Add a comment",value:X[e.id||t]||"",onChange:function(n){return Q(ib(ib({},X),{},We({},e.id||t,n.target.value)))}}),r.createElement("button",{onClick:function(){return alert("Comment added")}},"💬 Comment"),r.createElement("button",{className:"btn-secondary",onClick:function(){H(function(e){return e.filter(function(e,n){return n!==t})}),alert("Video removed from list")}},"🗑️ Remove"))})),K.length>0&&r.createElement("div",{className:"uploaded-images"},r.createElement("h4",null,"🖼️ Your Images"),r.createElement("div",{className:"images-grid"},K.map(function(e,t){return r.createElement("div",{key:e.id||t,className:"image-wrapper"},r.createElement("img",{src:e.file_url,alt:e.title,style:{width:"200px",borderRadius:"6px"}}),r.createElement("p",null,e.title))})))),r.createElement("div",{className:"bottom-action-row"},r.createElement(Zv,null))),r.createElement("div",{className:"right-column"},r.createElement("div",{className:"quick-actions"},r.createElement("h3",null,"🎛️ Quick Actions"),r.createElement(Ne,{to:"/podcast/create"},r.createElement("button",{className:"btn-podcast"},"🎙️ Create Podcast")),r.createElement(Ne,{to:"/create-radio"},r.createElement("button",{className:"btn-radio"},"📡 Create Radio Station")),r.createElement(Ne,{to:"/indie-artist-upload"},r.createElement("button",{className:"btn-indie-upload"},"🎤 Indie Artist Upload"))),r.createElement("h3",null,"🛍️ Storefront"),r.createElement("p",null,"Visit my store:"," ",r.createElement("a",{href:I,target:"_blank",rel:"noopener noreferrer"},I||"N/A")),D.length>0&&r.createElement("div",{className:"featured-product"},"Featured: ",D[0].name))),!xe&&r.createElement("button",{onClick:De,className:"btn-primary"},"💾 Save Profile"))};var sb=i(9923),ob={};ob.styleTagTransform=y(),ob.setAttributes=m(),ob.insert=f().bind(null,"head"),ob.domAPI=d(),ob.insertStyleElement=v(),c()(sb.A,ob),sb.A&&sb.A.locals&&sb.A.locals;var lb=function(){return r.createElement("footer",{className:"footer mt-auto py-3 text-center"},r.createElement("div",{className:"footer-content"},r.createElement("p",null,"Made with ",r.createElement("i",{className:"fa fa-heart text-danger"})," by"," ",r.createElement("a",{href:"https://www.eyeforgestudios.com/",target:"_blank",rel:"noopener noreferrer"},r.createElement("strong",null,"Eye Forge Studios"))),r.createElement("div",{className:"footer-links"},r.createElement("a",{href:"/terms"},"Terms")," | ",r.createElement("a",{href:"/privacy"},"Privacy")," | ",r.createElement("a",{href:"/support"},"Support"))))};const cb=i.p+"StreampireX.png";var ub=i(9624),db={};db.styleTagTransform=y(),db.setAttributes=m(),db.insert=f().bind(null,"head"),db.domAPI=d(),db.insertStyleElement=v(),c()(ub.A,db),ub.A&&ub.A.locals&&ub.A.locals;const hb=function(){var e=qe((0,r.useState)(null),2),t=e[0],n=e[1];return(0,r.useEffect)(function(){var e=localStorage.getItem("token");e&&fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/profile"),{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){e.username&&n(e)}).catch(function(e){return console.error("Error fetching user:",e)})},[]),r.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},r.createElement(Ne,{className:"navbar-brand",to:"/"},r.createElement("img",{src:cb,alt:"StreampireX",style:{height:"48px"}})),r.createElement("ul",{className:"navbar-nav ms-auto"},r.createElement("li",{className:"nav-item"},r.createElement(Ne,{className:"nav-link",to:"/"},"🏠 Home")),r.createElement("li",{className:"nav-item"},r.createElement(Ne,{className:"nav-link",to:"/browse-podcast-categories"},"🎙️ Browse Podcast Categories")),r.createElement("li",{className:"nav-item"},r.createElement(Ne,{className:"nav-link",to:"/videos"},"📹 Browse Videos")," "),r.createElement("li",{className:"nav-item"},r.createElement(Ne,{className:"nav-link",to:"/browse-radio-stations"},"📻 Browse Radio Stations")),r.createElement("li",{className:"nav-item"},r.createElement(Ne,{className:"nav-link",to:"/live-streams"},"📡 Live Streams")),t?r.createElement("li",{className:"nav-item dropdown"},r.createElement("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown"},r.createElement("img",{src:t.profile_picture||"/default-avatar.png",alt:"Avatar",className:"rounded-circle",style:{width:"24px",height:"24px",marginRight:"5px"}}),t.username),r.createElement("ul",{className:"dropdown-menu dropdown-menu-end"},r.createElement("li",null,r.createElement(Ne,{className:"dropdown-item",to:"/profile"},"👤 My Profile")),r.createElement("li",null,r.createElement(Ne,{className:"dropdown-item",to:"/settings"},"⚙️ Settings")),r.createElement("li",null,r.createElement(Ne,{className:"dropdown-item",to:"/notifications"},"🔔 Notifications")),r.createElement("li",null,r.createElement("button",{className:"dropdown-item",onClick:function(){localStorage.removeItem("token"),n(null)}},"🚪 Logout")))):r.createElement(r.Fragment,null,r.createElement("li",{className:"nav-item"},r.createElement(Ne,{className:"nav-link",to:"/login"},"🔑 Login")),r.createElement("li",{className:"nav-item"},r.createElement(Ne,{className:"nav-link",to:"/register"},"📝 Signup")))))};function fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fb(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}i.p;const mb=function(){var e=de(),t=qe((0,r.useState)({title:"",genre:"",release_date:"",explicit:!1,cover_art:null,track_id:""}),2),n=t[0],i=t[1],a=qe((0,r.useState)([]),2),s=a[0],o=a[1],l=qe((0,r.useState)(""),2),c=l[0],u=l[1];(0,r.useEffect)(function(){var e=function(){var e=Qe(Ze().mark(function e(){var t,n,r;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/artist/tracks"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 1:return t=e.sent,e.next=2,t.json();case 2:n=e.sent,t.ok?o(n.tracks):console.error("Error fetching tracks:",n),e.next=4;break;case 3:e.prev=3,r=e.catch(0),console.error("Error loading tracks:",r);case 4:case"end":return e.stop()}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}();e()},[]);var d=function(e){var t=e.target,n=t.name,r=t.value,a=t.type,s=t.checked,o=t.files;i(function(e){return pb(pb({},e),{},We({},n,"checkbox"===a?s:"file"===a?o[0]:r))})},h=function(){var t=Qe(Ze().mark(function t(r){var i,a,s,o,l;return Ze().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),i=localStorage.getItem("token"),a=new FormData,Object.keys(n).forEach(function(e){n[e]&&a.append(e,n[e])}),t.prev=1,t.next=2,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/create-release"),{method:"POST",headers:{Authorization:"Bearer ".concat(i)},body:a});case 2:return s=t.sent,t.next=3,s.json();case 3:o=t.sent,s.ok?(u("✅ Release submitted successfully!"),setTimeout(function(){return e("/releases")},1500)):u("❌ ".concat(o.error||"Submission failed.")),t.next=5;break;case 4:t.prev=4,l=t.catch(1),console.error("Error submitting release:",l),u("❌ Network or server error.");case 5:case"end":return t.stop()}},t,null,[[1,4]])}));return function(e){return t.apply(this,arguments)}}();return r.createElement("div",{className:"release-page container"},r.createElement("h2",null,"🎶 Create New Release"),c&&r.createElement("p",{className:"alert alert-info"},c),r.createElement("form",{onSubmit:h},r.createElement("div",{className:"form-group"},r.createElement("label",null,"Track Title"),r.createElement("input",{type:"text",name:"title",className:"form-control",value:n.title,onChange:d,required:!0})),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Genre"),r.createElement("input",{type:"text",name:"genre",className:"form-control",value:n.genre,onChange:d,required:!0})),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Release Date"),r.createElement("input",{type:"date",name:"release_date",className:"form-control",value:n.release_date,onChange:d,required:!0})),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Select Uploaded Track"),r.createElement("select",{name:"track_id",className:"form-control",onChange:d,value:n.track_id,required:!0},r.createElement("option",{value:""},"-- Choose Track --"),s.map(function(e){return r.createElement("option",{key:e.id,value:e.id},e.title)}))),r.createElement("div",{className:"form-check mb-2"},r.createElement("input",{type:"checkbox",className:"form-check-input",name:"explicit",checked:n.explicit,onChange:d}),r.createElement("label",{className:"form-check-label"},"Explicit Content")),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Cover Art (JPG or PNG)"),r.createElement("input",{type:"file",name:"cover_art",className:"form-control-file",accept:"image/*",onChange:d,required:!0})),r.createElement("button",{type:"submit",className:"btn btn-primary mt-3"},"Submit Release")))},gb=function(){var e=qe((0,r.useState)(""),2),t=e[0],n=e[1],i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=qe((0,r.useState)(""),2),l=o[0],c=o[1],u=function(){var e=Qe(Ze().mark(function e(){var n,r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),e.prev=1,e.next=2,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/upload-lyrics"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({track_id:t,lyrics:a})});case 2:return r=e.sent,e.next=3,r.json();case 3:i=e.sent,c(r.ok?"✅ Lyrics uploaded":"❌ ".concat(i.error)),e.next=5;break;case 4:e.prev=4,e.catch(1),c("❌ Upload failed.");case 5:case"end":return e.stop()}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}();return r.createElement("div",{className:"container mt-4"},r.createElement("h2",null,"📝 Upload Track Lyrics"),r.createElement("input",{type:"text",className:"form-control mb-3",placeholder:"Track ID",value:t,onChange:function(e){return n(e.target.value)},required:!0}),r.createElement("textarea",{className:"form-control mb-3",rows:8,placeholder:"Paste lyrics here...",value:a,onChange:function(e){return s(e.target.value)}}),r.createElement("input",{type:"file",className:"form-control-file mb-3",accept:".txt",onChange:function(e){var t=e.target.files[0];if(t&&"text/plain"===t.type){var n=new FileReader;n.onload=function(e){return s(e.target.result)},n.readAsText(t)}else c("❌ Only .txt files are supported.")}}),r.createElement("button",{className:"btn btn-primary",onClick:u},"Upload Lyrics"),l&&r.createElement("p",{className:"mt-3"},l))};var vb=i(2747),bb={};bb.styleTagTransform=y(),bb.setAttributes=m(),bb.insert=f().bind(null,"head"),bb.domAPI=d(),bb.insertStyleElement=v(),c()(vb.A,bb),vb.A&&vb.A.locals&&vb.A.locals;var yb=[{name:"Crimson Wolves",description:"FPS-focused squad across PS5 and PC.",platforms:["PS5","PC"],inviteCode:"ABCD1234"},{name:"Shadow Reapers",description:"Casual battle royale team.",platforms:["Xbox","PC"],inviteCode:"XYZ999"}];const Eb=function(){return r.createElement("div",{className:"squad-finder-container"},r.createElement("h2",{className:"squad-header"},r.createElement("span",{role:"img","aria-label":"magnify"},"🔍")," ",r.createElement("span",{className:"squad-header-text"},"Discover Squads")),yb.map(function(e,t){return r.createElement("div",{className:"squad-card",key:t},r.createElement("h3",{className:"squad-name"},e.name),r.createElement("p",null,e.description),r.createElement("div",null,e.platforms.map(function(e,t){return r.createElement("span",{className:"platform-tag",key:t},e)})),r.createElement("p",null,"Invite Code: ",r.createElement("strong",null,e.inviteCode)),r.createElement("button",{className:"join-squad-btn"},"Join Squad"))}))},xb=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},Sb=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=wb},wb=Number.MAX_SAFE_INTEGER||9007199254740991;let kb=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),Tb=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",e.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",e.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.ASSET_LIST_LOAD_ERROR="assetListLoadError",e.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",e.ASSET_LIST_PARSING_ERROR="assetListParsingError",e.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e}({}),_b=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.STALL_RESOLVED="hlsStallResolved",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFERED_TO_END="hlsBufferedToEnd",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e.ASSET_LIST_LOADING="hlsAssetListLoading",e.ASSET_LIST_LOADED="hlsAssetListLoaded",e.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",e.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",e.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",e.INTERSTITIAL_STARTED="hlsInterstitialStarted",e.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",e.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",e.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",e.INTERSTITIAL_ENDED="hlsInterstitialEnded",e.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",e.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",e.EVENT_CUE_ENTER="hlsEventCueEnter",e}({});var Ab="manifest",Rb="level",Lb="audioTrack",Cb="subtitleTrack",Pb="main",Ib="audio",Nb="subtitle";class Db{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Ob{constructor(e,t,n,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Db(e),this.fast_=new Db(t),this.defaultTTFB_=r,this.ttfb_=new Db(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new Db(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new Db(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new Db(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Mb(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fb.apply(null,arguments)}function Bb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ub(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bb(Object(n),!0).forEach(function(t){Mb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class jb{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=$b,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const $b=function(){},zb={trace:$b,debug:$b,log:$b,warn:$b,info:$b,error:$b};function Vb(){return Fb({},zb)}function Gb(e,t,n){return t[e]?t[e].bind(t):function(e,t){const n=self.console[e];return n?n.bind(self.console,`${t?"["+t+"] ":""}[${e}] >`):$b}(e,n)}const Hb=Vb(),Wb=Hb;function Kb(e=!0){if("undefined"!=typeof self)return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Yb(e,t){const n=Object.keys(e),r=Object.keys(t),i=n.length,a=r.length;return!i||!a||i===a&&!n.some(e=>-1===r.indexOf(e))}function qb(e,t=!1){if("undefined"!=typeof TextDecoder){const n=new TextDecoder("utf-8").decode(e);if(t){const e=n.indexOf("\0");return-1!==e?n.substring(0,e):n}return n.replace(/\0/g,"")}const n=e.length;let r,i,a,s="",o=0;for(;o<n;){if(r=e[o++],0===r&&t)return s;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(r);break;case 12:case 13:i=e[o++],s+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=e[o++],a=e[o++],s+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&a)}}return s}const Xb=function(e){let t="";for(let n=0;n<e.length;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t};function Qb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jb,Zb,ey,ty,ny,ry,iy={exports:{}},ay=(Jb||(Jb=1,Zb=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,ey=/^(?=([^\/?#]*))\1([^]*)$/,ty=/(?:\/|^)\.(?=\/)/g,ny=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,ry={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=ry.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=ry.normalizePath(r.path),ry.buildURLFromParts(r)}var i=ry.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=ry.normalizePath(i.path),ry.buildURLFromParts(i)):t;var a=ry.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=ey.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(o.netLoc=a.netLoc,"/"!==i.path[0]))if(i.path){var l=a.path,c=l.substring(0,l.lastIndexOf("/")+1)+i.path;o.path=ry.normalizePath(c)}else o.path=a.path,i.params||(o.params=a.params,i.query||(o.query=a.query));return null===o.path&&(o.path=n.alwaysNormalize?ry.normalizePath(i.path):i.path),ry.buildURLFromParts(o)},parseURL:function(e){var t=Zb.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(ty,"");e.length!==(e=e.replace(ny,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},iy.exports=ry),iy.exports);class sy{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var oy="audio",ly="video",cy="audiovideo";class uy{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,"string"==typeof e&&(e={url:e}),this.base=e,function(e,t){const n=py(e,t);n&&(n.enumerable=!0,Object.defineProperty(e,t,n))}(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let r;r=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get baseurl(){return this.base.url}get byteRange(){return null===this._byteRange?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return null===this._streams&&(this._streams={[oy]:null,[ly]:null,[cy]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return null!==this._stats}get hasStreams(){return null!==this._streams}get stats(){return null===this._stats&&(this._stats=new sy),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=ay.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[oy]=null,e[ly]=null,e[cy]=null}}function dy(e){return"initSegment"!==e.sn}class hy extends uy{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],t=this.byteRange[1];if(xb(e)&&xb(t))return t-e}return null}get bitrate(){return this.byteLength?8*this.byteLength/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;const e=xb(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}get programDateTime(){return null===this._programDateTime&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){xb(e)?this._programDateTime=e:this._programDateTime=this.rawProgramDateTime=null}get ref(){return dy(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,n,r,i,a=!1){const{elementaryStreams:s}=this,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,r),o.endDTS=Math.max(o.endDTS,i)):s[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:a}}}class fy extends uy{constructor(e,t,n,r,i){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function py(e,t){const n=Object.getPrototypeOf(e);if(n){return Object.getOwnPropertyDescriptor(n,t)||py(n,t)}}const my=Math.pow(2,32)-1,gy=[].push,vy={video:1,audio:2,id3:3,text:4};function by(e){return String.fromCharCode.apply(null,e)}function yy(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function Ey(e,t){const n=Sy(e,t);return n<0?4294967296+n:n}function xy(e,t){let n=Ey(e,t);return n*=Math.pow(2,32),n+=Ey(e,t+4),n}function Sy(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function wy(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function ky(e,t){const n=[];if(!t.length)return n;const r=e.byteLength;for(let i=0;i<r;){const a=Ey(e,i),s=a>1?i+a:r;if(by(e.subarray(i+4,i+8))===t[0])if(1===t.length)n.push(e.subarray(i+8,s));else{const r=ky(e.subarray(i+8,s),t.slice(1));r.length&&gy.apply(n,r)}i=s}return n}function Ty(e){const t=[],n=e[0];let r=8;const i=Ey(e,r);r+=4;let a=0,s=0;0===n?(a=Ey(e,r),s=Ey(e,r+4),r+=8):(a=xy(e,r),s=xy(e,r+8),r+=16),r+=2;let o=e.length+s;const l=yy(e,r);r+=2;for(let n=0;n<l;n++){let n=r;const a=Ey(e,n);n+=4;const s=2147483647&a;if(1==(2147483648&a)>>>31)return Wb.warn("SIDX has hierarchical references (not supported)"),null;const l=Ey(e,n);n+=4,t.push({referenceSize:s,subsegmentDuration:l,info:{duration:l/i,start:o,end:o+s-1}}),o+=s,n+=4,r=n}return{earliestPresentationTime:a,timescale:i,version:n,referencesCount:l,references:t}}function _y(e){const t=[],n=ky(e,["moov","trak"]);for(let e=0;e<n.length;e++){const r=n[e],i=ky(r,["tkhd"])[0];if(i){let e=i[0];const n=Ey(i,0===e?12:20),a=ky(r,["mdia","mdhd"])[0];if(a){e=a[0];const i=Ey(a,0===e?12:20),s=ky(r,["mdia","hdlr"])[0];if(s){const e=by(s.subarray(8,12)),a={soun:oy,vide:ly}[e],o=Ay(ky(r,["mdia","minf","stbl","stsd"])[0]);a?(t[n]={timescale:i,type:a,stsd:o},t[a]=Ub({timescale:i,id:n},o)):t[n]={timescale:i,type:e,stsd:o}}}}}return ky(e,["moov","mvex","trex"]).forEach(e=>{const n=Ey(e,4),r=t[n];r&&(r.default={duration:Ey(e,12),flags:Ey(e,20)})}),t}function Ay(e){const t=e.subarray(8),n=t.subarray(86),r=by(t.subarray(4,8));let i,a=r;const s="enca"===r||"encv"===r;if(s){const e=ky(t,[r])[0];ky(e.subarray("enca"===r?28:78),["sinf"]).forEach(e=>{const t=ky(e,["schm"])[0];if(t){const n=by(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=ky(e,["frma"])[0];t&&(a=by(t))}}})}const o=a;switch(a){case"avc1":case"avc2":case"avc3":case"avc4":{const e=ky(n,["avcC"])[0];e&&e.length>3&&(a+="."+Cy(e[1])+Cy(e[2])+Cy(e[3]),i=Ry("avc1"===o?"dva1":"dvav",n));break}case"mp4a":{const e=ky(t,[r])[0],n=ky(e.subarray(28),["esds"])[0];if(n&&n.length>7){let e=4;if(3!==n[e++])break;e=Ly(n,e),e+=2;const t=n[e++];if(128&t&&(e+=2),64&t&&(e+=n[e++]),4!==n[e++])break;e=Ly(n,e);const r=n[e++];if(64!==r)break;if(a+="."+Cy(r),e+=12,5!==n[e++])break;e=Ly(n,e);const i=n[e++];let s=(248&i)>>3;31===s&&(s+=1+((7&i)<<3)+((224&n[e])>>5)),a+="."+s}break}case"hvc1":case"hev1":{const e=ky(n,["hvcC"])[0];if(e&&e.length>12){const t=e[1],n=["","A","B","C"][t>>6],r=31&t,i=Ey(e,2),s=(32&t)>>5?"H":"L",o=e[12],l=e.subarray(6,12);a+="."+n+r,a+="."+function(e){let t=0;for(let n=0;n<32;n++)t|=(e>>n&1)<<31-n;return t>>>0}(i).toString(16).toUpperCase(),a+="."+s+o;let c="";for(let e=l.length;e--;){const t=l[e];(t||c)&&(c="."+t.toString(16).toUpperCase()+c)}a+=c}i=Ry("hev1"==o?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":a=Ry(a,n)||a;break;case"vp09":{const e=ky(n,["vpcC"])[0];if(e&&e.length>6){const t=e[4],n=e[5],r=e[6]>>4&15;a+="."+Py(t)+"."+Py(n)+"."+Py(r)}break}case"av01":{const e=ky(n,["av1C"])[0];if(e&&e.length>2){const t=e[1]>>>5,r=31&e[1],s=e[2]>>>7?"H":"M",o=(64&e[2])>>6,l=(32&e[2])>>5,c=2===t&&o?l?12:10:o?10:8,u=(16&e[2])>>4,d=(8&e[2])>>3,h=(4&e[2])>>2,f=3&e[2],p=1,m=1,g=1,v=0;a+="."+t+"."+Py(r)+s+"."+Py(c)+"."+u+"."+d+h+f+"."+Py(p)+"."+Py(m)+"."+Py(g)+"."+v,i=Ry("dav1",n)}break}}return{codec:a,encrypted:s,supplemental:i}}function Ry(e,t){const n=ky(t,["dvvC"]),r=n.length?n[0]:ky(t,["dvcC"])[0];if(r){const t=r[2]>>1&127,n=r[2]<<5&32|r[3]>>3&31;return e+"."+Py(t)+"."+Py(n)}}function Ly(e,t){const n=t+5;for(;128&e[t++]&&t<n;);return t}function Cy(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function Py(e){return(e<10?"0":"")+e}function Iy(e){const t=ky(e,["schm"])[0];if(t){const n=by(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return ky(e,["schi","tenc"])[0]}return null}function Ny(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Dy(e,t){const n=[],r=t.samples,i=t.timescale,a=t.id;let s=!1;return ky(r,["moof"]).map(o=>{const l=o.byteOffset-8;ky(o,["traf"]).map(o=>{const c=ky(o,["tfdt"]).map(e=>{const t=e[0];let n=Ey(e,4);return 1===t&&(n*=Math.pow(2,32),n+=Ey(e,8)),n/i})[0];return void 0!==c&&(e=c),ky(o,["tfhd"]).map(c=>{const u=Ey(c,4),d=16777215&Ey(c,0);let h=0;const f=!!(16&d);let p=0;const m=!!(32&d);let g=8;u===a&&(!!(1&d)&&(g+=8),!!(2&d)&&(g+=4),!!(8&d)&&(h=Ey(c,g),g+=4),f&&(p=Ey(c,g),g+=4),m&&(g+=4),"video"===t.type&&(s=Oy(t.codec)),ky(o,["trun"]).map(a=>{const o=a[0],c=16777215&Ey(a,0),u=!!(1&c);let d=0;const f=!!(4&c),m=!!(256&c);let g=0;const v=!!(512&c);let b=0;const y=!!(1024&c),E=!!(2048&c);let x=0;const S=Ey(a,4);let w=8;u&&(d=Ey(a,w),w+=4),f&&(w+=4);let k=d+l;for(let l=0;l<S;l++){if(m?(g=Ey(a,w),w+=4):g=h,v?(b=Ey(a,w),w+=4):b=p,y&&(w+=4),E&&(x=0===o?Ey(a,w):Sy(a,w),w+=4),t.type===ly){let t=0;for(;t<b;){const a=Ey(r,k);k+=4,My(s,r[k])&&Fy(r.subarray(k,k+a),s?2:1,e+x/i,n),k+=a,t+=a+4}}e+=g/i}}))})})}),n}function Oy(e){if(!e)return!1;const t=e.substring(0,4);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}function My(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6==(31&t)}function Fy(e,t,n,r){const i=By(e);let a=0;a+=t;let s=0,o=0,l=0;for(;a<i.length;){s=0;do{if(a>=i.length)break;l=i[a++],s+=l}while(255===l);o=0;do{if(a>=i.length)break;l=i[a++],o+=l}while(255===l);const e=i.length-a;let t=a;if(o<e)a+=o;else if(o>e){Wb.error(`Malformed SEI payload. ${o} is too small, only ${e} bytes left to parse.`);break}if(4===s){if(181===i[t++]){const e=yy(i,t);if(t+=2,49===e){const e=Ey(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const a=i[t++],o=64&a,l=o?2+3*(31&a):0,c=new Uint8Array(l);if(o){c[0]=a;for(let e=1;e<l;e++)c[e]=i[t++]}r.push({type:e,payloadType:s,pts:n,bytes:c})}}}}}else if(5===s&&o>16){const e=[];for(let n=0;n<16;n++){const r=i[t++].toString(16);e.push(1==r.length?"0"+r:r),3!==n&&5!==n&&7!==n&&9!==n||e.push("-")}const a=o-16,l=new Uint8Array(a);for(let e=0;e<a;e++)l[e]=i[t++];r.push({payloadType:s,pts:n,uuid:e.join(""),userData:qb(l),userDataBytes:l})}}}function By(e){const t=e.byteLength,n=[];let r=1;for(;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;const i=t-n.length,a=new Uint8Array(i);let s=0;for(r=0;r<i;s++,r++)s===n[0]&&(s++,n.shift()),a[r]=e[s];return a}function Uy(e){const t=e.getUint32(0),n=e.byteOffset,r=e.byteLength;if(r<t)return{offset:n,size:r};if(1886614376!==e.getUint32(4))return{offset:n,size:t};const i=e.getUint32(8)>>>24;if(0!==i&&1!==i)return{offset:n,size:t};const a=e.buffer,s=Xb(new Uint8Array(a,n+12,16)),o=e.getUint32(28);let l=null,c=null;if(0===i){if(t-32<o||o<22)return{offset:n,size:t};c=new Uint8Array(a,n+32,o)}else if(1===i){if(!o||r<n+32+16*o+16)return{offset:n,size:t};l=[];for(let e=0;e<o;e++)l.push(new Uint8Array(a,n+32+16*e,16))}return{version:i,systemId:s,kids:l,data:c,offset:n,size:t}}const jy=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),$y={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function zy(e,t){const n=$y[t];return!!n&&!!n[e.slice(0,4)]}function Vy(e,t,n=!0){return!e.split(",").some(e=>!Gy(e,t,n))}function Gy(e,t,n=!0){var r;const i=Kb(n);return null!=(r=null==i?void 0:i.isTypeSupported(Hy(e,t)))&&r}function Hy(e,t){return`${t}/mp4;codecs=${e}`}function Wy(e){if(e){const t=e.substring(0,4);return $y.video[t]}return 2}function Ky(e){const t=jy();return e.split(",").reduce((e,n)=>{const r=t&&Oy(n)?9:$y.video[n];return r?(2*r+e)/(e?3:2):($y.audio[n]+e)/(e?2:1)},0)}const Yy={},qy=/flac|opus|mp4a\.40\.34/i;function Xy(e,t=!0){return e.replace(qy,e=>function(e,t=!0){if(Yy[e])return Yy[e];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e];for(let i=0;i<n.length;i++){var r;if(Gy(n[i],"audio",t))return Yy[e]=n[i],n[i];if("mp3"===n[i]&&null!=(r=Kb(t))&&r.isTypeSupported("audio/mpeg"))return""}return e}(e.toLowerCase(),t))}function Qy(e,t){if(e&&(e.length>4||-1!==["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e)))return e;if(t){const n=t.split(",");if(n.length>1){if(e)for(let t=n.length;t--;)if(n[t].substring(0,4)===e.substring(0,4))return n[t];return n[0]}}return t||e}function Jy(e){if(e.startsWith("av01.")){const t=e.split("."),n=["0","111","01","01","01","0"];for(let e=t.length;e>4&&e<10;e++)t[e]=n[e-4];return t.join(".")}return e}function Zy(e){const t=Kb(e)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function eE(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const tE={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function nE(e,t){return{supported:!1,configurations:t,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:e}}const rE={};function iE(e,t,n,r,i,a){const s=e.audioCodec?e.audioGroups:null,o=null==a?void 0:a.audioCodec,l=null==a?void 0:a.channels,c=l?parseInt(l):o?1/0:2;let u=null;if(null!=s&&s.length)try{u=1===s.length&&s[0]?t.groups[s[0]].channels:s.reduce((e,n)=>{if(n){const r=t.groups[n];if(!r)throw new Error(`Audio track group ${n} not found`);Object.keys(r.channels).forEach(t=>{e[t]=(e[t]||0)+r.channels[t]})}return e},{2:0})}catch(e){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(r,30)||"SDR"!==e.videoRange&&e.videoRange!==n||e.bitrate>Math.max(i,8e6))||!!u&&xb(c)&&Object.keys(u).some(e=>parseInt(e)>c)}function aE(e,t,n){const r=e.videoCodec,i=e.audioCodec;if(!r&&!i||!n)return Promise.resolve(tE);const a=[];if(r){const t={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},n=e.videoRange;"SDR"!==n&&(t.transferFunction=n.toLowerCase());const i=r.split(","),s=navigator.userAgent;if(i.some(e=>Oy(e))&&jy())return Promise.resolve(nE(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent sting: (${s})`),a));a.push.apply(a,i.map(e=>({type:"media-source",video:Ub(Ub({},t),{},{contentType:Hy(Jy(e),"video")})})))}return i&&e.audioGroups&&e.audioGroups.forEach(e=>{var n;e&&(null==(n=t.groups[e])||n.tracks.forEach(t=>{if(t.groupId===e){const e=t.channels||"",n=parseFloat(e);xb(n)&&n>2&&a.push.apply(a,i.split(",").map(e=>({type:"media-source",audio:{contentType:Hy(e,"audio"),channels:""+n}})))}}))}),Promise.all(a.map(e=>{const t=function(e){const{audio:t,video:n}=e,r=n||t;if(r){const e=eE(r.contentType);if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${e}_${Math.ceil(n.bitrate/1e5)}`;if(t)return`c${t.channels}${t.spatialRendering?"s":"n"}_${e}`}return""}(e);return rE[t]||(rE[t]=n.decodingInfo(e))})).then(e=>({supported:!e.some(e=>!e.supported),configurations:a,decodingInfoResults:e})).catch(e=>({supported:!1,configurations:a,decodingInfoResults:[],error:e}))}const sE=["NONE","TYPE-0","TYPE-1",null],oE=["SDR","PQ","HLG"];function lE(e){const{canSkipUntil:t,canSkipDateRanges:n,age:r}=e;return t&&r<t/2?n?"v2":"YES":""}class cE{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class uE{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(e=>!!e).map(e=>e.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=null==(t=e.supplemental)?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return dE(this._audioGroups,e)}hasSubtitleGroup(e){return dE(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function dE(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}const hE=(e,t)=>JSON.stringify(e,(e=>{const t=new WeakSet;return(n,r)=>{if(e&&(r=e(n,r)),"object"==typeof r&&null!==r){if(t.has(r))return;t.add(r)}return r}})(t));function fE(e,t){Wb.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function pE(e){return e.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function mE(e){if(!e)return e;const{lang:t,assocLang:n,characteristics:r,channels:i,audioCodec:a}=e;return{lang:t,assocLang:n,characteristics:r,channels:i,audioCodec:a}}function gE(e,t,n){if("attrs"in e){const n=t.indexOf(e);if(-1!==n)return n}for(let r=0;r<t.length;r++)if(vE(e,t[r],n))return r;return-1}function vE(e,t,n){const{groupId:r,name:i,lang:a,assocLang:s,default:o}=e,l=e.forced;return(void 0===r||t.groupId===r)&&(void 0===i||t.name===i)&&(void 0===a||function(e,t="--"){return e.length===t.length?e===t:e.startsWith(t)||t.startsWith(e)}(a,t.lang))&&(void 0===a||t.assocLang===s)&&(void 0===o||t.default===o)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||function(e,t=""){const n=e.split(","),r=t.split(",");return n.length===r.length&&!n.some(e=>-1===r.indexOf(e))}(e.characteristics||"",t.characteristics))&&(void 0===n||n(e,t))}function bE(e,t){const{audioCodec:n,channels:r}=e;return!(void 0!==n&&(t.audioCodec||"").substring(0,4)!==n.substring(0,4)||void 0!==r&&r!==(t.channels||"2"))}function yE(e,t,n){for(let r=t;r>-1;r--)if(n(e[r]))return r;for(let r=t+1;r<e.length;r++)if(n(e[r]))return r;return-1}function EE(e,t){var n;return!!e&&e!==(null==(n=t.loadLevelObj)?void 0:n.uri)}const xE=function(e,t){let n=0,r=e.length-1,i=null,a=null;for(;n<=r;){i=(n+r)/2|0,a=e[i];const s=t(a);if(s>0)n=i+1;else{if(!(s<0))return a;r=i-1}}return null};function SE(e,t,n=0,r=0,i=.005){let a=null;if(e){a=t[1+e.sn-t[0].sn]||null;const r=e.endDTS-n;r>0&&r<15e-7&&(n+=15e-7),a&&e.level!==a.level&&a.end<=e.end&&(a=t[2+e.sn-t[0].sn]||null)}else 0===n&&0===t[0].start&&(a=t[0]);if(a&&((!e||e.level===a.level)&&0===wE(n,r,a)||function(e,t,n){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const r=t.tagList.reduce((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e),n);return e.start<=r}return!1}(a,e,Math.min(i,r))))return a;const s=xE(t,wE.bind(null,n,r));return!s||s===e&&a?a:s}function wE(e=0,t=0,n){if(n.start<=e&&n.start+n.duration>e)return 0;const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function kE(e,t,n){const r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}function TE(e,t,n){if(e&&e.startCC<=t&&e.endCC>=t){let r=e.fragments;const{fragmentHint:i}=e;let a;return i&&(r=r.concat(i)),xE(r,e=>e.cc<t?1:e.cc>t?-1:(a=e,e.end<=n?1:e.start>n?-1:0)),a||null}return null}function _E(e){switch(e.details){case Tb.FRAG_LOAD_TIMEOUT:case Tb.KEY_LOAD_TIMEOUT:case Tb.LEVEL_LOAD_TIMEOUT:case Tb.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function AE(e,t){const n=_E(t);return e.default[(n?"timeout":"error")+"Retry"]}function RE(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function LE(e){return Ub(Ub({},e),{errorRetry:null,timeoutRetry:null})}function CE(e,t,n,r){if(!e)return!1;const i=null==r?void 0:r.code,a=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(i)||!!n);return e.shouldRetry?e.shouldRetry(e,t,n,r,a):a}function PE(e){const t={action:0,flags:0};return e&&(t.resolved=!0),t}var IE="NOT_LOADED",NE="APPENDING",DE="PARTIAL",OE="OK";class ME{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.BUFFER_APPENDED,this.onBufferAppended,this),e.on(_b.FRAG_BUFFERED,this.onFragBuffered,this),e.on(_b.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.BUFFER_APPENDED,this.onBufferAppended,this),e.off(_b.FRAG_BUFFERED,this.onFragBuffered,this),e.off(_b.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let t=n.length;t--;){const r=n[t];if(!r)break;const i=r.end;if(r.start<=e&&null!==i&&e<=i)return r}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:r}=this,i=Object.keys(r);for(let a=i.length;a--;){const s=r[i[a]];if((null==s?void 0:s.body.type)===t&&(!n||s.buffered)){const t=s.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,n,r,i){this.timeRanges&&(this.timeRanges[e]=t);const a=(null==r?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(r=>{const s=this.fragments[r];if(!s)return;if(a>=s.body.sn)return;if(!s.buffered&&(!s.loaded||i))return void(s.body.type===n&&this.removeFragment(s.body));const o=s.range[e];o&&(0!==o.time.length?o.time.some(e=>{const n=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&this.removeFragment(s.body),n}):this.removeFragment(s.body))})}detectPartialFragments(e){const t=this.timeRanges;if(!t||"initSegment"===e.frag.sn)return;const n=e.frag,r=BE(n),i=this.fragments[r];if(!i||i.buffered&&n.gap)return;const a=!n.relurl;Object.keys(t).forEach(r=>{const s=n.elementaryStreams[r];if(!s)return;const o=t[r],l=a||!0===s.partial;i.range[r]=this.getBufferedTimes(n,e.part,l,o)}),i.loaded=null,Object.keys(i.range).length?(i.buffered=!0,(i.body.endList=n.endList||i.body.endList)&&(this.endListFragments[i.body.type]=i),FE(i)||this.removeParts(n.sn-1,n.type)):this.removeFragment(i.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=UE(n,t=>t.fragment.sn>=e))}fragBuffered(e,t){const n=BE(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const i={time:[],partial:n},a=e.start,s=e.end,o=e.minEndPTS||s,l=e.maxStartPTS||a;for(let e=0;e<r.length;e++){const t=r.start(e)-this.bufferPadding,n=r.end(e)+this.bufferPadding;if(l>=t&&o<=n){i.time.push({startPTS:Math.max(a,r.start(e)),endPTS:Math.min(s,r.end(e))});break}if(a<n&&s>t){const t=Math.max(a,r.start(e)),n=Math.min(s,r.end(e));n>t&&(i.partial=!0,i.time.push({startPTS:t,endPTS:n}))}else if(s<=t)break}return i}getPartialFragment(e){let t,n,r,i=null,a=0;const{bufferPadding:s,fragments:o}=this;return Object.keys(o).forEach(l=>{const c=o[l];c&&FE(c)&&(n=c.body.start-s,r=c.body.end+s,e>=n&&e<=r&&(t=Math.min(e-n,r-e),a<=t&&(i=c.body,a=t)))}),i}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||FE(t))}getState(e){const t=BE(e),n=this.fragments[t];return n?n.buffered?FE(n)?DE:OE:NE:IE}isTimeBuffered(e,t,n){let r,i;for(let a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if("initSegment"===t.frag.sn||t.frag.bitrateTest)return;const n=t.frag,r=t.part?null:t,i=BE(n);this.fragments[i]={body:n,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:i,type:a}=t;if("initSegment"===n.sn)return;const s=n.type;if(r){let e=this.activePartLists[s];e||(this.activePartLists[s]=e=[]),e.push(r)}this.timeRanges=i;const o=i[a];this.detectEvictedFragments(a,o,s,r)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=BE(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let r=n.length;r--;){const i=t[n[r]];if((null==i?void 0:i.body.type)===e)return!0}return!1}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,n,r,i){r&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const s=this.fragments[a];if(!s)return;const o=s.body;o.type!==n||r&&!o.gap||o.start<t&&o.end>e&&(s.buffered||i)&&this.removeFragment(o)})}removeFragment(e){const t=BE(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const t=e.sn;this.activePartLists[e.type]=UE(n,e=>e.fragment.sn!==t)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const n=null==(e=this.hls)||null==(t=e.latestLevelDetails)?void 0:t.partList;n&&n.forEach(e=>e.clearElementaryStreamInfo())}}function FE(e){var t,n,r;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(n=e.range.audio)?void 0:n.partial)||(null==(r=e.range.audiovideo)?void 0:r.partial))}function BE(e){return`${e.type}_${e.level}_${e.sn}`}function UE(e,t){return e.filter(e=>{const n=t(e);return n||e.clearElementaryStreamInfo(),n})}class jE{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case 0:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case 1:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}class $E{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let e=0;e<4;e++)n[e]=t.getUint32(4*e);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],s=n[3],o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=new Uint32Array(256);let f=0,p=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){let n=p^p<<1^p<<2^p<<3^p<<4;n=n>>>8^255&n^99,e[f]=n,t[n]=f;const o=h[f],m=h[o],g=h[m];let v=257*h[n]^16843008*n;r[f]=v<<24|v>>>8,i[f]=v<<16|v>>>16,a[f]=v<<8|v>>>24,s[f]=v,v=16843009*g^65537*m^257*o^16843008*f,l[n]=v<<24|v>>>8,c[n]=v<<16|v>>>16,u[n]=v<<8|v>>>24,d[n]=v,f?(f=o^h[h[h[g^o]]],p^=h[h[p]]):f=p=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const a=this.ksRows=4*(i+6+1);let s,o;const l=this.keySchedule=new Uint32Array(a),c=this.invKeySchedule=new Uint32Array(a),u=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],m=h[2],g=h[3];let v,b;for(s=0;s<a;s++)s<i?v=l[s]=t[s]:(b=v,s%i===0?(b=b<<8|b>>>24,b=u[b>>>24]<<24|u[b>>>16&255]<<16|u[b>>>8&255]<<8|u[255&b],b^=d[s/i|0]<<24):i>6&&s%i===4&&(b=u[b>>>24]<<24|u[b>>>16&255]<<16|u[b>>>8&255]<<8|u[255&b]),l[s]=v=(l[s-i]^b)>>>0);for(o=0;o<a;o++)s=a-o,b=3&o?l[s]:l[s-4],c[o]=o<4||s<=4?b:f[u[b>>>24]]^p[u[b>>>16&255]]^m[u[b>>>8&255]]^g[u[255&b]],c[o]=c[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,i=this.invKeySchedule,a=this.invSBox,s=this.invSubMix,o=s[0],l=s[1],c=s[2],u=s[3],d=this.uint8ArrayToUint32Array_(n);let h=d[0],f=d[1],p=d[2],m=d[3];const g=new Int32Array(e),v=new Int32Array(g.length);let b,y,E,x,S,w,k,T,_,A,R,L,C,P;const I=this.networkToHostOrderSwap;for(;t<g.length;){for(_=I(g[t]),A=I(g[t+1]),R=I(g[t+2]),L=I(g[t+3]),S=_^i[0],w=L^i[1],k=R^i[2],T=A^i[3],C=4,P=1;P<r;P++)b=o[S>>>24]^l[w>>16&255]^c[k>>8&255]^u[255&T]^i[C],y=o[w>>>24]^l[k>>16&255]^c[T>>8&255]^u[255&S]^i[C+1],E=o[k>>>24]^l[T>>16&255]^c[S>>8&255]^u[255&w]^i[C+2],x=o[T>>>24]^l[S>>16&255]^c[w>>8&255]^u[255&k]^i[C+3],S=b,w=y,k=E,T=x,C+=4;b=a[S>>>24]<<24^a[w>>16&255]<<16^a[k>>8&255]<<8^a[255&T]^i[C],y=a[w>>>24]<<24^a[k>>16&255]<<16^a[T>>8&255]<<8^a[255&S]^i[C+1],E=a[k>>>24]<<24^a[T>>16&255]<<16^a[S>>8&255]<<8^a[255&w]^i[C+2],x=a[T>>>24]<<24^a[S>>16&255]<<16^a[w>>8&255]<<8^a[255&k]^i[C+3],v[t]=I(b^h),v[t+1]=I(x^f),v[t+2]=I(E^p),v[t+3]=I(y^m),h=_,f=A,p=R,m=L,t+=4}return v.buffer}}class zE{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=function(e){switch(e){case 0:return"AES-CBC";case 1:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${e}`)}}(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}class VE{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(e){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?e.slice(0,t-n):e}(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,r){return this.useSoftware?new Promise((i,a)=>{const s=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(s,t,n,r);const o=this.flush();o?i(o.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,r)}softwareDecrypt(e,t,n,r){const{currentIV:i,currentResult:a,remainderData:s}=this;if(0!==r||16!==t.byteLength)return Wb.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),s&&(e=Ny(s,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(n=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new $E),l.expandKey(t);const c=a;return this.currentResult=l.decrypt(o.buffer,0,n),this.currentIV=o.slice(-16).buffer,c||null}webCryptoDecrypt(e,t,n,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,r));this.key=t,this.fastAesKey=new zE(this.subtle,t,r)}return this.fastAesKey.expandKey().then(t=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new jE(this.subtle,new Uint8Array(n),r).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(Wb.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n,r)))}onWebCryptoError(e,t,n,r){const i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,r);const i=this.flush();if(i)return i.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%16;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(Wb.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const GE=Math.pow(2,17);class HE{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new YE({type:kb.NETWORK_ERROR,details:Tb.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();const r=this.config,i=r.fLoader,a=r.loader;return new Promise((s,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some(e=>"GAP"===e[0]))return void o(KE(e));e.gap=!1}const l=this.loader=i?new i(r):new a(r),c=WE(e);e.loader=l;const u=LE(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:GE};e.stats=l.stats;const h={onSuccess:(t,n,r,i)=>{this.resetLoader(e,l);let a=t.data;r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(a.slice(0,16)),a=a.slice(16)),s({frag:e,part:null,payload:a,networkDetails:i})},onError:(t,r,i,a)=>{this.resetLoader(e,l),o(new YE({type:kb.NETWORK_ERROR,details:Tb.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Ub({url:n,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:i,stats:a}))},onAbort:(t,n,r)=>{this.resetLoader(e,l),o(new YE({type:kb.NETWORK_ERROR,details:Tb.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:(t,n,r)=>{this.resetLoader(e,l),o(new YE({type:kb.NETWORK_ERROR,details:Tb.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:r,stats:t}))}};t&&(h.onProgress=(n,r,i,a)=>t({frag:e,part:null,payload:i,networkDetails:a})),l.load(c,d,h)})}loadPart(e,t,n){this.abort();const r=this.config,i=r.fLoader,a=r.loader;return new Promise((s,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(KE(e,t));const l=this.loader=i?new i(r):new a(r),c=WE(e,t);e.loader=l;const u=LE(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:GE};t.stats=l.stats,l.load(c,d,{onSuccess:(r,i,a,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:r.data,networkDetails:o};n(c),s(c)},onError:(n,r,i,a)=>{this.resetLoader(e,l),o(new YE({type:kb.NETWORK_ERROR,details:Tb.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Ub({url:c.url,data:void 0},n),error:new Error(`HTTP Error ${n.code} ${n.text}`),networkDetails:i,stats:a}))},onAbort:(n,r,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new YE({type:kb.NETWORK_ERROR,details:Tb.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:n}))},onTimeout:(n,r,i)=>{this.resetLoader(e,l),o(new YE({type:kb.NETWORK_ERROR,details:Tb.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:i,stats:n}))}})})}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){const r=Math.round(e.duration/t.duration),a=Math.min(Math.round(n.loaded/i),r),s=(r-a)*Math.round(n.loaded/a);n.total=n.loaded+s}else n.total=Math.max(n.loaded,n.total);const a=n.loading,s=r.loading;a.start?a.first+=s.first-s.start:(a.start=s.start,a.first=s.first),a.end=s.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function WE(e,t=null){const n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,a=n.byteRangeEndOffset;if(xb(i)&&xb(a)){var s;let t=i,n=a;if("initSegment"===e.sn&&("AES-128"===(o=null==(s=e.decryptdata)?void 0:s.method)||"AES-256"===o)){const e=a-i;e%16&&(n=a+(16-e%16)),0!==i&&(r.resetIV=!0,t=i-16)}r.rangeStart=t,r.rangeEnd=n}var o;return r}function KE(e,t){const n=new Error(`GAP ${e.gap?"tag":"attribute"} found`),r={type:kb.MEDIA_ERROR,details:Tb.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(r.part=t),(t||e).stats.aborted=!0,new YE(r)}class YE extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class qE extends jb{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class XE{constructor(e,t,n,r=0,i=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=a}}const QE={length:0,start:()=>0,end:()=>0};class JE{static isBuffered(e,t){if(e){const n=JE.getBuffered(e);for(let e=n.length;e--;)if(t>=n.start(e)&&t<=n.end(e))return!0}return!1}static bufferedRanges(e){if(e){const t=JE.getBuffered(e);return JE.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const r=JE.bufferedRanges(e);if(r.length)return JE.bufferedInfo(r,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((e,t)=>e.start-t.start||t.end-e.end);let r=-1,i=[];if(n)for(let a=0;a<e.length;a++){t>=e[a].start&&t<=e[a].end&&(r=a);const s=i.length;if(s){const t=i[s-1].end;e[a].start-t<n?e[a].end>t&&(i[s-1].end=e[a].end):i.push(e[a])}else i.push(e[a])}else i=e;let a,s=0,o=t,l=t;for(let e=0;e<i.length;e++){const c=i[e].start,u=i[e].end;if(-1===r&&t>=c&&t<=u&&(r=e),t+n>=c&&t<u)o=c,l=u,s=l-t;else if(t+n<c){a=c;break}}return{len:s,start:o||0,end:l||0,nextStart:a,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||QE}catch(e){return Wb.log("failed to get media.buffered",e),QE}}}const ZE=/\{\$([a-zA-Z0-9-_]+)\}/g;function ex(e){return ZE.test(e)}function tx(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(ZE,t=>{const r=t.substring(2,t.length-1),i=null==n?void 0:n[r];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),t):i})}return t}function nx(e,t,n){let r,i,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){r=t.QUERYPARAM;try{const e=new self.URL(n).searchParams;if(!e.has(r))throw new Error(`"${r}" does not match any query parameter in URI: "${n}"`);i=e.get(r)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${t.message}`))}}else r=t.NAME,i=t.VALUE;r in a?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):a[r]=i||""}function rx(e,t,n){const r=t.IMPORT;if(n&&r in n){let t=e.variableList;t||(e.variableList=t={}),t[r]=n[r]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const ix=/^(\d+)x(\d+)$/,ax=/(.+?)=(".*?"|.*?)(?:,|$)/g;class sx{constructor(e,t){"string"==typeof e&&(e=sx.parseAttrList(e,t)),Fb(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>"X-"===e.substring(0,2))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((e,t)=>(e[t.toLowerCase()]=!0,e),t)}bool(e){return"YES"===this[e]}decimalResolution(e){const t=ix.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const r={};for(ax.lastIndex=0;null!==(n=ax.exec(e));){const i=n[1].trim();let a=n[2];const s=0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1;let o=!1;if(s)a=a.slice(1,-1);else switch(i){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":o=!0}if(t&&(s||o))a=tx(t,a);else if(!o&&!s)switch(i){case"CLOSED-CAPTIONS":if("NONE"===a)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Wb.warn(`${e}: attribute ${i} is missing quotes`)}r[i]=a}return r}}function ox(e){return"ID"!==e&&"CLASS"!==e&&"CUE"!==e&&"START-DATE"!==e&&"DURATION"!==e&&"END-DATE"!==e&&"END-ON-NEXT"!==e}function lx(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e||"SCTE35-CMD"===e}class cx{constructor(e,t,n=0){var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(r=null==t?void 0:t.tagOrder)?r:n,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){Wb.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=Fb(new sx({}),n,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);xb(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return null===e||null===e.programDateTime?(Wb.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return null!==t?this._dateAtEnd=new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(xb(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return"com.apple.hls.interstitial"===this.class}get isValid(){return!!this.id&&!this._badValueForSameId&&xb(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}class ux{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1}get hasProgramDateTime(){return!!this.fragments.length&&xb(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(-1!==t){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function dx(e){return"AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function hx(e){switch(e){case"AES-128":case"AES-256":return 0;case"AES-256-CTR":return 1;default:throw new Error(`invalid full segment method ${e}`)}}function fx(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function px(e){return Uint8Array.from(unescape(encodeURIComponent(e)),e=>e.charCodeAt(0))}const mx="undefined"!=typeof self?self:void 0;var gx={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},vx="org.w3.clearkey",bx="com.apple.streamingkeydelivery",yx="com.microsoft.playready",Ex="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function xx(e){switch(e){case bx:return gx.FAIRPLAY;case yx:return gx.PLAYREADY;case Ex:return gx.WIDEVINE;case vx:return gx.CLEARKEY}}function Sx(e){return"edef8ba979d64acea3c827dcd51d21ed"===e?gx.WIDEVINE:"9a04f07998404286ab92e65be0885f95"===e?gx.PLAYREADY:"1077efecc0b24d02ace33c1e52e2fb4b"===e||"e2719d58a985b3c9781ab030af78d30e"===e?gx.CLEARKEY:void 0}function wx(e){switch(e){case gx.FAIRPLAY:return bx;case gx.PLAYREADY:return yx;case gx.WIDEVINE:return Ex;case gx.CLEARKEY:return vx}}function kx(e){const{drmSystems:t,widevineLicenseUrl:n}=e,r=t?[gx.FAIRPLAY,gx.WIDEVINE,gx.PLAYREADY,gx.CLEARKEY].filter(e=>!!t[e]):[];return!r[gx.WIDEVINE]&&n&&r.push(gx.WIDEVINE),r}const Tx=null!=mx&&null!=(_x=mx.navigator)&&_x.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var _x;function Ax(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),n=String.fromCharCode.apply(null,Array.from(t)),r=n.substring(n.indexOf("<"),n.length),i=(new DOMParser).parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(i){const e=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(e){const t=fx(e).subarray(0,16);return function(e){const t=function(e,t,n){const r=e[t];e[t]=e[n],e[n]=r};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),t}}return null}let Rx={};class Lx{static clearKeyUriToKeyIdMap(){Rx={}}constructor(e,t,n,r=[1],i=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&!dx(e)}isSupported(){if(this.method){if(dx(this.method)||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case bx:case Ex:case yx:case vx:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(dx(this.method)&&this.uri&&!this.iv){"number"!=typeof e&&(Wb.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=function(e){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e);return new Lx(this.method,this.uri,"identity",this.keyFormatVersions,t)}const t=function(e){const t=e.split(":");let n=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),r=e[e.length-1].split(",");if(2===r.length){const t="base64"===r[0],i=r[1];t?(e.splice(-1,1),n=fx(i)):n=function(e){const t=px(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}(i)}}return n}(this.uri);if(t)switch(this.keyFormat){case Ex:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case yx:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");let r,i,a;r=0,i=new Uint8Array,a=new Uint8Array;const s=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(s.buffer).setUint32(0,n.byteLength,!1),function(e,...t){const n=t.length;let r=8,i=n;for(;i--;)r+=t[i].byteLength;const a=new Uint8Array(r);for(a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=255&r,a.set(e,4),i=0,r=8;i<n;i++)a.set(t[i],r),r+=t[i].byteLength;return a}([112,115,115,104],new Uint8Array([0,0,0,0]),e,a,i,s,n||new Uint8Array)}(e,0,t),this.keyId=Ax(t);break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=Rx[this.uri];if(!e){const t=Object.keys(Rx).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16),new DataView(e.buffer,12,4).setUint32(0,t),Rx[this.uri]=e}this.keyId=e}return this}}const Cx=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Px=/#EXT-X-MEDIA:(.*)/g,Ix=/^#EXT(?:INF|-X-TARGETDURATION):/m,Nx=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Dx=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Ox{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static resolve(e,t){return ay.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Ix.test(e)}static parseMasterPlaylist(e,t){const n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:ex(e)},r=[];let i;for(Cx.lastIndex=0;null!=(i=Cx.exec(e));)if(i[1]){var a;const e=new sx(i[1],n),s=tx(n,i[2]),o={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:Ox.resolve(s,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),jx(e.CODECS,o);const c=e["SUPPLEMENTAL-CODECS"];c&&(o.supplemental={},jx(c,o.supplemental)),null!=(a=o.unknownCodecs)&&a.length||r.push(o),n.levels.push(o)}else if(i[3]){const e=i[3],r=i[4];switch(e){case"SESSION-DATA":{const e=new sx(r,n),t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{const e=Bx(r,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):Wb.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${r}"`);break}case"DEFINE":nx(n,new sx(r,n),t);break;case"CONTENT-STEERING":{const e=new sx(r,n);n.contentSteering={uri:Ox.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=Ux(r)}}const s=r.length>0&&r.length<n.levels.length;return n.levels=s?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,n){let r;const i={},a=n.levels,s={AUDIO:a.map(e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec})),SUBTITLES:a.map(e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec})),"CLOSED-CAPTIONS":[]};let o=0;for(Px.lastIndex=0;null!==(r=Px.exec(e));){const e=new sx(r[1],n),a=e.TYPE;if(a){const n=s[a],r=i[a]||[];i[a]=r;const l=e.LANGUAGE,c=e["ASSOC-LANGUAGE"],u=e.CHANNELS,d=e.CHARACTERISTICS,h=e["INSTREAM-ID"],f={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",name:e.NAME||l||"",type:a,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:l,url:e.URI?Ox.resolve(e.URI,t):""};if(c&&(f.assocLang=c),u&&(f.channels=u),d&&(f.characteristics=d),h&&(f.instreamId=h),null!=n&&n.length){const e=Ox.findGroup(n,f.groupId)||n[0];$x(f,e,"audioCodec"),$x(f,e,"textCodec")}r.push(f)}}return i}static parseLevelPlaylist(e,t,n,r,i,a){var s;const o={url:t},l=new ux(t),c=l.fragments,u=[];let d,h,f,p,m=null,g=0,v=0,b=0,y=0,E=0,x=null,S=new hy(r,o),w=-1,k=!1,T=null;if(Nx.lastIndex=0,l.m3u8=e,l.hasVariableRefs=ex(e),"#EXTM3U"!==(null==(s=Nx.exec(e))?void 0:s[0]))return l.playlistParsingError=new Error("Missing format identifier #EXTM3U"),l;for(;null!==(d=Nx.exec(e));){k&&(k=!1,S=new hy(r,o),S.playlistOffset=b,S.start=b,S.sn=g,S.cc=y,E&&(S.bitrate=E),S.level=n,m&&(S.initSegment=m,m.rawProgramDateTime&&(S.rawProgramDateTime=m.rawProgramDateTime,m.rawProgramDateTime=null),T&&(S.setByteRange(T),T=null)));const e=d[1];if(e){S.duration=parseFloat(e);const t=(" "+d[2]).slice(1);S.title=t||null,S.tagList.push(t?["INF",e,t]:["INF",e])}else if(d[3]){if(xb(S.duration)){S.playlistOffset=b,S.start=b,f&&Gx(S,f,l),S.sn=g,S.level=n,S.cc=y,c.push(S);const e=(" "+d[3]).slice(1);S.relurl=tx(l,e),zx(S,x,u),x=S,b+=S.duration,g++,v=0,k=!0}}else{if(d=d[0].match(Dx),!d){Wb.warn("No matches on slow regex match for level playlist!");continue}for(h=1;h<d.length&&void 0===d[h];h++);const e=(" "+d[h]).slice(1),i=(" "+d[h+1]).slice(1),s=d[h+2]?(" "+d[h+2]).slice(1):null;switch(e){case"BYTERANGE":x?S.setByteRange(i,x):S.setByteRange(i);break;case"PROGRAM-DATE-TIME":S.rawProgramDateTime=i,S.tagList.push(["PROGRAM-DATE-TIME",i]),-1===w&&(w=c.length);break;case"PLAYLIST-TYPE":l.type&&Hx(l,e,d),l.type=i.toUpperCase();break;case"MEDIA-SEQUENCE":0!==l.startSN?Hx(l,e,d):c.length>0&&Wx(l,e,d),g=l.startSN=parseInt(i);break;case"SKIP":{l.skippedSegments&&Hx(l,e,d);const t=new sx(i,l),n=t.decimalInteger("SKIPPED-SEGMENTS");if(xb(n)){l.skippedSegments+=n;for(let e=n;e--;)c.push(null);g+=n}const r=t.enumeratedString("RECENTLY-REMOVED-DATERANGES");r&&(l.recentlyRemovedDateranges=(l.recentlyRemovedDateranges||[]).concat(r.split("\t")));break}case"TARGETDURATION":0!==l.targetduration&&Hx(l,e,d),l.targetduration=Math.max(parseInt(i),1);break;case"VERSION":null!==l.version&&Hx(l,e,d),l.version=parseInt(i);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":l.live||Hx(l,e,d),l.live=!1;break;case"#":(i||s)&&S.tagList.push(s?[i,s]:[i]);break;case"DISCONTINUITY":y++,S.tagList.push(["DIS"]);break;case"GAP":S.gap=!0,S.tagList.push([e]);break;case"BITRATE":S.tagList.push([e,i]),E=1e3*parseInt(i),xb(E)?S.bitrate=E:E=0;break;case"DATERANGE":{const e=new sx(i,l),t=new cx(e,l.dateRanges[e.ID],l.dateRangeTagCount);l.dateRangeTagCount++,t.isValid||l.skippedSegments?l.dateRanges[t.id]=t:Wb.warn(`Ignoring invalid DATERANGE tag: "${i}"`),S.tagList.push(["EXT-X-DATERANGE",i]);break}case"DEFINE":{const e=new sx(i,l);"IMPORT"in e?rx(l,e,a):nx(l,e,t)}break;case"DISCONTINUITY-SEQUENCE":0!==l.startCC?Hx(l,e,d):c.length>0&&Wx(l,e,d),l.startCC=y=parseInt(i);break;case"KEY":{const e=Bx(i,t,l);if(e.isSupported()){if("NONE"===e.method){f=void 0;break}f||(f={}),f[e.keyFormat]&&(f=Fb({},f)),f[e.keyFormat]=e}else Wb.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${i}"`);break}case"START":l.startTimeOffset=Ux(i);break;case"MAP":{const e=new sx(i,l);if(S.duration){const t=new hy(r,o);Vx(t,e,n,f),m=t,S.initSegment=m,m.rawProgramDateTime&&!S.rawProgramDateTime&&(S.rawProgramDateTime=m.rawProgramDateTime)}else{const t=S.byteRangeEndOffset;if(t){const e=S.byteRangeStartOffset;T=`${t-e}@${e}`}else T=null;Vx(S,e,n,f),m=S,k=!0}m.cc=y;break}case"SERVER-CONTROL":p&&Hx(l,e,d),p=new sx(i),l.canBlockReload=p.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=p.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=l.canSkipUntil>0&&p.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=p.optionalFloat("PART-HOLD-BACK",0),l.holdBack=p.optionalFloat("HOLD-BACK",0);break;case"PART-INF":{l.partTarget&&Hx(l,e,d);const t=new sx(i);l.partTarget=t.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=l.partList;e||(e=l.partList=[]);const t=v>0?e[e.length-1]:void 0,n=v++,r=new sx(i,l),a=new fy(r,S,o,n,t);e.push(a),S.duration+=a.duration;break}case"PRELOAD-HINT":{const e=new sx(i,l);l.preloadHint=e;break}case"RENDITION-REPORT":{const e=new sx(i,l);l.renditionReports=l.renditionReports||[],l.renditionReports.push(e);break}default:Wb.warn(`line parsed but not handled: ${d}`)}}}x&&!x.relurl?(c.pop(),b-=x.duration,l.partList&&(l.fragmentHint=x)):l.partList&&(zx(S,x,u),S.cc=y,l.fragmentHint=S,f&&Gx(S,f,l)),l.targetduration||(l.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const _=c.length,A=c[0],R=c[_-1];if(b+=l.skippedSegments*l.targetduration,b>0&&_&&R){l.averagetargetduration=b/_;const e=R.sn;l.endSN="initSegment"!==e?e:0,l.live||(R.endList=!0),A&&void 0===l.startCC&&(l.startCC=A.cc),w>0&&(function(e,t){let n=e[t];for(let r=t;r--;){const t=e[r];if(!t)return;t.programDateTime=n.programDateTime-1e3*t.duration,n=t}}(c,w),A&&u.unshift(A))}else l.endSN=0,l.startCC=0;return l.fragmentHint&&(b+=l.fragmentHint.duration),l.totalduration=b,u.length&&l.dateRangeTagCount&&A&&Mx(u,l),l.endCC=y,l}}function Mx(e,t){const n=e.length;if(!n)return;const r=e[n-1],i=t.live?1/0:t.totalduration,a=Object.keys(t.dateRanges);for(let s=a.length;s--;){const o=t.dateRanges[a[s]],l=o.startDate.getTime();o.tagAnchor=r.ref;for(let r=n;r--;){const n=Fx(t,l,e,r,i);if(-1!==n){o.tagAnchor=t.fragments[n].ref;break}}}}function Fx(e,t,n,r,i){const a=n[r];if(a){const o=a.programDateTime;var s;if(t>=o||0===r)if(t<=o+1e3*(((null==(s=n[r+1])?void 0:s.start)||i)-a.start)){const i=n[r].sn-e.startSN,a=e.fragments;if(a.length>n.length)for(let s=(n[r+1]||a[a.length-1]).sn-e.startSN;s>i;s--){const e=a[s].programDateTime;if(t>=e&&t<e+1e3*a[s].duration)return s}return i}}return-1}function Bx(e,t,n){var r,i;const a=new sx(e,n),s=null!=(r=a.METHOD)?r:"",o=a.URI,l=a.hexadecimalInteger("IV"),c=a.KEYFORMATVERSIONS,u=null!=(i=a.KEYFORMAT)?i:"identity";o&&a.IV&&!l&&Wb.error(`Invalid IV: ${a.IV}`);const d=o?Ox.resolve(o,t):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new Lx(s,d,u,h,l)}function Ux(e){const t=new sx(e).decimalFloatingPoint("TIME-OFFSET");return xb(t)?t:null}function jx(e,t){let n=(e||"").split(/[ ,]+/).filter(e=>e);["video","audio","text"].forEach(e=>{const r=n.filter(t=>zy(t,e));r.length&&(t[`${e}Codec`]=r.map(e=>e.split("/")[0]).join(","),n=n.filter(e=>-1===r.indexOf(e)))}),t.unknownCodecs=n}function $x(e,t,n){const r=t[n];r&&(e[n]=r)}function zx(e,t,n){e.rawProgramDateTime?n.push(e):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function Vx(e,t,n,r){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",r&&(e.levelkeys=r),e.initSegment=null}function Gx(e,t,n){e.levelkeys=t;const{encryptedFragments:r}=n;r.length&&r[r.length-1].levelkeys===t||!Object.keys(t).some(e=>t[e].isCommonEncryption)||r.push(e)}function Hx(e,t,n){e.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${n[0]})`)}function Wx(e,t,n){e.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${n[0]})`)}function Kx(e,t){const n=t.startPTS;if(xb(n)){let r,i=0;t.sn>e.sn?(i=n-e.start,r=e):(i=e.start-n,r=t),r.duration!==i&&r.setDuration(i)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration):t.setStart(Math.max(e.start-t.duration,0))}function Yx(e,t,n,r,i,a){r-n<=0&&(Wb.warn("Fragment should have a positive duration",t),r=n+t.duration,a=i+t.duration);let s=n,o=r;const l=t.startPTS,c=t.endPTS;if(xb(l)){const e=Math.abs(l-n);xb(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,s=Math.max(n,l),n=Math.min(n,l),i=Math.min(i,t.startDTS),o=Math.min(r,c),r=Math.max(r,c),a=Math.max(a,t.endDTS)}const u=n-t.start;0!==t.start&&t.setStart(n),t.setDuration(r-t.start),t.startPTS=n,t.maxStartPTS=s,t.startDTS=i,t.endPTS=r,t.minEndPTS=o,t.endDTS=a;const d=t.sn;if(!e||d<e.startSN||d>e.endSN)return 0;let h;const f=d-e.startSN,p=e.fragments;for(p[f]=t,h=f;h>0;h--)Kx(p[h],p[h-1]);for(h=f;h<p.length-1;h++)Kx(p[h],p[h+1]);return e.fragmentHint&&Kx(p[p.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,u}function qx(e,t,n,r,i){return new Error(`${e} ${i.url}\nPlaylist starting @${t.startSN}\n${t.m3u8}\n\nPlaylist starting @${n.startSN}\n${n.m3u8}`)}function Xx(e,t,n=!0){const r=t.startSN+t.skippedSegments-e.startSN,i=e.fragments,a=r>=0;let s=0;if(a&&r<i.length)s=i[r].start;else if(a&&t.startSN===e.endSN+1)s=e.fragmentEnd;else if(a&&n)s=e.fragmentStart+r*t.levelTargetDuration;else{if(t.skippedSegments||0!==t.fragmentStart)return;s=e.fragmentStart}Qx(t,s)}function Qx(e,t){if(t){const n=e.fragments;for(let r=e.skippedSegments;r<n.length;r++)n[r].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function Jx(e,t=1/0){let n=1e3*e.targetduration;if(e.updated){const r=e.fragments,i=4;if(r.length&&n*i>t){const e=1e3*r[r.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}function Zx(e,t,n){if(!e)return null;let r=e.fragments[t-e.startSN];return r||(r=e.fragmentHint,r&&r.sn===t?r:t<e.startSN&&n&&n.sn===t?n:null)}function eS(e,t,n){return e?tS(e.partList,t,n):null}function tS(e,t,n){if(e)for(let r=e.length;r--;){const i=e[r];if(i.index===n&&i.fragment.sn===t)return i}return null}function nS(e){e.forEach((e,t)=>{var n;null==(n=e.details)||n.fragments.forEach(e=>{e.level=t,e.initSegment&&(e.initSegment.level=t)})})}function rS(e,t){for(let r=0,i=e.length;r<i;r++){var n;if((null==(n=e[r])?void 0:n.cc)===t)return e[r]}return null}function iS(e,t){if(e){const n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function aS(e,t){const n=t.fragments;for(let t=0,r=n.length;t<r;t++)iS(n[t],e);t.fragmentHint&&iS(t.fragmentHint,e),t.alignedSliding=!0}function sS(e,t){if(!function(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}(t,e))return;const n=Math.min(t.endCC,e.endCC),r=rS(t.fragments,n),i=rS(e.fragments,n);r&&i&&(Wb.log(`Aligning playlist at start of dicontinuity sequence ${n}`),aS(r.start-i.start,e))}function oS(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,r=t.fragments;if(!n.length||!r.length)return;let i,a;const s=Math.min(t.endCC,e.endCC);t.startCC<s&&e.startCC<s&&(i=rS(r,s),a=rS(n,s)),i&&a||(i=r[Math.floor(r.length/2)],a=rS(n,i.cc)||n[Math.floor(n.length/2)]);const o=i.programDateTime,l=a.programDateTime;o&&l&&aS((l-o)/1e3-(a.start-i.start),e)}const lS="STOPPED",cS="IDLE",uS="KEY_LOADING",dS="FRAG_LOADING",hS="FRAG_LOADING_WAITING_RETRY",fS="WAITING_TRACK",pS="PARSING",mS="PARSED",gS="ENDED",vS="ERROR",bS="WAITING_INIT_PTS",yS="WAITING_LEVEL";class ES extends qE{constructor(e,t,n,r,i){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=lS,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:e,fragCurrent:t,media:n,mediaBuffer:r,state:i}=this,a=n?n.currentTime:0,s=JE.bufferInfo(r||n,a,e.maxBufferHole);if(this.log(`media seeking to ${xb(a)?a.toFixed(3):a}, state: ${i}`),this.state===gS)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,r=t.start-n,i=t.start+t.duration+n;if(!s.len||i<s.start||r>s.end){const e=a>i;(a<r||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(n&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),a>this.lastCurrentTime&&(this.lastCurrentTime=a),!this.loadingParts)){const e=Math.max(s.end,a),t=this.shouldLoadParts(this.getLevelDetails(),e);t&&(this.log(`LL-Part loading ON after seeking to ${a.toFixed(2)} with buffer @${e.toFixed(2)}`),this.loadingParts=t)}this.hls.hasEnoughToStart||s.len||(this.log(`setting startPosition to ${a} because of seek before start`),this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=i,this.hls=e,this.fragmentLoader=new HE(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new VE(e.config)}registerListeners(){const{hls:e}=this;e.on(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(_b.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(_b.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===lS)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=lS}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return-1===t&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,r=this.config.timelineOffset||0;if(n<=r)return!1;const i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=JE.bufferedInfo(i,e.start,0));const a=e.nextStart;if(a&&a>r&&a<t.edge)return!1;if(this.media.currentTime<e.start)return!1;const s=t.partList;if(null!=s&&s.length){const e=s[s.length-1];return JE.isBuffered(this.media,e.start+e.duration/2)}const o=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(o)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details}get timelineOffset(){const e=this.config.timelineOffset;var t;return e?(null==(t=this.getLevelDetails())?void 0:t.appliedTimelineOffset)||e:0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;n.removeEventListener("seeking",this.onMediaSeeking),n.removeEventListener("ended",this.onMediaEnded),n.addEventListener("seeking",this.onMediaSeeking),n.addEventListener("ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===lS&&this.startLoad(r.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(null!==r){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n)return this.resetLoadingState(),void this.resetTransmuxer();this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=lS,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,e=>{const t=e.frag;if(this.fragContextChanged(t))return this.warn(`${t.type} sn: ${t.sn}${e.part?" part: "+e.part.index:""} of ${this.fragInfo(t,!1,e.part)}) was dropped during download.`),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)}).then(e=>{if(!e)return;const t=this.state,n=e.frag;this.fragContextChanged(n)?(t===dS||!this.fragCurrent&&t===pS)&&(this.fragmentTracker.removeFragment(n),this.state=cS):("payload"in e&&(this.log(`Loaded ${n.type} sn: ${n.sn} of ${this.playlistLabel()} ${n.level}`),this.hls.trigger(_b.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))}).catch(t=>{this.state!==lS&&this.state!==vS&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===NE){const t=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,r?r.len:this.config.maxBufferLength),a=this.backtrackFragment;(1===(a?e.sn-a.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===DE&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(null==t?void 0:t.live)&&"EVENT"!==t.type&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:n};this.hls.trigger(_b.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(e=>{const t=null==e?void 0:e.frag;if(!t||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e}).then(e=>{const{hls:t}=this,{frag:n,payload:r}=e,i=n.decryptdata;if(r&&r.byteLength>0&&null!=i&&i.key&&i.iv&&dx(i.method)){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,hx(i.method)).catch(e=>{throw t.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:n}),e}).then(r=>{const i=self.performance.now();return t.trigger(_b.FRAG_DECRYPTED,{frag:n,payload:r,stats:{tstart:a,tdecrypt:i}}),e.payload=r,this.completeInitSegmentLoad(e)})}return this.completeInitSegmentLoad(e)}).catch(t=>{this.state!==lS&&this.state!==vS&&(this.warn(t),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==lS&&(this.state=cS),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?function(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+=`[${e.start(r).toFixed(3)}-${e.end(r).toFixed(3)}]`;return t}(JE.getBuffered(n)):"(detached)"})`),dy(e)){var r;if(e.type!==Nb){const t=e.elementaryStreams;if(!Object.keys(t).some(e=>!!t[e]))return void(this.state=cS)}const t=null==(r=this.levels)?void 0:r[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=cS}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:i}=e,a=!i||0===i.length||i.some(e=>!e),s=new XE(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!a);t.flush(s)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,r){var i;this.fragCurrent=e;const a=null==t?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let s=null;!e.encrypted||null!=(i=e.decryptdata)&&i.key?e.encrypted||(s=this.keyLoader.loadClear(e,a.encryptedFragments),s&&this.log("[eme] blocking frag load until media-keys acquired")):(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=uS,this.fragCurrent=e,s=this.keyLoader.load(e).then(e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(_b.KEY_LOADED,e),this.state===uS&&(this.state=cS),e}),this.hls.trigger(_b.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(s=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING"))));const o=this.fragPrevious;if(dy(e)&&(!o||e.sn!==o.sn)){const n=this.shouldLoadParts(t.details,e.end);n!==this.loadingParts&&(this.log(`LL-Part loading ${n?"ON":"OFF"} loading sn ${null==o?void 0:o.sn}->${e.sn}`),this.loadingParts=n)}if(n=Math.max(e.start,n||0),this.loadingParts&&dy(e)){const i=a.partList;if(i&&r){n>e.end&&a.fragmentHint&&(e=a.fragmentHint);const o=this.getNextPart(i,e,n);if(o>-1){const l=i[o];let c;return e=this.fragCurrent=l.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${l.index} (${o}/${i.length-1}) of ${this.fragInfo(e,!1,l)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=dS,c=s?s.then(n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,l,t,r)).catch(e=>this.handleFragLoadError(e)):this.doFragPartsLoad(e,l,t,r).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(_b.FRAG_LOADING,{frag:e,part:l,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(i,n))return Promise.resolve(null)}}if(dy(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${a?"["+a.startSN+"-"+a.endSN+"]":""}, target: ${parseFloat(n.toFixed(3))}`),xb(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=dS;const l=this.config.progressive;let c;return c=l&&s?s.then(t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,r)).catch(e=>this.handleFragLoadError(e)):Promise.all([this.fragmentLoader.load(e,l?r:void 0),s]).then(([e])=>(!l&&e&&r&&r(e),e)).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(_b.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,t,n,r){return new Promise((i,a)=>{var s;const o=[],l=null==(s=n.details)?void 0:s.partList,c=t=>{this.fragmentLoader.loadPart(e,t,r).then(r=>{o[t.index]=r;const a=r.part;this.hls.trigger(_b.FRAG_LOADED,r);const s=eS(n.details,e.sn,t.index+1)||tS(l,e.sn,t.index+1);if(!s)return i({frag:e,part:a,partsLoaded:o});c(s)}).catch(a)};c(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===Tb.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(_b.ERROR,t)}else this.hls.trigger(_b.ERROR,{type:kb.OTHER_ERROR,details:Tb.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==pS)return void(this.fragCurrent||this.state===lS||this.state===vS||(this.state=cS));const{frag:n,part:r,level:i}=t,a=self.performance.now();n.stats.parsing.end=a,r&&(r.stats.parsing.end=a);const s=this.getLevelDetails(),o=s&&n.sn>s.endSN||this.shouldLoadParts(s,n.end);o!==this.loadingParts&&(this.log(`LL-Part loading ${o?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=o),this.updateLevelTiming(n,r,i,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(null!=e&&e.partList){var n;const i=e.partList[0];var r;if(t>=i.end+((null==(n=e.fragmentHint)?void 0:n.duration)||0))if((this.hls.hasEnoughToStart?(null==(r=this.media)?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:i,part:a}=e;if(null==t||!t[r])return this.warn(`Levels object was unset while buffering fragment ${i} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const s=t[r],o=s.details,l=a>-1?eS(o,i,a):null,c=l?l.fragment:Zx(o,i,n);return c?(n&&n!==c&&(c.stats=n.stats),{frag:c,part:l,level:s}):null}bufferFragmentData(e,t,n,r,i){var a;if(!e||this.state!==pS)return;const{data1:s,data2:o}=e;let l=s;if(s&&o&&(l=Ny(s,o)),null==(a=l)||!a.length)return;const c={type:e.type,frag:t,part:n,chunkMeta:r,parent:t.type,data:l};if(this.hls.trigger(_b.BUFFER_APPENDING,c),e.dropped&&e.independent&&!n){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!JE.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,r=JE.bufferInfo(t,n,0),i=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),s=Math.max(Math.min(e.start-a,r.end-a),n+a);e.start-s>a&&this.flushMainBuffer(s,e.start)}getFwdBufferInfo(e,t){var n;const r=this.getLoadPosition();if(!xb(r))return null;const i=this.lastCurrentTime>r||null!=(n=this.media)&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,t,i)}getFwdBufferInfoAtPos(e,t,n,r){const i=JE.bufferInfo(e,t,r);if(0===i.len&&void 0!==i.nextStart){const a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&(i.nextStart<=a.end||a.gap)){const n=Math.max(Math.min(i.nextStart,a.end)-t,r);return JE.bufferInfo(e,t,n)}}return i}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),i=Math.max(e-3*t,n.maxMaxBufferLength/2,r);return i>=r&&(n.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0)}getAppendedFrag(e,t=Pb){var n;const r=null==(n=this.fragmentTracker)?void 0:n.getAppendedFrag(e,t);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:i}=this,a=n[0].start,s=i.lowLatencyMode&&!!t.partList;let o=null;if(t.live){const n=i.initialLiveManifestSize;if(r<n)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${n})`),null;if(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<a){var l;s&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),o=this.getInitialLiveFragment(t);const n=this.hls.startPosition,r=this.hls.liveSyncPosition,i=o?(-1!==n&&n>=a?n:r)||o.start:e;this.log(`Setting startPosition to ${i} to match start frag at live edge. mainStart: ${n} liveSyncPosition: ${r} frag.start: ${null==(l=o)?void 0:l.start}`),this.startPosition=this.nextLoadPosition=i}}else e<=a&&(o=n[0]);if(!o){const n=this.loadingParts?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,n,t)}let c=this.filterReplacedPrimary(o,t);if(!c&&o){const e=o.sn-t.startSN;c=this.filterReplacedPrimary(n[e+1]||null,t)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===OE||n===DE&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,i){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&n.nextStart)){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r,0);if(null!==e&&n.len+e.len>=i){const e=a.sn;return this.loopSn!==e&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e}`),this.loopSn=e),null}}return this.loopSn=void 0,a}get primaryPrefetch(){var e,t;if(xS(this.hls.config)&&(null==(e=this.hls.interstitialsManager)||null==(t=e.playingItem)?void 0:t.event))return!0;return!1}filterReplacedPrimary(e,t){if(!e)return e;if(xS(this.hls.config)&&e.type!==Nb){const n=this.hls.interstitialsManager,r=null==n?void 0:n.bufferingItem;if(r){const n=r.event;if(n){if(n.appendInPlace||Math.abs(e.start-r.start)>1||0===r.start)return null}else{if(e.end<=r.start&&!1===(null==t?void 0:t.live))return null;if(e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}}const i=null==n?void 0:n.playerQueue;if(i)for(let t=i.length;t--;){const n=i[t].interstitial;if(n.appendInPlace&&e.start>=n.startTime&&e.end<=n.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let r=-1,i=!1,a=!0;for(let s=0,o=e.length;s<o;s++){const o=e[s];if(a=a&&!o.independent,r>-1&&n<o.start)break;const l=o.loaded;l?r=-1:(i||o.independent||a)&&o.fragment===t&&(r=s),i=l}return r}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),r=function(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!xb(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;for(let r=0;r<e.length;++r){const i=e[r];if(kE(t,n,i))return i}return null}(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){const a=t[i-e.startSN];n.cc===a.cc&&(r=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=TE(e,n.cc,n.end),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(r=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:i}=this,{fragments:a,endSN:s}=n;const{fragmentHint:o}=n,{maxFragLookUpTolerance:l}=r,c=n.partList,u=!!(this.loadingParts&&null!=c&&c.length&&o);let d;var h;(u&&o&&!this.bitrateTest&&c[c.length-1].fragment.sn===o.sn&&(a=a.concat(o),s=o.sn),e<t)?d=SE(i,a,e,e<this.lastCurrentTime||e>t-l||null!=(h=this.media)&&h.paused||!this.startFragRequested?0:l):d=a[a.length-1];if(d){const e=d.sn-n.startSN,t=this.fragmentTracker.getState(d);if((t===OE||t===DE&&d.gap)&&(i=d),i&&d.sn===i.sn&&(!u||c[0].fragment.sn>d.sn||!n.live&&!u)&&i&&d.level===i.level){const t=a[e+1];d=d.sn<s&&this.fragmentTracker.getState(t)!==OE?t:null}}return d}alignPlaylists(e,t,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const i=e.fragmentStart,a=!t,s=e.alignedSliding&&xb(i);if(a||!s&&!i){!function(e,t){e&&(sS(t,e),!t.alignedSliding&&e&&oS(t,e),t.alignedSliding||!e||t.skippedSegments||Xx(e,t,!1))}(n,e);const i=e.fragmentStart;return this.log(`Live playlist sliding: ${i.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${r}`),i}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const r=this.timelineOffset;if(-1===n){const i=null!==this.startTimeOffset,a=i?this.startTimeOffset:e.startTimeOffset;null!==a&&xb(a)?(n=t+a,a<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${a} found in ${i?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+r}this.nextLoadPosition=n+r}getLoadPosition(){var e;const{media:t}=this;let n=0;return null!=(e=this.hls)&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&dy(e)&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===hS)||(this.state=cS)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;var r;if(this.fragContextChanged(n))return void this.warn(`Frag load error must match current frag to retry ${n.url} > ${null==(r=this.fragCurrent)?void 0:r.url}`);const i=t.details===Tb.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(n,!0);const a=t.errorAction,{action:s,flags:o,retryCount:l=0,retryConfig:c}=a||{},u=!!a&&!!c,d=u&&5===s,h=u&&!a.resolved&&1===o;if(!d&&h&&dy(n)&&!n.endList)this.resetFragmentErrors(e),this.treatAsGap(n),a.resolved=!0;else if((d||h)&&l<c.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const r=RE(c,l);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${r}ms`),a.resolved=!0,this.retryDate=self.performance.now()+r,this.state=hS}else if(c&&a){if(this.resetFragmentErrors(e),!(l<c.maxNumRetry))return void this.warn(`${t.details} reached or exceeded max retry (${l})`);i||3===s||(a.resolved=!0)}else this.state=2===s?yS:vS;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===pS||this.state===mS){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len,(null==t?void 0:t.duration)||10);const a=!i;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===Ib&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==lS&&(this.state=cS)}afterBufferFlushed(e,t,n){if(!e)return;const r=JE.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===gS&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==lS&&(this.state=cS)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){const i=n.details;if(i){var a;if(!Object.keys(e.elementaryStreams).reduce((t,a)=>{const s=e.elementaryStreams[a];if(s){const o=s.endPTS-s.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${a} duration reliably (${o})`),t||!1;const l=r?0:Yx(i,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return this.hls.trigger(_b.LEVEL_PTS_UPDATED,{details:i,level:n,drift:l,type:a,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t},!1)&&(0===n.fragmentError&&this.treatAsGap(e,n),null===(null==(a=this.transmuxer)?void 0:a.error))){const t=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(t.message),this.hls.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=mS,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(_b.FRAG_PARSED,{frag:e,part:t})}else this.warn("level.details undefined")}playlistLabel(){return this.playlistType===Pb?"level":"track"}fragInfo(e,t=!0,n){var r,i;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${(null!=(r=t&&!n?e.startPTS:(n||e).start)?r:NaN).toFixed(3)}-${(null!=(i=t&&!n?e.endPTS:(n||e).end)?i:NaN).toFixed(3)}]${n&&"main"===e.type?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;null==(e=this.transmuxer)||e.reset()}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function xS(e){return!!e.interstitialsController&&!1!==e.enableInterstitialPlayback}class SS{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:function(e,t){const n=new Uint8Array(t);let r=0;for(let t=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}var wS,kS={exports:{}},TS=(wS||(wS=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new i(r,a||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,a,s){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,a),!0;case 6:return u.fn.call(u.context,t,r,i,a,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||s(this,a);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(kS)),kS.exports),_S=Qb(TS);const AS="1.6.5",RS={};function LS(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function CS(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function PS(e,t){let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n}function IS(e,t){const n=t;let r=0;for(;CS(e,t);)r+=10,r+=PS(e,t+6),LS(e,t+10)&&(r+=10),t+=r;if(r>0)return e.subarray(n,n+r)}function NS(e,t){return 255===e[t]&&240==(246&e[t+1])}function DS(e,t){return 1&e[t+1]?7:9}function OS(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function MS(e,t){return t+1<e.length&&NS(e,t)}function FS(e,t){if(MS(e,t)){const n=DS(e,t);if(t+n>=e.length)return!1;const r=OS(e,t);if(r<=n)return!1;const i=t+r;return i===e.length||MS(e,i)}return!1}function BS(e,t,n,r,i){if(!e.samplerate){const a=function(e,t,n,r){const i=t[n+2],a=i>>2&15;if(a>12){const t=new Error(`invalid ADTS sampling index:${a}`);return void e.emit(_b.ERROR,_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}const s=1+(i>>6&3),o=t[n+3]>>6&3|(1&i)<<2,l="mp4a.40."+s,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][a];let u=a;5!==s&&29!==s||(u-=3);const d=[s<<3|(14&u)>>1,(1&u)<<7|o<<3];return Wb.log(`manifest codec:${r}, parsed codec:${l}, channels:${o}, rate:${c} (ADTS object type:${s} sampling index:${a})`),{config:d,samplerate:c,channelCount:o,codec:l,parsedCodec:l,manifestCodec:r}}(t,n,r,i);if(!a)return;Fb(e,a)}}function US(e){return 9216e4/e}function jS(e,t,n,r,i){const a=r+i*US(e.samplerate),s=function(e,t){const n=DS(e,t);if(t+n<=e.length){const r=OS(e,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}(t,n);let o;if(s){const{frameLength:r,headerLength:i}=s,l=i+r,c=Math.max(0,n+l-t.length);c?(o=new Uint8Array(l-i),o.set(t.subarray(n+i,t.length),0)):o=t.subarray(n+i,n+l);const u={unit:o,pts:a};return c||e.samples.push(u),{sample:u,length:l,missing:c}}const l=t.length-n;return o=new Uint8Array(l),o.set(t.subarray(n,t.length),0),{sample:{unit:o,pts:a},length:l,missing:-1}}function $S(e,t){return CS(e,t)&&PS(e,t+6)+10<=e.length-t}function zS(e,t=0,n=1/0){return function(e,t,n,r){const i=(a=e)instanceof ArrayBuffer?a:a.buffer;var a;let s=1;"BYTES_PER_ELEMENT"in r&&(s=r.BYTES_PER_ELEMENT);const o=(d=e)&&d.buffer instanceof ArrayBuffer&&void 0!==d.byteLength&&void 0!==d.byteOffset?e.byteOffset:0,l=(o+e.byteLength)/s,c=(o+t)/s,u=Math.floor(Math.max(0,Math.min(c,l)));var d;return new r(i,u,Math.floor(Math.min(u+Math.max(n,0),l))-u)}(e,t,n,Uint8Array)}function VS(e){return"PRIV"===e.type?function(e){if(e.size<2)return;const t=qb(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=qb(e.data.subarray(t),!0);t+=n.length+1;const r=qb(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=qb(e.data);return{key:e.type,info:"",data:t}}(e):"APIC"===e.type?function(e){const t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.size<2)return;if(3!==e.data[0])return void console.log("Ignore frame with unrecognized character encoding");const n=e.data.subarray(1).indexOf(0);if(-1===n)return;const r=qb(zS(e.data,1,n)),i=e.data[2+n],a=e.data.subarray(3+n).indexOf(0);if(-1===a)return;const s=qb(zS(e.data,3+n,a));let o;return o="--\x3e"===r?qb(zS(e.data,4+n+a)):(l=e.data.subarray(4+n+a))instanceof ArrayBuffer?l:0==l.byteOffset&&l.byteLength==l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer,t.mimeType=r,t.pictureType=i,t.description=s,t.data=o,t;var l}(e):function(e){if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=qb(e.data.subarray(t),!0);t+=n.length+1;const r=qb(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=qb(e.data.subarray(1));return{key:e.type,info:"",data:t}}(e)}function GS(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=PS(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}}function HS(e){let t=0;const n=[];for(;CS(e,t);){const r=PS(e,t+6);e[t+5]>>6&1&&(t+=10),t+=10;const i=t+r;for(;t+10<i;){const r=GS(e.subarray(t)),i=VS(r);i&&n.push(i),t+=r.size+10}LS(e,t)&&(t+=10)}return n}function WS(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function KS(e){if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}}function YS(e){const t=HS(e);for(let e=0;e<t.length;e++){const n=t[e];if(WS(n))return KS(n)}}let qS=function(e){return e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3",e.misbklv="urn:misb:KLV:bin:1910.1",e}({});function XS(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class QS{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Ny(this.cachedData,e),this.cachedData=null);let n,r=IS(e,0),i=r?r.length:0;const a=this._audioTrack,s=this._id3Track,o=r?YS(r):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&xb(o))&&(this.basePTS=JS(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),r&&r.length>0&&s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:qS.audioId3,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const t=this.appendFrame(a,e,i);t?(this.frameIndex++,this.lastPTS=t.sample.pts,i+=t.length,n=i):i=l}else $S(e,i)?(r=IS(e,i),s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:qS.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,n=i):i++;if(i===l&&n!==l){const t=e.slice(n);this.cachedData?this.cachedData=Ny(this.cachedData,t):this.cachedData=t}}return{audioTrack:a,videoTrack:XS(),id3Track:s,textTrack:XS()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:XS(),id3Track:this._id3Track,textTrack:XS()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const JS=(e,t,n)=>xb(e)?90*e:9e4*t+(n?9e4*n.baseTime/n.timescale:0);let ZS=null;const ew=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],tw=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],nw=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],rw=[0,1,1,4];function iw(e,t,n,r,i){if(n+24>t.length)return;const a=aw(t,n);if(a&&n+a.frameLength<=t.length){const s=r+i*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:t.subarray(n,n+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}function aw(e,t){const n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==a){const s=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*ew[14*(3===n?3-r:3===r?3:4)+i-1],c=tw[3*(3===n?0:2===n?1:2)+a],u=3===o?1:2,d=nw[n][r],h=rw[r],f=8*d*h,p=Math.floor(d*l/c+s)*h;if(null===ZS){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ZS=e?parseInt(e[1]):0}return!!ZS&&ZS<=87&&2===r&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:u,frameLength:p,samplesPerFrame:f}}}function sw(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function ow(e,t){return t+1<e.length&&sw(e,t)}function lw(e,t){if(t+1<e.length&&sw(e,t)){const n=4,r=aw(e,t);let i=n;null!=r&&r.frameLength&&(i=r.frameLength);const a=t+i;return a===e.length||ow(e,a)}return!1}const cw=(e,t)=>{let n=0,r=5;t+=r;const i=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);for(;r>0;){s[0]=e[t];const o=Math.min(r,8),l=8-o;a[0]=4278190080>>>24+l<<l,i[0]=(s[0]&a[0])>>l,n=n?n<<o|i[0]:i[0],t+=1,r-=o}return n};function uw(e,t,n,r,i){if(n+8>t.length)return-1;if(11!==t[n]||119!==t[n+1])return-1;const a=t[n+4]>>6;if(a>=3)return-1;const s=[48e3,44100,32e3][a],o=63&t[n+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+a];if(n+l>t.length)return-1;const c=t[n+6]>>5;let u=0;2===c?u+=2:(1&c&&1!==c&&(u+=2),4&c&&(u+=2));const d=(t[n+6]<<8|t[n+7])>>12-u&1,h=[2,1,2,3,3,4,4,5][c]+d,f=t[n+5]>>3,p=7&t[n+5],m=new Uint8Array([a<<6|f<<1|p>>2,(3&p)<<6|c<<3|d<<2|o>>4,o<<4&224]),g=r+i*(1536/s*9e4),v=t.subarray(n,n+l);return e.config=m,e.channelCount=h,e.samplerate=s,e.samples.push({unit:v,pts:g}),l}const dw=/\/emsg[-/]ID3/i;function hw(e,t){return xb(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}class fw{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new VE(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,0)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const i=r.subarray(16,r.length-r.length%16),a=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(a).then(i=>{const a=new Uint8Array(i);r.set(a,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)})}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,n),this.decrypter.isSync())))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let r=0;for(let t=32;t<e.length-16;t+=160,r+=16)n.set(e.subarray(t,t+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let t=32;t<e.length-16;t+=160,r+=16)e.set(n.subarray(r,r+16),t);return e}decryptAvcSample(e,t,n,r,i){const a=By(i.data),s=this.getAvcEncryptedData(a);this.decryptBuffer(s.buffer).then(s=>{i.data=this.getAvcDecryptedUnit(a,s),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)})}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();const i=e[t].units;for(;!(n>=i.length);n++){const a=i[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,n,r,a),this.decrypter.isSync())))return}}}}class pw{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n,r=this.VideoSample;if(r&&0!==r.units.length||(r=e[e.length-1]),null!=(t=r)&&t.units){const e=r.units;n=e[e.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,r=n.length;if(!r)return void t.dropped++;{const t=n[r-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}}parseNALu(e,t,n){const r=t.byteLength;let i=e.naluState||0;const a=i,s=[];let o,l,c,u=0,d=-1,h=0;for(-1===i&&(d=0,h=this.getNALuType(t,0),i=0,u=1);u<r;)if(o=t[u++],i)if(1!==i)if(o)if(1===o){if(l=u-i-1,d>=0){const e={data:t.subarray(d,l),type:h};s.push(e)}else{const n=this.getLastNalUnit(e.samples);n&&(a&&u<=4-a&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-a)),l>0&&(n.data=Ny(n.data,t.subarray(0,l)),n.state=0))}u<r?(c=this.getNALuType(t,u),d=u,h=c,i=0):i=-1}else i=0;else i=3;else i=o?0:2;else i=o?0:1;if(d>=0&&i>=0){const e={data:t.subarray(d,r),type:h,state:i};s.push(e)}if(0===s.length){const n=this.getLastNalUnit(e.samples);n&&(n.data=Ny(n.data,t))}return e.naluState=i,s}}class mw{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&Wb.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class gw extends pw{parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let a,s=this.VideoSample,o=!1;n.data=null,s&&i.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(r=>{var i,l;switch(r.type){case 1:{let t=!1;a=!0;const i=r.data;if(o&&i.length>4){const e=this.readSliceType(i);2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var c;t&&null!=(c=s)&&c.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.frame=!0,s.key=t;break}case 5:a=!0,null!=(i=s)&&i.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 6:a=!0,Fy(r.data,1,n.pts,t.samples);break;case 7:{var u,d;a=!0,o=!0;const t=r.data,n=this.readSPS(t);if(!e.sps||e.width!==n.width||e.height!==n.height||(null==(u=e.pixelRatio)?void 0:u[0])!==n.pixelRatio[0]||(null==(d=e.pixelRatio)?void 0:d[1])!==n.pixelRatio[1]){e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t];const r=t.subarray(1,4);let i="avc1.";for(let e=0;e<3;e++){let t=r[e].toString(16);t.length<2&&(t="0"+t),i+=t}e.codec=i}break}case 8:a=!0,e.pps=[r.data];break;case 9:a=!0,e.audFound=!0,null!=(l=s)&&l.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:a=!0;break;default:a=!1}s&&a&&s.units.push(r)}),r&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}getNALuType(e,t){return 31&e[t]}readSliceType(e){const t=new mw(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n,r=8,i=8;for(let a=0;a<e;a++)0!==i&&(n=t.readEG(),i=(r+n+256)%256),r=0===i?r:i}readSPS(e){const t=new mw(e);let n,r,i,a=0,s=0,o=0,l=0;const c=t.readUByte.bind(t),u=t.readBits.bind(t),d=t.readUEG.bind(t),h=t.readBoolean.bind(t),f=t.skipBits.bind(t),p=t.skipEG.bind(t),m=t.skipUEG.bind(t),g=this.skipScalingList.bind(this);c();const v=c();if(u(5),f(3),c(),m(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){const e=d();if(3===e&&f(1),m(),m(),f(1),h())for(r=3!==e?8:12,i=0;i<r;i++)h()&&g(i<6?16:64,t)}m();const b=d();if(0===b)d();else if(1===b)for(f(1),p(),p(),n=d(),i=0;i<n;i++)p();m(),f(1);const y=d(),E=d(),x=u(1);0===x&&f(1),f(1),h()&&(a=d(),s=d(),o=d(),l=d());let S=[1,1];if(h()&&h())switch(c()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[c()<<8|c(),c()<<8|c()]}return{width:Math.ceil(16*(y+1)-2*a-2*s),height:(2-x)*(E+1)*16-(x?2:4)*(o+l),pixelRatio:S}}}class vw extends pw{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let a,s=this.VideoSample,o=!1;n.data=null,s&&i.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(r=>{var i,l;switch(r.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.frame=!0,a=!0;break;case 16:case 17:case 18:case 21:var c;a=!0,o&&null!=(c=s)&&c.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 19:case 20:a=!0,null!=(i=s)&&i.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 39:a=!0,Fy(r.data,2,n.pts,t.samples);break;case 32:a=!0,e.vps||("object"!=typeof e.params&&(e.params={}),e.params=Fb(e.params,this.readVPS(r.data)),this.initVPS=r.data),e.vps=[r.data];break;case 33:if(a=!0,o=!0,void 0===e.vps||e.vps[0]===this.initVPS||void 0===e.sps||this.matchSPS(e.sps[0],r.data)||(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const t=this.readSPS(r.data);e.width=t.width,e.height=t.height,e.pixelRatio=t.pixelRatio,e.codec=t.codecString,e.sps=[],"object"!=typeof e.params&&(e.params={});for(const n in t.params)e.params[n]=t.params[n]}this.pushParameterSet(e.sps,r.data,e.vps),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0;break;case 34:if(a=!0,"object"==typeof e.params){if(!e.pps){e.pps=[];const t=this.readPPS(r.data);for(const n in t)e.params[n]=t[n]}this.pushParameterSet(e.pps,r.data,e.vps)}break;case 35:a=!0,e.audFound=!0,null!=(l=s)&&l.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:a=!1}s&&a&&s.units.push(r)}),r&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(126&e[t])>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let r=0;r<e.byteLength;r++)r>=2&&3===e[r]&&0===e[r-1]&&0===e[r-2]||(t[n]=e[r],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new mw(e);return t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6),{numTemporalLayers:t.readBits(3)+1,temporalIdNested:t.readBoolean()}}readSPS(e){const t=new mw(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const r=t.readBits(2),i=t.readBoolean(),a=t.readBits(5),s=t.readUByte(),o=t.readUByte(),l=t.readUByte(),c=t.readUByte(),u=t.readUByte(),d=t.readUByte(),h=t.readUByte(),f=t.readUByte(),p=t.readUByte(),m=t.readUByte(),g=t.readUByte(),v=[],b=[];for(let e=0;e<n;e++)v.push(t.readBoolean()),b.push(t.readBoolean());if(n>0)for(let e=n;e<8;e++)t.readBits(2);for(let e=0;e<n;e++)v[e]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),b[e]&&t.readUByte();t.readUEG();const y=t.readUEG();3==y&&t.skipBits(1);const E=t.readUEG(),x=t.readUEG(),S=t.readBoolean();let w=0,k=0,T=0,_=0;S&&(w+=t.readUEG(),k+=t.readUEG(),T+=t.readUEG(),_+=t.readUEG());const A=t.readUEG(),R=t.readUEG(),L=t.readUEG();for(let e=t.readBoolean()?0:n;e<=n;e++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let e=0;e<4;e++)for(let n=0;n<(3===e?2:6);n++)if(t.readBoolean()){const n=Math.min(64,1<<4+(e<<1));e>1&&t.readEG();for(let e=0;e<n;e++)t.readEG()}else t.readUEG();t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const C=t.readUEG();let P=0;for(let e=0;e<C;e++){let n=!1;if(0!==e&&(n=t.readBoolean()),n){e===C&&t.readUEG(),t.readBoolean(),t.readUEG();let n=0;for(let e=0;e<=P;e++){const e=t.readBoolean();let r=!1;e||(r=t.readBoolean()),(e||r)&&n++}P=n}else{const e=t.readUEG(),n=t.readUEG();P=e+n;for(let n=0;n<e;n++)t.readUEG(),t.readBoolean();for(let e=0;e<n;e++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const e=t.readUEG();for(let n=0;n<e;n++){for(let e=0;e<L+4;e++)t.readBits(1);t.readBits(1)}}let I=0,N=1,D=1,O=!0,M=1,F=0;t.readBoolean(),t.readBoolean();let B=!1;if(t.readBoolean()){if(t.readBoolean()){const e=t.readUByte();e>0&&e<16?(N=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],D=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(N=t.readBits(16),D=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),B=t.readBoolean(),B&&(w+=t.readUEG(),k+=t.readUEG(),T+=t.readUEG(),_+=t.readUEG()),t.readBoolean()&&(M=t.readBits(32),F=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const e=t.readBoolean(),r=t.readBoolean();let i=!1;(e||r)&&(i=t.readBoolean(),i&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),i&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let a=0;a<=n;a++){O=t.readBoolean();let n=!1;O||t.readBoolean()?t.readEG():n=t.readBoolean();const a=n?1:t.readUEG()+1;if(e)for(let e=0;e<a;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(r)for(let e=0;e<a;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),I=t.readUEG())}let U=E,j=x;if(S||B){let e=1,t=1;1===y?e=t=2:2==y&&(e=2),U=E-e*k-e*w,j=x-t*_-t*T}const $=r?["A","B","C"][r]:"",z=s<<24|o<<16|l<<8|c;let V=0;for(let e=0;e<32;e++)V=(V|(z>>e&1)<<31-e)>>>0;let G=V.toString(16);return 1===a&&"2"===G&&(G="6"),{codecString:`hvc1.${$}${a}.${G}.${i?"H":"L"}${g}.B0`,params:{general_tier_flag:i,general_profile_idc:a,general_profile_space:r,general_profile_compatibility_flags:[s,o,l,c],general_constraint_indicator_flags:[u,d,h,f,p,m],general_level_idc:g,bit_depth:A+8,bit_depth_luma_minus8:A,bit_depth_chroma_minus8:R,min_spatial_segmentation_idc:I,chroma_format_idc:y,frame_rate:{fixed:O,fps:F/M}},width:U,height:j,pixelRatio:[N,D]}}readPPS(e){const t=new mw(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const n=t.readBoolean(),r=t.readBoolean();let i=1;return r&&n?i=0:r?i=3:n&&(i=2),{parallelismType:i}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const bw=188;class yw{constructor(e,t,n,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=r,this.videoParser=null}static probe(e,t){const n=yw.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),-1!==n}static syncOffset(e){const t=e.length;let n=Math.min(940,t-bw)+1,r=0;for(;r<n;){let i=!1,a=-1,s=0;for(let o=r;o<t;o+=bw){if(71!==e[o]||t-o!==bw&&71!==e[o+bw]){if(s)return-1;break}if(s++,-1===a&&(a=o,0!==a&&(n=Math.min(a+18612,e.length-bw)+1)),i||(i=0===Ew(e,o)),i&&s>1&&(0===a&&s>2||o+bw>n))return a}r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:vy[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=yw.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=yw.createTrack("audio",r),this._id3Track=yw.createTrack("id3"),this._txtTrack=yw.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,r=!1){let i;n||(this.sampleAes=null);const a=this._videoTrack,s=this._audioTrack,o=this._id3Track,l=this._txtTrack;let c=a.pid,u=a.pesData,d=s.pid,h=o.pid,f=s.pesData,p=o.pesData,m=null,g=this.pmtParsed,v=this._pmtId,b=e.length;if(this.remainderData&&(b=(e=Ny(this.remainderData,e)).length,this.remainderData=null),b<bw&&!r)return this.remainderData=e,{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};const y=Math.max(0,yw.syncOffset(e));b-=(b-y)%bw,b<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,b,e.buffer.byteLength-b));let E=0;for(let t=y;t<b;t+=bw)if(71===e[t]){const r=!!(64&e[t+1]),b=Ew(e,t);let E;if((48&e[t+3])>>4>1){if(E=t+5+e[t+4],E===t+bw)continue}else E=t+4;switch(b){case c:if(r){if(u&&(i=Tw(u,this.logger))){if(null===this.videoParser)switch(a.segmentCodec){case"avc":this.videoParser=new gw;break;case"hevc":this.videoParser=new vw}null!==this.videoParser&&this.videoParser.parsePES(a,l,i,!1)}u={data:[],size:0}}u&&(u.data.push(e.subarray(E,t+bw)),u.size+=t+bw-E);break;case d:if(r){if(f&&(i=Tw(f,this.logger)))switch(s.segmentCodec){case"aac":this.parseAACPES(s,i);break;case"mp3":this.parseMPEGPES(s,i);break;case"ac3":this.parseAC3PES(s,i)}f={data:[],size:0}}f&&(f.data.push(e.subarray(E,t+bw)),f.size+=t+bw-E);break;case h:r&&(p&&(i=Tw(p,this.logger))&&this.parseID3PES(o,i),p={data:[],size:0}),p&&(p.data.push(e.subarray(E,t+bw)),p.size+=t+bw-E);break;case 0:r&&(E+=e[E]+1),v=this._pmtId=xw(e,E);break;case v:{r&&(E+=e[E]+1);const i=Sw(e,E,this.typeSupported,n,this.observer,this.logger);c=i.videoPid,c>0&&(a.pid=c,a.segmentCodec=i.segmentVideoCodec),d=i.audioPid,d>0&&(s.pid=d,s.segmentCodec=i.segmentAudioCodec),h=i.id3Pid,h>0&&(o.pid=h),null===m||g||(this.logger.warn(`MPEG-TS PMT found at ${t} after unknown PID '${m}'. Backtracking to sync byte @${y} to parse all TS packets.`),m=null,t=y-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=b}}else E++;E>0&&ww(this.observer,new Error(`Found ${E} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=u,s.pesData=f,o.pesData=p;const x={audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};return r&&this.extractRemainingSamples(x),x}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:i}=e,a=n.pesData,s=t.pesData,o=r.pesData;let l;if(a&&(l=Tw(a,this.logger))){if(null===this.videoParser)switch(n.segmentCodec){case"avc":this.videoParser=new gw;break;case"hevc":this.videoParser=new vw}null!==this.videoParser&&(this.videoParser.parsePES(n,i,l,!0),n.pesData=null)}else n.pesData=a;if(s&&(l=Tw(s,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=s&&s.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=s;o&&(l=Tw(o,this.logger))?(this.parseID3PES(r,l),r.pesData=null):r.pesData=o}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new fw(this.observer,this.config,t);return this.decrypt(r,i)}decrypt(e,t){return new Promise(n=>{const{audioTrack:r,videoTrack:i}=e;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,()=>{n(e)}):n(e)}):i.samples&&t.decryptAvcSamples(i.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let i,a,s,o=t.data;if(r){this.aacOverFlow=null;const t=r.missing,i=r.sample.unit.byteLength;if(-1===t)o=Ny(r.sample.unit,o);else{const a=i-t;r.sample.unit.set(o.subarray(0,t),a),e.samples.push(r.sample),n=r.missing}}for(i=n,a=o.length;i<a-1&&!MS(o,i);i++);if(i!==n){let e;const t=i<a-1;if(e=t?`AAC PES did not start with ADTS header,offset:${i}`:"No ADTS header found in AAC PES",ww(this.observer,new Error(e),t,this.logger),!t)return}if(BS(e,this.observer,o,i,this.audioCodec),void 0!==t.pts)s=t.pts;else{if(!r)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=US(e.samplerate);s=r.sample.pts+t}}let l,c=0;for(;i<a;){if(l=jS(e,o,i,s,c),i+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;i<a-1&&!MS(o,i);i++);}}parseMPEGPES(e,t){const n=t.data,r=n.length;let i=0,a=0;const s=t.pts;if(void 0!==s)for(;a<r;)if(ow(n,a)){const t=iw(e,n,a,s,i);if(!t)break;a+=t.length,i++}else a++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(void 0===r)return void this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=n.length;let a,s=0,o=0;for(;o<i&&(a=uw(e,n,o,r,s++))>0;)o+=a}}parseID3PES(e,t){if(void 0===t.pts)return void this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=Fb({},t,{type:this._videoTrack?qS.emsg:qS.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Ew(e,t){return((31&e[t+1])<<8)+e[t+2]}function xw(e,t){return(31&e[t+10])<<8|e[t+11]}function Sw(e,t,n,r,i,a){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){const o=Ew(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!r){kw("ADTS AAC",a);break}case 15:-1===s.audioPid&&(s.audioPid=o);break;case 21:-1===s.id3Pid&&(s.id3Pid=o);break;case 219:if(!r){kw("H.264",a);break}case 27:-1===s.videoPid&&(s.videoPid=o);break;case 3:case 4:n.mpeg||n.mp3?-1===s.audioPid&&(s.audioPid=o,s.segmentAudioCodec="mp3"):a.log("MPEG audio found, not supported in this browser");break;case 193:if(!r){kw("AC-3",a);break}case 129:n.ac3?-1===s.audioPid&&(s.audioPid=o,s.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===s.audioPid&&l>0){let r=t+5,i=l;for(;i>2;){106===e[r]&&(!0!==n.ac3?a.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=o,s.segmentAudioCodec="ac3"));const t=e[r+1]+2;r+=t,i-=t}}break;case 194:case 135:return ww(i,new Error("Unsupported EC-3 in M2TS found"),void 0,a),s;case 36:-1===s.videoPid&&(s.videoPid=o,s.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"))}t+=l+5}return s}function ww(e,t,n,r){r.warn(`parsing error: ${t.message}`),e.emit(_b.ERROR,_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:t,reason:t.message})}function kw(e,t){t.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function Tw(e,t){let n,r,i,a,s,o=0;const l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&l.length>1;)l[0]=Ny(l[0],l[1]),l.splice(1,1);if(n=l[0],1===(n[0]<<16)+(n[1]<<8)+n[2]){if(r=(n[4]<<8)+n[5],r&&r>e.size-6)return null;const c=n[7];192&c&&(a=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,64&c?(s=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2,a-s>54e5&&(t.warn(`${Math.round((a-s)/9e4)}s delta between PTS and DTS, align them`),a=s)):s=a),i=n[8];let u=i+9;if(e.size<=u)return null;e.size-=u;const d=new Uint8Array(e.size);for(let e=0,t=l.length;e<t;e++){n=l[e];let t=n.byteLength;if(u){if(u>t){u-=t;continue}n=n.subarray(u),t-=u,u=0}d.set(n,o),o+=t}return r&&(r-=i+3),{data:d,pts:a,dts:s,len:r}}return null}class _w{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const Aw=Math.pow(2,32)-1;class Rw{static init(){let e;for(e in Rw.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Rw.types)Rw.types.hasOwnProperty(e)&&(Rw.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Rw.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);Rw.STTS=Rw.STSC=Rw.STCO=i,Rw.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Rw.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Rw.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Rw.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);Rw.FTYP=Rw.box(Rw.types.ftyp,a,o,a,s),Rw.DINF=Rw.box(Rw.types.dinf,Rw.box(Rw.types.dref,r))}static box(e,...t){let n=8,r=t.length;const i=r;for(;r--;)n+=t[r].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=255&n,a.set(e,4),r=0,n=8;r<i;r++)a.set(t[r],n),n+=t[r].byteLength;return a}static hdlr(e){return Rw.box(Rw.types.hdlr,Rw.HDLR_TYPES[e])}static mdat(e){return Rw.box(Rw.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Aw+1)),r=Math.floor(t%(Aw+1));return Rw.box(Rw.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}static mdia(e){return Rw.box(Rw.types.mdia,Rw.mdhd(e.timescale||0,e.duration||0),Rw.hdlr(e.type),Rw.minf(e))}static mfhd(e){return Rw.box(Rw.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?Rw.box(Rw.types.minf,Rw.box(Rw.types.smhd,Rw.SMHD),Rw.DINF,Rw.stbl(e)):Rw.box(Rw.types.minf,Rw.box(Rw.types.vmhd,Rw.VMHD),Rw.DINF,Rw.stbl(e))}static moof(e,t,n){return Rw.box(Rw.types.moof,Rw.mfhd(e),Rw.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=Rw.trak(e[t]);return Rw.box.apply(null,[Rw.types.moov,Rw.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(Rw.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=Rw.trex(e[t]);return Rw.box.apply(null,[Rw.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Aw+1)),r=Math.floor(t%(Aw+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Rw.box(Rw.types.mvhd,i)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,i;for(r=0;r<t.length;r++)i=t[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return Rw.box(Rw.types.sdtp,n)}static stbl(e){return Rw.box(Rw.types.stbl,Rw.stsd(e),Rw.box(Rw.types.stts,Rw.STTS),Rw.box(Rw.types.stsc,Rw.STSC),Rw.box(Rw.types.stsz,Rw.STSZ),Rw.box(Rw.types.stco,Rw.STCO))}static avc1(e){let t,n,r,i=[],a=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],r=n.byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],r=n.byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(n));const s=Rw.box(Rw.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(a))),o=e.width,l=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return Rw.box(Rw.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,Rw.box(Rw.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Rw.box(Rw.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return Rw.box(Rw.types.mp4a,Rw.audioStsd(e),Rw.box(Rw.types.esds,Rw.esds(e)))}static mp3(e){return Rw.box(Rw.types[".mp3"],Rw.audioStsd(e))}static ac3(e){return Rw.box(Rw.types["ac-3"],Rw.audioStsd(e),Rw.box(Rw.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if("audio"===e.type){if("aac"===t)return Rw.box(Rw.types.stsd,Rw.STSD,Rw.mp4a(e));if("ac3"===t&&e.config)return Rw.box(Rw.types.stsd,Rw.STSD,Rw.ac3(e));if("mp3"===t&&"mp3"===e.codec)return Rw.box(Rw.types.stsd,Rw.STSD,Rw.mp3(e))}else{if(!e.pps||!e.sps)throw new Error("video track missing pps or sps");if("avc"===t)return Rw.box(Rw.types.stsd,Rw.STSD,Rw.avc1(e));if("hevc"===t&&e.vps)return Rw.box(Rw.types.stsd,Rw.STSD,Rw.hvc1(e))}throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),r=e.width||0,i=e.height||0,a=Math.floor(n/(Aw+1)),s=Math.floor(n%(Aw+1));return Rw.box(Rw.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const n=Rw.sdtp(e),r=e.id,i=Math.floor(t/(Aw+1)),a=Math.floor(t%(Aw+1));return Rw.box(Rw.types.traf,Rw.box(Rw.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),Rw.box(Rw.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a])),Rw.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Rw.box(Rw.types.trak,Rw.tkhd(e),Rw.mdia(e))}static trex(e){const t=e.id;return Rw.box(Rw.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,i=12+16*r,a=new Uint8Array(i);let s,o,l,c,u,d;for(t+=8+i,a.set(["video"===e.type?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),s=0;s<r;s++)o=n[s],l=o.duration,c=o.size,u=o.flags,d=o.cts,a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*s);return Rw.box(Rw.types.trun,a)}static initSegment(e){Rw.types||Rw.init();const t=Rw.moov(e);return Ny(Rw.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],r=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),3|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let i=r.length;for(let e=0;e<n.length;e+=1){i+=3;for(let t=0;t<n[e].length;t+=1)i+=2+n[e][t].length}const a=new Uint8Array(i);a.set(r,0),i=r.length;const s=n.length-1;for(let e=0;e<n.length;e+=1){a.set(new Uint8Array([32+e|(e===s?128:0),0,n[e].length]),i),i+=3;for(let t=0;t<n[e].length;t+=1)a.set(new Uint8Array([n[e][t].length>>8,255&n[e][t].length]),i),i+=2,a.set(n[e][t],i),i+=n[e][t].length}const o=Rw.box(Rw.types.hvcC,a),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return Rw.box(Rw.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Rw.box(Rw.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Rw.box(Rw.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))}}function Lw(e,t,n=1,r=!1){const i=e*t*n;return r?Math.round(i):i}function Cw(e,t=!1){return Lw(e,1e3,1/9e4,t)}Rw.types=void 0,Rw.HDLR_TYPES=void 0,Rw.STTS=void 0,Rw.STSC=void 0,Rw.STCO=void 0,Rw.STSZ=void 0,Rw.VMHD=void 0,Rw.SMHD=void 0,Rw.STSD=void 0,Rw.FTYP=void 0,Rw.DINF=void 0;let Pw,Iw=null,Nw=null;function Dw(e,t,n,r){return{duration:t,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class Ow{constructor(e,t,n,r){if(this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=r,this.ISGenerated=!1,null===Iw){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Iw=e?parseInt(e[1]):0}if(null===Nw){const e=navigator.userAgent.match(/Safari\/(\d+)/i);Nw=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce((e,r)=>{let i=r.pts,a=i-e;return a<-4294967296&&(t=!0,i=Mw(i,n),a=i-e),a>0?e:i},n);return t&&this.logger.debug("PTS rollover detected"),r}remux(e,t,n,r,i,a,s,o){let l,c,u,d,h,f,p=i,m=i;const g=e.pid>-1,v=t.pid>-1,b=t.samples.length,y=e.samples.length>0,E=s&&b>0||b>1;if((!g||y)&&(!v||E)||this.ISGenerated||s){if(this.ISGenerated){var x,S,w,k;const e=this.videoTrackConfig;(e&&(t.width!==e.width||t.height!==e.height||(null==(x=t.pixelRatio)?void 0:x[0])!==(null==(S=e.pixelRatio)?void 0:S[0])||(null==(w=t.pixelRatio)?void 0:w[1])!==(null==(k=e.pixelRatio)?void 0:k[1]))||!e&&E||null===this.nextAudioPts&&y)&&this.resetInitSegment()}this.ISGenerated||(u=this.generateIS(e,t,i,a));const n=this.isVideoContiguous;let r,s=-1;if(E&&(s=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,s>0){this.logger.warn(`[mp4-remuxer]: Dropped ${s} out of ${b} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(s),t.dropped+=s,m+=(t.samples[0].pts-e)/t.inputTimeScale,r=m}else-1===s&&(this.logger.warn(`[mp4-remuxer]: No keyframe found out of ${b} video samples`),f=!1);if(this.ISGenerated){if(y&&E){const n=this.getVideoStartPts(t.samples),r=(Mw(e.samples[0].pts,n)-n)/t.inputTimeScale;p+=Math.max(0,r),m+=Math.max(0,-r)}if(y){if(e.samplerate||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,t,i,a)),c=this.remuxAudio(e,p,this.isAudioContiguous,a,v||E||o===Ib?m:void 0),E){const r=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,t,i,a)),l=this.remuxVideo(t,m,n,r)}}else E&&(l=this.remuxVideo(t,m,n,0));l&&(l.firstKeyFrame=s,l.independent=-1!==s,l.firstKeyFramePTS=r)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=Fw(n,i,this._initPTS,this._initDTS)),r.samples.length&&(d=Bw(r,i,this._initPTS))),{audio:c,video:l,initSegment:u,independent:f,text:d,id3:h}}generateIS(e,t,n,r){const i=e.samples,a=t.samples,s=this.typeSupported,o={},l=this._initPTS;let c,u,d,h,f=!l||r,p="audio/mp4";if(f&&(c=u=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":s.mpeg?(p="audio/mpeg",e.codec=""):s.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}o.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&s.mpeg?new Uint8Array(0):Rw.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(h=e.id,d=e.inputTimeScale,l&&d===l.timescale?f=!1:c=u=i[0].pts-Math.round(d*n))}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Rw.initSegment([t]),metadata:{width:t.width,height:t.height}},f)if(h=t.id,d=t.inputTimeScale,l&&d===l.timescale)f=!1;else{const e=this.getVideoStartPts(a),t=Math.round(d*n);u=Math.min(u,Mw(a[0].dts,e)-t),c=Math.min(c,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,f?(this._initPTS={baseTime:c,timescale:d},this._initDTS={baseTime:u,timescale:d}):c=d=void 0,{tracks:o,initPTS:c,timescale:d,trackId:h}}remuxVideo(e,t,n,r){const i=e.inputTimeScale,a=e.samples,s=[],o=a.length,l=this._initPTS;let c,u,d=this.nextAvcDts,h=8,f=this.videoSampleDuration,p=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=!1;if(!n||null===d){const e=t*i,r=a[0].pts-Mw(a[0].dts,a[0].pts);Iw&&null!==d&&Math.abs(e-r-d)<15e3?n=!0:d=e-r}const v=l.baseTime*i/l.timescale;for(let e=0;e<o;e++){const t=a[e];t.pts=Mw(t.pts-v,d),t.dts=Mw(t.dts-v,d),t.dts<a[e>0?e-1:e].dts&&(g=!0)}g&&a.sort(function(e,t){const n=e.dts-t.dts,r=e.pts-t.pts;return n||r}),c=a[0].dts,u=a[a.length-1].dts;const b=u-c,y=b?Math.round(b/(o-1)):f||e.inputTimeScale/30;if(n){const n=c-d,r=n>y,i=n<-1;if((r||i)&&(r?this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Cw(n,!0)} ms (${n}dts) hole between fragments detected at ${t.toFixed(3)}`):this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Cw(-n,!0)} ms (${n}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!i||d>=a[0].pts||Iw)){c=d;const e=a[0].pts-n;if(r)a[0].dts=c,a[0].pts=e;else{let t=!0;for(let r=0;r<a.length&&!(a[r].dts>e&&t);r++){const e=a[r].pts;if(a[r].dts-=n,a[r].pts-=n,r<a.length-1){const n=a[r+1].pts;t=n<=a[r].pts==n<=e}}}this.logger.log(`Video: Initial PTS/DTS adjusted: ${Cw(e,!0)}/${Cw(c,!0)}, delta: ${Cw(n,!0)} ms`)}}c=Math.max(0,c);let E=0,x=0,S=c;for(let e=0;e<o;e++){const t=a[e],n=t.units,r=n.length;let i=0;for(let e=0;e<r;e++)i+=n[e].data.length;x+=i,E+=r,t.length=i,t.dts<S?(t.dts=S,S+=y/4|0||1):S=t.dts,p=Math.min(t.pts,p),m=Math.max(t.pts,m)}u=a[o-1].dts;const w=x+4*E+8;let k;try{k=new Uint8Array(w)}catch(e){return void this.observer.emit(_b.ERROR,_b.ERROR,{type:kb.MUX_ERROR,details:Tb.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:w,reason:`fail allocating video mdat ${w}`})}const T=new DataView(k.buffer);T.setUint32(0,w),k.set(Rw.types.mdat,4);let _=!1,A=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY,L=Number.NEGATIVE_INFINITY,C=Number.NEGATIVE_INFINITY;for(let e=0;e<o;e++){const t=a[e],n=t.units;let l,c=0;for(let e=0,t=n.length;e<t;e++){const t=n[e],r=t.data,i=t.data.byteLength;T.setUint32(h,i),h+=4,k.set(r,h),h+=i,c+=4+i}if(e<o-1)f=a[e+1].dts-t.dts,l=a[e+1].pts-t.pts;else{const n=this.config,s=e>0?t.dts-a[e-1].dts:y;if(l=e>0?t.pts-a[e-1].pts:y,n.stretchShortVideoTrack&&null!==this.nextAudioPts){const e=Math.floor(n.maxBufferHole*i),a=(r?p+r*i:this.nextAudioPts)-t.pts;a>e?(f=a-s,f<0?f=s:_=!0,this.logger.log(`[mp4-remuxer]: It is approximately ${a/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=s}else f=s}const u=Math.round(t.pts-t.dts);A=Math.min(A,f),L=Math.max(L,f),R=Math.min(R,l),C=Math.max(C,l),s.push(Dw(t.key,f,c,u))}if(s.length)if(Iw){if(Iw<70){const e=s[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(Nw&&C-R<L-A&&y/L<.025&&0===s[0].cts){this.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=c;for(let t=0,n=s.length;t<n;t++){const r=e+s[t].duration,i=e+s[t].cts;if(t<n-1){const e=r+s[t+1].cts;s[t].duration=e-i}else s[t].duration=t?s[t-1].duration:y;s[t].cts=0,e=r}}f=_||!f?y:f,this.nextAvcDts=d=u+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const P={data1:Rw.moof(e.sequenceNumber++,c,Fb(e,{samples:s})),data2:k,startPTS:p/i,endPTS:(m+f)/i,startDTS:c/i,endDTS:d/i,type:"video",hasAudio:!1,hasVideo:!0,nb:s.length,dropped:e.dropped};return e.samples=[],e.dropped=0,P}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,n,r,i){const a=e.inputTimeScale,s=a/(e.samplerate?e.samplerate:a),o=this.getSamplesPerFrame(e),l=o*s,c=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],h=void 0!==i;let f=e.samples,p=u?0:8,m=this.nextAudioPts||-1;const g=t*a,v=c.baseTime*a/c.timescale;if(this.isAudioContiguous=n=n||f.length&&m>0&&(r&&Math.abs(g-m)<9e3||Math.abs(Mw(f[0].pts-v,g)-m)<20*l),f.forEach(function(e){e.pts=Mw(e.pts-v,g)}),!n||m<0){if(f=f.filter(e=>e.pts>=0),!f.length)return;m=0===i?0:r&&!h?Math.max(0,g):f[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,r=m;n<f.length;n++){const i=f[n],s=i.pts,o=s-r,c=Math.abs(1e3*o/a);if(o<=-t*l&&h)0===n&&(this.logger.warn(`Audio frame @ ${(s/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*o/a)} ms.`),this.nextAudioPts=m=r=s);else if(o>=t*l&&c<1e4&&h){let t=Math.round(o/l);r=s-t*l,r<0&&(t--,r+=l),0===n&&(this.nextAudioPts=m=r),this.logger.warn(`[mp4-remuxer]: Injecting ${t} audio frame @ ${(r/a).toFixed(3)}s due to ${Math.round(1e3*o/a)} ms gap.`);for(let a=0;a<t;a++){const t=Math.max(r,0);let a=_w.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);a||(this.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),a=i.unit.subarray()),f.splice(n,0,{unit:a,pts:t}),r+=l,n++}}i.pts=r,r+=l}}let b,y=null,E=null,x=0,S=f.length;for(;S--;)x+=f[S].unit.byteLength;for(let t=0,r=f.length;t<r;t++){const r=f[t],i=r.unit;let a=r.pts;if(null!==E)d[t-1].duration=Math.round((a-E)/s);else{if(n&&"aac"===e.segmentCodec&&(a=m),y=a,!(x>0))return;x+=p;try{b=new Uint8Array(x)}catch(e){return void this.observer.emit(_b.ERROR,_b.ERROR,{type:kb.MUX_ERROR,details:Tb.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:x,reason:`fail allocating audio mdat ${x}`})}u||(new DataView(b.buffer).setUint32(0,x),b.set(Rw.types.mdat,4))}b.set(i,p);const l=i.byteLength;p+=l,d.push(Dw(!0,o,l,0)),E=a}const w=d.length;if(!w)return;const k=d[d.length-1];this.nextAudioPts=m=E+s*k.duration;const T=u?new Uint8Array(0):Rw.moof(e.sequenceNumber++,y/s,Fb({},e,{samples:d}));e.samples=[];const _=y/a,A=m/a,R={data1:T,data2:b,startPTS:_,endPTS:A,startDTS:_,endDTS:A,type:"audio",hasAudio:!0,hasVideo:!1,nb:w};return this.isAudioContiguous=!0,R}}function Mw(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function Fw(e,t,n,r){const i=e.samples.length;if(!i)return;const a=e.inputTimeScale;for(let s=0;s<i;s++){const i=e.samples[s];i.pts=Mw(i.pts-n.baseTime*a/n.timescale,t*a)/a,i.dts=Mw(i.dts-r.baseTime*a/r.timescale,t*a)/a}const s=e.samples;return e.samples=[],{samples:s}}function Bw(e,t,n){const r=e.samples.length;if(!r)return;const i=e.inputTimeScale;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=Mw(r.pts-n.baseTime*i/n.timescale,t*i)/i}e.samples.sort((e,t)=>e.pts-t.pts);const a=e.samples;return e.samples=[],{samples:a}}function Uw(e,t,n=!1){return void 0!==(null==e?void 0:e.start)?(e.start+(n?e.duration:0))/e.timescale:t}function jw(e,t,n){const r=null==e?void 0:e.codec;return r&&r.length>4?r:t===oy?"ec-3"===r||"ac-3"===r||"alac"===r?r:"fLaC"===r||"Opus"===r?Xy(r,!1):(n.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"):(n.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1")}try{Pw=self.performance.now.bind(self.performance)}catch(e){Pw=Date.now}const $w=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const i=this.videoTrack=XS("video",1),a=this.audioTrack=XS("audio",1),s=this.txtTrack=XS("text",1);if(this.id3Track=XS("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=_y(e);if(o.video){const{id:e,timescale:t,codec:n,supplemental:r}=o.video;i.id=e,i.timescale=s.timescale=t,i.codec=n,i.supplemental=r}if(o.audio){const{id:e,timescale:t,codec:n}=o.audio;a.id=e,a.timescale=t,a.codec=n}s.id=vy.text,i.sampleDuration=0,i.duration=a.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let n=0;n<t;){const r=Ey(e,n);if(r>8&&109===e[n+4]&&111===e[n+5]&&111===e[n+6]&&102===e[n+7])return!0;n=r>1?n+r:t}return!1}(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Ny(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},n=ky(e,["moof"]);if(n.length<2)return t.remainder=e,t;const r=n[n.length-1];return t.valid=e.slice(0,r.byteOffset-8),t.remainder=e.slice(r.byteOffset-8),t}(n);this.remainderData=t.remainder,r.samples=t.valid||new Uint8Array}else r.samples=n;const a=this.extractID3Track(r,t);return i.samples=Dy(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=Dy(e,t),{videoTrack:t,audioTrack:XS(),id3Track:r,textTrack:XS()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=ky(e.samples,["emsg"]);r&&r.forEach(e=>{const r=function(e){const t=e[0];let n="",r="",i=0,a=0,s=0,o=0,l=0,c=0;if(0===t){for(;"\0"!==by(e.subarray(c,c+1));)n+=by(e.subarray(c,c+1)),c+=1;for(n+=by(e.subarray(c,c+1)),c+=1;"\0"!==by(e.subarray(c,c+1));)r+=by(e.subarray(c,c+1)),c+=1;r+=by(e.subarray(c,c+1)),c+=1,i=Ey(e,12),a=Ey(e,16),o=Ey(e,20),l=Ey(e,24),c=28}else if(1===t){c+=4,i=Ey(e,c),c+=4;const t=Ey(e,c);c+=4;const a=Ey(e,c);for(c+=4,s=2**32*t+a,Sb(s)||(s=Number.MAX_SAFE_INTEGER,Wb.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Ey(e,c),c+=4,l=Ey(e,c),c+=4;"\0"!==by(e.subarray(c,c+1));)n+=by(e.subarray(c,c+1)),c+=1;for(n+=by(e.subarray(c,c+1)),c+=1;"\0"!==by(e.subarray(c,c+1));)r+=by(e.subarray(c,c+1)),c+=1;r+=by(e.subarray(c,c+1)),c+=1}return{schemeIdUri:n,value:r,timeScale:i,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:l,payload:e.subarray(c,e.byteLength)}}(e);if(dw.test(r.schemeIdUri)){const e=hw(r,t);let i=4294967295===r.eventDuration?Number.POSITIVE_INFINITY:r.eventDuration/r.timeScale;i<=.001&&(i=Number.POSITIVE_INFINITY);const a=r.payload;n.samples.push({data:a,len:a.byteLength,dts:e,pts:e,type:qS.emsg,duration:i})}else if(this.config.enableEmsgKLVMetadata&&r.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const e=hw(r,t);n.samples.push({data:r.payload,len:r.payload.byteLength,dts:e,pts:e,type:qS.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}},remux:class{constructor(e,t,n,r){this.logger=void 0,this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1,this.logger=r}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(function(e,t){if(!e||!t)return e;const n=t.keyId;return n&&t.isCommonEncryption&&ky(e,["moov","trak"]).forEach(e=>{const t=ky(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let r=ky(t,["enca"]);const i=r.length>0;i||(r=ky(t,["encv"])),r.forEach(e=>{ky(i?e.subarray(28):e.subarray(78),["sinf"]).forEach(e=>{const t=Iy(e);if(t){const e=t.subarray(8,24);e.some(e=>0!==e)||(Wb.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${Xb(e)} -> ${Xb(n)}`),t.set(n,8))}})})}),e}(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const r=this.initData=_y(e);r.audio&&(t=jw(r.audio,oy,this.logger)),r.video&&(n=jw(r.video,ly,this.logger));const i={};r.audio&&r.video?i.audiovideo={container:"video/mp4",codec:t+","+n,supplemental:r.video.supplemental,initSegment:e,id:"main"}:r.audio?i.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?i.video={container:"video/mp4",codec:n,supplemental:r.video.supplemental,initSegment:e,id:"main"}:this.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,t,n,r,i,a){var s,o;let{initPTS:l,lastEndTime:c}=this;const u={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};xb(c)||(c=this.lastEndTime=i||0);const d=t.samples;if(null==d||!d.length)return u;const h={initPTS:void 0,timescale:void 0,trackId:void 0};let f=this.initData;if(null!=(s=f)&&s.length||(this.generateInitSegment(d),f=this.initData),null==(o=f)||!o.length)return this.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const p=function(e,t,n){const r={},i=ky(e,["moof","traf"]);for(let e=0;e<i.length;e++){const a=i[e],s=ky(a,["tfhd"])[0],o=Ey(s,4),l=t[o];if(!l)continue;const c=r[o]||(r[o]={start:NaN,duration:0,sampleCount:0,timescale:l.timescale,type:l.type}),u=ky(a,["tfdt"])[0];if(u){const e=u[0];let t=Ey(u,4);1===e&&(t===my?n.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(t*=my+1,t+=Ey(u,8))),xb(t)&&(!xb(c.start)||t<c.start)&&(c.start=t)}const d=l.default,h=Ey(s,0)|(null==d?void 0:d.flags);let f=(null==d?void 0:d.duration)||0;8&h&&(f=Ey(s,2&h?12:8));const p=ky(a,["trun"]);let m=c.start||0,g=0,v=f;for(let e=0;e<p.length;e++){const t=p[e],n=Ey(t,4),r=c.sampleCount;c.sampleCount+=n;const i=1&t[3],a=4&t[3],s=1&t[2],o=2&t[2],l=4&t[2],u=8&t[2];let d=8,h=n;for(i&&(d+=4),a&&n&&(1&t[d+1]||void 0!==c.keyFrameIndex||(c.keyFrameIndex=r),d+=4,s?(v=Ey(t,d),d+=4):v=f,o&&(d+=4),u&&(d+=4),m+=v,g+=v,h--);h--;)s?(v=Ey(t,d),d+=4):v=f,o&&(d+=4),l&&(1&t[d+1]||void 0===c.keyFrameIndex&&(c.keyFrameIndex=c.sampleCount-(h+1),c.keyFrameStart=m),d+=4),u&&(d+=4),m+=v,g+=v;!g&&f&&(g+=f*n)}c.duration+=g}if(!Object.keys(r).some(e=>r[e].duration)){let t=1/0,n=0;const i=ky(e,["sidx"]);for(let e=0;e<i.length;e++){const r=Ty(i[e]);if(null!=r&&r.references){t=Math.min(t,r.earliestPresentationTime/r.timescale);const e=r.references.reduce((e,t)=>e+t.info.duration||0,0);n=Math.max(n,e+r.earliestPresentationTime/r.timescale)}}n&&xb(n)&&Object.keys(r).forEach(e=>{r[e].duration||(r[e].duration=n*r[e].timescale-r[e].start)})}return r}(d,f,this.logger),m=f.audio?p[f.audio.id]:null,g=f.video?p[f.video.id]:null,v=Uw(g,1/0),b=Uw(m,1/0),y=Uw(g,0,!0),E=Uw(m,0,!0);let x,S=i,w=0;if(m&&(!g||!l&&b<v||l&&l.trackId===f.audio.id)?(h.trackId=f.audio.id,x=m,w=E-b):g&&(h.trackId=f.video.id,x=g,w=y-v),x){const e=x.timescale;S=x.start/e,h.timescale=e,l||(h.initPTS=x.start-i*e,this.initPTS=l={baseTime:h.initPTS,timescale:e,trackId:h.trackId})}!a&&l||!function(e,t,n,r){if(null===e)return!0;const i=Math.max(r,1),a=t-e.baseTime/e.timescale;return Math.abs(a-n)>i}(l,S,i,w)&&h.timescale===l.timescale||(h.initPTS=S-i,l&&1===l.timescale&&this.logger.warn(`Adjusting initPTS @${i} from ${l.baseTime/l.timescale} to ${h.initPTS}`),this.initPTS=l={baseTime:h.initPTS,timescale:1});const k=e?S-l.baseTime/l.timescale:c;!function(e,t,n){ky(t,["moof","traf"]).forEach(t=>{ky(t,["tfhd"]).forEach(r=>{const i=Ey(r,4),a=e[i];if(!a)return;const s=a.timescale||9e4;ky(t,["tfdt"]).forEach(e=>{const t=e[0],r=n*s;if(r){let n=Ey(e,4);if(0===t)n-=r,n=Math.max(n,0),wy(e,4,n);else{n*=Math.pow(2,32),n+=Ey(e,8),n-=r,n=Math.max(n,0);const t=Math.floor(n/(my+1)),i=Math.floor(n%(my+1));wy(e,4,t),wy(e,8,i)}}})})})}(f,d,l.baseTime/l.timescale);const T=k+w;w>0?this.lastEndTime=T:(this.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const _=!!f.audio,A=!!f.video;let R="";_&&(R+="audio"),A&&(R+="video");const L={data1:d,startPTS:k,startDTS:k,endPTS:T,endDTS:T,type:R,hasAudio:_,hasVideo:A,nb:1,dropped:0};u.audio=_&&!A?L:void 0,u.video=A?L:void 0;const C=null==g?void 0:g.sampleCount;if(C){const e=g.keyFrameIndex,t=-1!==e;L.nb=C,L.dropped=0===e||this.isVideoContiguous?0:t?e:C,L.independent=t,L.firstKeyFrame=e,t&&g.keyFrameStart&&(L.firstKeyFramePTS=g.keyFrameStart-l.baseTime/l.timescale),this.isVideoContiguous||(u.independent=t),this.isVideoContiguous||(this.isVideoContiguous=t),L.dropped&&this.logger.warn(`fmp4 does not start with IDR: firstIDR ${e}/${C} dropped: ${L.dropped} pts: ${L.firstKeyFramePTS||"NA"}`)}return u.initSegment=h,u.id3=Fw(n,i,l,l),r.samples.length&&(u.text=Bw(r,i,l)),u}}},{demux:yw,remux:Ow},{demux:class extends QS{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=IS(e,0);let r=(null==n?void 0:n.length)||0;if(lw(e,r))return!1;for(let n=e.length;r<n;r++)if(FS(e,r))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&NS(e,t)&&OS(e,t)<=e.length-t}(e,t)}appendFrame(e,t,n){BS(e,this.observer,t,n,e.manifestCodec);const r=jS(e,t,n,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r}},remux:Ow},{demux:class extends QS{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=IS(e,0);let n=(null==t?void 0:t.length)||0;if(t&&11===e[n]&&119===e[n+1]&&void 0!==YS(t)&&cw(e,n)<=16)return!1;for(let t=e.length;n<t;n++)if(lw(e,n))return Wb.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return sw(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return iw(e,t,n,this.basePTS,this.frameIndex)}},remux:Ow}];$w.splice(2,0,{demux:class extends QS{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=uw(e,t,n,this.basePTS,this.frameIndex);if(-1!==r)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const t=IS(e,0);if(!t)return!1;const n=t.length;return 11===e[n]&&119===e[n+1]&&void 0!==YS(t)&&cw(e,n)<16}},remux:Ow});class zw{constructor(e,t,n,r,i,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=i,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const i=n.transmuxing;i.executeStart=Pw();let a=new Uint8Array(e);const{currentTransmuxState:s,transmuxConfig:o}=this;r&&(this.currentTransmuxState=r);const{contiguous:l,discontinuity:c,trackSwitch:u,accurateTimeOffset:d,timeOffset:h,initSegmentChange:f}=r||s,{audioCodec:p,videoCodec:m,defaultInitPts:g,duration:v,initSegmentData:b}=o,y=function(e,t){let n=null;return e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(n=t),n}(a,t);if(y&&dx(y.method)){const e=this.getDecrypter(),t=hx(y.method);if(!e.isSync())return this.asyncResult=!0,this.decryptionPromise=e.webCryptoDecrypt(a,y.key.buffer,y.iv.buffer,t).then(e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t}),this.decryptionPromise;{let r=e.softwareDecrypt(a,y.key.buffer,y.iv.buffer,t);if(n.part>-1){const t=e.flush();r=t?t.buffer:t}if(!r)return i.executeEnd=Pw(),Vw(n);a=new Uint8Array(r)}}const E=this.needsProbing(c,u);if(E){const e=this.configureTransmuxer(a);if(e)return this.logger.warn(`[transmuxer] ${e.message}`),this.observer.emit(_b.ERROR,_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=Pw(),Vw(n)}(c||u||f||E)&&this.resetInitSegment(b,p,m,v,t),(c||f||E)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const x=this.transmux(a,y,h,d,n);this.asyncResult=Gw(x);const S=this.currentTransmuxState;return S.contiguous=!0,S.discontinuity=!1,S.trackSwitch=!1,i.executeEnd=Pw(),x}flush(e){const t=e.transmuxing;t.executeStart=Pw();const{decrypter:n,currentTransmuxState:r,decryptionPromise:i}=this;if(i)return this.asyncResult=!0,i.then(()=>this.flush(e));const a=[],{timeOffset:s}=r;if(n){const t=n.flush();t&&a.push(this.push(t.buffer,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l){t.executeEnd=Pw();const n=[Vw(e)];return this.asyncResult?Promise.resolve(n):n}const c=o.flush(s);return Gw(c)?(this.asyncResult=!0,c.then(t=>(this.flushRemux(a,t,e),a))):(this.flushRemux(a,c,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:i,id3Track:a,textTrack:s}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===Pb?"level":"track"} ${n.level}`);const c=this.remuxer.remux(r,i,a,s,l,o,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=Pw()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,i){const{demuxer:a,remuxer:s}=this;a&&s&&(a.resetInitSegment(e,t,n,r),s.resetInitSegment(e,t,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,i){let a;return a=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i),a}transmuxUnencrypted(e,t,n,r){const{audioTrack:i,videoTrack:a,id3Track:s,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,a,s,o,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,i){return this.demuxer.demuxSampleAes(e,t,n).then(e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,r,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r}=this;let i;for(let t=0,n=$w.length;t<n;t++){var a;if(null!=(a=$w[t].demux)&&a.probe(e,this.logger)){i=$w[t];break}}if(!i)return new Error("Failed to find demuxer by probing fragment data");const s=this.demuxer,o=this.remuxer,l=i.remux,c=i.demux;o&&o instanceof l||(this.remuxer=new l(n,t,r,this.logger)),s&&s instanceof c||(this.demuxer=new c(n,t,r,this.logger),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new VE(this.config)),e}}const Vw=e=>({remuxResult:{},chunkMeta:e});function Gw(e){return"then"in e&&e.then instanceof Function}class Hw{constructor(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i||null}}class Ww{constructor(e,t,n,r,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=a}}let Kw=0;class Yw{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=Kw++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=e=>{const t=e.data,n=this.hls;if(n&&null!=t&&t.event&&t.instanceNo===this.instanceNo)switch(t.event){case"init":{var r;const e=null==(r=this.workerContext)?void 0:r.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":n.logger[t.data.logType]&&n.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.part=this.part,t.data.id=this.id,n.trigger(t.event,t.data)}},this.onWorkerError=e=>{if(!this.hls)return;const t=new Error(`${e.message}  (${e.filename}:${e.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(_b.ERROR,{type:kb.OTHER_ERROR,details:Tb.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})};const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const a=(e,t)=>{(t=t||{}).frag=this.frag||void 0,e===_b.ERROR&&(t.parent=this.id,t.part=this.part,this.error=t.error),this.hls.trigger(e,t)};this.observer=new _S,this.observer.on(_b.FRAG_DECRYPTED,a),this.observer.on(_b.ERROR,a);const s=Zy(i.preferManagedMediaSource);if(this.useWorker&&"undefined"!=typeof Worker){const n=this.hls.logger;if(i.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__){try{i.workerPath?(n.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=function(e){const t=RS[e];if(t)return t.clientCount++,t;const n=new self.URL(e,self.location.href).href,r={worker:new self.Worker(n),scriptURL:n,clientCount:1};return RS[e]=r,r}(i.workerPath)):(n.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=RS[AS];if(e)return e.clientCount++,e;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(t),r={worker:new self.Worker(n),objectURL:n,clientCount:1};return RS[AS]=r,r}());const{worker:e}=this.workerContext;e.addEventListener("message",this.onWorkerMessage),e.addEventListener("error",this.onWorkerError),e.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:s,id:t,config:hE(i)})}catch(r){n.warn(`Error setting up "${t}" Web Worker, fallback to inline`,r),this.terminateWorker(),this.error=null,this.transmuxer=new zw(this.observer,s,i,"",t,e.logger)}return}}this.transmuxer=new zw(this.observer,s,i,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=Kw++;const t=this.hls.config,n=Zy(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:hE(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),function(e){const t=RS[e||AS];if(t&&1===t.clientCount--){const{worker:n,objectURL:r}=t;delete RS[e||AS],r&&self.URL.revokeObjectURL(r),n.terminate()}}(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,r,i,a,s,o,l,c){var u,d;l.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:f}=this,p=a?a.start:i.start,m=i.decryptdata,g=this.frag,v=!(g&&i.cc===g.cc),b=!(g&&l.level===g.level),y=g?l.sn-g.sn:-1,E=this.part?l.part-this.part.index:-1,x=0===y&&l.id>1&&l.id===(null==g?void 0:g.stats.chunkCount),S=!b&&(1===y||0===y&&(1===E||x&&E<=0)),w=self.performance.now();(b||y||0===i.stats.parsing.start)&&(i.stats.parsing.start=w),!a||!E&&S||(a.stats.parsing.start=w);const k=!(g&&(null==(u=i.initSegment)?void 0:u.url)===(null==(d=g.initSegment)?void 0:d.url)),T=new Ww(v,S,o,b,p,k);if(!S||v||k){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${i.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===Pb?"level":"track"}: ${l.level} id: ${l.id}\n        discontinuity: ${v}\n        trackSwitch: ${b}\n        contiguous: ${S}\n        accurateTimeOffset: ${o}\n        timeOffset: ${p}\n        initSegmentChange: ${k}`);const e=new Hw(n,r,t,s,c);this.configureTransmuxer(e)}if(this.frag=i,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:m,chunkMeta:l,state:T},e instanceof ArrayBuffer?[e]:[]);else if(f){const t=f.push(e,m,l,T);Gw(t)?t.then(e=>{this.handleTransmuxComplete(e)}).catch(e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(t)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const t=n.flush(e);Gw(t)?t.then(t=>{this.handleFlushResult(t,e)}).catch(t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}):this.handleFlushResult(t,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(e=>{this.handleTransmuxComplete(e)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class qw extends jb{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=null==t?void 0:t.renditionReports;if(r){let i=-1;for(let n=0;n<r.length;n++){const a=r[n];let s;try{s=new self.URL(a.URI,t.url).href}catch(e){this.warn(`Could not construct new URL for Rendition Report: ${e}`),s=a.URI||""}if(s===e){i=n;break}s===e.substring(0,s.length)&&(i=n)}if(-1!==i){const e=r[i],a=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let s=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);s>=0&&e>t.partTarget&&(s+=1)}const o=n&&lE(n);return new cE(a,s>=0?s:void 0,o)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}return e}playlistLoaded(e,t,n){const{details:r,stats:i}=t,a=self.performance.now(),s=i.loading.first?Math.max(0,a-i.loading.first):0;r.advancedDateTime=Date.now()-s;const o=this.hls.config.timelineOffset;if(o!==r.appliedTimelineOffset){const e=Math.max(o||0,0);r.appliedTimelineOffset=e,r.fragments.forEach(t=>{t.start=t.playlistOffset+e})}if(r.live||null!=n&&n.live){const o="levelInfo"in t?t.levelInfo:t.track;if(r.reloaded(n),n&&r.fragments.length>0){!function(e,t){if(e===t)return;let n=null;const r=e.fragments;for(let e=r.length-1;e>=0;e--){const t=r[e].initSegment;if(t){n=t;break}}let i;e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,n){const r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=i;c<=a;c++){const i=l[s+c];let a=o[c];if(r&&!a&&i&&(a=t.fragments[c]=i),i&&a){if(n(i,a,c,o),i.url&&i.url!==a.url)return void(t.playlistParsingError=qx(`media sequence mismatch ${a.sn}:`,e,t,0,a));if(i.cc!==a.cc)return void(t.playlistParsingError=qx(`discontinuity sequence mismatch (${i.cc}!=${a.cc})`,e,t,0,a))}}}(e,t,(e,r,a,s)=>{if((!t.startCC||t.skippedSegments)&&r.cc!==e.cc){const n=e.cc-r.cc;for(let e=a;e<s.length;e++)s[e].cc+=n;t.endCC=s[s.length-1].cc}xb(e.startPTS)&&xb(e.endPTS)&&(r.setStart(r.startPTS=e.startPTS),r.startDTS=e.startDTS,r.maxStartPTS=e.maxStartPTS,r.endPTS=e.endPTS,r.endDTS=e.endDTS,r.minEndPTS=e.minEndPTS,r.setDuration(e.endPTS-e.startPTS),r.duration&&(i=r),t.PTSKnown=t.alignedSliding=!0),e.hasStreams&&(r.elementaryStreams=e.elementaryStreams),r.loader=e.loader,e.hasStats&&(r.stats=e.stats),e.initSegment&&(r.initSegment=e.initSegment,n=e.initSegment)});const a=t.fragments,s=t.fragmentHint?a.concat(t.fragmentHint):a;if(n&&s.forEach(e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)}),t.skippedSegments){if(t.deltaUpdateFailed=a.some(e=>!e),t.deltaUpdateFailed){Wb.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)a.shift();t.startSN=a[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=function(e,t){const{dateRanges:n,recentlyRemovedDateranges:r}=t,i=Fb({},e);r&&r.forEach(e=>{delete i[e]});const a=Object.keys(i).length;return a&&Object.keys(n).forEach(e=>{const t=i[e],r=new cx(n[e].attr,t);r.isValid?(i[e]=r,t||(r.tagOrder+=a)):Wb.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${hE(n[e].attr)}"`)}),i}(e.dateRanges,t));const n=e.fragments.filter(e=>e.rawProgramDateTime);if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(let e=1;e<s.length;e++)null===s[e].programDateTime&&zx(s[e],s[e-1],n);Mx(n,t)}t.endCC=a[a.length-1].cc}if(!t.startCC){var o;const n=Zx(e,t.startSN-1);t.startCC=null!=(o=null==n?void 0:n.cc)?o:a[0].cc}!function(e,t,n){if(e&&t){let r=0;for(let i=0,a=e.length;i<=a;i++){const a=e[i],s=t[i+r];a&&s&&a.index===s.index&&a.fragment.sn===s.fragment.sn?n(a,s):r--}}}(e.partList,t.partList,(e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),i?Yx(t,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):Xx(e,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const l=t.advancedDateTime;if(t.advanced&&l){const e=t.edge;t.driftStart||(t.driftStartTime=l,t.driftStart=e),t.driftEndTime=l,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;-1===t.requestScheduled&&(t.requestScheduled=e.requestScheduled)}(n,r);const e=r.playlistParsingError;if(e){this.warn(e);const n=this.hls;if(!n.config.ignorePlaylistParsingErrors){var l;const{networkDetails:a}=t;return void n.trigger(_b.ERROR,{type:kb.NETWORK_ERROR,details:Tb.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:e,reason:e.message,level:t.level||void 0,parent:null==(l=r.fragments[0])?void 0:l.type,networkDetails:a,stats:i})}r.playlistParsingError=null}}-1===r.requestScheduled&&(r.requestScheduled=i.loading.start);const c=this.hls.mainForwardBufferInfo,u=c?c.end-c.len:0,d=Jx(r,1e3*(r.edge-u));if(r.requestScheduled+d<a?r.requestScheduled=a:r.requestScheduled+=d,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let h,f,p;if(r.canBlockReload&&r.endSN&&r.advanced){const e=this.hls.config.lowLatencyMode,i=r.lastPartSn,s=r.endSN,l=r.lastPartIndex,c=i===s;-1!==l?c?(f=s+1,p=e?0:l):(f=i,p=e?l+1:r.maxPartIndex):f=s+1;const u=r.age,d=u+r.ageHeader;let m=Math.min(d-r.partTarget,1.5*r.targetduration);if(m>0){if(d>3*r.targetduration)this.log(`Playlist last advanced ${u.toFixed(2)}s ago. Omitting segment and part directives.`),f=void 0,p=void 0;else if(null!=n&&n.tuneInGoal&&d-r.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${m} with playlist age: ${r.age}`),m=0;else{const e=Math.floor(m/r.targetduration);f+=e,void 0!==p&&(p+=Math.round(m%r.targetduration/r.partTarget)),this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${u.toFixed(2)}s goal: ${m} skip sn ${e} to part ${p}`)}r.tuneInGoal=m}if(h=this.getDeliveryDirectives(r,t.deliveryDirectives,f,p),e||!c)return r.requestScheduled=a,void this.loadingPlaylist(o,h)}else(r.canBlockReload||r.canSkipUntil)&&(h=this.getDeliveryDirectives(r,t.deliveryDirectives,f,p));h&&void 0!==f&&r.canBlockReload&&(r.requestScheduled=i.loading.first+Math.max(d-2*s,d/2)),this.scheduleLoading(o,h,r)}else this.clearTimer()}scheduleLoading(e,t,n){const r=n||e.details;if(!r)return void this.loadingPlaylist(e,t);const i=self.performance.now(),a=r.requestScheduled;if(i>=a)return void this.loadingPlaylist(e,t);const s=a-i;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(s)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),s)}getDeliveryDirectives(e,t,n,r){let i=lE(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,i=""),new cE(n,r,i)}checkRetry(e){const t=e.details,n=_E(e),r=e.errorAction,{action:i,retryCount:a=0,retryConfig:s}=r||{},o=!!r&&!!s&&(5===i||!r.resolved&&2===i);if(o){var l;if(a>=s.maxNumRetry)return!1;if(n&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${s.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=RE(s,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),e),this.warn(`Retrying playlist loading ${a+1}/${s.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,r.resolved=!0}return o}}function Xw(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Qw(e[n].attrs,t[n].attrs))return!1;return!0}function Qw(e,t,n){const r=e["STABLE-RENDITION-ID"];return r&&!n?r===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(n=>e[n]!==t[n])}function Jw(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class Zw{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(null===this.queues||null===this.tracks)return;const r=this.queues[t];r.push(e),1!==r.length||n||this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){null!==this.queues&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=null==(t=e[0])?void 0:t.label;"async-blocker"!==n&&"async-blocker-prepend"!==n||(e[0].execute(),e.splice(0,1))})}unblockAudio(e){null!==this.queues&&this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(null===this.queues||null===this.tracks)return;const t=this.queues[e];if(t.length){const r=t[0];try{r.execute()}catch(t){var n;if(r.onError(t),null===this.queues||null===this.tracks)return;const i=null==(n=this.tracks[e])?void 0:n.buffer;null!=i&&i.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){null!==this.queues&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return(null==(t=this.queues)?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return null===e||null===t?"<destroyed>":`\n${this.list("video")}\n${this.list("audio")}\n${this.list("audiovideo")}}`}list(e){var t,n;return null!=(t=this.queues)&&t[e]||null!=(n=this.tracks)&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=null==(t=this.tracks)?void 0:t[e],r=null==n?void 0:n.buffer;return r?`SourceBuffer${r.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return(null==(t=this.queues)?void 0:t[e].map(e=>e.label).join(", "))||""}}const ek=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,tk="HlsJsTrackRemovedError";class nk extends Error{constructor(e){super(e),this.name=tk}}function rk(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach(t=>{e.removeChild(t)})}function ik(e){return"audio"===e?1:0}class ak{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(_b.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(_b.BUFFER_CODECS,this.onBufferCodecs,this),e.on(_b.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(_b.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(_b.BUFFER_CODECS,this.onBufferCodecs,this),e.off(_b.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&xb(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((t,n)=>this.isLevelAllowed(t)&&n<=e);return this.clientRect=null,ak.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height)}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;const r=(e,t)=>!t||e.width!==t.width||e.height!==t.height;let i=e.length-1;const a=Math.max(t,n);for(let t=0;t<e.length;t+=1){const n=e[t];if((n.width>=a||n.height>=a)&&r(n,e[t+1])){i=t;break}}return i}}const sk="m",ok="a",lk="v",ck="av",uk="i",dk="tt",hk="h",fk="CMCD-Object",pk="CMCD-Request",mk="CMCD-Session",gk="CMCD-Status",vk={[fk]:["br","d","ot","tb"],[pk]:["bl","dl","mtp","nor","nrr","su"],[mk]:["cid","pr","sf","sid","st","v"],[gk]:["bs","rtp"]};class bk{constructor(e,t){Array.isArray(e)&&(e=e.map(e=>e instanceof bk?e:new bk(e))),this.value=e,this.params=t}}function yk(e,t,n){return function(e,t,n,r){return new Error(`failed to ${e} "${function(e){return Array.isArray(e)?JSON.stringify(e):e instanceof Map?"Map{}":e instanceof Set?"Set{}":"object"==typeof e?JSON.stringify(e):String(e)}(t)}" as ${n}`,{cause:r})}("serialize",e,t,n)}class Ek{constructor(e){this.description=e}}const xk="Bare Item";function Sk(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw yk(e,"Integer");return e.toString()}function wk(e,t){if(e<0)return-wk(-e,t);const n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){const t=Math.floor(e*n);return(t%2==0?t:t+1)/n}return Math.round(e*n)/n}function kk(e){const t=wk(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw yk(e,"Decimal");const n=t.toString();return n.includes(".")?n:`${n}.0`}const Tk=/[\x00-\x1f\x7f]+/;function _k(e){const t=(n=e).description||n.toString().slice(7,-1);var n;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw yk(t,"Token");return t}function Ak(e){switch(typeof e){case"number":if(!xb(e))throw yk(e,xk);return Number.isInteger(e)?Sk(e):kk(e);case"string":return function(e){if(Tk.test(e))throw yk(e,"String");return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return _k(e);case"boolean":return function(e){if("boolean"!=typeof e)throw yk(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return`@${Sk(e.getTime()/1e3)}`}(e);if(e instanceof Uint8Array)return function(e){if(!1===ArrayBuffer.isView(e))throw yk(e,"Byte Sequence");return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}(e);if(e instanceof Ek)return _k(e);default:throw yk(e,xk)}}function Rk(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw yk(e,"Key");return e}function Lk(e){return null==e?"":Object.entries(e).map(([e,t])=>!0===t?`;${Rk(e)}`:`;${Rk(e)}=${Ak(t)}`).join("")}function Ck(e){return e instanceof bk?`${Ak(e.value)}${Lk(e.params)}`:Ak(e)}const Pk=e=>Math.round(e),Ik=e=>100*Pk(e/100),Nk={br:Pk,d:Pk,bl:Ik,dl:Ik,mtp:Ik,nor:(e,t)=>((null==t?void 0:t.baseUrl)&&(e=function(e,t){const n=new URL(e),r=new URL(t);if(n.origin!==r.origin)return e;const i=n.pathname.split("/").slice(1),a=r.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")}(e,t.baseUrl)),encodeURIComponent(e)),rtp:Ik,tb:Pk};function Dk(e,t={}){return e?function(e,t){return function(e,t={whitespace:!0}){if("object"!=typeof e)throw yk(e,"Dict");const n=e instanceof Map?e.entries():Object.entries(e),r=(null==t?void 0:t.whitespace)?" ":"";return Array.from(n).map(([e,t])=>{t instanceof bk==0&&(t=new bk(t));let n=Rk(e);return!0===t.value?n+=Lk(t.params):(n+="=",Array.isArray(t.value)?n+=function(e){return`(${e.value.map(Ck).join(" ")})${Lk(e.params)}`}(t):n+=Ck(t)),n}).join(`,${r}`)}(e,t)}(function(e,t){const n={};if(null==e||"object"!=typeof e)return n;const r=Object.keys(e).sort(),i=Fb({},Nk,null==t?void 0:t.formatters),a=null==t?void 0:t.filter;return r.forEach(r=>{if(null==a?void 0:a(r))return;let s=e[r];const o=i[r];o&&(s=o(s,t)),"v"===r&&1===s||"pr"==r&&1===s||function(e){return"number"==typeof e?xb(e):null!=e&&""!==e&&!1!==e}(s)&&(function(e){return"ot"===e||"sf"===e||"st"===e}(r)&&"string"==typeof s&&(s=new Ek(s)),n[r]=s)}),n}(e,t),Fb({whitespace:!1},t)):""}const Ok=/CMCD=[^&#]+/;function Mk(e,t,n,r){e&&Object.keys(t).forEach(i=>{const a=e.filter(e=>e.groupId===i).map(e=>{const a=Fb({},e);return a.details=void 0,a.attrs=new sx(a.attrs),a.url=a.attrs.URI=Fk(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=t[i],a.attrs["PATHWAY-ID"]=r,a});e.push(...a)})}function Fk(e,t,n,r){const{HOST:i,PARAMS:a,[n]:s}=r;let o;t&&(o=null==s?void 0:s[t],o&&(e=o));const l=new self.URL(e);return i&&!o&&(l.host=i),a&&Object.keys(a).sort().forEach(e=>{e&&l.searchParams.set(e,a[e])}),l.href}function Bk(e,t,n){Uk(e,t,n),e.addEventListener(t,n)}function Uk(e,t,n){e.removeEventListener(t,n)}class jk extends jb{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=jk.CDMCleanupPromise?[jk.CDMCleanupPromise]:[],this.onMediaEncrypted=e=>{const{initDataType:t,initData:n}=e,r=`"${e.type}" event: init data type: "${t}"`;if(this.debug(r),null!==n){if(!this.keyFormatPromise){let e=Object.keys(this.keySystemAccessPromises);e.length||(e=kx(this.config));const t=e.map(wx).filter(e=>!!e);this.keyFormatPromise=this.getKeyFormatPromise(t)}this.keyFormatPromise.then(i=>{const a=xx(i);let s,o;if("sinf"===t){if(a!==gx.FAIRPLAY)return void this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${t}" for selected key-system ${a}`);const i=by(new Uint8Array(n));try{const e=Iy(fx(JSON.parse(i).sinf));if(!e)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");s=new Uint8Array(e.subarray(8,24)),o=gx.FAIRPLAY}catch(e){return void this.warn(`${r} Failed to parse sinf: ${e}`)}}else{if(a!==gx.WIDEVINE&&a!==gx.PLAYREADY)return void this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${t}" for selected key-system ${a}`);const i=function(e){const t=[];if(e instanceof ArrayBuffer){const n=e.byteLength;let r=0;for(;r+32<n;){const n=Uy(new DataView(e,r));t.push(n),r+=n.size}}return t}(n),l=i.filter(e=>!!e.systemId&&Sx(e.systemId)===a);l.length>1&&this.warn(`${r} Using first of ${l.length} pssh found for selected key-system ${a}`);const c=l[0];if(!c)return void(0===i.length||i.some(e=>!e.systemId)?this.warn(`${r} contains incomplete or invalid pssh data`):this.log(`ignoring ${r} for ${i.map(e=>Sx(e.systemId)).join(",")} pssh data in favor of playlist keys`));if(o=Sx(c.systemId),0===c.version&&c.data)if(o===gx.WIDEVINE){const e=c.data.length-22;s=new Uint8Array(c.data.subarray(e,e+16))}else o===gx.PLAYREADY&&(s=Ax(c.data))}if(!o||!s)return;const l=Xb(s),{keyIdToKeySessionPromise:c,mediaKeySessions:u}=this;let d=c[l];for(let e=0;e<u.length;e++){const r=u[e],i=r.decryptdata;if(!i.keyId)continue;const a=Xb(i.keyId);if(l===a||-1!==i.uri.replace(/-/g,"").indexOf(l)){if(d=c[a],i.pssh)break;delete c[a],i.pssh=new Uint8Array(n),i.keyId=s,d=c[l]=d.then(()=>this.generateRequestWithPreferredKeySession(r,t,n,"encrypted-event-key-match")),d.catch(e=>this.handleError(e));break}}if(!d){if(o!==a)return void this.log(`Ignoring "${e.type}" event with ${o} init data for selected key-system ${a}`);d=c[l]=this.getKeySystemSelectionPromise([o]).then(({keySystem:e,mediaKeys:r})=>{var i;this.throwIfDestroyed();const a=new Lx("ISO-23001-7",l,null!=(i=wx(e))?i:"");return a.pssh=new Uint8Array(n),a.keyId=s,this.attemptSetMediaKeys(e,r).then(()=>{this.throwIfDestroyed();const i=this.createMediaKeySessionContext({decryptdata:a,keySystem:e,mediaKeys:r});return this.generateRequestWithPreferredKeySession(i,t,n,"encrypted-event-no-match")})}),d.catch(e=>this.handleError(e))}})}},this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(_b.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(_b.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(_b.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(_b.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(_b.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(_b.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(_b.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(_b.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=t[e];return r?r.licenseUrl:e===gx.WIDEVINE&&n?n:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,r=t.map(e=>e.audioCodec).filter(n),i=t.map(e=>e.videoCodec).filter(n);return r.length+i.length===0&&i.push("avc1.42e01e"),new Promise((t,n)=>{const a=e=>{const s=e.shift();this.getMediaKeysPromise(s,r,i).then(e=>t({keySystem:s,mediaKeys:e})).catch(t=>{e.length?a(e):n(t instanceof $k?t:new $k({type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))})};a(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!=typeof n){let e=`Configured requestMediaKeySystemAccess is not a function ${n}`;return null===Tx&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){const r=function(e,t,n,r){let i;switch(e){case gx.FAIRPLAY:i=["cenc","sinf"];break;case gx.WIDEVINE:case gx.PLAYREADY:i=["cenc"];break;case gx.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,n,r){return[{initDataTypes:e,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:t.map(e=>({contentType:`audio/mp4; codecs=${e}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(e=>({contentType:`video/mp4; codecs=${e}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}(i,t,n,r)}(e,t,n,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let a=null==i?void 0:i.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${hE(r)}`),a=this.requestMediaKeySystemAccess(e,r);const t=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)}),a.then(n=>{this.log(`Access for key-system "${n.keySystem}" obtained`);const r=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=n.createMediaKeys().then(n=>(this.log(`Media-keys created for "${e}"`),t.hasMediaKeys=!0,r.then(t=>t?this.setMediaKeysServerCertificate(n,e,t):n))),t.mediaKeys.catch(t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)}),t.mediaKeys})}return a.then(()=>i.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Xb(e.keyId||[])}`);const r=n.createSession(),i={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),i="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,i,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return Xb(e.keyId)}updateKeySession(e,t){var n;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${Xb((null==(n=e.decryptdata)?void 0:n.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),r.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>wx(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:e,mediaKeys:t})=>this.attemptSetMediaKeys(e,t))}selectKeySystem(e){return new Promise((t,n)=>this.getKeySystemSelectionPromise(e).then(({keySystem:e})=>{const r=wx(e);r?t(r):n(new Error(`Unable to find format for key-system "${e}"`))}).catch(n))}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=kx(this.config),n=e.map(xx).filter(e=>!!e&&-1!==t.indexOf(e));return this.selectKeySystem(n)}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),r=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let i=this.keyIdToKeySessionPromise[n];if(!i){i=this.getKeySystemForKeyPromise(t).then(({keySystem:n,mediaKeys:i})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(n,i).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:n,mediaKeys:i,decryptdata:t})))));const a=this.keyIdToKeySessionPromise[n]=i.then(e=>{const n=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(e,"cenc",n,"playlist-key")});a.catch(e=>this.handleError(e))}return i}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof $k?this.hls.trigger(_b.ERROR,e.data):this.hls.trigger(_b.ERROR,{type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=xx(e.keyFormat),n=t?[t]:kx(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=kx(this.config)),0===e.length)throw new $k({type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${hE({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(e=>-1===n.indexOf(e))})}generateRequestWithPreferredKeySession(e,t,n,r){var i,a;const s=null==(i=this.config.drmSystems)||null==(a=i[e.keySystem])?void 0:a.generateRequest;if(s)try{const r=s.call(this.hls,t,n,e);if(!r)throw new Error("Invalid response from configured generateRequest filter");t=r.initDataType,n=r.initData?r.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(e){var o;if(this.warn(e.message),null!=(o=this.hls)&&o.config.debug)throw e}if(null===n)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${l} (init data type: ${t} length: ${n?n.byteLength:null})`);const c=new _S,u=e._onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void c.emit("error",new Error("invalid state"));const{messageType:r,message:i}=t;this.log(`"${r}" message event for session "${n.sessionId}" message size: ${i.byteLength}`),"license-request"===r||"license-renewal"===r?this.renewLicense(e,i).catch(e=>{c.eventNames().length?c.emit("error",e):this.handleError(e)}):"license-release"===r?e.keySystem===gx.FAIRPLAY&&(this.updateKeySession(e,px("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${r}"`)},d=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void c.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const n=e.keyStatus;c.emit("keyStatus",n),"expired"===n&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};Bk(e.mediaKeysSession,"message",u),Bk(e.mediaKeysSession,"keystatuseschange",d);const h=new Promise((e,t)=>{c.on("error",t),c.on("keyStatus",n=>{n.startsWith("usable")?e():"output-restricted"===n?t(new $k({type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new $k({type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${n}"`)):"expired"===n?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${n}"`)})});return e.mediaKeysSession.generateRequest(t,n).then(()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)}).catch(e=>{throw new $k({type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)}).then(()=>h).catch(t=>{throw c.removeAllListeners(),this.removeSession(e),t}).then(()=>(c.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,n)=>{if("string"==typeof n&&"object"==typeof t){const e=n;n=t,t=e}this.log(`key status change "${t}" for keyStatuses keyId: ${Xb("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${Xb(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((i,a)=>{const s={responseType:"arraybuffer",url:r},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{i(e.data)},onError:(t,n,i,o)=>{a(new $k({type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:Ub({url:s.url,data:void 0},t)},`"${e}" certificate request failed (${r}). Status: ${t.code} (${t.text})`))},onTimeout:(t,n,i)=>{a(new $k({type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:s.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(e,t,n)=>{a(new Error("aborted"))}};n.load(s,l,c)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((r,i)=>{e.setServerCertificate(n).then(i=>{this.log(`setServerCertificate ${i?"success":"not supported by CDM"} (${null==n?void 0:n.byteLength}) on "${t}"`),r(e)}).catch(e=>{i(new $k({type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(t=>this.updateKeySession(e,new Uint8Array(t)).catch(e=>{throw new $k({type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let n=0,r=i.length;n<r;n++){var a,s;t=i[n];const r=null==(a=t.querySelector("name"))?void 0:a.textContent,o=null==(s=t.querySelector("value"))?void 0:s.textContent;r&&o&&e.setRequestHeader(r,o)}}const o=r.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return px(atob(l))}setupLicenseXHR(e,t,n,r){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,n,r)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",t,!0),i.call(this.hls,e,t,n,r)}).then(n=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:n||r})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((r,i)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const s=new XMLHttpRequest;s.responseType="arraybuffer",s.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===s.readyState)if(200===s.status){this._requestLicenseFailureCount=0;let t=s.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,s,a,e)}catch(e){this.error(e)}r(t)}else{const o=n.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||s.status>=400&&s.status<500)i(new $k({type:kb.KEY_SYSTEM_ERROR,details:Tb.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:{url:a,data:void 0,code:s.status,text:s.statusText}},`License Request XHR failed (${a}). Status: ${s.status} (${s.statusText})`));else{const n=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${n} attempts left`),this.requestLicense(e,t).then(r,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=s,this.setupLicenseXHR(s,a,e,t).then(({xhr:t,licenseChallenge:n})=>{e.keySystem==gx.PLAYREADY&&(n=this.unpackPlayReadyKeyMessage(t,n)),t.send(n)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,Bk(n,"encrypted",this.onMediaEncrypted),Bk(n,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Uk(e,"encrypted",this.onMediaEncrypted),Uk(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Lx.clearKeyUriToKeyIdMap();const r=n.length;jk.CDMCleanupPromise=Promise.all(n.map(e=>this.removeSession(e)).concat(null==t||null==(e=t.setMediaKeys(null))?void 0:e.catch(e=>{var t;this.log(`Could not clear media keys: ${e}`),null==(t=this.hls)||t.trigger(_b.ERROR,{type:kb.OTHER_ERROR,details:Tb.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${e}`)})}))).catch(e=>{var t;this.log(`Could not close sessions and clear media keys: ${e}`),null==(t=this.hls)||t.trigger(_b.ERROR,{type:kb.OTHER_ERROR,details:Tb.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${e}`)})}).then(()=>{r&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);r>-1&&this.mediaKeySessions.splice(r,1);const{drmSystemOptions:i}=this.config,a=function(e){var t;return"persistent-license"===e.sessionType||!(null==(t=e.sessionTypes)||!t.some(e=>"persistent-license"===e))}(i)?new Promise((e,n)=>{self.setTimeout(()=>n(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(e)}):Promise.resolve();return a.catch(e=>{var t;this.log(`Could not remove session: ${e}`),null==(t=this.hls)||t.trigger(_b.ERROR,{type:kb.OTHER_ERROR,details:Tb.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${e}`)})}).then(()=>t.close()).catch(e=>{var t;this.log(`Could not close session: ${e}`),null==(t=this.hls)||t.trigger(_b.ERROR,{type:kb.OTHER_ERROR,details:Tb.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${e}`)})})}}}jk.CDMCleanupPromise=void 0;class $k extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function zk(e,t){let n;try{n=new Event("addtrack")}catch(e){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function Vk(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(n){Wb.debug(`[texttrack-utils]: ${n}`);try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(e){Wb.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${e}`)}}"disabled"===n&&(e.mode=n)}function Gk(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues)for(let n=e.cues.length;n--;)t&&e.cues[n].removeEventListener("enter",t),e.removeCue(e.cues[n]);"disabled"===n&&(e.mode=n)}function Hk(e,t,n,r){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const i=function(e,t,n){const r=[],i=function(e,t){if(t<=e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let r,i=0,a=n;for(;i<=a;)if(r=Math.floor((a+i)/2),t<e[r].startTime)a=r-1;else{if(!(t>e[r].startTime&&i<n))return r;i=r+1}return e[i].startTime-t<t-e[a].startTime?i:a}(e,t);if(i>-1)for(let a=i,s=e.length;a<s;a++){const i=e[a];if(i.startTime>=t&&i.endTime<=n)r.push(i);else if(i.startTime>n)return r}return r}(e.cues,t,n);for(let t=0;t<i.length;t++)r&&!r(i[t])||e.removeCue(i[t])}"disabled"===i&&(e.mode=i)}function Wk(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];"subtitles"!==r.kind&&"captions"!==r.kind||!r.label||t.push(e[n])}return t}function Kk(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}const Yk=.025;let qk=function(e){return e[e.Point=0]="Point",e[e.Range=1]="Range",e}({});function Xk(e,t,n){return`${e.identifier}-${n+1}-${Kk(t)}`}class Qk{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,null==(e=this.assetListLoader)||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return!(e<=0||isNaN(n))&&(0===n||((null==(t=this.assetList[e])?void 0:t.startOffset)||0)>n)}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Jk(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(0===this.startTime||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime;return t-Jk(t,e)<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=xb(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Jk(e,t)}return e}get appendInPlace(){return!!this.appendInPlaceStarted||!this.appendInPlaceDisabled&&!(this.cue.once||this.cue.pre||!this.startIsAligned||!(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Yk))}set appendInPlace(e){this.appendInPlaceStarted?this.resetOnResume=!e:this.appendInPlaceDisabled=!e}get timelineStart(){return null!==this._timelineStart?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return t=null!==this._duration?this._duration:this.dateRange.duration?this.dateRange.duration:this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return"RANGE"===this.dateRange.attr["X-TIMELINE-OCCUPIES"]?qk.Range:qk.Point}get supplementsPrimary(){return"PRIMARY"===this.dateRange.attr["X-TIMELINE-STYLE"]}get contentMayVary(){return"NO"!==this.dateRange.attr["X-CONTENT-MAY-VARY"]}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||null!==this.assetListResponse}toString(){return`["${(e=this).identifier}" ${e.cue.pre?"<pre>":e.cue.post?"<post>":""}${e.timelineStart.toFixed(2)}-${e.resumeTime.toFixed(2)}]`;var e}}function Jk(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<Yk)?t.start:t.start+t.duration}function Zk(e,t,n){const r=new self.URL(e,n);return"data:"!==r.protocol&&r.searchParams.set("_HLS_primary_id",t),r}function eT(e,t){for(;null!=(n=e.assetList[++t])&&n.error;)var n;return t}function tT(e){const t=e.timelineStart,n=e.duration||0;return`["${e.identifier}" ${t.toFixed(2)}-${(t+n).toFixed(2)}]`}class nT{constructor(e,t,n,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls.trigger(_b.PLAYOUT_LIMIT_REACHED,{})};const i=this.hls=new e(t);this.interstitial=n,this.assetItem=r;let a=r.uri;try{a=Zk(a,t.primarySessionId).href}catch(e){}i.loadSource(a);const s=()=>{this.hasDetails=!0};i.once(_b.LEVEL_LOADED,s),i.once(_b.AUDIO_TRACK_LOADED,s),i.once(_b.SUBTITLE_TRACK_LOADED,s),i.on(_b.MEDIA_ATTACHING,(e,{media:t})=>{this.removeMediaListeners(),this.mediaAttached=t,this.interstitial.playoutLimit&&(t.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&i.on(_b.BUFFER_APPENDED,()=>{const e=this.bufferedEnd;this.reachedPlayout(e)&&(this._bufferedEosTime=e,i.trigger(_b.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){var e;return(null==(e=this.interstitial)?void 0:e.appendInPlace)||!1}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if(null!=(t=this.hls)&&t.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const n=this.timelineOffset,r=JE.bufferInfo(e,n,0);return this.getAssetTime(r.end)>=this._bufferedEosTime-.02}reachedPlayout(e){const t=this.interstitial.playoutLimit;return this.startOffset+e>=t}get destroyed(){var e;return!(null!=(e=this.hls)&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return(null==(e=this.hls)?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=JE.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){return this.assetItem.duration||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return(null==(e=this.hls)?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){var e;this.mediaAttached&&null!=(e=this.hls)&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}resetDetails(){const e=this.hls;if(this.hasDetails){e.stopLoad();const t=e=>delete e.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){this.hls.on(e,t)}once(e,t,n){this.hls.once(e,t)}off(e,t,n){this.hls.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${tT(this.assetItem)} ${null==(e=this.hls)?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}class rT extends jb{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,r)=>e<=r.startOffset&&t>r.startOffset?(delete r.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[n]||(void 0===t&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&null!=(i=r[n])&&i.event;){var i;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let r=0;r<n.length;r++){let i=n[r];if(t&&"primary"!==t&&(i=i[t]),e===i.start||e>i.start&&e<i.end)return r}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let r=e;r<=t&&n[r];r++){const e=n[r].event;if(null!=e&&e.restrictions.jump&&!e.appendInPlace)return r}return-1}findEventIndex(e){const t=this.items;if(t)for(let r=t.length;r--;){var n;if((null==(n=t[r].event)?void 0:n.identifier)===e)return r}return-1}findAssetIndex(e,t){const n=e.assetList,r=n.length;if(r>1)for(let e=0;e<r;e++){const r=n[e];if(!r.error){const n=r.timelineStart;if(t===n||t>n&&t<n+(r.duration||0))return e}}return 0}get assetIdAtEnd(){var e,t;const n=null==(e=this.items)||null==(t=e[this.length-1])?void 0:t.event;if(n){const e=n.assetList,t=e[e.length-1];if(t)return t.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:r}=n,i=this.events,a=this.parseDateRanges(r,{url:n.url},t),s=Object.keys(r),o=i?i.filter(e=>!s.includes(e.identifier)):[];a.length&&a.sort((e,t)=>{const n=e.cue.pre,r=e.cue.post,i=t.cue.pre,a=t.cue.post;if(n&&!i)return-1;if(i&&!n)return 1;if(r&&!a)return 1;if(a&&!r)return-1;if(!(n||i||r||a)){const n=e.startTime,r=t.startTime;if(n!==r)return n-r}return e.dateRange.tagOrder-t.dateRange.tagOrder}),this.events=a,o.forEach(e=>{this.removeEvent(e)}),this.updateSchedule(e,o)}updateSchedule(e,t=[]){const n=this.events||[];if(n.length||t.length||this.length<2){const r=this.items,i=this.parseSchedule(n,e);(t.length||(null==r?void 0:r.length)!==i.length||i.some((e,t)=>Math.abs(e.playout.start-r[t].playout.start)>.005||Math.abs(e.playout.end-r[t].playout.end)>.005))&&(this.items=i,this.onScheduleUpdate(t,r))}}parseDateRanges(e,t,n){const r=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const s=i[a],o=e[s];if(o.isInterstitial){let e=this.eventMap[s];e?e.setDateRange(o):(e=new Qk(o,t),this.eventMap[s]=e,!1===n&&(e.appendInPlace=n)),r.push(e)}}return r}parseSchedule(e,t){const n=[],r=t.main.details,i=r.live?1/0:r.edge;let a=0;if((e=e.filter(e=>!(e.error||e.cue.once&&e.hasPlayed))).length){this.resolveOffsets(e,t);let r=0,o=0;if(e.forEach((t,s)=>{const l=t.cue.pre,c=t.cue.post,u=e[s-1]||null,d=t.appendInPlace,h=c?i:t.startOffset,f=t.duration,p=t.timelineOccupancy===qk.Range?f:0,m=t.resumptionOffset,g=(null==u?void 0:u.startTime)===h,v=h+t.cumulativeDuration;let b=d?v+f:h+m;if(l||!c&&h<=0){const e=o;o+=p,t.timelineStart=v;const r=a;a+=f,n.push({event:t,start:v,end:b,playout:{start:r,end:a},integrated:{start:e,end:o}})}else{if(!(h<=i))return;{if(!g){const i=h-r;if(i>.033){const l=r,c=o;o+=i;const u=a;a+=i;const d={previousEvent:e[s-1]||null,nextEvent:t,start:l,end:l+i,playout:{start:u,end:a},integrated:{start:c,end:o}};n.push(d)}else i>0&&u&&(u.cumulativeDuration+=i,n[n.length-1].end=h)}c&&(b=v),t.timelineStart=v;const i=o;o+=p;const l=a;a+=f,n.push({event:t,start:v,end:b,playout:{start:l,end:a},integrated:{start:i,end:o}})}}const y=t.resumeTime;r=c||y>i?i:y}),r<i){var s;const e=r,t=o,l=i-r;o+=l;const c=a;a+=l,n.push({previousEvent:(null==(s=n[n.length-1])?void 0:s.event)||null,nextEvent:null,start:r,end:e+l,playout:{start:c,end:a},integrated:{start:t,end:o}})}this.setDurations(i,a,o)}else{const e=0;n.push({previousEvent:null,nextEvent:null,start:e,end:i,playout:{start:e,end:i},integrated:{start:e,end:i}}),this.setDurations(i,i,i)}return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,r=n.live?1/0:n.edge;let i=0,a=-1;e.forEach((s,o)=>{const l=s.cue.pre,c=s.cue.post,u=l?0:c?r:s.startTime;this.updateAssetDurations(s),a===u?s.cumulativeDuration=i:(i=0,a=u),!c&&s.snapOptions.in&&(s.resumeAnchor=SE(null,n.fragments,s.startOffset+s.resumptionOffset,0,0)||void 0),s.appendInPlace&&!s.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(s,t)||(s.appendInPlace=!1)),!s.appendInPlace&&o+1<e.length&&e[o+1].startTime-e[o].resumeTime<.033&&(e[o+1].appendInPlace=!1,e[o+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${s}`));const d=xb(s.resumeOffset)?s.resumeOffset:s.duration;i+=d})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,r=e.startTime+e.resumptionOffset;return Math.abs(n-r)>Yk?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${r}`),!1):t?!Object.keys(t).some(r=>{const i=t[r].details,a=i.edge;if(n>=a)return this.log(`"${e.identifier}" resumption ${n} past ${r} playlist end ${a}`),!1;const s=SE(null,i.fragments,n);if(!s)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${r} playlist (${i.fragStart}-${i.fragmentEnd})`),!0;const o="audio"===r?.175:0;return!(Math.abs(s.start-n)<Yk+o||Math.abs(s.end-n)<Yk+o||(this.log(`"${e.identifier}" resumption ${n} not aligned with ${r} fragment bounds (${s.start}-${s.end} sn: ${s.sn} cc: ${s.cc})`),0))}):(this.log(`"${e.identifier}" resumption ${n} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,r=!1,i=!1;e.assetList.forEach((e,a)=>{const s=t+n;e.startOffset=n,e.timelineStart=s,r||(r=null===e.duration),i||(i=!!e.error);const o=e.error?0:e.duration||0;n+=o}),e.duration=r&&!i?Math.max(n,e.duration):n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function iT(e){return`[${e.event?'"'+e.event.identifier+'"':"primary"}: ${e.start.toFixed(2)}-${e.end.toFixed(2)}]`}class aT{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let r;try{r=Zk(n,this.hls.sessionId,e.baseUrl)}catch(t){const r=this.assignAssetListError(e,Tb.ASSET_LIST_LOAD_ERROR,t,n);return void this.hls.trigger(_b.ERROR,r)}t&&"data:"!==r.protocol&&r.searchParams.set("_HLS_start_offset",""+t);const i=this.hls.config,a=new(0,i.loader)(i),s={responseType:"json",url:r.href},o=i.interstitialAssetListLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(t,n,r,i)=>{const a=t.data,s=null==a?void 0:a.ASSETS;if(!Array.isArray(s)){const t=this.assignAssetListError(e,Tb.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),r.url,n,i);return void this.hls.trigger(_b.ERROR,t)}e.assetListResponse=a,this.hls.trigger(_b.ASSET_LIST_LOADED,{event:e,assetListResponse:a,networkDetails:i})},onError:(t,n,r,i)=>{const a=this.assignAssetListError(e,Tb.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${t.code} ${t.text} (${n.url})`),n.url,i,r);this.hls.trigger(_b.ERROR,a)},onTimeout:(t,n,r)=>{const i=this.assignAssetListError(e,Tb.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${n.url})`),n.url,t,r);this.hls.trigger(_b.ERROR,i)}};return a.load(s,l,c),this.hls.trigger(_b.ASSET_LIST_LOADING,{event:e}),a}assignAssetListError(e,t,n,r,i,a){return e.error=n,{type:kb.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:r,error:n,networkDetails:a,stats:i}}}function sT(e){null==e||e.play().catch(()=>{})}class oT{constructor(e){this.buffered=void 0;const t=(t,n,r)=>{if((n>>>=0)>r-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${r})`);return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}const lT={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},cT=e=>String.fromCharCode(lT[e]||e),uT=15,dT=100,hT={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},fT={17:2,18:4,21:6,22:8,23:10,19:13,20:15},pT={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},mT={25:2,26:4,29:6,30:8,31:10,27:13,28:15},gT=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class vT{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"==typeof t?t():t;Wb.log(`${this.time} [${e}] ${n}`)}}}const bT=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class yT{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class ET{constructor(){this.uchar=" ",this.penState=new yT}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class xT{constructor(e){this.chars=[],this.pos=0,this.currPenState=new yT,this.cueStartTime=null,this.logger=void 0;for(let e=0;e<dT;e++)this.chars.push(new ET);this.logger=e}equals(e){for(let t=0;t<dT;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<dT;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<dT;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>dT&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=dT)}moveCursor(e){const t=this.pos+e;if(e>1)for(let e=this.pos+1;e<t+1;e++)this.chars[e].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=cT(e);this.pos>=dT?this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<dT;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<dT;n++){const r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class ST{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<uT;t++)this.rows.push(new xT(e));this.logger=e}reset(){for(let e=0;e<uT;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<uT;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<uT;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<uT;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+hE(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let e=0;e<uT;e++)this.rows[e].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[e].cueStartTime,i=this.logger.time;if(null!==r&&null!==i&&r<i)for(let r=0;r<this.nrRollUpRows;r++)this.rows[t-this.nrRollUpRows+r+1].copy(n.rows[e+r])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,r=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+hE(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let n=0;n<uT;n++){const i=this.rows[n].getTextString();i&&(r=n+1,e?t.push("Row "+r+": '"+i+"'"):t.push(i.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class wT{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new ST(n),this.nonDisplayedMemory=new ST(n),this.lastOutputScreen=new ST(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+hE(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class kT{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const r=this.logger=new vT;this.channels=[null,new wT(e,t,r),new wT(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let e=0;e<t.length;e+=2){const n=127&t[e],r=127&t[e+1];let i=!1,a=null;if(0===n&&0===r)continue;this.logger.log(3,()=>"["+bT([t[e],t[e+1]])+"] -> ("+bT([n,r])+")");const s=this.cmdHistory;if(n>=16&&n<=31){if(_T(n,r,s)){TT(null,null,s),this.logger.log(3,()=>"Repeated command ("+bT([n,r])+") is dropped");continue}TT(n,r,this.cmdHistory),i=this.parseCmd(n,r),i||(i=this.parseMidrow(n,r)),i||(i=this.parsePAC(n,r)),i||(i=this.parseBackgroundAttributes(n,r))}else TT(null,null,s);if(!i&&(a=this.parseChars(n,r),a)){const e=this.currentChannel;e&&e>0?this.channels[e].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||a||this.logger.log(2,()=>"Couldn't parse cleaned data "+bT([n,r])+" orig: "+bT([t[e],t[e+1]]))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;const n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+bT([e,t])+")"),!0)}return!1}parsePAC(e,t){let n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?hT[e]:pT[e]:1===r?fT[e]:mT[e];const i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,t)),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=!(1&~n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(e,t){let n,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,()=>"Special char '"+cT(e)+"' in channel "+n),r=[e]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+bT(r).join(",")),r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;let n;const r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=gT[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(r),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}TT(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function TT(e,t,n){n.a=e,n.b=t}function _T(e,t,n){return n.a===e&&n.b===t}var AT=function(){if(null!=mx&&mx.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function i(e,...t){let n=1;for(;n<arguments.length;n++){const t=arguments[n];for(const n in t)e[n]=t[n]}return e}function a(t,a,s){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let c="",u=!1,d=t,h=a,f=s,p=null,m="",g=!0,v="auto",b="start",y=50,E="middle",x=50,S="middle";Object.defineProperty(o,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return m},set:function(t){const r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");m=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{get:function(){return b},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},l,{get:function(){return E},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return x},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");x=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return S},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class RT{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function LT(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class CT{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function PT(e,t,n,r){const i=r?e.split(r):[e];for(const e in i){if("string"!=typeof i[e])continue;const r=i[e].split(n);2===r.length&&t(r[0],r[1])}}const IT=new AT(0,0,""),NT="middle"===IT.align?"middle":"center";function DT(e,t,n){const r=e;function i(){const t=LT(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=i(),a(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.slice(3),a(),t.endTime=i(),a(),function(e,t){const r=new CT;PT(e,function(e,t){let i;switch(e){case"region":for(let i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",NT,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",NT,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",NT,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");let i=r.get("line","auto");"auto"===i&&-1===IT.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",NT);let a=r.get("position","auto");"auto"===a&&50===IT.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function OT(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class MT{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new RT,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=OT(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const r=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),r}function r(e){PT(e,function(e,t){},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const r=e.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let i=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(i?i=!1:e=n(),t.state){case"HEADER":/:/.test(e)?r(e):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new AT(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{DT(e,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(i=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const FT=/\r\n|\n\r|\n|\r/g,BT=function(e,t,n=0){return e.slice(n,n+t.length)===t};function UT(e,t,n){return Kk(e.toString())+Kk(t.toString())+Kk(n)}const jT="stpp.ttml.im1t",$T=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,zT=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,VT={left:"start",center:"center",right:"end",start:"start",end:"end"};function GT(e,t,n,r){const i=ky(new Uint8Array(e),["mdat"]);if(0===i.length)return void r(new Error("Could not parse IMSC1 mdat"));const a=i.map(e=>qb(e)),s=function(e,t,n=1,r=!1){return Lw(e,t,1/n,r)}(t.baseTime,1,t.timescale);try{a.forEach(e=>n(function(e,t){const n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(r).reduce((e,t)=>(e[t]=n.getAttribute(`ttp:${t}`)||r[t],e),{}),a="preserve"!==n.getAttribute("xml:space"),s=WT(HT(n,"styling","style")),o=WT(HT(n,"layout","region")),l=HT(n,"body","[begin]");return[].map.call(l,e=>{const n=KT(e,a);if(!n||!e.hasAttribute("begin"))return null;const r=XT(e.getAttribute("begin"),i),l=XT(e.getAttribute("dur"),i);let c=XT(e.getAttribute("end"),i);if(null===r)throw qT(e);if(null===c){if(null===l)throw qT(e);c=r+l}const u=new AT(r-t,c-t,n);u.id=UT(u.startTime,u.endTime,u.text);const d=function(e,t,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return a&&n.hasOwnProperty(a)&&(i=n[a]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((n,a)=>{const s=YT(t,r,a)||YT(e,r,a)||YT(i,r,a);return s&&(n[a]=s),n},{})}(o[e.getAttribute("region")],s[e.getAttribute("style")],s),{textAlign:h}=d;if(h){const e=VT[h];e&&(u.lineAlign=e),u.align=h}return Fb(u,d),u}).filter(e=>null!==e)}(e,s)))}catch(e){r(e)}}function HT(e,t,n){const r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function WT(e){return e.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function KT(e,t){return[].slice.call(e.childNodes).reduce((e,n,r)=>{var i;return"br"===n.nodeName&&r?e+"\n":null!=(i=n.childNodes)&&i.length?KT(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent},"")}function YT(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function qT(e){return new Error(`Could not parse ttml timestamp ${e}`)}function XT(e,t){if(!e)return null;let n=LT(e);return null===n&&($T.test(e)?n=function(e,t){const n=$T.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}(e,t):zT.test(e)&&(n=function(e,t){const n=zT.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}(e,t))),n}class QT{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}function JT(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function ZT(e,t){return!!e&&e.kind===JT(t)&&Jw(t,e)}function e_(e,t,n,r){return Math.min(t,r)-Math.max(e,n)}const t_=/\s/,n_={newCue(e,t,n,r){const i=[];let a,s,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<r.rows.length;h++)if(a=r.rows[h],o=!0,l=0,c="",!a.isEmpty()){var d;for(let e=0;e<a.chars.length;e++)t_.test(a.chars[e].uchar)&&o?l++:(c+=a.chars[e].uchar,o=!1);a.cueStartTime=t,t===n&&(n+=1e-4),l>=16?l--:l++;const r=OT(c.trim()),f=UT(t,n,r);null!=e&&null!=(d=e.cues)&&d.getCueById(f)||(s=new u(t,n,r),s.id=f,s.line=h+1,s.align="left",s.position=10+Math.min(80,10*Math.floor(8*l/32)),i.push(s))}return e&&i.length&&(i.sort((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line),i.forEach(t=>Vk(e,t))),i}},r_=/(\d+)-(\d+)\/(\d+)/;class i_{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||a_,this.controller=new self.AbortController,this.stats=new sy}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const i=function(e,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(Fb({},e.headers))};return e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),n}(e,this.controller.signal),a="arraybuffer"===e.responseType,s=a?"byteLength":"length",{maxTimeToFirstByteMs:o,maxLoadTimeMs:l}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),t.timeout=o&&xb(o)?o:l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},t.timeout),(Gw(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(n=>{var i;this.response=this.loader=n;const s=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},l-(s-r.loading.start)),!n.ok){const{status:e,statusText:t}=n;throw new s_(t||"fetch, bad network response",e,n)}r.loading.first=s,r.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=r_.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(xb(e))return e}const n=e.get("Content-Length");if(n)return parseInt(n)}(n.headers)||r.total;const o=null==(i=this.callbacks)?void 0:i.onProgress;return o&&xb(t.highWaterMark)?this.loadProgressively(n,r,e,t.highWaterMark,o):a?n.arrayBuffer():"json"===e.responseType?n.json():n.text()}).then(n=>{var i,a;const o=this.response;if(!o)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const l=n[s];l&&(r.loaded=r.total=l);const c={url:o.url,data:n,code:o.status},u=null==(i=this.callbacks)?void 0:i.onProgress;u&&!xb(t.highWaterMark)&&u(r,e,n,o),null==(a=this.callbacks)||a.onSuccess(c,r,e,o)}).catch(t=>{var n;if(self.clearTimeout(this.requestTimeout),r.aborted)return;const i=t&&t.code||0,a=t?t.message:null;null==(n=this.callbacks)||n.onError({code:i,text:a},e,t?t.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,r=0,i){const a=new SS,s=e.body.getReader(),o=()=>s.read().then(s=>{if(s.done)return a.dataLength&&i(t,n,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const l=s.value,c=l.length;return t.loaded+=c,c<r||a.dataLength?(a.push(l),a.dataLength>=r&&i(t,n,a.flush().buffer,e)):i(t,n,l.buffer,e),o()}).catch(()=>Promise.reject());return o()}}function a_(e,t){return new self.Request(e.url,t)}class s_ extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const o_=/^age:\s*[\d.]+\s*$/im;class l_{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new sy,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(this.loader===n&&!this.stats.aborted)return i(n,t.url)}).catch(e=>{if(this.loader===n&&!this.stats.aborted)return n.open("GET",t.url,!0),i(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(e=>{var i;null==(i=this.callbacks)||i.onError({code:n.status,text:e.message},t,n,r)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:a}=n.loadPolicy;if(r)for(const t in r)e.setRequestHeader(t,r[t]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=i&&xb(i)?i:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,i=this.config;if(!n.aborted&&r>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===r)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const r=t.status,l="text"===t.responseType?t.responseText:null;if(r>=200&&r<300){const i=null!=l?l:t.response;if(null!=i){var a,s;n.loading.end=Math.max(self.performance.now(),n.loading.first);const o="arraybuffer"===t.responseType?i.byteLength:i.length;n.loaded=n.total=o,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first);const l=null==(a=this.callbacks)?void 0:a.onProgress;l&&l(n,e,i,t);const c={url:t.responseURL,data:i,code:r};return void(null==(s=this.callbacks)||s.onSuccess(c,n,e,t))}}const c=i.loadPolicy.errorRetry;var o;CE(c,n.retry,!1,{url:e.url,data:void 0,code:r})?this.retry(c):(Wb.error(`${r} while loading ${e.url}`),null==(o=this.callbacks)||o.onError({code:r,text:t.statusText},e,t,n))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(CE(e,this.stats.retry,!0))this.retry(e);else{var t;Wb.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=RE(e,n.retry),n.retry++,Wb.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&o_.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const c_=Ub(Ub({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:6e7,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:l_,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class extends jb{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.bwEstimator=void 0,this._abandonRulesCheck=e=>{var t;const{fragCurrent:n,partCurrent:r,hls:i}=this,{autoLevelEnabled:a,media:s}=i;if(!n||!s)return;const o=performance.now(),l=r?r.stats:n.stats,c=r?r.duration:n.duration,u=o-l.loading.start,d=i.minAutoLevel,h=n.level,f=this._nextAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||h<=d)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!a)return;const p=f>-1&&f!==h,m=!!e||p;if(!m&&(s.paused||!s.playbackRate||!s.readyState))return;const g=i.mainForwardBufferInfo;if(!m&&null===g)return;const v=this.bwEstimator.getEstimateTTFB(),b=Math.abs(s.playbackRate);if(u<=Math.max(v,c/(2*b)*1e3))return;const y=g?g.len/b:0,E=l.loading.first?l.loading.first-l.loading.start:-1,x=l.loaded&&E>-1,S=this.getBwEstimate(),w=i.levels,k=w[h],T=Math.max(l.loaded,Math.round(c*(n.bitrate||k.averageBitrate)/8));let _=x?u-E:u;_<1&&x&&(_=Math.min(u,8*l.loaded/S));const A=x?1e3*l.loaded/_:0,R=v/1e3,L=A?(T-l.loaded)/A:8*T/S+R;if(L<=y)return;const C=A?8*A:S,P=!0===(null==(t=(null==e?void 0:e.details)||this.hls.latestLevelDetails)?void 0:t.live),I=this.hls.config.abrBandWidthUpFactor;let N,D=Number.POSITIVE_INFINITY;for(N=h-1;N>d;N--){const e=w[N].maxBitrate,t=!w[N].details||P;if(D=this.getTimeToLoadFrag(R,C,c*e,t),D<Math.min(y,c+R))break}if(D>=L)return;if(D>10*c)return;x?this.bwEstimator.sample(u-Math.min(v,E),l.loaded):this.bwEstimator.sampleTTFB(u);const O=w[N].maxBitrate;this.getBwEstimate()*I>O&&this.resetEstimator(O);const M=this.findBestLevel(O,d,N,0,y,1,1);M>-1&&(N=M),this.warn(`Fragment ${n.sn}${r?" part "+r.index:""} of level ${h} is loading too slowly;\n      Fragment duration: ${n.duration.toFixed(3)}\n      Time to underbuffer: ${y.toFixed(3)} s\n      Estimated load time for current fragment: ${L.toFixed(3)} s\n      Estimated load time for down switch fragment: ${D.toFixed(3)} s\n      TTFB estimate: ${0|E} ms\n      Current BW estimate: ${xb(S)?0|S:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${N} @ ${0|O} bps`),i.nextLoadLevel=i.nextAutoLevel=N,this.clearTimer();const F=()=>{if(this.clearTimer(),this.fragCurrent===n&&this.hls.loadLevel===N&&N>0){const e=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${N>0?"and switching down":""}\n      Fragment duration: ${n.duration.toFixed(3)} s\n      Time to underbuffer: ${e.toFixed(3)} s`),n.abortRequests(),this.fragCurrent=this.partCurrent=null,N>d){let t=this.findBestLevel(this.hls.levels[d].bitrate,d,N,0,e,1,1);-1===t&&(t=d),this.hls.nextLoadLevel=this.hls.nextAutoLevel=t,this.resetEstimator(this.hls.levels[t].bitrate)}}};p||L>2*D?F():this.timer=self.setInterval(F,1e3*D),i.trigger(_b.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:r,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Ob(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.FRAG_LOADING,this.onFragLoading,this),e.on(_b.FRAG_LOADED,this.onFragLoaded,this),e.on(_b.FRAG_BUFFERED,this.onFragBuffered,this),e.on(_b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(_b.LEVEL_LOADED,this.onLevelLoaded,this),e.on(_b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(_b.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(_b.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.FRAG_LOADING,this.onFragLoading,this),e.off(_b.FRAG_LOADED,this.onFragLoaded,this),e.off(_b.FRAG_BUFFERED,this.onFragBuffered,this),e.off(_b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(_b.LEVEL_LOADED,this.onLevelLoaded,this),e.off(_b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(_b.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(_b.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;var r;this.ignoreFragment(n)||(n.bitrateTest||(this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null),this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100))}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Tb.BUFFER_ADD_CODEC_ERROR:case Tb.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Tb.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:n,partCurrent:r}=this;if(e&&n&&e.sn===n.sn&&e.level===n.level){const t=performance.now(),n=r?r.stats:e.stats,i=t-n.loading.start,a=n.loading.first?n.loading.first-n.loading.start:-1;if(n.loaded&&a>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,a),n.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,n,r){return e+n/t+(r?e+this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const n=this.hls.config,{loading:r}=t.stats,i=r.end-r.first;xb(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const r=n?n.stats:t.stats;if(t.type===Pb&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=n?n.duration:t.duration,i=this.hls.levels[t.level],a=(i.loaded?i.loaded.bytes:0)+r.loaded,s=(i.loaded?i.loaded.duration:0)+e;i.loaded={bytes:a,duration:s},i.realBitrate=Math.round(8*a/s)}if(t.bitrateTest){const e={stats:r,frag:t,part:n,id:t.type};this.onFragBuffered(_b.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,i=null!=r&&r.stats.loaded?r.stats:n.stats;if(i.aborted)return;if(this.ignoreFragment(n))return;const a=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Pb||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,i=this.findBestLevel(n,t,e,0,r,1,1);if(i>-1)return i;const a=this.hls.firstLevel,s=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${s}`),s}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&n&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;const r=t&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,r)&&t[e].loadError<=t[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:r,config:i,minAutoLevel:a}=n,s=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let c=i.abrBandWidthFactor,u=i.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(o,a,r,l,0,c,u);if(e>=0)return this.rebufferNotice=-1,e}let d=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;e&&(d=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-e,this.info(`bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*d)} ms`),c=u=1)}const h=this.findBestLevel(o,a,r,l,d,c,u);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`)),h>-1)return h;const f=n.levels[a],p=n.loadLevelObj;return p&&(null==f?void 0:f.bitrate)<p.bitrate?a:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,r,i,a,s){var o;const l=r+i,c=this.lastLoadedFragLevel,u=-1===c?this.hls.firstLevel:c,{fragCurrent:d,partCurrent:h}=this,{levels:f,allAudioTracks:p,loadLevel:m,config:g}=this.hls;if(1===f.length)return 0;const v=f[u],b=!(null==(o=this.hls.latestLevelDetails)||!o.live),y=-1===m||-1===c;let E,x="SDR",S=(null==v?void 0:v.frameRate)||0;const{audioPreference:w,videoPreference:k}=g,T=this.audioTracksByGroup||(this.audioTracksByGroup=pE(p));let _=-1;if(y){if(-1!==this.firstSelection)return this.firstSelection;const r=this.codecTiers||(this.codecTiers=function(e,t,n,r){return e.slice(n,r+1).reduce((e,n,r)=>{if(!n.codecSet)return e;const i=n.audioGroups;let a=e[n.codecSet];a||(e[n.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:r,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,n.bitrate);const s=Math.min(n.height,n.width);return a.minHeight=Math.min(a.minHeight,s),a.minFramerate=Math.min(a.minFramerate,n.frameRate),a.minIndex=Math.min(a.minIndex,r),a.maxScore=Math.max(a.maxScore,n.score),a.fragmentError+=n.fragmentError,a.videoRanges[n.videoRange]=(a.videoRanges[n.videoRange]||0)+1,i&&i.forEach(e=>{if(!e)return;const n=t.groups[e];n&&(a.hasDefaultAudio=a.hasDefaultAudio||t.hasDefaultAudio?n.hasDefault:n.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(n.channels).forEach(e=>{a.channels[e]=(a.channels[e]||0)+n.channels[e]}))}),e},{})}(f,T,t,n)),i=function(e,t,n,r,i){const a=Object.keys(e),s=null==r?void 0:r.channels,o=null==r?void 0:r.audioCodec,l=null==i?void 0:i.videoCodec,c=s&&2===parseInt(s);let u=!1,d=!1,h=1/0,f=1/0,p=1/0,m=1/0,g=0,v=[];const{preferHDR:b,allowedVideoRanges:y}=function(e,t){let n=!1,r=[];if(e&&(n="SDR"!==e,r=[e]),t){r=t.allowedVideoRanges||oE.slice(0);const e="SDR"!==r.join("")&&!t.videoCodec;n=void 0!==t.preferHDR?t.preferHDR:e&&function(){if("function"==typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}(t,i);for(let t=a.length;t--;){const n=e[a[t]];u||(u=n.channels[2]>0),h=Math.min(h,n.minHeight),f=Math.min(f,n.minFramerate),p=Math.min(p,n.minBitrate),y.filter(e=>n.videoRanges[e]>0).length>0&&(d=!0)}h=xb(h)?h:0,f=xb(f)?f:0;const E=Math.max(1080,h),x=Math.max(30,f);p=xb(p)?p:n,n=Math.max(p,n),d||(t=void 0);const S=a.length>1;return{codecSet:a.reduce((t,r)=>{const i=e[r];if(r===t)return t;if(v=d?y.filter(e=>i.videoRanges[e]>0):[],S){if(i.minBitrate>n)return fE(r,`min bitrate of ${i.minBitrate} > current estimate of ${n}`),t;if(!i.hasDefaultAudio)return fE(r,"no renditions with default or auto-select sound found"),t;if(o&&r.indexOf(o.substring(0,4))%5!=0)return fE(r,`audio codec preference "${o}" not found`),t;if(s&&!c){if(!i.channels[s])return fE(r,`no renditions with ${s} channel sound found (channels options: ${Object.keys(i.channels)})`),t}else if((!o||c)&&u&&0===i.channels[2])return fE(r,"no renditions with stereo sound found"),t;if(i.minHeight>E)return fE(r,`min resolution of ${i.minHeight} > maximum of ${E}`),t;if(i.minFramerate>x)return fE(r,`min framerate of ${i.minFramerate} > maximum of ${x}`),t;if(!v.some(e=>i.videoRanges[e]>0))return fE(r,`no variants with VIDEO-RANGE of ${hE(v)} found`),t;if(l&&r.indexOf(l.substring(0,4))%5!=0)return fE(r,`video codec preference "${l}" not found`),t;if(i.maxScore<g)return fE(r,`max score of ${i.maxScore} < selected max of ${g}`),t}return t&&(Ky(r)>=Ky(t)||i.fragmentError>e[t].fragmentError)?t:(m=i.minIndex,g=i.maxScore,r)},void 0),videoRanges:v,preferHDR:b,minFramerate:f,minBitrate:p,minIndex:m}}(r,x,e,w,k),{codecSet:a,videoRanges:s,minFramerate:o,minBitrate:l,minIndex:c,preferHDR:u}=i;_=c,E=a,x=u?s[s.length-1]:s[0],S=o,e=Math.max(e,l),this.log(`picked start tier ${hE(i)}`)}else E=null==v?void 0:v.codecSet,x=null==v?void 0:v.videoRange;const A=h?h.duration:d?d.duration:0,R=this.bwEstimator.getEstimateTTFB()/1e3,L=[];for(let o=n;o>=t;o--){var C;const t=f[o],d=o>u;if(!t)continue;if(g.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const n=navigator.mediaCapabilities;"function"==typeof(null==n?void 0:n.decodingInfo)&&(iE(t,T,x,S,e,w)||Oy(t.videoCodec))?(t.supportedPromise=aE(t,T,n),t.supportedPromise.then(e=>{if(!this.hls)return;t.supportedResult=e;const n=this.hls.levels,r=n.indexOf(t);e.error?this.warn(`MediaCapabilities decodingInfo error: "${e.error}" for level ${r} ${hE(e)}`):e.supported||(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${r} ${hE(e)}`),r>-1&&n.length>1&&(this.log(`Removing unsupported level ${r}`),this.hls.removeLevel(r),-1===this.hls.loadLevel&&(this.hls.nextLoadLevel=0)))})):t.supportedResult=tE}if((E&&t.codecSet!==E||x&&t.videoRange!==x||d&&S>t.frameRate||!d&&S>0&&S<t.frameRate||t.supportedResult&&(null==(C=t.supportedResult.decodingInfoResults)||!C[0].smooth))&&(!y||o!==_)){L.push(o);continue}const p=t.details,v=(h?null==p?void 0:p.partTarget:null==p?void 0:p.averagetargetduration)||A;let k;k=d?s*e:a*e;const P=A&&r>=2*A&&0===i?t.averageBitrate:t.maxBitrate,I=this.getTimeToLoadFrag(R,k,P*v,void 0===p);if(k>=P&&(o===c||0===t.loadError&&0===t.fragmentError)&&(I<=R||!xb(I)||b&&!this.bitrateTestDelay||I<l)){const e=this.forcedAutoLevel;return o===m||-1!==e&&e===m||(L.length&&this.trace(`Skipped level(s) ${L.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${f[L[0]].codecs}" ${f[L[0]].videoRange}; not compatible with "${E}" ${x}`),this.info(`switch candidate:${u}->${o} adjustedbw(${Math.round(k)})-bitrate=${Math.round(k-P)} ttfb:${R.toFixed(1)} avgDuration:${v.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${I.toFixed(1)} firstSelection:${y} codecSet:${t.codecSet} videoRange:${t.videoRange} hls.loadLevel:${m}`)),y&&(this.firstSelection=o),o}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}},bufferController:class extends jb{constructor(e,t){var n;super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=e=>{var t;this.hls&&"open"===(null==(t=this.mediaSource)?void 0:t.readyState)&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=e=>{const{media:t,mediaSource:n}=this;e&&this.log("Media source opened"),t&&n&&(n.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(_b.MEDIA_ATTACHED,{media:t,mediaSource:n}),null!==this.mediaSource&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&this.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=(n=Kb(e.config.preferManagedMediaSource),"undefined"!=typeof self&&n===self.ManagedMediaSource),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_b.BUFFER_RESET,this.onBufferReset,this),e.on(_b.BUFFER_APPENDING,this.onBufferAppending,this),e.on(_b.BUFFER_CODECS,this.onBufferCodecs,this),e.on(_b.BUFFER_EOS,this.onBufferEos,this),e.on(_b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(_b.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(_b.FRAG_PARSED,this.onFragParsed,this),e.on(_b.FRAG_CHANGED,this.onFragChanged,this),e.on(_b.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_b.BUFFER_RESET,this.onBufferReset,this),e.off(_b.BUFFER_APPENDING,this.onBufferAppending,this),e.off(_b.BUFFER_CODECS,this.onBufferCodecs,this),e.off(_b.BUFFER_EOS,this.onBufferEos,this),e.off(_b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(_b.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(_b.FRAG_PARSED,this.onFragParsed,this),e.off(_b.FRAG_CHANGED,this.onFragChanged,this),e.off(_b.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const e=this.isUpdating();e||this.operationQueue.removeBlockers();const t=this.isQueued();(e||t)&&this.warn(`Transfering MediaSource with${t?" operations in queue":""}${e?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===t?Fb(n,r.tracks):this.sourceBuffers.forEach(e=>{const[t]=e;t&&(n[t]=Fb({},this.tracks[t]),this.removeBuffer(t)),e[0]=e[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){this.sourceBuffers=[[null,null],[null,null]],this.tracks={},this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),null!=(n=this.transferData)&&n.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media,r=Kb(this.appendSource);if(this.transferData=this.overrides=void 0,n&&r){const e=!!t.mediaSource;(e||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const i=this.mediaSource=t.mediaSource||new r;if(this.assignMediaSource(i),e)this._objectUrl=n.src,this.attachTransferred();else{const e=this._objectUrl=self.URL.createObjectURL(i);if(this.appendSource)try{n.removeAttribute("src");const t=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||t&&i instanceof t,rk(n),function(e,t){const n=self.document.createElement("source");n.type="video/mp4",n.src=t,e.appendChild(n)}(n,e),n.load()}catch(t){n.src=e}else n.src=e}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${(null==(t=this.transferData)?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${null==(n=e.constructor)?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,r=t.tracks,i=r?Object.keys(r):null,a=i?i.length:0,s=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(r&&i&&a){if(!this.tracksReady)return this.hls.config.startFragPrefetch=!0,void this.log("attachTransferred: waiting for SourceBuffer track info");if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})\nrequired tracks: ${hE(n,(e,t)=>"initSegment"===e?void 0:t)};\ntransfer tracks: ${hE(r,(e,t)=>"initSegment"===e?void 0:t)}}`),!Yb(r,n)){t.mediaSource=null,t.tracks=void 0;const i=e.currentTime,a=this.details,s=Math.max(i,(null==a?void 0:a.fragments[0].start)||0);return s-i>1?void this.log(`attachTransferred: waiting for playback to reach new tracks start time ${i} -> ${s}`):(this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(n)}") start time: ${s} currentTime: ${i}`),this.onMediaDetaching(_b.MEDIA_DETACHING,{}),this.onMediaAttaching(_b.MEDIA_ATTACHING,t),void(e.currentTime=s))}this.transferData=void 0,i.forEach(e=>{const t=e,n=r[t];if(n){const e=n.buffer;if(e){const r=this.fragmentTracker,i=n.id;if(r.hasFragments(i)||r.hasParts(i)){const n=JE.getBuffered(e);r.detectEvictedFragments(t,n,i,null,!0)}const a=ik(t),s=[t,e];this.sourceBuffers[a]=s,e.updating&&this.operationQueue&&this.operationQueue.prependBlocker(t),this.trackSourceBuffer(t,n)}}}),s(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),s()}get mediaSourceOpenOrEnded(){var e;const t=null==(e=this.mediaSource)?void 0:e.readyState;return"open"===t||"ended"===t}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:i,_objectUrl:a}=this;if(i){if(this.log("media source "+(n?"transferring":"detaching")),n)this.sourceBuffers.forEach(([e])=>{e&&this.removeBuffer(e)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const e="open"===i.readyState;try{const t=i.sourceBuffers;for(let n=t.length;n--;)e&&t[n].abort(),i.removeSourceBuffer(t[n]);e&&i.endOfStream()}catch(e){this.warn(`onMediaDetaching: ${e.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}i.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("sourceended",this._onMediaSourceEnded),i.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(i.removeEventListener("startstreaming",this._onStartStreaming),i.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),n||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(r.removeAttribute("src"),this.appendSource&&rk(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(_b.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=null==(t=this.tracks[e])?void 0:t.buffer;if(this.removeBuffer(e),n)try{var r;null!=(r=this.mediaSource)&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(t){this.warn(`onBufferReset ${e}`,t)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[ik(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new Zw(this.tracks)}onBufferCodecs(e,t){const n=this.tracks,r=Object.keys(t);this.log(`BUFFER_CODECS: "${r}" (current SB count ${this.sourceBufferCount})`);const i="audiovideo"in t&&(n.audio||n.video)||n.audiovideo&&("audio"in t||"video"in t),a=!i&&this.sourceBufferCount&&this.media&&r.some(e=>!n[e]);i||a?this.warn(`Unsupported transition between "${Object.keys(n)}" and "${r}" SourceBuffers`):(r.forEach(e=>{var r,i,a;const s=t[e],{id:o,codec:l,levelCodec:c,container:u,metadata:d,supplemental:h}=s;let f=n[e];const p=null==(r=this.transferData)||null==(i=r.tracks)?void 0:i[e],m=null!=p&&p.buffer?p:f,g=(null==m?void 0:m.pendingCodec)||(null==m?void 0:m.codec),v=null==m?void 0:m.levelCodec;f||(f=n[e]={buffer:void 0,listeners:[],codec:l,supplemental:h,container:u,levelCodec:c,metadata:d,id:o});const b=Qy(g,v),y=null==b?void 0:b.replace(ek,"$1");let E=Qy(l,c);const x=null==(a=E)?void 0:a.replace(ek,"$1");E&&b&&y!==x&&("audio"===e.slice(0,5)&&(E=Xy(E,this.appendSource)),this.log(`switching codec ${g} to ${E}`),E!==(f.pendingCodec||f.codec)&&(f.pendingCodec=E),f.container=u,this.appendChangeType(e,u,E))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),this.sourceBufferCount||this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const r=`${t};codecs=${n}`,i={label:`change-type=${r}`,execute:()=>{const i=this.tracks[e];if(i){const a=i.buffer;null!=a&&a.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),a.changeType(r),i.codec=n,i.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};this.append(i,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,r=n+.05*e.duration;if(!0===(null==(t=this.fragmentTracker.getAppendedFrag(n,Pb))?void 0:t.gap))return;const i={label:"block-audio",execute:()=>{var e;const t=this.tracks.video;(this.lastVideoAppendEnd>r||null!=t&&t.buffer&&JE.isBuffered(t.buffer,r)||!0===(null==(e=this.fragmentTracker.getAppendedFrag(r,Pb))?void 0:e.gap))&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn("Error executing block-audio operation",e)}};this.blockedAudioAppend={op:i,frag:e},this.append(i,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:r,type:i,parent:a,frag:s,part:o,chunkMeta:l}=t,c=l.buffering[i],u=s.sn,d=self.performance.now();c.start=d;const h=s.stats.buffering,f=o?o.stats.buffering:null;0===h.start&&(h.start=d),f&&0===f.start&&(f.start=d);const p=n.audio;let m=!1;"audio"===i&&"audio/mpeg"===(null==p?void 0:p.container)&&(m=!this.lastMpegAudioChunk||1===l.id||this.lastMpegAudioChunk.sn!==l.sn,this.lastMpegAudioChunk=l);const g=this.tracks.video,v=null==g?void 0:g.buffer;if(v&&"initSegment"!==u){const e=o||s,t=this.blockedAudioAppend;if("audio"!==i||"main"===a||this.blockedAudioAppend){if("video"===i){const n=e.end;if(t){const e=t.frag.start;(n>e||n<this.lastVideoAppendEnd||JE.isBuffered(v,e))&&this.unblockAudio()}this.lastVideoAppendEnd=n}}else{const t=e.start+.05*e.duration,n=v.buffered,r=this.currentOp("video");n.length||r?!r&&!JE.isBuffered(v,t)&&this.lastVideoAppendEnd<t&&this.blockAudio(e):this.blockAudio(e)}}const b=(o||s).start,y={label:`append-${i}`,execute:()=>{if(c.executeStart=self.performance.now(),m){const e=this.tracks[i];if(e){const t=e.buffer;if(t){const e=b-t.timestampOffset;Math.abs(e)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${b} (delta: ${e}) sn: ${u})`),t.timestampOffset=b)}}}this.appendExecutor(r,i)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();c.executeEnd=c.end=e,0===h.first&&(h.first=e),f&&0===f.first&&(f.first=e);const t={};this.sourceBuffers.forEach(([e,n])=>{e&&(t[e]=JE.getBuffered(n))}),this.appendErrors[i]=0,"audio"===i||"video"===i?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(_b.BUFFER_APPENDED,{type:i,frag:s,part:o,chunkMeta:l,parent:s.type,timeRanges:t})},onError:e=>{var t;const n={type:kb.MEDIA_ERROR,parent:s.type,details:Tb.BUFFER_APPEND_ERROR,sourceBufferName:i,frag:s,part:o,chunkMeta:l,error:e,err:e,fatal:!1},r=null==(t=this.media)?void 0:t.error;if(e.code===DOMException.QUOTA_EXCEEDED_ERR)n.details=Tb.BUFFER_FULL_ERROR;else if(e.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!r)n.errorAction=PE(!0);else if(e.name===tk&&0===this.sourceBufferCount)n.errorAction=PE(!0);else{const e=++this.appendErrors[i];this.warn(`Failed ${e}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${i}" sourceBuffer (${r||"no media error"})`),(e>=this.hls.config.appendErrorMaxRetry||r)&&(n.fatal=!0)}this.hls.trigger(_b.ERROR,n)}};this.append(y,i,this.isPending(this.tracks[i]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(_b.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,t){const{type:n,startOffset:r,endOffset:i}=t;n?this.append(this.getFlushOp(n,r,i),n):this.sourceBuffers.forEach(([e])=>{e&&this.append(this.getFlushOp(e,r,i),e)})}onFragParsed(e,t){const{frag:n,part:r}=t,i=[],a=r?r.elementaryStreams:n.elementaryStreams;a[cy]?i.push("audiovideo"):(a[oy]&&i.push("audio"),a[ly]&&i.push("video")),0===i.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(()=>{const e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);const t=r?r.stats:n.stats;this.hls.trigger(_b.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})},i).catch(e=>{this.warn(`Fragment buffered callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t,n;return e&&(!(null!=(t=this.tracks[e])&&t.ended)||(null==(n=this.tracks[e])?void 0:n.ending))})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([e])=>{if(e){const n=this.tracks[e];t.type&&t.type!==e||(n.ending=!0,n.ended||(n.ended=!0,this.log(`${e} buffer reached EOS`)))}});const r=!1!==(null==(n=this.overrides)?void 0:n.endOfStream);this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t;return e&&!(null!=(t=this.tracks[e])&&t.ended)})&&(r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream(),this.hls.trigger(_b.BUFFERED_TO_END,void 0)):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})):(this.tracksEnded(),this.hls.trigger(_b.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(null!==e){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){const e=this.getDurationAndRange();e&&this.blockUntilOpen(()=>this.updateMediaSource(e))}onError(e,t){if(t.details===Tb.BUFFER_APPEND_ERROR&&t.frag){var n;const e=null==(n=t.errorAction)?void 0:n.nextAutoLevel;xb(e)&&e!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||null===t)return;if(!this.sourceBufferCount)return;const r=e.config,i=n.currentTime,a=t.levelTargetDuration,s=t.live&&null!==r.liveBackBufferLength?r.liveBackBufferLength:r.backBufferLength;if(xb(s)&&s>=0){const e=Math.max(s,a),t=Math.floor(i/a)*a-e;this.flushBackBuffer(i,a,t)}if(xb(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const e=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),t=Math.max(e,a),n=Math.floor(i/a)*a+t;this.flushFrontBuffer(i,a,n)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([e,t])=>{if(t){const i=JE.getBuffered(t);if(i.length>0&&n>i.start(0)){var r;this.hls.trigger(_b.BACK_BUFFER_REACHED,{bufferEnd:n});const t=this.tracks[e];if(null!=(r=this.details)&&r.live)this.hls.trigger(_b.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(null!=t&&t.ended)return void this.log(`Cannot flush ${e} back buffer while SourceBuffer is in ended state`);this.hls.trigger(_b.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:e})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([t,r])=>{if(r){const i=JE.getBuffered(r),a=i.length;if(a<2)return;const s=i.start(a-1),o=i.end(a-1);if(n>s||e>=s&&e<=o)return;this.hls.trigger(_b.BUFFER_FLUSHING,{startOffset:s,endOffset:1/0,type:t})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||"open"!==(null==n?void 0:n.readyState))return null;const r=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&t.live&&n.setLiveSeekableRange){const e=Math.max(0,t.fragmentStart);return{duration:1/0,start:e,end:Math.max(e,r)}}return{duration:1/0}}const i=null==(e=this.overrides)?void 0:e.duration;if(i)return xb(i)?{duration:i}:null;const a=this.media.duration;return r>(xb(n.duration)?n.duration:0)&&r>a||!xb(a)?{duration:r}:null}updateMediaSource({duration:e,start:t,end:n}){const r=this.mediaSource;this.media&&r&&"open"===r.readyState&&(r.duration!==e&&(xb(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),r.duration=e),void 0!==t&&void 0!==n&&(this.log(`MediaSource duration is set to ${r.duration}. Setting seekable range to ${t}-${n}.`),r.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${hE(n)}`),this.tracksReady){var r;const e=null==(r=this.transferData)?void 0:r.tracks;e&&Object.keys(e).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const r=this.tracks[t];e[t]={buffer:n,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger(_b.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([e])=>{this.executeNext(e)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const i in e){const a=i,s=e[a];if(this.isPending(s)){const e=this.getTrackCodec(s,a),i=`${s.container};codecs=${e}`;s.codec=e,this.log(`creating sourceBuffer(${i})${this.currentOp(a)?" Queued":""} ${hE(s)}`);try{const e=n.addSourceBuffer(i),r=ik(a),o=[a,e];t[r]=o,s.buffer=e}catch(e){var r;return this.error(`error while trying to add sourceBuffer: ${e.message}`),this.shiftAndExecuteNext(a),null==(r=this.operationQueue)||r.removeBlockers(),delete this.tracks[a],void this.hls.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:a,mimeType:i,parent:s.id})}this.trackSourceBuffer(a,s)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let r=e.codec;n&&("video"===t||"audiovideo"===t)&&Vy(n,"video")&&(r=function(e,t){const n=[];if(e){const t=e.split(",");for(let e=0;e<t.length;e++)zy(t[e],"video")||n.push(t[e])}return t&&n.push(t),n.join(",")}(r,n));const i=Qy(r,e.levelCodec);return i?"audio"===t.slice(0,5)?Xy(i,this.appendSource):i:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const r=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:r,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(e,t)=>{const n=t.removedRanges;null!=n&&n.length&&this.hls.trigger(_b.BUFFER_FLUSHED,{type:e})})}get mediaSrc(){var e,t;const n=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==n?void 0:n.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(n=this.mediaSource)?void 0:n.readyState}`);this.error(`${r}`,t),this.hls.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const i=this.currentOp(e);i&&i.onError(r)}removeExecutor(e,t,n){const{media:r,mediaSource:i}=this,a=this.tracks[e],s=null==a?void 0:a.buffer;if(!r||!i||!s)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void this.shiftAndExecuteNext(e);const o=xb(r.duration)?r.duration:1/0,l=xb(i.duration)?i.duration:1/0,c=Math.max(0,t),u=Math.min(n,o,l);u>c&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${c},${u}] from the ${e} SourceBuffer`),s.remove(c,u)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],r=null==n?void 0:n.buffer;if(!r)throw new nk(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(e=>{this.warn(`SourceBuffer blocked callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(e){this.warn(`Callback run without blocking ${this.operationQueue} ${e}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map(e=>this.appendBlocker(e));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(t=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(e=>{var t;const n=null==(t=this.tracks[e])?void 0:t.buffer;n&&!n.updating&&this.shiftAndExecuteNext(e)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const r=this.tracks[e];if(!r)return;const i=r.buffer;if(!i)return;const a=n.bind(this,e);r.listeners.push({event:t,listener:a}),i.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(e=>{n.removeEventListener(e.event,e.listener)}),t.listeners.length=0)}},capLevelController:ak,errorController:class extends jb{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(_b.ERROR,this.onError,this),e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(_b.ERROR,this.onError,this),e.off(_b.ERROR,this.onErrorOut,this),e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===Pb?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const r=this.hls,i=t.context;switch(t.details){case Tb.FRAG_LOAD_ERROR:case Tb.FRAG_LOAD_TIMEOUT:case Tb.KEY_LOAD_ERROR:case Tb.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case Tb.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction=PE());case Tb.FRAG_GAP:case Tb.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case Tb.LEVEL_EMPTY_ERROR:case Tb.LEVEL_PARSING_ERROR:{var a,s;const e=t.parent===Pb?t.level:r.loadLevel;t.details===Tb.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(s=a.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case Tb.LEVEL_LOAD_ERROR:case Tb.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==i?void 0:i.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level)));case Tb.AUDIO_TRACK_LOAD_ERROR:case Tb.AUDIO_TRACK_LOAD_TIMEOUT:case Tb.SUBTITLE_LOAD_ERROR:case Tb.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const e=r.loadLevelObj;if(e&&(i.type===Lb&&e.hasAudioGroup(i.groupId)||i.type===Cb&&e.hasSubtitleGroup(i.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)}return;case Tb.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=r.loadLevelObj,n=null==e?void 0:e.attrs["HDCP-LEVEL"];n?t.errorAction={action:2,flags:2,hdcpLevel:n}:this.keySystemError(t)}return;case Tb.BUFFER_ADD_CODEC_ERROR:case Tb.REMUX_ALLOC_ERROR:case Tb.BUFFER_APPEND_ERROR:var o;return void(t.errorAction||(t.errorAction=this.getLevelSwitchAction(t,null!=(o=t.level)?o:r.loadLevel)));case Tb.INTERNAL_EXCEPTION:case Tb.BUFFER_APPENDING_ERROR:case Tb.BUFFER_FULL_ERROR:case Tb.LEVEL_SWITCH_ERROR:case Tb.BUFFER_STALLED_ERROR:case Tb.BUFFER_SEEK_OVER_HOLE:case Tb.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=PE())}t.type===kb.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=AE(this.hls.config.playlistLoadPolicy,e),r=this.playlistError++;if(CE(n,r,_E(e),e.response))return{action:5,flags:0,retryConfig:n,retryCount:r};const i=this.getLevelSwitchAction(e,t);return n&&(i.retryConfig=n,i.retryCount=r),i}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:i,keyLoadPolicy:a}=t.config,s=AE(e.details.startsWith("key")?a:i,e),o=t.levels.reduce((e,t)=>e+t.fragmentError,0);if(r&&(e.details!==Tb.FRAG_GAP&&r.fragmentError++,CE(s,o,_E(e),e.response)))return{action:5,flags:0,retryConfig:s,retryCount:o};const l=this.getLevelSwitchAction(e,n);return s&&(l.retryConfig=s,l.retryCount=o),l}getLevelSwitchAction(e,t){const n=this.hls;null==t&&(t=n.loadLevel);const r=this.hls.levels[t];if(r){var i,a;const t=e.details;r.loadError++,t===Tb.BUFFER_APPEND_ERROR&&r.fragmentError++;let l=-1;const{levels:c,loadLevel:u,minAutoLevel:d,maxAutoLevel:h}=n;n.autoLevelEnabled||n.config.preserveManualLevelOnError||(n.loadLevel=-1);const f=null==(i=e.frag)?void 0:i.type,p=(f===Ib&&t===Tb.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===Tb.BUFFER_ADD_CODEC_ERROR||t===Tb.BUFFER_APPEND_ERROR))&&c.some(({audioCodec:e})=>r.audioCodec!==e),m="video"===e.sourceBufferName&&(t===Tb.BUFFER_ADD_CODEC_ERROR||t===Tb.BUFFER_APPEND_ERROR)&&c.some(({codecSet:e,audioCodec:t})=>r.codecSet!==e&&r.audioCodec===t),{type:g,groupId:v}=null!=(a=e.context)?a:{};for(let n=c.length;n--;){const i=(n+u)%c.length;if(i!==u&&i>=d&&i<=h&&0===c[i].loadError){var s,o;const n=c[i];if(t===Tb.FRAG_GAP&&f===Pb&&e.frag){const t=c[i].details;if(t){const n=SE(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(g===Lb&&n.hasAudioGroup(v)||g===Cb&&n.hasSubtitleGroup(v))continue;if(f===Ib&&null!=(s=r.audioGroups)&&s.some(e=>n.hasAudioGroup(e))||f===Nb&&null!=(o=r.subtitleGroups)&&o.some(e=>n.hasSubtitleGroup(e))||p&&r.audioCodec===n.audioCodec||!p&&r.audioCodec!==n.audioCodec||m&&r.codecSet===n.codecSet)continue}l=i;break}}if(l>-1&&n.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:2,flags:0,nextAutoLevel:l}}return{action:2,flags:1}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===Tb.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r,hdcpLevel:i,nextAutoLevel:a}=n;switch(r){case 0:this.switchLevel(e,a);break;case 2:i&&(t.maxHdcpLevel=sE[sE.indexOf(i)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}n.resolved||this.switchLevel(e,a)}switchLevel(e,t){if(void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Tb.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&"audiovideo"!==e.sourceBufferName)){const t=eE(e.mimeType),n=this.hls.levels;for(let r=n.length;r--;)n[r][`${e.sourceBufferName}Codec`]===t&&this.hls.removeLevel(r)}}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(_b.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(_b.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const e=r-this.lastTime,i=n-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*i/e,o=this.hls;if(o.trigger(_b.FPS_DROP,{currentDropped:i,currentDecoded:a,totalDroppedFrames:n}),s>0&&i>o.config.fpsDroppedMonitoringThreshold*a){let e=o.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(_b.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Tx,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:n_,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends ES{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",Nb),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(_b.LEVEL_LOADED,this.onLevelLoaded,this),e.on(_b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(_b.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(_b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(_b.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(_b.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(_b.LEVEL_LOADED,this.onLevelLoaded,this),e.off(_b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(_b.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(_b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(_b.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(_b.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=cS,this.setInterval(500),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(dy(n)&&(this.fragPrevious=n),this.state=cS,!r)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let a;const s=n.start;for(let e=0;e<i.length;e++)if(s>=i[e].start&&s<=i[e].end){a=i[e];break}const o=n.start+n.duration;a?a.end=o:(a={start:s,end:o},i.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(0===n&&r!==Number.POSITIVE_INFINITY){const e=r-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach(t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}}),this.fragmentTracker.removeFragmentsInRange(n,e,Nb)}}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===Nb&&(t.details===Tb.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==lS&&(this.state=cS))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){this.levels&&Xw(this.levels,t)?this.levels=t.map(e=>new uE(e)):(this.tracksBuffered=[],this.levels=t.map(e=>{const t=new uE(e);return this.tracksBuffered[t.id]=[],t}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Nb),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,null==(n=this.levels)||!n.length||-1===this.currentTrackId)return void this.clearInterval();const r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==lS&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:i}=this,{details:a,id:s}=t;if(!i)return void this.warn(`Subtitle tracks were reset while loading level ${s}`);const o=i[s];if(s>=i.length||!o)return;this.log(`Subtitle track ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(a.live||null!=(n=o.details)&&n.live){const e=this.mainDetails;if(a.deltaUpdateFailed||!e)return;const t=e.fragments[0];var c;o.details?(l=this.alignPlaylists(a,o.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===l&&t&&(l=t.start,Qx(a,l))):a.hasProgramDateTime&&e.hasProgramDateTime?(oS(a,e),l=a.fragmentStart):t&&(l=t.start,Qx(a,l))}o.details=a,this.levelLastLoaded=o,s===r&&(this.hls.trigger(_b.SUBTITLE_TRACK_UPDATED,{details:a,id:s,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===cS)&&(SE(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&null!=r&&r.key&&r.iv&&dx(r.method)){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer,hx(r.method)).catch(e=>{throw i.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e}).then(n=>{const r=performance.now();i.trigger(_b.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:r}})}).catch(e=>{this.warn(`${e.name}: ${e.message}`),this.state=cS})}}doTick(){if(this.media){if(this.state===cS){const{currentTrackId:e,levels:t}=this,n=null==t?void 0:t[e];if(!n||!t.length||!n.details)return;if(this.waitForLive(n))return;const{config:r}=this,i=this.getLoadPosition(),a=JE.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,r.maxBufferHole),{end:s,len:o}=a,l=n.details;if(o>this.hls.maxBufferLength+l.levelTargetDuration)return;const c=l.fragments,u=c.length,d=l.edge;let h=null;const f=this.fragPrevious;if(s<d){const e=r.maxFragLookUpTolerance,t=s>d-e?0:e;h=SE(f,c,Math.max(c[0].start,s),t),!h&&f&&f.start<c[0].start&&(h=c[0])}else h=c[u-1];if(h=this.filterReplacedPrimary(h,n.details),!h)return;const p=c[h.sn-l.startSN-1];if(p&&p.cc===h.cc&&this.fragmentTracker.getState(p)===IE&&(h=p),this.fragmentTracker.getState(h)===IE){const e=this.mapToInitFragWhenRequired(h);e&&this.loadFragment(e,n,s)}}}else this.state=cS}loadFragment(e,t,n){dy(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new oT(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends qw{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=Wk(this.media.textTracks);for(let n=0;n<t.length;n++)if("hidden"===t[n].mode)e=t[n];else if("showing"===t[n].mode){e=t[n];break}const n=this.findTrackForTextTrack(e);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_b.LEVEL_LOADING,this.onLevelLoading,this),e.on(_b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(_b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(_b.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_b.LEVEL_LOADING,this.onLevelLoading,this),e.off(_b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(_b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(_b.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const r=!!t.transferMedia;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r||Wk(n.textTracks).forEach(e=>{Gk(e)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==r)return void this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${null==a?void 0:a.groupId}`);const s=a.details;a.details=t.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,s)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some(e=>-1===(null==r?void 0:r.indexOf(e)))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!n||-1!==n.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const n=gE(t,e);if(n>-1)i=e[n];else{const e=gE(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const a={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==n?void 0:n.join(",")}" group-id`),this.hls.trigger(_b.SUBTITLE_TRACKS_UPDATED,a),-1!==r&&-1===this.trackId&&this.setSubtitleTrack(r)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const i=t[r];if((!n||i.default)&&(n||e)&&(!e||vE(i,e)))return r}if(e){for(let n=0;n<t.length;n++){const r=t[n];if(Qw(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const r=t[n];if(Qw(e.attrs,r.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++)if(Jw(t[n],e))return n}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==Cb||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(-1===e.id)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&vE(e,n))return n;const r=gE(e,this.tracksInGroup);if(r>-1){const e=this.tracksInGroup[r];return this.setSubtitleTrack(r),e}if(n)return null;{const n=gE(e,t);if(n>-1)return t[n]}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),a=e.details,s=null==a?void 0:a.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${s&&a.live?" age "+s.toFixed(1)+(a.type?" "+a.type||0:""):""} ${i}`),this.hls.trigger(_b.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=Wk(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter(e=>Jw(n,e))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(e=>{"disabled"!==e.mode&&e!==r&&(e.mode="disabled")}),r){const e=this.subtitleDisplay?"showing":"hidden";r.mode!==e&&(r.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!xb(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r)return void this.hls.trigger(_b.SUBTITLE_TRACK_SWITCH,{id:e});const i=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:a,groupId:s="",name:o,type:l,url:c}=r;this.hls.trigger(_b.SUBTITLE_TRACK_SWITCH,{id:a,groupId:s,name:o,type:l,url:c});const u=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(u)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(_b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(_b.FRAG_LOADING,this.onFragLoading,this),e.on(_b.FRAG_LOADED,this.onFragLoaded,this),e.on(_b.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(_b.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(_b.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(_b.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(_b.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(_b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(_b.FRAG_LOADING,this.onFragLoading,this),e.off(_b.FRAG_LOADED,this.onFragLoaded,this),e.off(_b.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(_b.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(_b.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(_b.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(_b.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new QT(this,"textTrack1"),t=new QT(this,"textTrack2"),n=new QT(this,"textTrack3"),r=new QT(this,"textTrack4");this.cea608Parser1=new kT(1,e,t),this.cea608Parser2=new kT(3,n,r)}addCues(e,t,n,r,i){let a=!1;for(let e=i.length;e--;){const r=i[e],s=e_(r[0],r[1],t,n);if(s>=0&&(r[0]=Math.min(r[0],t),r[1]=Math.max(r[1],n),a=!0,s/(n-t)>.5))return}if(a||i.push([t,n]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,n,r)}else{const i=this.Cues.newCue(null,t,n,r);this.hls.trigger(_b.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:i}){const{unparsedVttFrags:a}=this;n===Pb&&(this.initPTS[t.cc]={baseTime:r,timescale:i}),a.length&&(this.unparsedVttFrags=[],a.forEach(e=>{this.onFragLoaded(_b.FRAG_LOADED,e)}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const i=n.textTracks[r];if(ZT(i,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:i,languageCode:a}=t[e],s=this.getExistingTrack(i,a);if(s)n[e]=s,Gk(n[e]),zk(n[e],r);else{const t=this.createTextTrack("captions",i,a);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(_b.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:r}=this;Object.keys(r).forEach(e=>{Gk(r[e]),delete r[e]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let e=0;e<t.length;e++)Gk(t[e])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some(e=>e.textCodec===jT);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(Xw(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media,t=e?Wk(e.textTracks):null;if(this.tracks.forEach((e,n)=>{let r;if(t){let n=null;for(let r=0;r<t.length;r++)if(t[r]&&ZT(t[r],e)){n=t[r],t[r]=null;break}n&&(r=n)}if(r)Gk(r);else{const t=JT(e);r=this.createTextTrack(t,e.name,e.lang),r&&(r.mode="disabled")}r&&this.textTracks.push(r)}),null!=t&&t.length){const e=t.filter(e=>null!==e).map(e=>e.label);e.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map(e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}));this.hls.trigger(_b.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n=`textTrack${t[1]}`,r=this.captionsProperties[n];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Pb){var n,r;const{cea608Parser1:e,cea608Parser2:i,lastSn:a}=this,{cc:s,sn:o}=t.frag,l=null!=(n=null==(r=t.part)?void 0:r.index)?n:-1;e&&i&&(o!==a+1||o===a&&l!==this.lastPartIndex+1||s!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=s,this.lastSn=o,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===Nb)if(r.byteLength){const e=n.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[n.level],i=this.vttCCs;i[n.cc]||(i[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===jT?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(_b.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;GT(t,this.initPTS[e.cc],t=>{this._appendCues(t,e.level),n.trigger(_b.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},t=>{n.logger.log(`Failed to parse IMSC1: ${t}`),n.trigger(_b.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:i,unparsedVttFrags:a}=this,s=i.length-1;if(!i[n.cc]&&-1===s)return void a.push(e);const o=this.hls;!function(e,t,n,r,i,a,s){const o=new MT,l=qb(new Uint8Array(e)).trim().replace(FT,"\n").split("\n"),c=[],u=t?function(e,t=1){return Lw(e,9e4,1/t)}(t.baseTime,t.timescale):0;let d,h="00:00.000",f=0,p=0,m=!0;o.oncue=function(e){const a=n[r];let s=n.ccOffset;const o=(f-u)/9e4;if(null!=a&&a.new&&(void 0!==p?s=n.ccOffset=a.start:function(e,t,n){let r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!=(a=i)&&a.new;){var a;e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC]}e.presentationOffset=n}(n,r,o)),o){if(!t)return void(d=new Error("Missing initPTS for VTT MPEGTS"));s=o-n.presentationOffset}const l=e.endTime-e.startTime,h=Mw(9e4*(e.startTime+s-p),9e4*i)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const m=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(m)),e.id||(e.id=UT(e.startTime,e.endTime,m)),e.endTime>0&&c.push(e)},o.onparsingerror=function(e){d=e},o.onflush=function(){d?s(d):a(c)},l.forEach(e=>{if(m){if(BT(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach(e=>{BT(e,"LOCAL:")?h=e.slice(6):BT(e,"MPEGTS:")&&(f=parseInt(e.slice(7)))});try{p=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(xb(t)&&xb(n)&&xb(r)&&xb(i)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=6e4*r,t+=36e5*i,t}(h)/1e3}catch(e){d=e}return}""===e&&(m=!1)}o.parse(e+"\n")}),o.flush()}(null!=(t=n.initSegment)&&t.data?Ny(n.initSegment.data,new Uint8Array(r)).buffer:r,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,e=>{this._appendCues(e,n.level),o.trigger(_b.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},t=>{const i="Missing initPTS for VTT MPEGTS"===t.message;i?a.push(e):this._fallbackToIMSC1(n,r),o.logger.log(`Failed to parse VTT cue: ${t}`),i&&s>n.cc||o.trigger(_b.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||GT(t,this.initPTS[e.cc],()=>{n.textCodec=jT,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach(e=>Vk(n,e))}else{const r=this.tracks[t];if(!r)return;const i=r.default?"default":"subtitles"+t;n.trigger(_b.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===Nb&&this.onFragLoaded(_b.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:r}=t;if(n.type!==Pb||"NONE"!==this.closedCaptionsForLevel(n))for(let e=0;e<r.length;e++){const t=r[e].bytes;if(t){this.cea608Parser1||this.initCea608Parsers();const n=this.extractCea608Data(t);this.cea608Parser1.addData(r[e].pts,n[0]),this.cea608Parser2.addData(r[e].pts,n[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:r,type:i}){const{media:a}=this;if(a&&!(a.currentTime<n)){if(!i||"video"===i){const{captionsTracks:e}=this;Object.keys(e).forEach(r=>Hk(e[r],t,n))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==r){const{textTracks:e}=this;Object.keys(e).forEach(n=>Hk(e[n],t,r))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let r=2;for(let i=0;i<n;i++){const n=e[r++],i=127&e[r++],a=127&e[r++];if((0!==i||0!==a)&&4&n){const e=3&n;0!==e&&1!==e||(t[e].push(i),t[e].push(a))}}return t}},audioStreamController:class extends ES{constructor(e,t,n){super(e,t,n,"audio-stream-controller",Ib),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(_b.LEVEL_LOADED,this.onLevelLoaded,this),e.on(_b.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(_b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(_b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(_b.BUFFER_RESET,this.onBufferReset,this),e.on(_b.BUFFER_CREATED,this.onBufferCreated,this),e.on(_b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(_b.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(_b.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(_b.FRAG_LOADING,this.onFragLoading,this),e.on(_b.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(_b.LEVEL_LOADED,this.onLevelLoaded,this),e.off(_b.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(_b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(_b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(_b.BUFFER_RESET,this.onBufferReset,this),e.off(_b.BUFFER_CREATED,this.onBufferCreated,this),e.off(_b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(_b.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(_b.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(_b.FRAG_LOADING,this.onFragLoading,this),e.off(_b.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:i}){if(n===Pb){const e=t.cc,n=this.fragCurrent;if(this.initPTS[e]={baseTime:r,timescale:i},this.log(`InitPTS for cc: ${e} found from main: ${r}/${i}`),this.mainAnchor=t,this.state===bS){const n=this.waitingData;(!n&&!this.loadingParts||n&&n.frag.cc!==e)&&this.syncWithAnchor(t,null==n?void 0:n.frag)}else!this.hls.hasEnoughToStart&&n&&n.cc!==e?(n.abortRequests(),this.syncWithAnchor(t,n)):this.state===cS&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const r=(null==(n=this.mainFragLoading)?void 0:n.frag)||null;if(t&&(null==r?void 0:r.cc)===t.cc)return;const i=(r||e).cc,a=TE(this.getLevelDetails(),i,this.getLoadPosition());a&&(this.log(`Waiting fragment cc (${null==t?void 0:t.cc}) cancelled because video is at cc ${e.cc}`),this.startFragRequested=!1,this.nextLoadPosition=a.start,this.resetLoadingState(),this.state===cS&&this.doTickIdle())}startLoad(e,t){if(!this.levels)return this.startPosition=e,void(this.state=lS);const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),n>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=cS):this.state=fS,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case cS:this.doTickIdle();break;case fS:{const{levels:e,trackId:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(r))break;this.state=bS}break}case hS:{var e;const t=performance.now(),n=this.retryDate;if(!n||t>=n||null!=(e=this.media)&&e.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=cS}break}case bS:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:r,complete:i}=e,a=this.mainAnchor;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.state=dS;const e={frag:t,part:n,payload:r.flush().buffer,networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=cS}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:r,trackId:i}=this,a=t.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||null==n||!n[i])return;const s=n[i],o=s.details;if(!o||this.waitForLive(s)||this.waitForCdnTuneIn(o))return this.state=fS,void(this.startFragRequested=!1);const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,oy,Ib));const c=this.getFwdBufferInfo(l,Ib);if(null===c)return;if(!this.switchingTrack&&this._streamEnded(c,o))return t.trigger(_b.BUFFER_EOS,{type:"audio"}),void(this.state=gS);const u=c.len,d=t.maxBufferLength,h=o.fragments,f=h[0].start,p=this.getLoadPosition(),m=this.flushing?p:c.end;if(this.switchingTrack&&r){const e=p;o.PTSKnown&&e<f&&(c.end>f||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=f+.05)}if(u>=d&&!this.switchingTrack&&m<h[h.length-1].start)return;let g=this.getNextFragment(m,o);if(g&&this.isLoopLoading(g,m)&&(g=this.getNextFragmentLoopLoading(g,o,c,Pb,d)),!g)return void(this.bufferFlushed=!0);let v=(null==(e=this.mainFragLoading)?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&v&&dy(g)&&!g.endList&&(!o.live||!this.loadingParts&&m<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(v)===OE&&(this.mainFragLoading=v=null),v&&dy(v))){if(g.start>v.end){const e=this.fragmentTracker.getFragAtPos(m,Pb);e&&e.end>v.end&&(v=e,this.mainFragLoading={frag:e,targetBufferTime:null})}if(g.start>v.end)return}this.loadFragment(g,s,m)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(e=>new uE(e))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==lS&&(this.setInterval(100),this.state=cS,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(_b.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:r}=this,{details:i,id:a,groupId:s,track:o}=t;if(!r)return void this.warn(`Audio tracks reset while loading track ${a} "${o.name}" of "${s}"`);const l=this.mainDetails;if(!l||i.endCC>l.endCC||l.expired)return this.cachedTrackLoadedData=t,void(this.state!==lS&&(this.state=fS));this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${o.name}" of "${s}" loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const c=r[a];let u=0;if(i.live||null!=(n=c.details)&&n.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;var d;c.details&&(u=this.alignPlaylists(i,c.details,null==(d=this.levelLastLoaded)?void 0:d.details)),i.alignedSliding||(sS(i,l),i.alignedSliding||oS(i,l),u=i.fragmentStart)}c.details=i,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(l,u),this.hls.trigger(_b.AUDIO_TRACK_UPDATED,{details:i,id:a,groupId:t.groupId}),this.state!==fS||this.waitForCdnTuneIn(i)||(this.state=cS),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{config:a,trackId:s,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const l=o[s];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const u=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new Yw(this.hls,Ib,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],f=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=r?r.index:-1,a=-1!==t,s=new XE(n.level,n.sn,n.stats.chunkCount,i.byteLength,t,a);d.push(i,f,u,"",n,r,c.totalduration,e,s,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${c.startSN} ,${c.endSN}],track ${s}`);const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new SS,complete:!1};e.push(new Uint8Array(i)),this.state!==lS&&(this.state=bS)}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Pb&&dy(t.frag)&&(this.mainFragLoading=t,this.state===cS&&this.tick())}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type===Ib)if(this.fragContextChanged(n))this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if(dy(n)){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(_b.AUDIO_TRACK_SWITCHED,Ub({},e)))}this.fragBufferedComplete(n,r),this.media&&this.tick()}else this.audioOnly||n.type!==Pb||n.elementaryStreams.video||n.elementaryStreams.audiovideo||(this.audioOnly=!0,this.mainFragLoading=null)}onError(e,t){var n;if(t.fatal)this.state=vS;else switch(t.details){case Tb.FRAG_GAP:case Tb.FRAG_PARSING_ERROR:case Tb.FRAG_DECRYPT_ERROR:case Tb.FRAG_LOAD_ERROR:case Tb.FRAG_LOAD_TIMEOUT:case Tb.KEY_LOAD_ERROR:case Tb.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ib,t);break;case Tb.AUDIO_TRACK_LOAD_ERROR:case Tb.AUDIO_TRACK_LOAD_TIMEOUT:case Tb.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==fS||(null==(n=t.context)?void 0:n.type)!==Lb||(this.state=cS);break;case Tb.BUFFER_ADD_CODEC_ERROR:case Tb.BUFFER_APPEND_ERROR:if("audio"!==t.parent)return;this.resetLoadingState();break;case Tb.BUFFER_FULL_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Tb.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,{type:t}){t!==ly&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==ly){this.flushing=!1,this.bufferFlushed=!0,this.state===gS&&(this.state=cS);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,Ib),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:i,chunkMeta:a}=e,s=this.getCurrentContext(a);if(!s)return void this.resetWhenMissingContext(a);const{frag:o,part:l,level:c}=s,{details:u}=c,{audio:d,text:h,id3:f,initSegment:p}=i;if(!this.fragContextChanged(o)&&u){if(this.state=pS,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=p&&p.tracks){const e=o.initSegment||o;this._bufferInitSegment(c,p.tracks,e,a),r.trigger(_b.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:p.tracks})}if(d){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=d;l&&(l.elementaryStreams[oy]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),o.setElementaryStreamInfo(oy,e,t,n,r),this.bufferFragmentData(d,o,l,a)}if(null!=f&&null!=(t=f.samples)&&t.length){const e=Fb({id:n,frag:o,details:u},f);r.trigger(_b.FRAG_PARSING_METADATA,e)}if(h){const e=Fb({id:n,frag:o,details:u},h);r.trigger(_b.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,n,r){if(this.state!==pS)return;if(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio)return;const i=t.audio;i.id=Ib;const a=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${a}/${i.codec}]`),a&&1===a.split(",").length&&(i.levelCodec=a),this.hls.trigger(_b.BUFFER_CODECS,t);const s=i.initSegment;if(null!=s&&s.byteLength){const e={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:s};this.hls.trigger(_b.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);var i;if(this.switchingTrack||r===IE||r===DE)if(dy(e))if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=bS;const n=this.mainDetails;n&&n.fragmentStart!==t.details.fragmentStart&&oS(t.details,n)}else super.loadFragment(e,t,n);else this._loadInitSegment(e,t);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:i,audioCodec:a,channels:s}=this.bufferedTrack;vE({name:t,lang:n,assocLang:r,characteristics:i,audioCodec:a,channels:s},e,bE)||(EE(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(_b.AUDIO_TRACK_SWITCHED,Ub({},e))}},audioTrackController:class extends qw{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_b.LEVEL_LOADING,this.onLevelLoading,this),e.on(_b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(_b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(_b.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_b.LEVEL_LOADING,this.onLevelLoading,this),e.off(_b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(_b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(_b.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==r)return void this.warn(`Audio track with id:${n} and group:${r} not found in active group ${null==a?void 0:a.groupId}`);const s=a.details;a.details=t.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,s)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some(e=>-1===(null==r?void 0:r.indexOf(e)))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!n||-1!==n.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const n=gE(t,e,bE);if(n>-1)i=e[n];else{const e=gE(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const s={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==n?void 0:n.join(",")}`),this.hls.trigger(_b.AUDIO_TRACKS_UPDATED,s);const o=this.trackId;if(-1!==r&&-1===o)this.setAudioTrack(r);else if(e.length&&-1===o){var a;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(a=this.groupIds)?void 0:a.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}}onError(e,t){!t.fatal&&t.context&&(t.context.type!==Lb||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&vE(e,r,bE))return r;const i=gE(e,this.tracksInGroup,bE);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(r){let r=t.loadLevel;-1===r&&(r=t.firstAutoLevel);const i=function(e,t,n,r,i){const a=t[r],s=t.reduce((e,t,n)=>{const r=t.uri;return(e[r]||(e[r]=[])).push(n),e},{}),o=s[a.uri];o.length>1&&(r=Math.max.apply(Math,o));const l=a.videoRange,c=a.frameRate,u=a.codecSet.substring(0,4),d=yE(t,r,t=>{if(t.videoRange!==l||t.frameRate!==c||t.codecSet.substring(0,4)!==u)return!1;const r=t.audioGroups,a=n.filter(e=>!r||-1!==r.indexOf(e.groupId));return gE(e,a,i)>-1});return d>-1?d:yE(t,r,t=>{const r=t.audioGroups,a=n.filter(e=>!r||-1!==r.indexOf(e.groupId));return gE(e,a,i)>-1})}(e,t.levels,n,r,bE);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=gE(e,n);if(t>-1)return n[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],i=r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;if(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(_b.AUDIO_TRACK_SWITCHING,Ub({},r)),i)return;const a=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||vE(e,r,bE)))return n}if(e){const{name:n,lang:r,assocLang:i,characteristics:a,audioCodec:s,channels:o}=e;for(let e=0;e<t.length;e++)if(vE({name:n,lang:r,assocLang:i,characteristics:a,audioCodec:s,channels:o},t[e],bE))return e;for(let n=0;n<t.length;n++){const r=t[n];if(Qw(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const r=t[n];if(Qw(e.attrs,r.attrs,["LANGUAGE"]))return n}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&EE(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),a=e.details,s=null==a?void 0:a.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${s&&a.live?" age "+s.toFixed(1)+(a.type?" "+a.type||0:""):""} ${i}`),this.hls.trigger(_b.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}},emeController:jk,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:sk,su:!this.initialized})}catch(e){this.hls.logger.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=e=>{try{const{frag:t,part:n}=e,r=this.hls.levels[t.level],i=this.getObjectType(t),a={d:1e3*(n||t).duration,ot:i};i!==lk&&i!==ok&&i!=ck||(a.br=r.bitrate/1e3,a.tb=this.getTopBandwidth(i)/1e3,a.bl=this.getBufferLength(i));const s=n?this.getNextPart(n):this.getNextFrag(t);null!=s&&s.url&&s.url!==t.url&&(a.nor=s.url),this.apply(e,a)}catch(e){this.hls.logger.warn("Could not generate segment CMCD data.",e)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_b.MEDIA_DETACHED,this.onMediaDetached,this),e.on(_b.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_b.MEDIA_DETACHED,this.onMediaDetached,this),e.off(_b.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(r=t.tracks.video)?void 0:r.buffer}createData(){var e;return{v:1,sf:hk,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Fb(t,this.createData());const n=t.ot===uk||t.ot===lk||t.ot===ck;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((e,n)=>(r.includes(n)&&(e[n]=t[n]),e),{}));const i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),function(e,t,n){Fb(e,function(e,t={}){const n={};if(!e)return n;const r=Object.entries(e),i=Object.entries(vk).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),a=r.reduce((e,t)=>{var n,r;const[a,s]=t,o=(null===(n=i.find(e=>e[1].includes(a)))||void 0===n?void 0:n[0])||pk;return null!==(r=e[o])&&void 0!==r||(e[o]={}),e[o][a]=s,e},{});return Object.entries(a).reduce((e,[n,r])=>(e[n]=Dk(r,t),e),n)}(t,n))}(e.headers,t,i)):e.url=function(e,t,n){const r=function(e,t={}){if(!e)return"";const n=Dk(e,t);return`CMCD=${encodeURIComponent(n)}`}(t,n);if(!r)return e;if(Ok.test(e))return e.replace(Ok,r);const i=e.includes("?")?"&":"?";return`${e}${i}${r}`}(e.url,t,i)}getNextFrag(e){var t;const n=null==(t=this.hls.levels[e.level])?void 0:t.details;if(n){const t=e.sn-n.startSN;return n.fragments[t+1]}}getNextPart(e){var t,n;const{index:r,fragment:i}=e,a=null==(t=this.hls.levels[i.level])||null==(n=t.details)?void 0:n.partList;if(a){const{sn:e}=i;for(let t=a.length-1;t>=0;t--){const n=a[t];if(n.index===r&&n.fragment.sn===e)return a[t+1]}}}getObjectType(e){const{type:t}=e;return"subtitle"===t?dk:"initSegment"===e.sn?uk:"audio"===t?ok:"main"===t?this.hls.audioTracks.length?lk:ck:void 0}getTopBandwidth(e){let t,n=0;const r=this.hls;if(e===ok)t=r.audioTracks;else{const e=r.maxAutoLevel,n=e>-1?e+1:r.levels.length;t=r.levels.slice(0,n)}return t.forEach(e=>{e.bitrate>n&&(n=e.bitrate)}),n>0?n:NaN}getBufferLength(e){const t=this.media,n=e===ok?this.audioBuffer:this.videoBuffer;return n&&t?1e3*JE.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len:NaN}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}},contentSteeringController:class extends jb{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_b.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_b.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(t=>t!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if(2===(null==n?void 0:n.action)&&1===n.flags){const e=this.levels;let r=this._pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:n,pathwayId:r,type:a}=t.context;n&&e?i=this.getPathwayForGroupId(n,a,i):r&&(i=r)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!r&&e&&(r=this.pathways()),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==i),n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${i} levels: ${e?e.length:e} priorities: ${hE(r)} penalized: ${hE(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){let t;this._pathwayPriority=e;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach(e=>{r-n[e]>3e5&&delete n[e]});for(let r=0;r<e.length;r++){const i=e[r];if(i in n)continue;if(i===this.pathwayId)return;const a=this.hls.nextLoadLevel,s=this.hls.levels[a];if(t=this.getLevelsForPathway(i),t.length>0){this.log(`Setting Pathway to "${i}"`),this.pathwayId=i,nS(t),this.hls.trigger(_b.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[a];s&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==s.bitrate&&this.log(`Unstable Pathways change from bitrate ${s.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let n=0;n<r.length;n++)if(t===Lb&&r[n].hasAudioGroup(e)||t===Cb&&r[n].hasSubtitleGroup(e))return r[n].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach(e=>{const{ID:i,"BASE-ID":a,"URI-REPLACEMENT":s}=e;if(t.some(e=>e.pathwayId===i))return;const o=this.getLevelsForPathway(a).map(e=>{const t=new sx(e.attrs);t["PATHWAY-ID"]=i;const a=t.AUDIO&&`${t.AUDIO}_clone_${i}`,o=t.SUBTITLES&&`${t.SUBTITLES}_clone_${i}`;a&&(n[t.AUDIO]=a,t.AUDIO=a),o&&(r[t.SUBTITLES]=o,t.SUBTITLES=o);const l=Fk(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",s),c=new uE({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let t=1;t<e.audioGroups.length;t++)c.addGroupId("audio",`${e.audioGroups[t]}_clone_${i}`);if(e.subtitleGroups)for(let t=1;t<e.subtitleGroups.length;t++)c.addGroupId("text",`${e.subtitleGroups[t]}_clone_${i}`);return c});t.push(...o),Mk(this.audioTracks,n,s,i),Mk(this.subtitleTracks,r,s,i)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let r;this.loader&&this.loader.destroy(),this.loader=new n(t);try{r=new self.URL(e)}catch(t){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==r.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:r.href},a=t.steeringManifestLoadPolicy.default,s=a.errorRetry||a.timeoutRetry||{},o={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},l={onSuccess:(e,t,n,i)=>{this.log(`Loaded steering manifest: "${r}"`);const a=e.data;if(1!==(null==a?void 0:a.VERSION))return void this.log(`Steering VERSION ${a.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=a.TTL;const{"RELOAD-URI":s,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=a;if(s)try{this.uri=new self.URL(s,r).href}catch(e){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${s}`)}this.scheduleRefresh(this.uri||n.url),o&&this.clonePathways(o);const c={steeringManifest:a,url:r.toString()};this.hls.trigger(_b.STEERING_MANIFEST_LOADED,c),l&&this.updatePathwayPriority(l)},onError:(e,t,n,r)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let i=1e3*this.timeToLoad;if(429===e.code){const e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}return void this.log(`Steering manifest ${t.url} rate limited`)}this.scheduleRefresh(this.uri||t.url,i)},onTimeout:(e,t,n)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(i,o,l)}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var t;const n=null==(t=this.hls)?void 0:t.media;!n||n.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)},t)}},interstitialsController:class extends jb{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;const t=e-this.timelinePos;if(Math.abs(t)<1/7056e5)return;const n=t<=-.01;this.timelinePos=e,this.bufferedPos=e;const r=this.playingItem;if(!r)return void this.checkBuffer();if(n&&this.schedule.resetErrorsInRange(e,e-t)&&this.updateSchedule(),this.checkBuffer(),n&&e<r.start||e>=r.end){var i;const e=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(r)&&null!=(i=this.media)&&i.paused&&(this.shouldPlay=!1),!n){const t=this.findItemIndex(r);if(e>t){const n=this.schedule.findJumpRestrictedIndex(t+1,e);if(n>t)return void this.setSchedulePosition(n)}}return void this.setSchedulePosition(e)}const a=this.playingAsset;if(!a){if(this.playingLastItem&&this.isInterstitial(r)){const t=r.event.assetList[0];t&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(e,t))}return}const s=a.timelineStart,o=a.duration||0;(n&&e<s||e>=s+o)&&this.setScheduleToAssetAtTime(e,a)},this.onTimeupdate=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;if(!(e>this.timelinePos))return;this.timelinePos=e,e>this.bufferedPos&&this.checkBuffer();const t=this.playingItem;if(!t||this.playingLastItem)return;if(e>=t.end){this.timelinePos=t.end;const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}const n=this.playingAsset;n&&e>=n.timelineStart+(n.duration||0)&&this.setScheduleToAssetAtTime(e,n)},this.onScheduleUpdate=(e,t)=>{const n=this.schedule,r=this.playingItem,i=n.events||[],a=n.items||[],s=n.durations,o=e.map(e=>e.identifier),l=!(!i.length&&!o.length);(l||t)&&this.log(`INTERSTITIALS_UPDATED (${i.length}): ${i}\nSchedule: ${a.map(e=>iT(e))} pos: ${this.timelinePos}`),o.length&&this.log(`Removed events ${o}`),this.playerQueue.forEach(e=>{if(e.interstitial.appendInPlace){const t=e.assetItem.timelineStart,n=e.timelineOffset-t;if(n)try{e.timelineOffset=t}catch(r){Math.abs(n)>Yk&&this.warn(`${r} ("${e.assetId}" ${e.timelineOffset}->${t})`)}}});let c=null;if(r){const e=this.updateItem(r,this.timelinePos);this.itemsMatch(r,e)&&(this.playingItem=e,this.waitingItem=this.endedItem=null,c=()=>this.trimInPlace(e,r))}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const u=this.bufferingItem;if(u){const e=this.updateItem(u,this.bufferedPos);this.itemsMatch(u,e)?(this.bufferingItem=e,c||(c=()=>this.trimInPlace(e,u))):u.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(u.event,null))}if(e.forEach(e=>{e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,null)})}),l||t){if(this.hls.trigger(_b.INTERSTITIALS_UPDATED,{events:i.slice(0),schedule:a.slice(0),durations:s,removedIds:o}),this.isInterstitial(r)&&o.includes(r.event.identifier))return this.warn(`Interstitial "${r.event.identifier}" removed while playing`),void this.primaryFallback(r.event);c&&c(),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new aT(e),this.schedule=new rT(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(_b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(_b.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(_b.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(_b.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(_b.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(_b.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(_b.BUFFER_APPENDED,this.onBufferAppended,this),e.on(_b.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(_b.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(_b.MEDIA_ENDED,this.onMediaEnded,this),e.on(_b.ERROR,this.onError,this),e.on(_b.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(_b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(_b.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(_b.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(_b.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(_b.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(_b.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(_b.BUFFER_CODECS,this.onBufferCodecs,this),e.off(_b.BUFFER_APPENDED,this.onBufferAppended,this),e.off(_b.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(_b.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(_b.MEDIA_ENDED,this.onMediaEnded,this),e.off(_b.ERROR,this.onError,this),e.off(_b.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;null==(e=this.getBufferingPlayer())||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.getBufferingPlayer())||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Uk(e,"play",this.onPlay),Uk(e,"pause",this.onPause),Uk(e,"seeking",this.onSeeking),Uk(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;Bk(n,"seeking",this.onSeeking),Bk(n,"timeupdate",this.onTimeupdate),Bk(n,"play",this.onPlay),Bk(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,null===n)this.checkStart();else if(!r){this.clearScheduleState();const e=this.findItemIndex(n);this.setSchedulePosition(e)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(this.media=null,!n&&(r&&this.removeMediaListeners(r),this.detachedData)){const e=this.getBufferingPlayer();e&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,e.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=t=>t?e.getAssetPlayer(t.identifier):t,r=(t,r,i,s,o)=>{if(t){let l=t[r].start;const c=t.event;if(c){if("playout"===r||c.timelineOccupancy!==qk.Point){const e=n(i);(null==e?void 0:e.interstitial)===c&&(l+=e.assetItem.startOffset+e[o])}}else l+=("bufferedPos"===s?a():e[s])-t.start;return l}return 0},i=(t,n)=>{if(0!==t&&"primary"!==n&&e.schedule.length){var r;const i=e.schedule.findItemIndexAtTime(t),a=null==(r=e.schedule.items)?void 0:r[i];if(a)return t+(a[n].start-a.start)}return t},a=()=>{const t=e.bufferedPos;return t===Number.MAX_VALUE?s("primary"):Math.max(t,0)},s=t=>{var n;return null!=(n=e.primaryDetails)&&n.live?e.primaryDetails.edge:e.schedule.durations[t]},o=(t,i)=>{var a,s;const o=e.effectivePlayingItem;if(null!=o&&null!=(a=o.event)&&a.restrictions.skip)return;e.log(`seek to ${t} "${i}"`);const l=e.effectivePlayingItem,c=e.schedule.findItemIndexAtTime(t,i),u=null==(s=e.schedule.items)?void 0:s[c],d=e.getBufferingPlayer(),h=null==d?void 0:d.interstitial,f=null==h?void 0:h.appendInPlace,p=l&&e.itemsMatch(l,u);if(l&&(f||p)){const a=n(e.playingAsset),s=(null==a?void 0:a.media)||e.primaryMedia;if(s){const n="primary"===i?s.currentTime:r(l,i,e.playingAsset,"timelinePos","currentTime"),o=t-n,c=(f?n:s.currentTime)+o;if(c>=0&&(!a||f||c<=a.duration))return void(s.currentTime=c)}}if(u){let n=t;if("primary"!==i){const e=t-u[i].start;n=u.start+e}const r=!e.isInterstitial(u);if(e.isInterstitial(l)&&!l.event.appendInPlace||!r&&!u.event.appendInPlace){if(l){const a=e.findItemIndex(l);if(c>a){const t=e.schedule.findJumpRestrictedIndex(a+1,c);if(t>a)return void e.setSchedulePosition(t)}let s=0;if(r)e.timelinePos=n,e.checkBuffer();else{var m;const e=null==u||null==(m=u.event)?void 0:m.assetList;if(e){const n=t-(u[i]||u).start;for(let t=e.length;t--;){const r=e[t];if(r.duration&&n>=r.startOffset&&n<r.startOffset+r.duration){s=t;break}}}}e.setSchedulePosition(c,s)}}else{const t=e.media||(f?null==d?void 0:d.media:null);t&&(t.currentTime=n)}}},l=()=>{const n=e.effectivePlayingItem;if(e.isInterstitial(n))return n;const r=t();return e.isInterstitial(r)?r:null},c={get currentTime(){const t=l(),n=e.effectivePlayingItem;return n&&n===t?r(n,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-n.playout.start:0},set currentTime(t){const n=l(),r=e.effectivePlayingItem;r&&r===n&&o(t+r.playout.start,"playout")},get duration(){const e=l();return e?e.playout.end-e.playout.start:0},get assetPlayers(){var t;const n=null==(t=l())?void 0:t.event.assetList;return n?n.map(t=>e.getAssetPlayer(t.identifier)):[]},get playingIndex(){var t;const n=null==(t=l())?void 0:t.event;return n&&e.effectivePlayingAsset?n.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return l()}};this.manager={get events(){var t,n;return(null==(t=e.schedule)||null==(n=t.events)?void 0:n.slice(0))||[]},get schedule(){var t,n;return(null==(t=e.schedule)||null==(n=t.items)?void 0:n.slice(0))||[]},get interstitialPlayer(){return l()?c:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const n=t();return e.findItemIndex(n)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const t=e.effectivePlayingItem;return e.findItemIndex(t)},primary:{get bufferedEnd(){return a()},get currentTime(){const t=e.timelinePos;return t>0?t:0},set currentTime(e){o(e,"primary")},get duration(){return s("primary")},get seekableStart(){var t;return(null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(e){o(e,"integrated")},get duration(){return s("integrated")},get seekableStart(){var t;return i((null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0,"integrated")}},skip:()=>{const t=e.effectivePlayingItem,n=null==t?void 0:t.event;if(n&&!n.restrictions.skip){const r=e.findItemIndex(t);if(n.appendInPlace){const e=t.playout.start+t.event.duration;o(e+.001,"playout")}else e.advanceAfterAssetEnded(n,r,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=null==(e=this.schedule)?void 0:e.items;return!!(this.playbackStarted&&t&&n)&&this.findItemIndex(t)===n.length-1}get playbackStarted(){return null!==this.effectivePlayingItem}get currentTime(){var e,t,n;if(null===this.mediaSelection)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let i=this.media;!i&&null!=(e=this.bufferingItem)&&null!=(t=e.event)&&t.appendInPlace&&(i=this.primaryMedia);const a=null==(n=i)?void 0:n.currentTime;return void 0!==a&&xb(a)?a:void 0}get primaryMedia(){var e;return this.media||(null==(e=this.detachedData)?void 0:e.media)||null}isInterstitial(e){return!(null==e||!e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,r=e.media;if(n&&r===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&r)return void(this.detachedData={media:r});const n=e.transferMedia();this.log(`transfer MediaSource from ${e} ${hE(n)}`),this.detachedData=n}else t&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,t){var n,r;if(e.media===t)return;let i=null;const a=this.hls,s=e!==a,o=s&&e.interstitial.appendInPlace,l=null==(n=this.detachedData)?void 0:n.mediaSource;let c;if(a.media)o&&(i=a.transferMedia(),this.detachedData=i),c="Primary";else if(l){const e=this.getBufferingPlayer();e?(i=e.transferMedia(),c=`${e}`):c="detached MediaSource"}else c="detached media";if(!i)if(l)i=this.detachedData,this.log(`using detachedData: MediaSource ${hE(i)}`);else if(!this.detachedData||a.media===t){const e=this.playerQueue;e.length>1&&e.forEach(e=>{if(s&&e.interstitial.appendInPlace!==o){const t=e.interstitial;this.clearInterstitial(e.interstitial,null),t.appendInPlace=!1,t.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${t}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}const u=i&&"mediaSource"in i&&"closed"!==(null==(r=i.mediaSource)?void 0:r.readyState),d=u&&i?i:t;if(this.log(`${u?"transfering MediaSource":"attaching media"} to ${s?e:"Primary"} from ${c}`),d===i){const t=s&&e.assetId===this.schedule.assetIdAtEnd;d.overrides={duration:this.schedule.duration,endOfStream:!s||t,cueRemoval:!s}}e.attachMedia(d)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e.events;if(!t||this.playbackDisabled||!this.media)return;-1===this.bufferedPos&&(this.bufferedPos=0);const n=this.timelinePos,r=this.effectivePlayingItem;if(-1===n){const n=this.hls.startPosition;if(this.timelinePos=n,t.length&&t[0].cue.pre){const n=e.findEventIndex(t[0].identifier);this.setSchedulePosition(n)}else if(n>=0||!this.primaryLive){const t=this.timelinePos=n>0?n:0,r=e.findItemIndexAtTime(t);this.setSchedulePosition(r)}}else if(r&&!this.playingItem){const t=e.findItemIndex(r);this.setSchedulePosition(t)}}advanceAfterAssetEnded(e,t,n){const r=eT(e,n);if(e.isAssetPastPlayoutLimit(r)){const n=this.schedule.items;if(n){const r=t+1;if(r>=n.length)return void this.setSchedulePosition(-1);const i=e.resumeTime;this.timelinePos<i&&(this.timelinePos=i,this.checkBuffer()),this.setSchedulePosition(r)}}else this.setSchedulePosition(t,r)}setScheduleToAssetAtTime(e,t){const n=this.schedule,r=t.parentIdentifier,i=n.getEvent(r);if(i){const t=n.findEventIndex(r),a=n.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,t,a-1)}}setSchedulePosition(e,t){const n=this.schedule.items;if(!n||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${t}`);const r=e>=0?n[e]:null,i=this.playingItem,a=this.playingLastItem;if(this.isInterstitial(i)){var s;const l=i.event,c=this.playingAsset,u=null==c?void 0:c.identifier,d=u?this.getAssetPlayer(u):null;if(d&&u&&(!this.eventItemsMatch(i,r)||void 0!==t&&u!==(null==(s=l.assetList)?void 0:s[t].identifier))){var o;const t=l.findAssetIndex(c);this.log(`INTERSTITIAL_ASSET_ENDED ${t+1}/${l.assetList.length} ${tT(c)}`),this.endedAsset=c,this.playingAsset=null,this.hls.trigger(_b.INTERSTITIAL_ASSET_ENDED,{asset:c,assetListIndex:t,event:l,schedule:n.slice(0),scheduleIndex:e,player:d}),this.retreiveMediaSource(u,r),!d.media||null!=(o=this.detachedData)&&o.mediaSource||d.detachMedia()}if(!this.eventItemsMatch(i,r)&&(this.endedItem=i,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${l} ${iT(i)}`),l.hasPlayed=!0,this.hls.trigger(_b.INTERSTITIAL_ENDED,{event:l,schedule:n.slice(0),scheduleIndex:e}),l.cue.once)){this.updateSchedule();const e=this.schedule.items;if(r&&e){const n=this.schedule.findItemIndex(r);this.advanceSchedule(n,e,t,i,a)}return}}this.advanceSchedule(e,n,t,i,a)}advanceSchedule(e,t,n,r,i){const a=e>=0?t[e]:null,s=this.primaryMedia,o=this.playerQueue;if(o.length&&o.forEach(t=>{const n=t.interstitial,r=this.schedule.findEventIndex(n.identifier);(r<e||r>e+1)&&this.clearInterstitial(n,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const i=a.event;if(void 0===n){const t=eT(i,(n=this.schedule.findAssetIndex(i,this.timelinePos))-1);if(i.isAssetPastPlayoutLimit(t))return void this.advanceAfterAssetEnded(i,e,n);n=t}const o=this.waitingItem;this.assetsBuffered(a,s)||this.setBufferingItem(a);let l=this.preloadAssets(i,n);if(this.eventItemsMatch(a,o||r)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${iT(a)} ${i.appendInPlace?"append in place":""}`),this.hls.trigger(_b.INTERSTITIAL_STARTED,{event:i,schedule:t.slice(0),scheduleIndex:e})),!i.assetListLoaded)return void this.log(`Waiting for ASSET-LIST to complete loading ${i}`);if(i.assetListLoader&&(i.assetListLoader.destroy(),i.assetListLoader=void 0),!s)return void this.log(`Waiting for attachMedia to start Interstitial ${i}`);this.waitingItem=this.endedItem=null,this.playingItem=a;const c=i.assetList[n];if(!c){const r=t[e+1],a=this.media;return r&&a&&!this.isInterstitial(r)&&a.currentTime<r.start&&(a.currentTime=this.timelinePos=r.start),void this.advanceAfterAssetEnded(i,e,n||0)}if(l||(l=this.getAssetPlayer(c.identifier)),null===l||l.destroyed){const e=i.assetList.length;this.warn(`asset ${n+1}/${e} player destroyed ${i}`),l=this.createAssetPlayer(i,c,n)}if(!this.eventItemsMatch(a,this.bufferingItem)&&i.appendInPlace&&this.isAssetBuffered(c))return;this.startAssetPlayer(l,n,t,e,s),this.shouldPlay&&sT(l.media)}else null!==a?(this.resumePrimary(a,e,r),this.shouldPlay&&sT(this.hls.media)):i&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return!1===this.hls.config.enableInterstitialPlayback}get primaryDetails(){var e,t;return null==(e=this.mediaSelection)||null==(t=e.main)?void 0:t.details}get primaryLive(){var e;return!(null==(e=this.primaryDetails)||!e.live)}resumePrimary(e,t,n){var r;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${iT(e)}`),null==(r=this.detachedData)||!r.mediaSource){let n=this.timelinePos;(n<e.start||n>=e.end)&&(n=this.getPrimaryResumption(e,t),this.timelinePos=n),this.attachPrimary(n,e)}if(!n)return;const i=this.schedule.items;i&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${iT(e)}`),this.hls.trigger(_b.INTERSTITIALS_PRIMARY_RESUMED,{schedule:i.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const e=this.primaryDetails;if(0===t)return this.hls.startPosition;if(e&&(n<e.fragmentStart||n>e.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return null!=t&&t.hls?t.hls.bufferedToEnd:JE.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,r),n&&this.startLoadingPrimaryAt(e,n)),n||(this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs(((null==(n=r.mainForwardBufferInfo)?void 0:n.start)||r.media.currentTime)-e)>.5?r.startLoad(e,t):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(_b.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(_b.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(-1===t.level)return;const n=this.hls.levels[t.level],r=Ub(Ub({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],r=this.mediaSelection;if(!r)return void(this.altSelection=Ub(Ub({},this.altSelection),{},{audio:n}));const i=Ub(Ub({},r),{},{audio:n});this.mediaSelection=i}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],r=this.mediaSelection;if(!r)return void(this.altSelection=Ub(Ub({},this.altSelection),{},{subtitles:n}));const i=Ub(Ub({},r),{},{subtitles:n});this.mediaSelection=i}onAudioTrackSwitching(e,t){const n=mE(t);this.playerQueue.forEach(e=>e.hls.setAudioOption(t)||e.hls.setAudioOption(n))}onSubtitleTrackSwitch(e,t){const n=mE(t);this.playerQueue.forEach(e=>e.hls.setSubtitleOption(t)||-1!==t.id&&e.hls.setSubtitleOption(n))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const e=this.timelinePos;this.bufferedPos=e,this.checkBuffer()}}onBufferedToEnd(e){const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let e=0;e<t.length;e++){const r=t[e];if(r.cue.post){var n;const e=this.schedule.findEventIndex(r.identifier),t=null==(n=this.schedule.items)?void 0:n[e];this.isInterstitial(t)&&this.eventItemsMatch(t,this.bufferingItem)&&this.bufferedToItem(t,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}else this.shouldPlay=!1}updateItem(e,t){const n=this.schedule.items;return e&&n&&n[this.findItemIndex(e,t)]||null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((t,n)=>{e.event.isAssetPastPlayoutLimit(n)&&this.clearAssetPlayer(t.identifier,null)});const t=e.end+.25,n=JE.bufferInfo(this.primaryMedia,t,0);(n.end>t||(n.nextStart||0)>t)&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===(null==(n=t.event)?void 0:n.identifier))}findItemIndex(e,t){return e?this.schedule.findItemIndex(e,t):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const t=this.schedule.items;if(!t)return;const n=JE.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=n.len<1),this.updateBufferedPos(n.end,t,e)}updateBufferedPos(e,t,n){const r=this.schedule,i=this.bufferingItem;if(this.bufferedPos>e)return;if(1===t.length&&this.itemsMatch(t[0],i))return void(this.bufferedPos=e);const a=this.playingItem,s=this.findItemIndex(a);let o=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var l,c;const n=this.findItemIndex(i),r=Math.min(n+1,t.length-1),a=t[r];if((-1===o&&i&&e>=i.end||null!=(l=a.event)&&l.appendInPlace&&e+.01>=a.start)&&(o=r),r-s>1&&!1===(null==i||null==(c=i.event)?void 0:c.appendInPlace))return;if(this.bufferedPos=e,o>n&&o>s)this.bufferedToItem(a);else{const t=this.primaryDetails;this.primaryLive&&t&&e>t.edge-t.targetduration&&a.start<t.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(a)&&this.preloadAssets(a.event,0)}}else n&&a&&!this.itemsMatch(a,i)&&(o===s?this.bufferedToItem(a):o===s+1&&this.bufferedToItem(t[o]))}assetsBuffered(e,t){return 0!==e.event.assetList.length&&!e.event.assetList.some(e=>{const n=this.getAssetPlayer(e.identifier);return!(null!=n&&n.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(this.itemsMatch(e,t))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:r,events:i}=n;if(!r||!i)return t;const a=this.isInterstitial(e),s=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const o=s?s.remaining:t?t.end-this.timelinePos:0;this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${iT(e)}`+(t?` (${o.toFixed(2)} remaining)`:"")),this.playbackDisabled||(a?e.event.assetList.forEach(e=>{const t=this.getAssetPlayer(e.identifier);t&&t.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(e=>e.pauseBuffering()))),this.hls.trigger(_b.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:i.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled)if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(null!==n){this.bufferingAsset=null;const t=this.detachedData;if(t)if(t.mediaSource){const t=!0;this.attachPrimary(e.start,e,t)}else this.preloadPrimary(e);else this.preloadPrimary(e)}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,r=0===n.assetList.length&&!n.assetListLoader,i=n.cue.once;if(r||!i){const e=this.preloadAssets(n,t);if(null!=e&&e.interstitial.appendInPlace){const r=n.assetList[t],i=this.primaryMedia;r&&i&&this.bufferAssetPlayer(e,i)}}}preloadAssets(e,t){const n=e.assetUrl,r=e.assetList.length,i=0===r&&!e.assetListLoader,a=e.cue.once;if(i){const i=e.timelineStart;if(e.appendInPlace){var s;const t=this.playingItem;this.isInterstitial(t)||(null==t||null==(s=t.nextEvent)?void 0:s.identifier)!==e.identifier||this.flushFrontBuffer(i+.25)}let a,o=0;if(!this.playingItem&&this.primaryLive&&(o=this.hls.startPosition,-1===o&&(o=this.hls.liveSyncPosition||0)),o&&!e.cue.pre&&!e.cue.post){const e=o-i;e>0&&(a=Math.round(1e3*e)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:r} ${e}${a?` live-start: ${o} start-offset: ${a}`:""}`),n)return this.createAsset(e,0,0,i,e.duration,n);const l=this.assetListLoader.loadAssetList(e,a);l&&(e.assetListLoader=l)}else if(!a&&r){for(let n=t;n<r;n++){const t=e.assetList[n],r=this.getAssetPlayerQueueIndex(t.identifier);-1!==r&&!this.playerQueue[r].destroyed||t.error||this.createAssetPlayer(e,t,n)}return this.getAssetPlayer(e.assetList[t].identifier)}return null}flushFrontBuffer(e){const t=this.requiredTracks;t&&(this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(t=>{this.hls.trigger(_b.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:t})}))}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t)for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n];return null}createAsset(e,t,n,r,i,a){const s={parentIdentifier:e.identifier,identifier:Xk(e,a,t),duration:i,startOffset:n,timelineStart:r,uri:a};return this.createAssetPlayer(e,s,t)}createAssetPlayer(e,t,n){const r=this.hls,i=r.userConfig;let a=i.videoPreference;const s=r.loadLevelObj||r.levels[r.currentLevel];(a||s)&&(a=Fb({},a),s.videoCodec&&(a.videoCodec=s.videoCodec),s.videoRange&&(a.allowedVideoRanges=[s.videoRange]));const o=r.audioTracks[r.audioTrack],l=r.subtitleTracks[r.subtitleTrack];let c=0;if(this.primaryLive||e.appendInPlace){const e=this.timelinePos-t.timelineStart;if(e>1){const n=t.duration;n&&e<n&&(c=e)}}const u=t.identifier,d=Ub(Ub({},i),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:u,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:c,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:o||i.audioPreference,subtitlePreference:l||i.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(d.timelineOffset=t.timelineStart));const h=d.cmcd;null!=h&&h.sessionId&&h.contentId&&(d.cmcd=Fb({},h,{contentId:Kk(t.uri)})),this.getAssetPlayer(u)&&this.warn(`Duplicate date range identifier ${e} and asset ${u}`);const f=new nT(this.HlsPlayerClass,d,e,t);this.playerQueue.push(f),e.assetList[n]=t;const p=r=>{if(r.live){const t=new Error(`Interstitials MUST be VOD assets ${e}`),r={fatal:!0,type:kb.OTHER_ERROR,details:Tb.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};return void this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,t.message)}const i=r.edge-r.fragmentStart,a=t.duration;(null===a||i>a)&&(this.log(`Interstitial asset "${u}" duration change ${a} > ${i}`),t.duration=i,this.updateSchedule())};f.on(_b.LEVEL_UPDATED,(e,{details:t})=>p(t)),f.on(_b.LEVEL_PTS_UPDATED,(e,{details:t})=>p(t));const m=(e,t)=>{const n=this.getAssetPlayer(u);if(n&&t.tracks){n.off(_b.BUFFER_CODECS,m),n.tracks=t.tracks;const e=this.primaryMedia;this.bufferingAsset===n.assetItem&&e&&!n.media&&this.bufferAssetPlayer(n,e)}};f.on(_b.BUFFER_CODECS,m);const g=()=>{var n;const r=this.getAssetPlayer(u);if(this.log(`buffered to end of asset ${r}`),!r)return;const i=this.schedule.findEventIndex(e.identifier),a=null==(n=this.schedule.items)?void 0:n[i];if(this.isInterstitial(a)){const n=e.findAssetIndex(t),r=eT(e,n);if(e.isAssetPastPlayoutLimit(r)){var s;const e=null==(s=this.schedule.items)?void 0:s[i+1];e&&this.bufferedToItem(e)}else this.bufferedToItem(a,r)}};f.on(_b.BUFFERED_TO_END,g);const v=t=>()=>{if(!this.getAssetPlayer(u))return;this.shouldPlay=!0;const n=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,n,t)};return f.once(_b.MEDIA_ENDED,v(n)),f.once(_b.PLAYOUT_LIMIT_REACHED,v(1/0)),f.on(_b.ERROR,(t,r)=>{const i=this.getAssetPlayer(u);if(r.details!==Tb.BUFFER_STALLED_ERROR)this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${r.error} ${e}`);else if(null!=i&&i.media){const t=i.currentTime,n=i.duration-t;t&&e.appendInPlace&&n/i.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${u} ${e} at ${i.media.currentTime}`),g()):(this.warn(`Stalled at ${t} of ${t+n} in asset ${u} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}}),f.on(_b.DESTROYING,()=>{if(!this.getAssetPlayer(u))return;const t=new Error(`Asset player destroyed unexpectedly ${u}`),r={fatal:!0,type:kb.OTHER_ERROR,details:Tb.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,t.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${tT(t)}`),this.hls.trigger(_b.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:f}),f}clearInterstitial(e,t){e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(-1!==t){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(-1!==n){this.log(`clear asset player "${e}" toSegment: ${t?iT(t):t}`);const r=this.playerQueue[n];this.transferMediaFromPlayer(r,t),this.playerQueue.splice(n,1),r.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,r,i){const{interstitial:a,assetItem:s,assetId:o}=e,l=a.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=s,c&&c.identifier===o||(c&&(this.clearAssetPlayer(c.identifier,n[r]),delete c.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${l} ${tT(s)}`),this.hls.trigger(_b.INTERSTITIAL_ASSET_STARTED,{asset:s,assetListIndex:t,event:a,schedule:n.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,i)}bufferAssetPlayer(e,t){var n,r;const{interstitial:i,assetItem:a}=e,s=this.schedule.findEventIndex(i.identifier),o=null==(n=this.schedule.items)?void 0:n[s];if(!o)return;this.setBufferingItem(o),this.bufferingAsset=a;const l=this.getBufferingPlayer();if(l===e)return;const c=i.appendInPlace;if(c&&!1===(null==l?void 0:l.interstitial.appendInPlace))return;const u=(null==l?void 0:l.tracks)||(null==(r=this.detachedData)?void 0:r.tracks)||this.requiredTracks;if(c&&a!==this.playingAsset){if(!e.tracks)return;if(u&&!Yb(u,e.tracks)){const t=new Error(`Asset ${tT(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(u)}')`),n={fatal:!0,type:kb.OTHER_ERROR,details:Tb.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},r=i.findAssetIndex(a);return void this.handleAssetItemError(n,i,s,r,t.message)}}this.transferMediaTo(e,t)}handleAssetItemError(e,t,n,r,i){if(e.details===Tb.BUFFER_STALLED_ERROR)return;const a=t.assetList[r];this.warn(`INTERSTITIAL_ASSET_ERROR ${a?tT(a):a} ${e.error}`);const s=null==a?void 0:a.identifier,o=this.getAssetPlayerQueueIndex(s),l=this.playerQueue[o]||null,c=this.schedule.items,u=Fb({},e,{fatal:!1,errorAction:PE(!0),asset:a,assetListIndex:r,event:t,schedule:c,scheduleIndex:n,player:l});if(this.hls.trigger(_b.INTERSTITIAL_ASSET_ERROR,u),!e.fatal)return;const d=this.playingAsset,h=new Error(i);if(a&&(this.clearAssetPlayer(s,null),a.error=h),t.assetList.some(e=>!e.error)){if(t.appendInPlace){for(let e=r;e<t.assetList.length;e++)this.resetAssetPlayer(t.assetList[e].identifier);this.updateSchedule()}}else t.error=h;t.error?this.primaryFallback(t):d&&d.identifier===s&&this.advanceAfterAssetEnded(t,n,r)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;if(this.updateSchedule(),n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${n?iT(n):"<none>"} error: ${e.error}`);let r=this.timelinePos;-1===r&&(r=this.hls.startPosition);const i=this.updateItem(n,r);this.itemsMatch(n,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t));const a=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(a)}else this.checkStart()}onAssetListLoaded(e,t){var n;const r=t.event,i=r.identifier,a=t.assetListResponse.ASSETS;if(!this.schedule.hasEvent(i))return;const s=r.timelineStart,o=r.duration;let l=0;a.forEach((e,t)=>{const n=parseFloat(e.DURATION);this.createAsset(r,t,l,s+l,n,e.URI),l+=n}),r.duration=l,this.log(`Loaded asset-list with duration: ${l} (was: ${o}) ${r}`);const c=this.waitingItem,u=(null==c?void 0:c.event.identifier)===i;this.updateSchedule();const d=null==(n=this.bufferingItem)?void 0:n.event;if(u){var h;const e=this.schedule.findEventIndex(i),t=null==(h=this.schedule.items)?void 0:h[e];if(t){if(!this.playingItem&&this.timelinePos>t.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==e)return r.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${r}`),void this.primaryFallback(r);this.setBufferingItem(t)}this.setSchedulePosition(e)}else if((null==d?void 0:d.identifier)===i&&d.appendInPlace){const e=r.assetList[0],t=this.getAssetPlayer(e.identifier),n=this.primaryMedia;e&&t&&n&&this.bufferAssetPlayer(t,n)}}onError(e,t){switch(t.details){case Tb.ASSET_LIST_PARSING_ERROR:case Tb.ASSET_LIST_LOAD_ERROR:case Tb.ASSET_LIST_LOAD_TIMEOUT:{const e=t.interstitial;e&&this.primaryFallback(e);break}case Tb.BUFFER_STALLED_ERROR:this.onTimeupdate(),this.checkBuffer(!0)}}}});function u_(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(u_):Object.keys(e).reduce((t,n)=>(t[n]=u_(e[n]),t),{}):e}class d_ extends qE{constructor(e,t){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var e;null!=(e=this.media)&&e.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{var e;this.hls&&(this.ended=(null==(e=this.media)?void 0:e.currentTime)||1,this.hls.trigger(_b.MEDIA_ENDED,{stalled:!1}))},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_b.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_b.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(100),this.mediaSource=t.mediaSource;const n=this.media=t.media;Bk(n,"playing",this.onMediaPlaying),Bk(n,"waiting",this.onMediaWaiting),Bk(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(Uk(n,"playing",this.onMediaPlaying),Uk(n,"waiting",this.onMediaWaiting),Uk(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(null==(e=this.media)||!e.readyState||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,r;const i=null==(n=this.hls)?void 0:n.config;if(!i)return;const a=this.media;if(!a)return;const{seeking:s}=a,o=this.seeking&&!s,l=!this.seeking&&s,c=a.paused&&!s||a.ended||0===a.playbackRate;if(this.seeking=s,e!==t)return t&&(this.ended=0),this.moved=!0,s||(this.nudgeRetry=0,i.nudgeOnVideoHole&&!c&&e>t&&this.nudgeOnVideoHole(e,t)),void(0===this.waiting&&this.stallResolved(e));if(l||o)return void(o&&this.stallResolved(e));if(c)return this.nudgeRetry=0,this.stallResolved(e),void(!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(_b.MEDIA_ENDED,{stalled:!1})));if(!JE.getBuffered(a).length)return void(this.nudgeRetry=0);const u=JE.bufferInfo(a,e,0),d=u.nextStart||0,h=this.fragmentTracker;if(s&&h&&this.hls){const t=h_(this.hls.inFlightFragments,e),n=u.len>2,r=!d||t||d-e>2&&!h.getPartialFragment(e);if(n||r)return;this.moved=!1}const f=null==(r=this.hls)?void 0:r.latestLevelDetails;if(!this.moved&&null!==this.stalled&&h){if(!(u.len>0||d))return;const t=Math.max(d,u.start||0)-e,n=null!=f&&f.live?2*f.targetduration:2,r=h.getPartialFragment(e);if(t>0&&(t<=n||r))return void(a.paused||this._trySkipBufferHole(r))}const p=i.detectStallWithCurrentTimeMs,m=self.performance.now(),g=this.waiting;let v=this.stalled;if(null===v){if(!(g>0&&m-g<p))return void(this.stalled=m);v=this.stalled=g}const b=m-v;if(!s&&(b>=p||g)&&this.hls){var y;if("ended"===(null==(y=this.mediaSource)?void 0:y.readyState)&&(null==f||!f.live)&&Math.abs(e-((null==f?void 0:f.edge)||0))<1){if(this.ended)return;return this.ended=e||1,void this.hls.trigger(_b.MEDIA_ENDED,{stalled:!0})}if(this._reportStall(u),!this.media||!this.hls)return}const E=JE.bufferInfo(a,e,i.maxBufferHole);this._tryFixBufferStall(E,b,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(_b.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&null!=(n=this.buffered.audio)&&n.length&&r&&r.length>1&&e>r.end(0)){const n=JE.bufferedInfo(JE.timeRangesToArray(this.buffered.audio),e,0);if(n.len>1&&t>=n.start){const n=JE.timeRangesToArray(r),i=JE.bufferedInfo(n,t,0).bufferedIndex;if(i>-1&&i<n.length-1){const t=JE.bufferedInfo(n,e,0).bufferedIndex,r=n[i].end,a=n[i+1].start;if((-1===t||t>i)&&a-r<1&&e-r<2){const n=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${r} -> ${a} buffered index: ${t}`);this.warn(n.message),this.media.currentTime+=1e-6;const i=this.fragmentTracker.getPartialFragment(e)||void 0,s=JE.bufferInfo(this.media,e,0);this.hls.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:n,reason:n.message,frag:i,buffer:s.len,bufferInfo:s})}}}}}_tryFixBufferStall(e,t,n){var r,i;const{fragmentTracker:a,media:s}=this,o=null==(r=this.hls)?void 0:r.config;if(!s||!a||!o)return;const l=null==(i=this.hls)?void 0:i.latestLevelDetails,c=a.getPartialFragment(n);if((c||null!=l&&l.live&&n<l.fragmentStart)&&(this._trySkipBufferHole(c)||!this.media))return;const u=e.buffered,d=this.adjacentTraversal(e,n);(u&&u.length>1&&e.len>o.maxBufferHole||e.nextStart&&(e.nextStart-n<o.maxBufferHole||d))&&(t>1e3*o.highBufferWatchdogPeriod||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,r=e.nextStart;if(n&&r){const e=n.getFragAtPos(t,Pb),i=n.getFragAtPos(r,Pb);if(e&&i)return i.sn-e.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:r,stalled:i}=this;if(!r&&null!==i&&n&&t){this.stallReported=!0;const r=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${hE(e)})`);this.warn(r.message),t.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len,bufferInfo:e,stalled:{start:i}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:r}=this,i=null==(t=this.hls)?void 0:t.config;if(!r||!n||!i)return 0;const a=r.currentTime,s=JE.bufferInfo(r,a,0),o=a<s.start?s.start:s.nextStart;if(o&&this.hls){const t=s.len<=i.maxBufferHole,c=s.len>0&&s.len<1&&r.readyState<3,u=o-a;if(u>0&&(t||c)){if(u>i.maxBufferHole){let t=!1;if(0===a){const e=n.getAppendedFrag(0,Pb);e&&o<e.end&&(t=!0)}if(!t){const t=e||n.getAppendedFrag(a,Pb);if(t){var l;if(null==(l=this.hls.loadLevelObj)||!l.details)return 0;if(h_(this.hls.inFlightFragments,o))return 0;let e=!1,r=t.end;for(;r<o;){const t=n.getPartialFragment(r);if(!t){e=!0;break}r+=t.duration}if(e)return 0}}}const t=Math.max(o+.05,a+.1);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${t}`),this.moved=!0,r.currentTime=t,null==e||!e.gap){const n=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${t}`);this.hls.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:n,reason:n.message,frag:e||void 0,buffer:s.len,bufferInfo:s})}return t}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:r}=this,i=null==t?void 0:t.config;if(!n||!i)return 0;const a=n.currentTime;if(this.nudgeRetry++,r<i.nudgeMaxRetry){const s=a+(r+1)*i.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${a} to ${s}`);this.warn(o.message),n.currentTime=s,t.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1,buffer:e.len,bufferInfo:e})}else{const n=new Error(`Playhead still not moving while enough data buffered @${a} after ${i.nudgeMaxRetry} nudges`);this.error(n.message),t.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.BUFFER_STALLED_ERROR,error:n,fatal:!0,buffer:e.len,bufferInfo:e})}}}function h_(e,t){const n=f_(e.main);if(n&&n.start<=t)return n;const r=f_(e.audio);return r&&r.start<=t?r:null}function f_(e){if(!e)return null;switch(e.state){case cS:case lS:case gS:case vS:return null}return e.frag}function p_(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function m_(e,t,n,r,i){let a=new e(t,n,"");try{a.value=r,i&&(a.type=i)}catch(s){a=new e(t,n,hE(i?Ub({type:i},r):r))}return a}const g_=(()=>{const e=p_();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function v_(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class b_{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(_b.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(_b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(_b.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(_b.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(_b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(_b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(_b.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(_b.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,t){var n;this.media=t.media,!1===(null==(n=t.overrides)?void 0:n.cueRemoval)&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,t){this.media=null,t.transferMedia||(this.id3Track&&(this.removeCues&&Gk(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if("metadata"===n.kind&&"id3"===n.label)return zk(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:r}}}=this;if(!n&&!r)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=p_();if(a)for(let e=0;e<i.length;e++){const t=i[e].type;if(t===qS.emsg&&!n||!r)continue;const s=HS(i[e].data);if(s){const n=i[e].pts;let r=n+i[e].duration;r>g_&&(r=g_),r-n<=0&&(r=n+.25);for(let e=0;e<s.length;e++){const i=s[e];if(!WS(i)){this.updateId3CueEnds(n,t);const e=m_(a,n,r,i,t);e&&this.id3Track.addCue(e)}}}}}updateId3CueEnds(e,t){var n;const r=null==(n=this.id3Track)?void 0:n.cues;if(r)for(let n=r.length;n--;){const i=r[n];i.type===t&&i.startTime<e&&i.endTime===g_&&(i.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:r}){const{id3Track:i,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:s,enableID3MetadataCues:o}}=a;if(i&&(s||o)){let e;e="audio"===r?e=>e.type===qS.audioId3&&o:"video"===r?e=>e.type===qS.emsg&&s:e=>e.type===qS.audioId3&&o||e.type===qS.emsg&&s,Hk(i,t,n,e)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:n}=this,{dateRanges:r}=e,i=Object.keys(r);let a=this.dateRangeCuesAppended;var s;if(n&&t)if(null!=(s=n.cues)&&s.length){const e=Object.keys(a).filter(e=>!i.includes(e));for(let t=e.length;t--;){const r=e[t],i=a[r].cues;delete a[r],Object.keys(i).forEach(e=>{try{const t=i[e];t.removeEventListener("enter",this.onEventCueEnter),n.removeCue(t)}catch(e){}})}}else a=this.dateRangeCuesAppended={};const o=e.fragments[e.fragments.length-1];if(0===i.length||!xb(null==o?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=p_();for(let e=0;e<i.length;e++){const t=i[e],n=r[t],s=n.startTime,o=a[t],c=(null==o?void 0:o.cues)||{};let u=(null==o?void 0:o.durationKnown)||!1,d=g_;const{duration:h,endDate:f}=n;if(f&&null!==h)d=s+h,u=!0;else if(n.endOnNext&&!u){const e=i.reduce((e,t)=>{if(t!==n.id){const i=r[t];if(i.class===n.class&&i.startDate>n.startDate&&(!e||n.startDate<e.startDate))return i}return e},null);e&&(d=e.startTime,u=!0)}const p=Object.keys(n.attr);for(let e=0;e<p.length;e++){const r=p[e];if(!ox(r))continue;const i=c[r];if(i)u&&!o.durationKnown?i.endTime=d:Math.abs(i.startTime-s)>.01&&(i.startTime=s,i.endTime=d);else if(l){let e=n.attr[r];lx(r)&&(e=v_(e));const i=m_(l,s,d,{key:r,data:e},qS.dateRange);i&&(i.id=t,this.id3Track.addCue(i),c[r]=i,this.hls.config.interstitialsController&&("X-ASSET-LIST"!==r&&"X-ASSET-URL"!==r||i.addEventListener("enter",this.onEventCueEnter)))}}a[t]={cues:c,dateRange:n,durationKnown:u}}}}class y_{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:e}=this,t=this.levelDetails;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(null===n)return;this._latency=n;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:i}=this.config;if(!r||1===i||!t.live)return;const a=this.targetLatency;if(null===a)return;const s=n-a;if(s<Math.min(this.maxLatency,a+t.targetduration)&&s>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,i)),n=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20,r=Math.min(t,Math.max(1,n));this.changeMediaPlaybackRate(e,r)}else 1!==e.playbackRate&&0!==e.playbackRate&&this.changeMediaPlaybackRate(e,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return(null==(e=this.hls)?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(void 0!==e.liveMaxLatencyDuration)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(null===e||null===this.hls)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:i,liveSyncDurationCount:a,lowLatencyMode:s}=this.config,o=this.hls.userConfig;let l=s&&n||t;(this._targetLatencyUpdated||o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==i?i:a*r);const c=r;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,c)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(null===e||null===t)return null;const n=this.levelDetails;if(null===n)return null;const r=n.edge,i=e-t-this.edgeStalled,a=r-n.totalduration,s=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,i),s)}get drift(){const e=this.levelDetails;return null===e?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(_b.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(_b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(_b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(_b.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===Tb.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&null!=(n=this.levelDetails)&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,r;e.playbackRate!==t&&(null==(n=this.hls)||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${null==(r=this.targetLatency)?void 0:r.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}class E_ extends qw{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(_b.LEVEL_LOADED,this.onLevelLoaded,this),e.on(_b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(_b.FRAG_BUFFERED,this.onFragBuffered,this),e.on(_b.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(_b.LEVEL_LOADED,this.onLevelLoaded,this),e.off(_b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(_b.FRAG_BUFFERED,this.onFragBuffered,this),e.off(_b.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(e=>{e.loadError=0,e.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,r=[],i={},a={};let s=!1,o=!1,l=!1;t.levels.forEach(e=>{const t=e.attrs;let{audioCodec:c,videoCodec:u}=e;c&&(e.audioCodec=c=Xy(c,n)||void 0),u&&(u=e.videoCodec=function(e){const t=e.split(",");for(let e=0;e<t.length;e++){const n=t[e].split(".");n.length>2&&"avc1"===n[0]&&(t[e]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return t.join(",")}(u));const{width:d,height:h,unknownCodecs:f}=e;let p=f?f.length:0;if(f)for(let t=p;t--;){const n=f[t];this.isAudioSupported(n)?(e.audioCodec=c=c?`${c},${n}`:n,p--,$y.audio[c.substring(0,4)]=2):this.isVideoSupported(n)&&(e.videoCodec=u=u?`${u},${n}`:n,p--,$y.video[u.substring(0,4)]=2)}if(s||(s=!(!d||!h)),o||(o=!!u),l||(l=!!c),p||c&&!this.isAudioSupported(c)||u&&!this.isVideoSupported(u))return void this.log(`Some or all CODECS not supported "${t.CODECS}"`);const{CODECS:m,"FRAME-RATE":g,"HDCP-LEVEL":v,"PATHWAY-ID":b,RESOLUTION:y,"VIDEO-RANGE":E}=t,x=`${b||"."}-${e.bitrate}-${y}-${g}-${m}-${E}-${v}`;if(i[x])if(i[x].uri===e.url||e.attrs["PATHWAY-ID"])i[x].addGroupId("audio",t.AUDIO),i[x].addGroupId("text",t.SUBTITLES);else{const t=a[x]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const n=this.createLevel(e);i[x]=n,r.push(n)}else{const t=this.createLevel(e);i[x]=t,a[x]=1,r.push(t)}}),this.filterAndSortMediaOptions(r,t,s,o,l)}createLevel(e){const t=new uE(e),n=e.supplemental;if(null!=n&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const e=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(e.message),t.supportedResult=nE(e,[])}return t}isAudioSupported(e){return Vy(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Vy(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,r,i){let a=[],s=[],o=e;if((n||r)&&i&&(o=o.filter(({videoCodec:e,videoRange:t,width:n,height:r})=>(!!e||!(!n||!r))&&function(e){return!!e&&oE.indexOf(e)>-1}(t))),0===o.length)return void Promise.resolve().then(()=>{if(this.hls){let e="no level with compatible codecs found in manifest",n=e;t.levels.length&&(n=`one or more CODECS in variant not supported: ${hE(t.levels.map(e=>e.attrs.CODECS).filter((e,t,n)=>n.indexOf(e)===t))}`,this.warn(n),e+=` (${n})`);const r=new Error(e);this.hls.trigger(_b.ERROR,{type:kb.MEDIA_ERROR,details:Tb.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:r,reason:n})}});t.audioTracks&&(a=t.audioTracks.filter(e=>!e.audioCodec||this.isAudioSupported(e.audioCodec)),x_(a)),t.subtitles&&(s=t.subtitles,x_(s));const l=o.slice(0);o.sort((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return oE.indexOf(e.videoRange)-oE.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const n=Wy(e.videoCodec),r=Wy(t.videoCodec);if(n!==r)return r-n}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const n=Ky(e.codecSet),r=Ky(t.codecSet);if(n!==r)return r-n}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0});let c=l[0];if(this.steering&&(o=this.steering.filterParsedLevels(o),o.length!==l.length))for(let e=0;e<l.length;e++)if(l[e].pathwayId===o[0].pathwayId){c=l[e];break}this._levels=o;for(let e=0;e<o.length;e++)if(o[e]===c){var u;this._firstLevel=e;const t=c.bitrate,n=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${o.length} level(s) found, first bitrate: ${t}`),void 0===(null==(u=this.hls.userConfig)?void 0:u.abrEwmaDefaultEstimate)){const e=Math.min(t,this.hls.config.abrEwmaDefaultEstimateMax);e>n&&n===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=e)}break}const d=i&&!r,h=this.hls.config,f=!(!h.audioStreamController||!h.audioTrackController),p={levels:o,audioTracks:a,subtitleTracks:s,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:r,altAudio:f&&!d&&a.some(e=>!!e.url)};this.hls.trigger(_b.MANIFEST_PARSED,p)}get levels(){return 0===this._levels.length?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const n=new Error("invalid level idx"),r=e<0;if(this.hls.trigger(_b.ERROR,{type:kb.OTHER_ERROR,details:Tb.LEVEL_SWITCH_ERROR,level:e,fatal:r,error:n,reason:n.message}),r)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,i=r?r.attrs["PATHWAY-ID"]:void 0,a=t[e],s=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&r&&i===s)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${s?" with Pathway "+s:""} from level ${n}${i?" with Pathway "+i:""}`);const o={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(_b.LEVEL_SWITCHING,o);const l=a.details;if(!l||l.live){const e=this.switchParams(a.uri,null==r?void 0:r.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(e=>-1!==t.indexOf(e));if(e.length<1)return void this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);this.steering.pathwayPriority=n}}onError(e,t){!t.fatal&&t.context&&t.context.type===Rb&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(void 0!==t&&t.type===Pb){const e=t.elementaryStreams;if(!Object.keys(e).some(t=>!!e[t]))return;const n=this._levels[t.level];null!=n&&n.loadError&&(this.log(`Resetting level error count of ${n.loadError} on frag buffered`),n.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:i}=t,a=t.levelInfo;var s;if(!a)return this.warn(`Invalid level index ${r}`),void(null!=(s=t.deliveryDirectives)&&s.skip&&(i.deltaUpdateFailed=!0));if(a===this.currentLevel||t.withoutMultiVariant){0===a.fragmentError&&(a.loadError=0);let e=a.details;e===t.details&&e.advanced&&(e=void 0),this.playlistLoaded(r,t,e)}else null!=(n=t.deliveryDirectives)&&n.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),r=this.currentLevelIndex,i=e.attrs["PATHWAY-ID"],a=e.details,s=null==a?void 0:a.age;this.log(`Loading level index ${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${i?" Pathway "+i:""}${s&&a.live?" age "+s.toFixed(1)+(a.type?" "+a.type||0:""):""} ${n}`),this.hls.trigger(_b.LEVEL_LOADING,{url:n,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(1===this._levels.length)return;const n=this._levels.filter((t,n)=>n!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach(e=>e.level=-1)),!1));nS(n),this._levels=n,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=n.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger(_b.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(_b.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function x_(e){const t={};e.forEach(e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++})}function S_(){return self.SourceBuffer||self.WebKitSourceBuffer}function w_(){if(!Kb())return!1;const e=S_();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}class k_ extends ES{constructor(e,t,n){super(e,t,n,"stream-controller",Pb),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const e=this.media,t=e?e.currentTime:null;if(null===t||!xb(t))return;if(this.log(`Media seeked to ${t.toFixed(3)}`),!this.getBufferedFrag(t))return;const n=this.getFwdBufferInfoAtPos(e,t,Pb,0);null!==n&&0!==n.len?this.tick():this.warn(`Main forward buffer length at ${t} on "seeked" event ${n?n.len:"empty"})`)},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(_b.LEVEL_LOADING,this.onLevelLoading,this),e.on(_b.LEVEL_LOADED,this.onLevelLoaded,this),e.on(_b.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(_b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(_b.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(_b.BUFFER_CREATED,this.onBufferCreated,this),e.on(_b.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(_b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(_b.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(_b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(_b.LEVEL_LOADED,this.onLevelLoaded,this),e.off(_b.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(_b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(_b.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(_b.BUFFER_CREATED,this.onBufferCreated,this),e.off(_b.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(_b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(_b.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=r.startLevel;-1===e&&(r.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=r.firstAutoLevel),r.nextLoadLevel=e,this.level=r.loadLevel,this._hasEnoughToStart=!!t}n>0&&-1===e&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=cS,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=lS}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case yS:{const{levels:e,level:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&(!r.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(r))break;this.state=cS;break}if(this.hls.nextLoadLevel!==this.level){this.state=cS;break}break}case hS:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||null!=(e=this.media)&&e.seeking){const{levels:e,level:t}=this,n=null==e?void 0:e[t];this.resetStartWhenNotLoaded(n||null),this.state=cS}}}this.state===cS&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),null!=(e=this.media)&&e.readyState&&!1===this.media.seeking&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this;if(null===t||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==n||!n[i])return;const a=n[i],s=this.getMainFwdBufferInfo();if(null===s)return;const o=this.getLevelDetails();if(o&&this._streamEnded(s,o)){const e={};return 2===this.altAudio&&(e.type="video"),this.hls.trigger(_b.BUFFER_EOS,e),void(this.state=gS)}if(!this.buffering)return;e.loadLevel!==i&&-1===e.manualLevel&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const l=a.details;if(!l||this.state===yS||this.waitForLive(a))return this.level=i,this.state=yS,void(this.startFragRequested=!1);const c=s.len,u=this.getMaxBufferLength(a.maxBitrate);if(c>=u)return;this.backtrackFragment&&this.backtrackFragment.start>s.end&&(this.backtrackFragment=null);const d=this.backtrackFragment?this.backtrackFragment.start:s.end;let h=this.getNextFragment(d,l);if(this.couldBacktrack&&!this.fragPrevious&&h&&dy(h)&&this.fragmentTracker.getState(h)!==OE){var f;const e=(null!=(f=this.backtrackFragment)?f:h).sn-l.startSN,t=l.fragments[e-1];t&&h.cc===t.cc&&(h=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&s.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,d)){if(!h.gap){const e=this.audioOnly&&!this.altAudio?oy:ly,t=(e===ly?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,Pb)}h=this.getNextFragmentLoopLoading(h,l,s,Pb,u)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,a,d))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);r===IE||r===DE?dy(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Pb)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const i=this.getLevelDetails();if(null!=i&&i.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*i.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],r=this.fragLastKbps;n=r&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*r)+1:0}else n=0;const a=this.getBufferedFrag(t.currentTime+n);if(a){const e=this.followingBufferedFrag(a);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,n=e.duration,r=Math.max(a.end,t+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,n*(this.couldBacktrack?.5:.125)),n*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(r,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case uS:case dS:case hS:case pS:case mS:this.state=cS}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,2===this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;Bk(n,"playing",this.onMediaPlaying),Bk(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(Uk(n,"playing",this.onMediaPlaying),Uk(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),t.transferMedia||(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(_b.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,r=!1;t.levels.forEach(e=>{const t=e.audioCodec;t&&(n=n||-1!==t.indexOf("mp4a.40.2"),r=r||-1!==t.indexOf("mp4a.40.5"))}),this.audioCodecSwitch=n&&r&&!function(){var e;const t=S_();return"function"==typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==cS)return;const r=t.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=yS)}onLevelLoaded(e,t){var n;const{levels:r,startFragRequested:i}=this,a=t.level,s=t.details,o=s.totalduration;if(!r)return void this.warn(`Levels were reset while loading level ${a}`);this.log(`Level ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""}, cc [${s.startCC}, ${s.endCC}] duration:${o}`);const l=t.levelInfo,c=this.fragCurrent;!c||this.state!==dS&&this.state!==hS||c.level!==t.level&&c.loader&&this.abortCurrentFrag();let u=0;if(s.live||null!=(n=l.details)&&n.live){var d;if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;u=this.alignPlaylists(s,l.details,null==(d=this.levelLastLoaded)?void 0:d.details)}if(l.details=s,this.levelLastLoaded=l,i||this.setStartPosition(s,u),this.hls.trigger(_b.LEVEL_UPDATED,{details:s,level:a}),this.state===yS){if(this.waitForCdnTuneIn(s))return;this.state=cS}i&&s.live&&this.synchronizeToLiveEdge(s),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,i=this.getLoadPosition(),a=e.fragmentStart,s=e.edge,o=i>=a-t.maxFragLookUpTolerance&&i<=s;if(null!==r&&n.duration>r&&(i<r||!o)){const a=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!o&&n.readyState<4||i<s-a)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),n.readyState))if(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${s}, reset currentTime to : ${r.toFixed(3)}`),"buffered"===this.config.liveSyncMode){var l;const e=JE.bufferInfo(n,r,0);if(null==e||null==(l=e.buffered)||!l.length)return void(n.currentTime=r);if(e.start<=i)return void(n.currentTime=r);const{nextStart:t}=JE.bufferedInfo(e.buffered,i,0);t&&(n.currentTime=t)}else n.currentTime=r}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{levels:a}=this;if(!a)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const s=a[n.level];if(!s)return void this.warn(`Level ${n.level} not found on progress`);const o=s.details;if(!o)return this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),void this.fragmentTracker.removeFragment(n);const l=s.videoCodec,c=o.PTSKnown||!o.live,u=null==(t=n.initSegment)?void 0:t.data,d=this._getAudioCodec(s),h=this.transmuxer=this.transmuxer||new Yw(this.hls,Pb,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=r?r.index:-1,p=-1!==f,m=new XE(n.level,n.sn,n.stats.chunkCount,i.byteLength,f,p),g=this.initPTS[n.cc];h.push(i,u,d,l,n,r,o.totalduration,c,m,g)}onAudioTrackSwitching(e,t){const n=this.hls,r=2===this.altAudio;if(EE(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r)return this.fragmentTracker.removeAllFragments(),n.once(_b.BUFFER_FLUSHED,()=>{var e;null==(e=this.hls)||e.trigger(_b.AUDIO_TRACK_SWITCHED,t)}),void n.trigger(_b.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});n.trigger(_b.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=EE(t.url,this.hls);if(n){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,i,a=!1;for(const e in n){const t=n[e];if("main"===t.id){if(i=e,r=t,"video"===e){const t=n[e];t&&(this.videoBuffer=t.buffer)}}else a=!0}a&&r?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t,i=n.type===Pb;if(i){if(this.fragContextChanged(n))return this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===mS&&(this.state=cS));const e=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*e.total/(e.buffering.end-e.loading.first)),dy(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}const a=this.media;a&&(!this._hasEnoughToStart&&JE.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),i&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal)this.state=vS;else switch(t.details){case Tb.FRAG_GAP:case Tb.FRAG_PARSING_ERROR:case Tb.FRAG_DECRYPT_ERROR:case Tb.FRAG_LOAD_ERROR:case Tb.FRAG_LOAD_TIMEOUT:case Tb.KEY_LOAD_ERROR:case Tb.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Pb,t);break;case Tb.LEVEL_LOAD_ERROR:case Tb.LEVEL_LOAD_TIMEOUT:case Tb.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==yS||(null==(n=t.context)?void 0:n.type)!==Rb||(this.state=cS);break;case Tb.BUFFER_ADD_CODEC_ERROR:case Tb.BUFFER_APPEND_ERROR:if("main"!==t.parent)return;this.resetLoadingState();break;case Tb.BUFFER_FULL_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Tb.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onFragLoadEmergencyAborted(){this.state=cS,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==oy||!this.altAudio){const e=(t===ly?this.videoBuffer:this.mediaBuffer)||this.media;e&&(this.afterBufferFlushed(e,t,Pb),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,-1===this.level&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log(`could not seek to ${n}, already seeking at ${t}`);const r=this.timelineOffset;r&&n&&(n+=r);const i=this.getLevelDetails(),a=JE.getBuffered(e),s=a.length?a.start(0):0,o=s-n,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||o>0&&(o<l||this.loadingParts&&o<2*((null==i?void 0:i.partTarget)||0)))&&(this.log(`adjusting start position by ${o} to match buffer start`),n+=o,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${s}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(e=>{const{hls:n}=this,r=null==e?void 0:e.frag;if(!r||this.fragContextChanged(r))return;t.fragmentError=0,this.state=cS,this.startFragRequested=!1,this.bitrateTest=!1;const i=r.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),n.trigger(_b.FRAG_LOADED,e),r.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const n=this.playlistType,{hls:r}=this,{remuxResult:i,chunkMeta:a}=e,s=this.getCurrentContext(a);if(!s)return void this.resetWhenMissingContext(a);const{frag:o,part:l,level:c}=s,{video:u,text:d,id3:h,initSegment:f}=i,{details:p}=c,m=this.altAudio?void 0:i.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=pS,f){if(null!=f&&f.tracks){const e=o.initSegment||o;this._bufferInitSegment(c,f.tracks,e,a),r.trigger(_b.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:f.tracks})}const e=f.initPTS,t=f.timescale;xb(e)&&(this.initPTS[o.cc]={baseTime:e,timescale:t},r.trigger(_b.INIT_PTS_FOUND,{frag:o,id:n,initPTS:e,timescale:t}))}if(u&&p){m&&"audiovideo"===u.type&&this.logMuxedErr(o);const e=p.fragments[o.sn-1-p.startSN],t=o.sn===p.startSN,n=!e||o.cc>e.cc;if(!1!==i.independent){const{startPTS:e,endPTS:r,startDTS:i,endDTS:s}=u;if(l)l.elementaryStreams[u.type]={startPTS:e,endPTS:r,startDTS:i,endDTS:s};else if(u.firstKeyFrame&&u.independent&&1===a.id&&!n&&(this.couldBacktrack=!0),u.dropped&&u.independent){const i=this.getMainFwdBufferInfo(),a=(i?i.end:this.getLoadPosition())+this.config.maxBufferHole,l=u.firstKeyFramePTS?u.firstKeyFramePTS:e;if(!t&&a<l-this.config.maxBufferHole&&!n)return void this.backtrack(o);n&&(o.gap=!0),o.setElementaryStreamInfo(u.type,o.start,r,o.start,s,!0)}else t&&e-(p.appliedTimelineOffset||0)>2&&(o.gap=!0);o.setElementaryStreamInfo(u.type,e,r,i,s),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(u,o,l,a,t||n)}else{if(!t&&!n)return void this.backtrack(o);o.gap=!0}}if(m){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=m;l&&(l.elementaryStreams[oy]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),o.setElementaryStreamInfo(oy,e,t,n,r),this.bufferFragmentData(m,o,l,a)}if(p&&null!=h&&null!=(t=h.samples)&&t.length){const e={id:n,frag:o,details:p,samples:h.samples};r.trigger(_b.FRAG_PARSING_METADATA,e)}if(p&&d){const e={id:n,frag:o,details:p,samples:d.samples};r.trigger(_b.FRAG_PARSING_USERDATA,e)}}}logMuxedErr(e){this.warn(`${dy(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,r){if(this.state!==pS)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:i,video:a,audiovideo:s}=t;if(i){let n=Qy(i.codec,e.audioCodec);"mp4a"===n&&(n="mp4a.40.5");const r=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){n&&(n=-1!==n.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=i.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===r.indexOf("firefox")&&(n="mp4a.40.5")}n&&-1!==n.indexOf("mp4a.40.5")&&-1!==r.indexOf("android")&&"audio/mpeg"!==i.container&&(n="mp4a.40.2",this.log(`Android: force audio codec to ${n}`)),e.audioCodec&&e.audioCodec!==n&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${n}"`),i.levelCodec=n,i.id=Pb,this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${n||""}/${e.audioCodec||""}/${i.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=Pb;const n=a.codec;if(4===(null==n?void 0:n.length))switch(n){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e"}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${n}]${a.codec!==n?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}s&&(this.log(`Init audiovideo buffer, container:${s.container}, codecs[level/parsed]=[${e.codecs}/${s.codec}]`),delete t.video,delete t.audio);const o=Object.keys(t);if(o.length){if(this.hls.trigger(_b.BUFFER_CODECS,t),!this.hls)return;o.forEach(e=>{const i=t[e].initSegment;null!=i&&i.byteLength&&this.hls.trigger(_b.BUFFER_APPENDING,{type:e,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&2===this.altAudio?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Pb)}get maxBufferLength(){const{levels:e,level:t}=this,n=null==e?void 0:e[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=cS}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const n=e.currentTime;if(JE.isBuffered(e,n)?t=this.getAppendedFrag(n):JE.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,n=t.level;e&&t.sn===e.sn&&e.level===n||(this.fragPlaying=t,this.hls.trigger(_b.FRAG_CHANGED,{frag:t}),e&&e.level===n||this.hls.trigger(_b.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;return xb(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;if(xb(t)){const e=this.getLevelDetails(),n=this.currentFrag||(e?SE(null,e.fragments,t):null);if(n){const e=n.programDateTime;if(null!==e){const r=e+1e3*(t-n.start);return new Date(r)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class T_{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[n].loader;if(r){var t;if(e&&e!==(null==(t=r.context)?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=Tb.KEY_LOAD_ERROR,n,r,i){return new YE({type:kb.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:n,networkDetails:r})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length)if(t.length){const{sn:n,cc:r}=e;for(let e=0;e<t.length;e++){const i=t[e];if(r<=i.cc&&("initSegment"===n||"initSegment"===i.sn||n<i.sn))return this.emeController.selectKeySystemFormat(i).then(e=>{if(i.setKeyFormat(e),this.emeController&&this.config.requireKeySystemAccessOnStart){const t=xx(e);if(t)return this.emeController.getKeySystemAccess([t])}})}}else if(this.config.requireKeySystemAccessOnStart){const e=kx(this.config);if(e.length)return this.emeController.getKeySystemAccess(e)}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const n=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,Tb.KEY_LOAD_ERROR,n))}const a=i.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,Tb.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let s=this.keyUriToKeyInfo[a];if(null!=(n=s)&&n.decryptdata.key)return i.key=s.decryptdata.key,Promise.resolve({frag:e,keyInfo:s});var o;if(null!=(r=s)&&r.keyLoadPromise)switch(null==(o=s.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return s.keyLoadPromise.then(t=>(i.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:s}))}switch(s=this.keyUriToKeyInfo[a]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(s,e):this.loadKeyEME(s,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(s,e);default:return Promise.reject(this.createKeyLoadError(e,Tb.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(n);if(t)return(e.keyLoadPromise=t.then(t=>(e.mediaKeySessionContext=t,n))).catch(t=>{throw e.keyLoadPromise=null,t})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=new(0,n.loader)(n);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((i,a)=>{const s={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=n.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{const{frag:s,keyInfo:o,url:l}=n;if(!s.decryptdata||o!==this.keyUriToKeyInfo[l])return a(this.createKeyLoadError(s,Tb.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));o.decryptdata.key=s.decryptdata.key=new Uint8Array(e.data),s.keyLoader=null,o.loader=null,i({frag:s,keyInfo:o})},onError:(e,n,r,i)=>{this.resetLoader(n),a(this.createKeyLoadError(t,Tb.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),r,Ub({url:s.url,data:void 0},e)))},onTimeout:(e,n,r)=>{this.resetLoader(n),a(this.createKeyLoadError(t,Tb.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:(e,n,r)=>{this.resetLoader(n),a(this.createKeyLoadError(t,Tb.INTERNAL_ABORTED,new Error("key loading aborted"),r))}};r.load(s,l,c)})}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,i=n.loader;t.keyLoader===i&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[r],i&&i.destroy()}}function __(e){const{type:t}=e;switch(t){case Lb:return Ib;case Cb:return Nb;default:return Pb}}function A_(e,t){let n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}class R_{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(_b.LEVEL_LOADING,this.onLevelLoading,this),e.on(_b.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(_b.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(_b.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(_b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(_b.LEVEL_LOADING,this.onLevelLoading,this),e.off(_b.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(_b.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(_b.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Ab,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:r,pathwayId:i,url:a,deliveryDirectives:s,levelInfo:o}=t;this.load({id:n,level:r,pathwayId:i,responseType:"text",type:Rb,url:a,deliveryDirectives:s,levelOrTrack:o})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:a,track:s}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:Lb,url:i,deliveryDirectives:a,levelOrTrack:s})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:a,track:s}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:Cb,url:i,deliveryDirectives:a,levelOrTrack:s})}onLevelsUpdated(e,t){const n=this.loaders[Rb];if(n){const e=n.context;e&&!t.levels.some(t=>t===e.levelOrTrack)&&(n.abort(),delete this.loaders[Rb])}}load(e){var t;const n=this.hls.config;let r,i=this.getInternalLoader(e);if(i){const t=this.hls.logger,n=i.context;if(n&&n.levelOrTrack===e.levelOrTrack&&(n.url===e.url||n.deliveryDirectives&&!e.deliveryDirectives))return void(n.url===e.url?t.log(`[playlist-loader]: ignore ${e.url} ongoing request`):t.log(`[playlist-loader]: ignore ${e.url} in favor of ${n.url}`));t.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}if(r=e.type===Ab?n.manifestLoadPolicy.default:Fb({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),xb(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===Rb&&null!==e.level?t=this.hls.levels[e.level].details:e.type===Lb&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===Cb&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,n=t.targetduration;if(e&&n){const t=1e3*Math.max(3*e,.8*n);r=Fb({},r,{maxTimeToFirstByteMs:Math.min(t,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,r.maxTimeToFirstByteMs)})}}}const a=r.errorRetry||r.timeoutRetry||{},s={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},o={onSuccess:(e,t,n,r)=>{const i=this.getInternalLoader(n);this.resetInternalLoader(n.type);const a=e.data;0===a.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),Ox.isMediaPlaylist(a)||n.type!==Ab?this.handleTrackOrLevelPlaylist(e,t,n,r||null,i):this.handleMasterPlaylist(e,t,n,r)):this.handleManifestParsingError(e,n,new Error("no EXTM3U delimiter"),r||null,t)},onError:(e,t,n,r)=>{this.handleNetworkError(t,n,!1,e,r)},onTimeout:(e,t,n)=>{this.handleNetworkError(t,n,!0,void 0,e)}};i.load(e,s,o)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,r){const i=this.hls,a=e.data,s=A_(e,n),o=Ox.parseMasterPlaylist(a,s);if(o.playlistParsingError)return void this.handleManifestParsingError(e,n,o.playlistParsingError,r,t);const{contentSteering:l,levels:c,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:f}=o;this.variableList=f;const{AUDIO:p=[],SUBTITLES:m,"CLOSED-CAPTIONS":g}=Ox.parseMasterPlaylistMedia(a,s,o);p.length&&(p.some(e=>!e.url)||!c[0].audioCodec||c[0].attrs.AUDIO||(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new sx({}),bitrate:0,url:""}))),i.trigger(_b.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:m,captions:g,contentSteering:l,url:s,stats:t,networkDetails:r,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:f})}handleTrackOrLevelPlaylist(e,t,n,r,i){const a=this.hls,{id:s,level:o,type:l}=n,c=A_(e,n),u=xb(o)?o:xb(s)?s:0,d=__(n),h=Ox.parseLevelPlaylist(e.data,c,u,d,0,this.variableList);if(l===Ab){const e={attrs:new sx({}),bitrate:0,details:h,name:"",url:c};h.requestScheduled=t.loading.start+Jx(h,0),a.trigger(_b.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=h,this.handlePlaylistLoaded(h,e,t,n,r,i)}handleManifestParsingError(e,t,n,r,i){this.hls.trigger(_b.ERROR,{type:kb.NETWORK_ERROR,details:Tb.MANIFEST_PARSING_ERROR,fatal:t.type===Ab,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:i})}handleNetworkError(e,t,n=!1,r,i){let a=`A network ${n?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===Rb?a+=`: ${e.level} id: ${e.id}`:e.type!==Lb&&e.type!==Cb||(a+=` id: ${e.id} group-id: "${e.groupId}"`);const s=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let o=Tb.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case Ab:o=n?Tb.MANIFEST_LOAD_TIMEOUT:Tb.MANIFEST_LOAD_ERROR,l=!0;break;case Rb:o=n?Tb.LEVEL_LOAD_TIMEOUT:Tb.LEVEL_LOAD_ERROR,l=!1;break;case Lb:o=n?Tb.AUDIO_TRACK_LOAD_TIMEOUT:Tb.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case Cb:o=n?Tb.SUBTITLE_TRACK_LOAD_TIMEOUT:Tb.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(e.type);const u={type:kb.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:c,context:e,error:s,networkDetails:t,stats:i};if(r){const n=(null==t?void 0:t.url)||e.url;u.response=Ub({url:n,data:void 0},r)}this.hls.trigger(_b.ERROR,u)}handlePlaylistLoaded(e,t,n,r,i,a){const s=this.hls,{type:o,level:l,id:c,groupId:u,deliveryDirectives:d}=r,h=A_(t,r),f=__(r),p="number"==typeof r.level&&f===Pb?l:void 0;if(!e.fragments.length){const a=e.playlistParsingError=new Error("No Segments found in Playlist");return void s.trigger(_b.ERROR,{type:kb.NETWORK_ERROR,details:Tb.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:a,reason:a.message,response:t,context:r,level:p,parent:f,networkDetails:i,stats:n})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const m=e.playlistParsingError;if(m){if(this.hls.logger.warn(m),!s.config.ignorePlaylistParsingErrors)return void s.trigger(_b.ERROR,{type:kb.NETWORK_ERROR,details:Tb.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:t,context:r,level:p,parent:f,networkDetails:i,stats:n});e.playlistParsingError=null}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case Ab:case Rb:s.trigger(_b.LEVEL_LOADED,{details:e,levelInfo:r.levelOrTrack||s.levels[0],level:p||0,id:c||0,stats:n,networkDetails:i,deliveryDirectives:d,withoutMultiVariant:o===Ab});break;case Lb:s.trigger(_b.AUDIO_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:c||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:d});break;case Cb:s.trigger(_b.SUBTITLE_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:c||0,groupId:u||"",stats:n,networkDetails:i,deliveryDirectives:d})}}}class L_{static get version(){return AS}static isMSESupported(){return w_()}static isSupported(){return function(){if(!w_())return!1;const e=Kb();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>e.isTypeSupported(Hy(t,"video")))||["mp4a.40.2","fLaC"].some(t=>e.isTypeSupported(Hy(t,"audio"))))}()}static getMediaSource(){return Kb()}static get Events(){return _b}static get MetadataSchema(){return qS}static get ErrorTypes(){return kb}static get ErrorDetails(){return Tb}static get DefaultConfig(){return L_.defaultConfig?L_.defaultConfig:c_}static set DefaultConfig(e){L_.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new _S,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=function(e,t,n){const r=Vb();if("object"==typeof console&&!0===e||"object"==typeof e){const t=["debug","log","info","warn","error"];t.forEach(t=>{r[t]=Gb(t,e,n)});try{r.log('Debug logs enabled for "Hls instance" in hls.js version 1.6.5')}catch(e){return Vb()}t.forEach(t=>{Hb[t]=Gb(t,e)})}else Fb(Hb,r);return r}(e.debug||!1,0,e.assetPlayerId),n=this.config=function(e,t,n){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=u_(e),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(e=>{const a=`${"level"===e?"playlist":e}LoadPolicy`,s=void 0===t[a],o=[];i.forEach(n=>{const i=`${e}Loading${n}`,l=t[i];if(void 0!==l&&s){o.push(i);const e=r[a].default;switch(t[a]={default:e},n){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}}),o.length&&n.warn(`hls.js config: "${o.join('", "')}" setting(s) are deprecated, use "${a}": ${hE(t[a])}`)}),Ub(Ub({},r),t)}(L_.DefaultConfig,e,t);this.userConfig=e,n.progressive&&function(e,t){const n=e.loader;n!==i_&&n!==l_?(t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(e.loader=i_,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}(n,t);const{abrController:r,bufferController:i,capLevelController:a,errorController:s,fpsController:o}=n,l=new s(this),c=this.abrController=new r(this),u=new ME(this),d=n.interstitialsController,h=d?this.interstitialsController=new d(this,L_):null,f=this.bufferController=new i(this,u),p=this.capLevelController=new a(this),m=new o(this),g=new R_(this),v=n.contentSteeringController,b=v?new v(this):null,y=this.levelController=new E_(this,b),E=new b_(this),x=new T_(this.config),S=this.streamController=new k_(this,u,x),w=this.gapController=new d_(this,u);p.setStreamController(S),m.setStreamController(S);const k=[g,y,S];h&&k.splice(1,0,h),b&&k.splice(1,0,b),this.networkControllers=k;const T=[c,f,w,p,m,E,u];this.audioTrackController=this.createController(n.audioTrackController,k);const _=n.audioStreamController;_&&k.push(this.audioStreamController=new _(this,u,x)),this.subtitleTrackController=this.createController(n.subtitleTrackController,k);const A=n.subtitleStreamController;A&&k.push(this.subtititleStreamController=new A(this,u,x)),this.createController(n.timelineController,T),x.emeController=this.emeController=this.createController(n.emeController,T),this.cmcdController=this.createController(n.cmcdController,T),this.latencyController=this.createController(y_,T),this.coreComponents=T,k.push(l);const R=l.onErrorOut;"function"==typeof R&&this.on(_b.ERROR,R,l),this.on(_b.MANIFEST_LOADED,g.onManifestLoaded,g)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,r){this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),!this.triggeringException){this.triggeringException=!0;const n=e===_b.ERROR;this.trigger(_b.ERROR,{type:kb.OTHER_ERROR,details:Tb.INTERNAL_EXCEPTION,fatal:n,event:e,error:t}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(_b.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(e=>e.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(e=>e.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const t=new Error(`attachMedia failed: invalid argument (${e})`);return void this.trigger(_b.ERROR,{type:kb.OTHER_ERROR,details:Tb.ATTACH_MEDIA_ERROR,fatal:!0,error:t})}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,r=t?e:{media:n};this._media=n,this.trigger(_b.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger(_b.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(_b.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,r=this._url=ay.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${r}`),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(_b.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),this.started&&this.networkControllers);n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Pb]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Ib]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Nb]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=null==e?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=function(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(e){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})}}}()),e}get levels(){return this.levelController.levels||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return sE.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(r=-1===t&&null!=e&&e.length?e.length-1:t,n)for(let t=r;t--;){const r=e[t].attrs["HDCP-LEVEL"];if(r&&r<=n)return t}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return(null==(t=this.audioTrackController)?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return(null==(t=this.subtitleTrackController)?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!(null==(e=this.bufferController)||!e.bufferedToEnd)}get interstitialsManager(){var e;return(null==(e=this.interstitialsController)?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){return aE(e,pE(t),navigator.mediaCapabilities)}}L_.defaultConfig=void 0;const C_=function(e){var t=e.streamUrl,n=qe((0,r.useState)([]),2),i=n[0],a=n[1],s=qe((0,r.useState)(2),2),o=s[0],l=s[1],c=qe((0,r.useState)(!0),2),u=c[0],d=c[1],h=qe((0,r.useState)(null),2),f=h[0],p=h[1],m=(0,r.useRef)(null);return(0,r.useEffect)(function(){if(L_.isSupported()){var e=new L_;return e.on(L_.Events.MANIFEST_PARSED,function(t,n){a(n.levels),console.log("Available resolutions: ",n.levels),e.startLevel=o,d(!1)}),e.on(L_.Events.ERROR,function(e,t){t.fatal&&(p("Error loading the stream. Please try again."),d(!1))}),e.loadSource(t),e.attachMedia(m.current),function(){e.destroy()}}p("HLS.js is not supported in this browser."),d(!1)},[t,o]),u?r.createElement("p",null,"Loading stream..."):f?r.createElement("p",null,f):r.createElement("div",null,r.createElement("h2",null,"🎥 Live Video Stream"),r.createElement("div",null,r.createElement("label",null,"Select Resolution: "),r.createElement("select",{onChange:function(e){var t=parseInt(e.target.value,10);l(t)},value:o},i.map(function(e,t){return r.createElement("option",{key:t,value:t},e.height,"p")}))),r.createElement("video",{ref:m,controls:!0,autoPlay:!0,width:"600px"}))},P_=function(){var e=qe((0,r.useState)(null),2),t=e[0],n=e[1],i=yc("http://localhost:5000");return(0,r.useEffect)(function(){i.on("new_poll",function(e){n(e)})},[]),React.createElement("div",null,t&&React.createElement(React.Fragment,null,React.createElement("h3",null,t.question),t.options.map(function(e,t){return React.createElement("button",{key:t,onClick:function(){return t=e,void i.emit("poll_response",t);var t}},e)})))};var I_=i(5176),N_={};N_.styleTagTransform=y(),N_.setAttributes=m(),N_.insert=f().bind(null,"head"),N_.domAPI=d(),N_.insertStyleElement=v(),c()(I_.A,N_),I_.A&&I_.A.locals&&I_.A.locals;var D_=["All","Live DJs","Talk Shows","Gaming","Education","Fitness","Yoga","Music","Meditation","Tech","Motivation","Wellness","Business","Art","Comedy","News"];const O_=function(){var e=qe((0,r.useState)([]),2),t=e[0],n=e[1],i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=qe((0,r.useState)("All"),2),l=o[0],c=o[1],u=qe((0,r.useState)(!0),2),d=u[0],h=u[1],f=qe((0,r.useState)(null),2),p=f[0],m=f[1];(0,r.useEffect)(function(){var e=function(){var e=Qe(Ze().mark(function e(){var t,r;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=1,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/artist/live-streams"));case 1:return t=e.sent,e.next=2,t.json();case 2:r=e.sent,n(r),e.next=4;break;case 3:e.prev=3,e.catch(0),m("⚠️ Failed to load live streams. Please try again later.");case 4:return e.prev=4,h(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[0,3,4,5]])}));return function(){return e.apply(this,arguments)}}();e()},[]);var g=t.filter(function(e){return("All"===l||e.category===l)&&e.title.toLowerCase().includes(a.toLowerCase())});return r.createElement("div",{className:"live-streams-wrapper"},r.createElement("h2",{className:"section-title"},"📺 Live Streams"),r.createElement("input",{type:"text",placeholder:"Search live streams...",className:"search-input",value:a,onChange:function(e){return s(e.target.value)}}),r.createElement("div",{className:"category-scroll"},D_.map(function(e){return r.createElement("button",{key:e,className:"category-btn ".concat(l===e?"active":""),onClick:function(){return c(e)}},e)})),d?r.createElement("div",{className:"status-message"},"⏳ Loading..."):p?r.createElement("div",{className:"status-message error"},p):0===g.length?r.createElement("div",{className:"status-message"},"No live streams available in this category."):r.createElement("div",{className:"live-stream-grid"},g.map(function(e){return r.createElement("div",{key:e.id,className:"live-stream-card"},r.createElement("h3",null,e.title),r.createElement("p",null,e.description),e.is_live?e.stream_url?r.createElement(C_,{streamUrl:e.stream_url}):r.createElement("p",null,"⚠️ Stream unavailable"):r.createElement("p",null,"🔴 Offline"),r.createElement(Ne,{to:"/live-streams/".concat(e.id),className:"view-link"},"Watch Now →"),e.is_live&&r.createElement(P_,{streamId:e.id}))})))};function M_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M_(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const B_=function(){var e=qe((0,r.useState)([]),2),t=(e[0],e[1]),n=qe((0,r.useState)({title:"",date:"",price:""}),2),i=n[0],a=n[1];return(0,r.useEffect)(function(){fetch("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev/api/artist/concerts",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(e){return t(e)}).catch(function(e){return console.error("Error fetching concerts:",e)})},[]),r.createElement("div",{className:"container"},r.createElement("h2",null,"🎭 Live Concerts"),r.createElement("h3",null,"Create a New Concert"),r.createElement("input",{type:"text",placeholder:"Title",onChange:function(e){return a(F_(F_({},i),{},{title:e.target.value}))}}),r.createElement("input",{type:"date",onChange:function(e){return a(F_(F_({},i),{},{date:e.target.value}))}}),r.createElement("input",{type:"number",placeholder:"Ticket Price ($)",onChange:function(e){return a(F_(F_({},i),{},{price:e.target.value}))}}),r.createElement("button",{onClick:function(){fetch("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev/api/concerts/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(i)}).then(function(e){return e.json()}).then(function(){return alert("Concert created!")}).catch(function(e){return console.error("Error creating concert:",e)})}},"Create Concert"))},U_=function(){var e=he().id,t=qe((0,r.useState)(null),2),n=t[0],i=t[1],a=qe((0,r.useState)(!0),2),s=a[0],o=a[1],l=qe((0,r.useState)({}),2),c=l[0],u=l[1];return(0,r.useEffect)(function(){fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/live-streams/").concat(e)).then(function(e){return e.json()}).then(function(e){return i(e)}).catch(function(e){return console.error("Error loading stream:",e)}),fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/profile"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(e){return u(e)}).catch(function(){})},[e]),n?r.createElement("div",{className:"live-show-page"},r.createElement("h1",null,n.title),r.createElement("p",null,n.description),r.createElement("div",{className:"video-and-chat"},r.createElement(C_,{streamUrl:n.stream_url}),s&&r.createElement(Jv,{recipientId:n.creator_id,recipientName:n.creator_name,currentUserId:c.id,onClose:function(){return o(!1)},enableTypingIndicator:!0,enableThreads:!0,autoScroll:!0,enableMediaUpload:!0,enableGroupChat:!0})),r.createElement(P_,{streamId:e}),r.createElement("div",{className:"audience-stats"},"👥 Viewers: ",n.viewer_count||0)):r.createElement("div",{className:"loading"},"Loading Live Show...")},j_=function(){var e=qe((0,r.useState)(""),2),t=e[0],n=e[1],i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=de(),l=function(){var e=Qe(Ze().mark(function e(){var r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,fetch("".concat((void 0).VITE_BACKEND_URL,"/api/add-artist"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({username:t})});case 1:return r=e.sent,e.next=2,r.json();case 2:i=e.sent,r.ok?(s("✅ Artist added!"),n(""),setTimeout(function(){return o("/label-dashboard")},1500)):s("❌ ".concat(i.error||"Failed to add artist")),e.next=4;break;case 3:e.prev=3,e.catch(0),s("❌ Server error");case 4:case"end":return e.stop()}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}();return r.createElement("div",{className:"profile-container"},r.createElement("h2",null,"Add Artist to Label"),r.createElement("input",{type:"text",placeholder:"Artist's username",value:t,onChange:function(e){return n(e.target.value)},className:"name-input"}),r.createElement("button",{onClick:l,className:"btn-primary"},"➕ Add"),a&&r.createElement("p",null,a))},$_=function(){var e=qe((0,r.useState)({}),2),t=e[0],n=e[1],i=qe((0,r.useState)([]),2),a=i[0],s=i[1],o=qe((0,r.useState)(null),2),l=(o[0],o[1]),c=qe((0,r.useState)(!1),2),u=c[0],d=c[1],h=de();return(0,r.useEffect)(function(){fetch("".concat((void 0).VITE_BACKEND_URL,"/api/label-dashboard"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(e){n(e.label),s(e.artists)}).catch(function(e){return console.error("Failed to fetch label info",e)})},[]),r.createElement("div",{className:"profile-container"},r.createElement("div",{className:"profile-layout"},r.createElement("div",{className:"left-column"},r.createElement("h3",null,"🎙️ ",t.name||"Label Dashboard"),r.createElement("p",null,"Manage your artists and uploads from one place.")),r.createElement("div",{className:"middle-column"},r.createElement("h3",null,"👥 Your Artists"),0===a.length?r.createElement("p",null,"No artists linked yet."):a.map(function(e){return r.createElement("div",{key:e.id,className:"post-card"},r.createElement("p",null,r.createElement("strong",null,e.display_name||e.username)),r.createElement("p",null,e.bio||"No bio available."),r.createElement("button",{onClick:function(){return t=e.id,l(t),void h("/artist-dashboard/".concat(t));var t}},"🎛️ Manage Artist"))}),u&&r.createElement("div",{style:{marginTop:"20px"}},r.createElement("h4",null,"➕ Add New Artist"),r.createElement(j_,{onSuccess:function(){return d(!1)}}))),r.createElement("div",{className:"right-column"},r.createElement("div",{className:"quick-actions"},r.createElement("h3",null,"➕ Artist Management"),r.createElement("button",{className:"btn-podcast",onClick:function(){return d(!u)}},u?"❌ Cancel":"➕ Add New Artist"),r.createElement("h3",null,"💸 Revenue Split"),r.createElement(Ne,{to:"/revenue-dashboard"},r.createElement("button",{className:"btn-radio"},"📊 View Revenue Breakdown")),r.createElement("h3",null,"📦 Upload on Behalf"),r.createElement(Ne,{to:"/upload?as=label"},r.createElement("button",{className:"btn-indie-upload"},"🎵 Upload Content"))))))},z_=function(e){var t=e.release,n=qe((0,r.useState)(!1),2),i=n[0],a=n[1];return r.createElement("div",{className:"card h-100"},r.createElement("img",{src:t.cover_art_url,className:"card-img-top",alt:t.title,style:{height:"250px",objectFit:"cover"}}),r.createElement("div",{className:"card-body"},r.createElement("h5",{className:"card-title"},t.title),r.createElement("p",{className:"card-text"},"Genre: ",t.genre," ",r.createElement("br",null),"Release Date: ",t.release_date," ",r.createElement("br",null),"Explicit: ",t.explicit?"Yes":"No"),t.external_id?r.createElement("p",{className:"text-success"},"✔️ Submitted to DSPs"):r.createElement("p",{className:"text-warning"},"⏳ Pending submission"),t.lyrics&&r.createElement(r.Fragment,null,r.createElement("button",{className:"btn btn-sm btn-outline-secondary mt-2 mb-2",onClick:function(){return a(!i)}},i?"🙈 Hide Lyrics":"📖 Show Lyrics"),i&&r.createElement("pre",{className:"border rounded p-2 bg-light",style:{whiteSpace:"pre-wrap"}},t.lyrics))))},V_=function(){var e=qe((0,r.useState)([]),2),t=e[0],n=e[1],i=qe((0,r.useState)(!0),2),a=i[0],s=i[1],o=de();return(0,r.useEffect)(function(){var e=function(){var e=Qe(Ze().mark(function e(){var t,r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/creator/releases"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 1:return t=e.sent,e.next=2,t.json();case 2:r=e.sent,n(r),e.next=4;break;case 3:e.prev=3,i=e.catch(0),console.error("Error fetching releases:",i);case 4:return e.prev=4,s(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[0,3,4,5]])}));return function(){return e.apply(this,arguments)}}();e()},[]),r.createElement("div",{className:"container mt-4"},r.createElement("h2",null,"🎵 My Music Releases"),r.createElement("button",{className:"btn btn-primary mb-3",onClick:function(){return o("/create-release")}},"➕ New Release"),a?r.createElement("p",null,"Loading..."):0===t.length?r.createElement("p",null,"No releases found."):r.createElement("div",{className:"row"},t.map(function(e){return r.createElement("div",{key:e.id,className:"col-md-6 col-lg-4 mb-4"},r.createElement(z_,{release:e}))})))};var G_=i(4664),H_={};H_.styleTagTransform=y(),H_.setAttributes=m(),H_.insert=f().bind(null,"head"),H_.domAPI=d(),H_.insertStyleElement=v(),c()(G_.A,H_),G_.A&&G_.A.locals&&G_.A.locals;const W_=function(e){var t=e.onUploadSuccess,n=e.onClose,i=qe((0,r.useState)(""),2),a=i[0],s=i[1],o=qe((0,r.useState)(""),2),l=o[0],c=o[1],u=qe((0,r.useState)(null),2),d=u[0],h=u[1],f=qe((0,r.useState)(!1),2),p=f[0],m=f[1],g=qe((0,r.useState)(""),2),v=g[0],b=g[1],y=function(){var e=Qe(Ze().mark(function e(r){var i,s,o,c,u;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a&&d){e.next=1;break}return b("Title and audio file are required."),e.abrupt("return");case 1:return m(!0),b(""),(i=new FormData).append("title",a),i.append("description",l),i.append("audio",d),e.prev=2,s="MISSING_ENV_VAR".REACT_APP_BACKEND_URL||"https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev",e.next=3,fetch("".concat(s,"/api/profile/music/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:i});case 3:return o=e.sent,e.next=4,o.json();case 4:if(c=e.sent,console.log("Response Status:",o.status),console.log("Response Data:",c),o.ok){e.next=5;break}throw new Error(c.error||"Upload failed with status ".concat(o.status));case 5:t(c.audio),n(),b(""),e.next=7;break;case 6:e.prev=6,u=e.catch(2),console.error("Upload error:",u),b(u.message);case 7:return e.prev=7,m(!1),e.finish(7);case 8:case"end":return e.stop()}},e,null,[[2,6,7,8]])}));return function(t){return e.apply(this,arguments)}}();return r.createElement("div",{className:"upload-modal"},r.createElement("div",{className:"modal-content"},r.createElement("h2",null,"🎵 Upload New Track"),r.createElement("form",{onSubmit:y},r.createElement("input",{type:"text",placeholder:"Track Title",value:a,onChange:function(e){return s(e.target.value)},required:!0}),r.createElement("textarea",{placeholder:"Description (optional)",value:l,onChange:function(e){return c(e.target.value)}}),r.createElement("input",{type:"file",accept:"audio/*",onChange:function(e){return h(e.target.files[0])},required:!0}),r.createElement("div",{className:"modal-buttons"},r.createElement("button",{type:"submit",disabled:p},p?"Uploading...":"Submit Track"),r.createElement("button",{type:"button",onClick:n,className:"cancel-btn"},"Cancel")),v&&r.createElement("p",{className:"error-message"},"❌ ",v))))},K_=function(){var e,t=(0,r.useContext)(nt).store,n=qe((0,r.useState)(!0),2),i=(n[0],n[1],qe((0,r.useState)(!1),2)),a=i[0],s=i[1],o=qe((0,r.useState)({artistName:"",genre:"",bio:"",location:"",website:"",socialLinks:{spotify:"",apple:"",youtube:"",instagram:"",twitter:""}}),2),l=o[0],c=(o[1],qe((0,r.useState)([]),2)),u=c[0],d=c[1],h=qe((0,r.useState)([]),2),f=h[0],p=(h[1],qe((0,r.useState)([]),2)),m=(p[0],p[1],qe((0,r.useState)(0),2)),g=(m[0],m[1],qe((0,r.useState)(0),2)),v=g[0],b=(g[1],qe((0,r.useState)(!1),2)),y=b[0],E=(b[1],qe((0,r.useState)({totalPlays:0,totalTracks:0,totalAlbums:0,totalFollowers:0}),2)),x=E[0];return E[1],r.createElement("div",{className:"artist-profile-container"},a&&r.createElement(W_,{onClose:function(){return s(!1)},onUploadSuccess:function(e){d([e].concat(vo(u)))}}),r.createElement("div",{className:"profile-mode-toggle"},[{id:"regular",label:"👤 Regular Profile",path:"/profile"},{id:"gamer",label:"🎮 Gamer Profile",path:"/profile/gamer"},{id:"artist",label:"🎵 Artist Profile",path:"/profile/artist"}].map(function(e){return r.createElement(Ne,{key:e.id,to:e.path,className:"mode-toggle-btn ".concat("artist"===e.id?"active":"")},e.label)})),r.createElement("div",{className:"artist-hero-section"},r.createElement("div",{className:"artist-cover-photo"},r.createElement("div",{className:"artist-overlay"},r.createElement("div",{className:"artist-avatar"},r.createElement("img",{src:l.profilePicture||"/default-artist-avatar.png",alt:"Artist Avatar"}),y&&r.createElement("span",{className:"verified-badge"},"✓")),r.createElement("div",{className:"artist-info"},r.createElement("h1",{className:"artist-name"},l.artistName||(null===(e=t.user)||void 0===e?void 0:e.artist_name)||"Your Artist Name"),r.createElement("p",{className:"artist-genre"},l.genre||"Genre not set"),r.createElement("div",{className:"artist-stats-quick"},r.createElement("span",null,x.totalFollowers," Followers"),r.createElement("span",null,"•"),r.createElement("span",null,v," Monthly Listeners"),r.createElement("span",null,"•"),r.createElement("span",null,x.totalTracks," Tracks"))),r.createElement("div",{className:"artist-actions"},r.createElement("button",{className:"follow-btn"},"🎵 Follow"),r.createElement("button",{className:"share-btn"},"🛄 Share"),r.createElement("button",{className:"more-btn"},"⋯"))))),r.createElement("div",{className:"artist-nav-tabs"},r.createElement("button",{className:"tab-btn active"},"🎵 Music"),r.createElement("button",{className:"tab-btn"},"💰 Albums"),r.createElement("button",{className:"tab-btn"},"📋 Playlists"),r.createElement("button",{className:"tab-btn"},"ℹ️ About"),r.createElement("button",{className:"tab-btn"},"📊 Analytics")),r.createElement("div",{className:"artist-content-grid"},r.createElement("div",{className:"artist-main-content"},r.createElement("section",{className:"latest-release"},r.createElement("h2",null,"🎵 Latest Release"),r.createElement("div",{className:"featured-track"},r.createElement("img",{src:"/placeholder-album.jpg",alt:"Latest Release"}),r.createElement("div",{className:"track-info"},r.createElement("h3",null,"Latest Track Title"),r.createElement("p",null,"Released 2 days ago"),r.createElement("div",{className:"track-stats"},r.createElement("span",null,"🎧 1.2K plays"),r.createElement("span",null,"❤️ 89 likes"))),r.createElement("button",{className:"play-btn"},"▶️"))),r.createElement("section",{className:"tracks-section"},r.createElement("div",{className:"section-header"},r.createElement("h2",null,"🎵 Popular Tracks"),r.createElement("button",{onClick:function(){return s(!0)},className:"upload-btn"},"➕ Upload New Track")),r.createElement("div",{className:"tracks-list"},u.length>0?u.map(function(e,t){return r.createElement("div",{key:t,className:"track-item"},r.createElement("span",{className:"track-number"},t+1),r.createElement("img",{src:e.artwork,alt:e.title,className:"track-artwork"}),r.createElement("div",{className:"track-details"},r.createElement("h4",null,e.title),r.createElement("p",null,e.album)),r.createElement("span",{className:"track-plays"},e.plays," plays"),r.createElement("span",{className:"track-duration"},e.duration),r.createElement("button",{className:"track-play-btn"},"▶️"))}):r.createElement("div",{className:"no-tracks"},r.createElement("p",null,"🎵 No tracks uploaded yet"),r.createElement("button",{onClick:function(){return s(!0)},className:"upload-first-btn"},"Upload Your First Track")))),r.createElement("section",{className:"albums-section"},r.createElement("h2",null,"💰 Albums & EPs"),r.createElement("div",{className:"albums-grid"},f.length>0?f.map(function(e,t){return r.createElement("div",{key:t,className:"album-card"},r.createElement("img",{src:e.artwork,alt:e.title}),r.createElement("h4",null,e.title),r.createElement("p",null,e.year," • ",e.trackCount," tracks"))}):r.createElement("p",null,"💰 No albums created yet")))),r.createElement("div",{className:"artist-sidebar"},r.createElement("section",{className:"artist-bio-card"},r.createElement("h3",null,"📝 About"),r.createElement("p",null,l.bio||"Add your artist bio to let fans know more about you..."),r.createElement("div",{className:"artist-details"},r.createElement("p",null,r.createElement("strong",null,"📍 Location:")," ",l.location||"Not specified"),r.createElement("p",null,r.createElement("strong",null,"🎵 Genre:")," ",l.genre||"Not specified"),r.createElement("p",null,r.createElement("strong",null,"🌐 Website:"),l.website?r.createElement("a",{href:l.website,target:"_blank",rel:"noopener noreferrer"},l.website):"Not specified"))),r.createElement("section",{className:"social-links-card"},r.createElement("h3",null,"🔗 Find Me On"),r.createElement("div",{className:"social-links-grid"},r.createElement("a",{href:l.socialLinks.spotify,className:"social-link spotify"},"🎵 Spotify"),r.createElement("a",{href:l.socialLinks.apple,className:"social-link apple"},"🍎 Apple Music"),r.createElement("a",{href:l.socialLinks.youtube,className:"social-link youtube"},"📺 YouTube"),r.createElement("a",{href:l.socialLinks.instagram,className:"social-link instagram"},"📸 Instagram"))),r.createElement("section",{className:"artist-tools-card"},r.createElement("h3",null,"🛠️ Artist Tools"),r.createElement("div",{className:"tools-list"},r.createElement("button",{onClick:function(){return s(!0)},className:"tool-btn"},"⬆️ Upload Music"),r.createElement(Ne,{to:"/artist/analytics",className:"tool-btn"},"📊 View Analytics"),r.createElement(Ne,{to:"/artist/promote",className:"tool-btn"},"📢 Promote Track"),r.createElement(Ne,{to:"/artist/collaborate",className:"tool-btn"},"🤝 Find Collaborators"),r.createElement(Ne,{to:"/artist/monetize",className:"tool-btn"},"💰 Monetization"))),r.createElement("section",{className:"recent-activity-card"},r.createElement("h3",null,"📈 Recent Activity"),r.createElement("div",{className:"activity-list"},r.createElement("div",{className:"activity-item"},r.createElement("span",null,"🎵"),r.createElement("div",null,r.createElement("p",null,"New track uploaded"),r.createElement("small",null,"2 hours ago"))),r.createElement("div",{className:"activity-item"},r.createElement("span",null,"❤️"),r.createElement("div",null,r.createElement("p",null,'50 new likes on \\"Track Name\\"'),r.createElement("small",null,"1 day ago"))),r.createElement("div",{className:"activity-item"},r.createElement("span",null,"👥"),r.createElement("div",null,r.createElement("p",null,"25 new followers"),r.createElement("small",null,"3 days ago"))))))),r.createElement("div",{className:"edit-profile-section"},r.createElement(Ne,{to:"/profile/artist/edit",className:"edit-profile-btn"},"✏️ Edit Artist Profile")))};var Y_=function(){return r.createElement("div",{className:"page-container"},r.createElement("h1",null,"Collaborator Split Management"),r.createElement("p",null,"This page is under development."))},q_=function(){return r.createElement("div",{className:"page-container"},r.createElement("h1",null,"Album Details"),r.createElement("p",null,"This page is under development."))},X_=function(){return r.createElement("div",{className:"page-container"},r.createElement("h1",null,"✏️ Edit Gamer Profile"),r.createElement("p",null,"Edit your gamer identity."))},Q_=function(){return r.createElement("div",{className:"page-container"},r.createElement("h1",null,"➕ Create Team Room"),r.createElement("p",null,"Set up a new squad with invite-only access."))},J_=function(){return r.createElement("div",{className:"page-container"},r.createElement("h1",null,"✏️ Edit Artist Profile"),r.createElement("p",null,"Edit your music artist profile and settings."))};const Z_=(eA=function(){var e=(0,r.useContext)(nt).store.user;return r.createElement(Ce,{basename:"/"},r.createElement(He,null,r.createElement(hb,null),r.createElement("div",{className:"app-layout"},r.createElement(ui,{user:e}),r.createElement("main",{className:"main-content"},r.createElement(Te,null,r.createElement(we,{path:"/",element:r.createElement(rt,null)}),r.createElement(we,{path:"/login",element:r.createElement(it,null)}),r.createElement(we,{path:"/register",element:r.createElement(lt,null)}),r.createElement(we,{path:"/podcast-dashboard",element:r.createElement(yi,null)}),r.createElement(we,{path:"/podcast-create",element:r.createElement(Si,null)}),r.createElement(we,{path:"/podcasts",element:r.createElement(Oi,null)}),r.createElement(we,{path:"/browse-podcast-categories",element:r.createElement(Gi,null)}),r.createElement(we,{path:"/podcast/episode/:id",element:r.createElement(ao,null)}),r.createElement(we,{path:"/podcast/profile/:username/:podcastId",element:r.createElement(lo,null)}),r.createElement(we,{path:"/podcast-category/:category",element:r.createElement(co,null)}),r.createElement(we,{path:"/podcast/:podcast_id",element:r.createElement(Oi,null)}),r.createElement(we,{path:"/radio-dashboard",element:r.createElement(_c,null)}),r.createElement(we,{path:"/radio-stations",element:r.createElement(Lc,null)}),r.createElement(we,{path:"/create-radio",element:r.createElement(Oc,null)}),r.createElement(we,{path:"/browse-radio-stations",element:r.createElement(Bc,null)}),r.createElement(we,{path:"/radio/station/:id/:type",element:r.createElement(Wo,null)}),r.createElement(we,{path:"/videos",element:r.createElement(go,null)}),r.createElement(we,{path:"/create-release",element:r.createElement(mb,null)}),r.createElement(we,{path:"/releases",element:r.createElement(V_,null)}),r.createElement(we,{path:"/upload-lyrics",element:r.createElement(gb,null)}),r.createElement(we,{path:"/album/:albumId",element:r.createElement(q_,null)}),r.createElement(we,{path:"/collaborator-splits",element:r.createElement(Y_,null)}),r.createElement(we,{path:"/artist-dashboard",element:r.createElement(Mv,null)}),r.createElement(we,{path:"/upload-music",element:r.createElement(Uv,null)}),r.createElement(we,{path:"/search",element:r.createElement(jv,null)}),r.createElement(we,{path:"/artist-profile/:id",element:r.createElement(K_,null)}),r.createElement(we,{path:"/live-streams",element:r.createElement(O_,null)}),r.createElement(we,{path:"/live-concerts",element:r.createElement(B_,null)}),r.createElement(we,{path:"/live-show/:id",element:r.createElement(U_,null)}),r.createElement(we,{path:"/label-dashboard",element:r.createElement($_,null)}),r.createElement(we,{path:"/home-feed",element:r.createElement(To,null)}),r.createElement(we,{path:"/profile",element:r.createElement(ab,null)}),r.createElement(we,{path:"/profile/artist",element:r.createElement(K_,null)})," ",r.createElement(we,{path:"/profile/artist/edit",element:r.createElement(J_,null)})," ",r.createElement(we,{path:"/settings",element:r.createElement(Yv,null)}),r.createElement(we,{path:"/favorites",element:r.createElement(tv,null)}),r.createElement(we,{path:"/gamers/chat",element:r.createElement(wc,null)}),r.createElement(we,{path:"/profile/gamer",element:r.createElement(Qo,null)}),r.createElement(we,{path:"/profile/gamer/edit",element:r.createElement(X_,null)}),r.createElement(we,{path:"/team-room",element:r.createElement(cv,null)}),r.createElement(we,{path:"/squad-finder",element:r.createElement(Eb,null)}),r.createElement(we,{path:"/create-team-room",element:r.createElement(Q_,null)}),r.createElement(we,{path:"/artist/upload",element:r.createElement(Uv,null)}),r.createElement(we,{path:"/artist/analytics",element:r.createElement(Mv,null)}),r.createElement(we,{path:"*",element:r.createElement("h1",null,"Not found!")})))),r.createElement(lb,null)))},function(e){var t,n,i,a,s,o,l,c,u=qe((0,r.useState)((o=(t={getStore:function(){return d.store},getActions:function(){return d.actions},setStore:function(e){return h({store:Object.assign(d.store,e),actions:tt({},d.actions)})}}).getStore,l=t.getActions,c=t.setStore,{store:{message:null,token:localStorage.getItem("token")||null,user:JSON.parse(localStorage.getItem("user"))||null,error:null},actions:{signup:(s=Qe(Ze().mark(function e(t){var n,r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/signup"),{method:"POST",body:t});case 1:return n=e.sent,e.next=2,n.json();case 2:if(r=e.sent,n.ok){e.next=3;break}return c({error:r.error||"An error occurred during signup"}),e.abrupt("return",r);case 3:return c({error:null}),e.abrupt("return",r);case 4:return e.prev=4,i=e.catch(0),console.error("Error during signup:",i),c({error:"Network error during signup"}),e.abrupt("return",{error:"Network error during signup"});case 5:case"end":return e.stop()}},e,null,[[0,4]])})),function(e){return s.apply(this,arguments)}),login:(a=Qe(Ze().mark(function e(t,n){var r,i,a;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})});case 1:return r=e.sent,e.next=2,r.json();case 2:if(i=e.sent,r.ok){e.next=3;break}return c({error:i.error||"Invalid email or password"}),e.abrupt("return",i);case 3:return localStorage.setItem("token",i.access_token),localStorage.setItem("user",JSON.stringify(i.user)),c({token:i.access_token,user:i.user,error:null}),l().fetchUserProfile(),e.abrupt("return",i);case 4:return e.prev=4,a=e.catch(0),console.error("Error during login:",a),c({error:"Network error during login"}),e.abrupt("return",{error:"Network error during login"});case 5:case"end":return e.stop()}},e,null,[[0,4]])})),function(e,t){return a.apply(this,arguments)}),logout:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),c({token:null,user:null})},checkToken:(i=Qe(Ze().mark(function e(){var t,n,r,i;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token")){e.next=1;break}return c({token:null,user:null}),e.abrupt("return",!1);case 1:return e.prev=1,e.next=2,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/api/user/profile"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if((n=e.sent).ok){e.next=3;break}return localStorage.removeItem("token"),localStorage.removeItem("user"),c({token:null,user:null}),e.abrupt("return",!1);case 3:return e.next=4,n.json();case 4:return r=e.sent,c({user:r}),e.abrupt("return",!0);case 5:return e.prev=5,i=e.catch(1),console.error("Error validating token:",i),localStorage.removeItem("token"),localStorage.removeItem("user"),c({token:null,user:null}),e.abrupt("return",!1);case 6:case"end":return e.stop()}},e,null,[[1,5]])})),function(){return i.apply(this,arguments)}),fetchUserProfile:(n=Qe(Ze().mark(function e(){var t,n,r,i,a;return Ze().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("starting fetchUserProfile action"),t=o(),n=t.token||localStorage.getItem("token")){e.next=1;break}return e.abrupt("return",{error:"No authentication token available"});case 1:return e.prev=1,e.next=2,fetch("".concat("https://studious-space-goggles-r4rp7v96jgr62x5j-3001.app.github.dev","/profile"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 2:return r=e.sent,e.next=3,r.json();case 3:if(i=e.sent,r.ok){e.next=4;break}return c({error:i.error||"Failed to fetch user profile"}),e.abrupt("return",i);case 4:return localStorage.setItem("user",JSON.stringify(i)),c({user:i,error:null}),e.abrupt("return",i);case 5:return e.prev=5,a=e.catch(1),console.error("Error fetching user profile:",a),c({error:"Network error while fetching profile"}),e.abrupt("return",{error:"Network error while fetching profile"});case 6:case"end":return e.stop()}},e,null,[[1,5]])})),function(){return n.apply(this,arguments)})}})),2),d=u[0],h=u[1];return(0,r.useEffect)(function(){},[]),r.createElement(nt.Provider,{value:d},r.createElement(eA,e))});var eA;s.render(r.createElement(Z_,null),document.querySelector("#app"))})()})();